import{aC as S,aD as $,u as M,r as d,c as B,aE as N,aF as V,o as T,aG as n,aH as i,aI as e,aJ as a,aK as _,aL as p,aM as w,aN as j,aO as g,aP as U,aQ as x}from"./index-BYuuB5GE.js";import{u as E,r as H}from"./requestSubmissionService-CmTvgOhS.js";const O={class:"services-page"},A={class:"hero-section"},F={class:"hero-content"},I={class:"hero-text"},z={class:"hero-title"},Y={class:"hero-subtitle"},Z={class:"tabs-container"},G={class:"tabs-nav"},J=["onClick"],K={class:"tab-icon"},Q={class:"tab-label"},W={key:0,class:"tab-count"},X={class:"tab-content"},ee={key:0,class:"requests-content"},se={key:0,class:"loading-container"},te={key:1,class:"error-container"},oe={key:2,class:"services-grid"},ne=["onClick"],ie={class:"service-icon"},ae=["src","alt"],le=["alt"],re={class:"service-content"},ce={class:"service-name"},de={key:1,class:"requests-content"},ue={key:0,class:"loading-container"},ve={key:1,class:"empty-state"},he={key:2,class:"requests-list"},_e=["onClick"],pe={class:"request-item-header"},ge={class:"request-item-info"},me={class:"request-item-title"},ke={class:"request-item-date"},we={class:"status-text"},ye={class:"request-item-preview"},Ce={key:2,class:"requests-content"},fe={key:0,class:"loading-container"},qe={key:1,class:"empty-state"},be={key:2,class:"requests-list"},Re=["onClick"],je={class:"request-item-header"},xe={class:"request-item-info"},Le={class:"request-item-title"},De={class:"request-item-date"},Pe={class:"status-text"},Se={class:"request-item-preview"},$e=Object.assign({name:"RequestsPage"},{__name:"Requests",setup(Me){const y=$(),r=E(),l=M(),c=d("requests"),u=d(!1),L=d([]),v=d([]),h=d([]),D=B(()=>[{id:"requests",label:"Requests",icon:""},{id:"open",label:"Open",icon:"",count:v.value.length},{id:"closed",label:"Closed",icon:"",count:h.value.length}]);N(async()=>{l.selectedProject?.id&&(await m(),await C())}),V(()=>l.selectedProject?.id,async o=>{o&&(await m(),await C())});const m=async()=>{l.selectedProject?.id&&await r.fetchCategories(l.selectedProject.id)},C=async()=>{if(l.selectedProject?.id)try{u.value=!0;const o=await T.getCurrentUser();if(o){const t=await H.getUserSubmissions(l.selectedProject.id,o.uid);L.value=t,v.value=t.filter(s=>s.status==="pending"||s.status==="in_progress"),h.value=t.filter(s=>s.status==="completed"||s.status==="rejected")}}catch(o){console.error("Error loading my requests:",o)}finally{u.value=!1}},P=o=>{y.push(`/request-category/${o.id}`)},f=o=>{o?.id&&y.push(`/request-chat/${o.id}`)},q=o=>o?(o.toDate?o.toDate():new Date(o)).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"Unknown date",b=o=>({pending:"Pending",in_progress:"In Progress",completed:"Completed",rejected:"Rejected"})[o]||o,R=o=>{if(o.formData){const t=Object.keys(o.formData)[0];if(t&&o.formData[t])return`${t}: ${o.formData[t]}`}return"Request submitted"};return(o,t)=>(i(),n("div",O,[e("div",A,[e("div",F,[e("div",I,[e("h1",z,a(o.$t("requestsTitle")),1),e("p",Y,a(o.$t("submitRequestsDesc")),1)])])]),e("div",Z,[e("div",G,[(i(!0),n(_,null,p(D.value,s=>(i(),n("button",{key:s.id,class:w(["tab-btn",{active:c.value===s.id}]),onClick:k=>c.value=s.id},[e("span",K,a(s.icon),1),e("span",Q,a(s.label),1),s.count!==void 0?(i(),n("span",W,a(s.count),1)):j("",!0)],10,J))),128))])]),e("div",X,[c.value==="requests"?(i(),n("div",ee,[g(r).isLoading?(i(),n("div",se,[t[0]||(t[0]=e("div",{class:"loading-spinner"},null,-1)),e("p",null,a(o.$t("loadingRequests")),1)])):g(r).getError?(i(),n("div",te,[e("p",null,a(g(r).getError),1),e("button",{onClick:m,class:"retry-btn"},a(o.$t("retry")),1)])):(i(),n("div",oe,[(i(!0),n(_,null,p(g(r).getCategories,s=>(i(),n("div",{key:s.id,class:"service-card",onClick:k=>P(s)},[e("div",ie,[s.imageUrl?(i(),n("img",{key:0,src:s.imageUrl,alt:s.englishTitle,class:"service-image"},null,8,ae)):(i(),n("img",{key:1,src:U,alt:s.englishTitle,class:"service-image"},null,8,le))]),e("div",re,[e("h3",ce,a(s.englishTitle),1)]),t[1]||(t[1]=e("div",{class:"service-arrow"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],8,ne))),128))]))])):c.value==="open"?(i(),n("div",de,[u.value?(i(),n("div",ue,[...t[2]||(t[2]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading open requests...",-1)])])):v.value.length===0?(i(),n("div",ve,[...t[3]||(t[3]=[e("div",{class:"empty-icon"},[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"#ccc","stroke-width":"2"}),e("path",{d:"M12 8V12L15 15",stroke:"#ccc","stroke-width":"2","stroke-linecap":"round"})])],-1),e("h3",null,"No Open Requests",-1),e("p",null,"You don't have any open requests at the moment.",-1)])])):(i(),n("div",he,[(i(!0),n(_,null,p(v.value,s=>(i(),n("div",{key:s.id,class:"request-item",onClick:k=>f(s)},[e("div",pe,[e("div",ge,[e("h4",me,a(s.categoryName),1),e("p",ke,a(q(s.createdAt)),1)]),e("div",{class:w(["request-status",s.status])},[t[4]||(t[4]=e("span",{class:"status-dot"},null,-1)),e("span",we,a(b(s.status)),1)],2)]),e("div",ye,[e("p",null,a(R(s)),1)]),t[5]||(t[5]=e("div",{class:"request-item-actions"},[e("button",{class:"chat-btn"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),x(" Chat ")])],-1))],8,_e))),128))]))])):c.value==="closed"?(i(),n("div",Ce,[u.value?(i(),n("div",fe,[...t[6]||(t[6]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading closed requests...",-1)])])):h.value.length===0?(i(),n("div",qe,[...t[7]||(t[7]=[e("div",{class:"empty-icon"},[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"#ccc","stroke-width":"2"}),e("path",{d:"M9 12L11 14L15 10",stroke:"#ccc","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),e("h3",null,"No Closed Requests",-1),e("p",null,"You don't have any closed requests yet.",-1)])])):(i(),n("div",be,[(i(!0),n(_,null,p(h.value,s=>(i(),n("div",{key:s.id,class:"request-item",onClick:k=>f(s)},[e("div",je,[e("div",xe,[e("h4",Le,a(s.categoryName),1),e("p",De,a(q(s.createdAt)),1)]),e("div",{class:w(["request-status",s.status])},[t[8]||(t[8]=e("span",{class:"status-dot"},null,-1)),e("span",Pe,a(b(s.status)),1)],2)]),e("div",Se,[e("p",null,a(R(s)),1)]),t[9]||(t[9]=e("div",{class:"request-item-actions"},[e("button",{class:"chat-btn"},[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),x(" Chat ")])],-1))],8,Re))),128))]))])):j("",!0)])]))}}),Ve=S($e,[["__scopeId","data-v-52cbf203"]]);export{Ve as default};
