const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-xvjq-Ape.js","assets/index-BYuuB5GE.js","assets/index-BWVvr855.css"])))=>i.map(i=>d[i]);
import{bl as dt,c as J,bo as ye,c4 as vn,c5 as yn,bM as ft,r as O,c6 as ht,c7 as Ne,b7 as at,bP as ln,aF as ie,aE as cn,bT as Te,c8 as it,c9 as lt,ca as mt,cb as bn,cc as wn,cd as De,bW as En,ce as kn,bX as Cn,cf as Pn,cg as Sn,ch as Bn,bZ as An,ci as Nn,cj as Tn,bU as Rn,bS as un,bQ as _n,ck as Un,cl as Me,cm as Dn,cn as Mn,co as In,cp as Ln,i as qn,_ as Fn,b as be,g as we,ab as pt,s as Ee,ac as vt,ay as Ae,aC as $n,az as Z,aG as V,aH as q,aS as M,aN as x,aI as I,ba as oe,aT as zn,c0 as G,aJ as L,aO as $,aM as ke,b5 as W,aQ as X,c1 as j,aK as Gn,aL as Wn,c3 as Ie,cq as yt,c2 as bt,cr as Ce,aU as xn,cs as Vn,aA as H}from"./index-BYuuB5GE.js";import{u as Hn,Q as On}from"./useBluetooth-pIL8G3yN.js";const Qn=["top","middle","bottom"],Kn=dt({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Qn.includes(e)}},setup(e,{slots:o}){const r=J(()=>e.align!==void 0?{verticalAlign:e.align}:null),n=J(()=>{const t=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(t!==void 0?` text-${t}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>ye("div",{class:n.value,style:r.value,role:"status","aria-label":e.label},vn(o.default,e.label!==void 0?[e.label]:[]))}});function ct(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),yn.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const jn={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean};function Jn({showing:e,avoidEmit:o,configureAnchorEl:r}){const{props:n,proxy:t,emit:s}=ft(),a=O(null);let i=null;function l(c){return a.value===null?!1:c===void 0||c.touches===void 0||c.touches.length<=1}const d={};r===void 0&&(Object.assign(d,{hide(c){t.hide(c)},toggle(c){t.toggle(c),c.qAnchorHandled=!0},toggleKey(c){ln(c,13)===!0&&d.toggle(c)},contextClick(c){t.hide(c),ht(c),at(()=>{t.show(c),c.qAnchorHandled=!0})},prevent:ht,mobileTouch(c){if(d.mobileCleanup(c),l(c)!==!0)return;t.hide(c),a.value.classList.add("non-selectable");const h=c.target;Ne(d,"anchor",[[h,"touchmove","mobileCleanup","passive"],[h,"touchend","mobileCleanup","passive"],[h,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),i=setTimeout(()=>{i=null,t.show(c),c.qAnchorHandled=!0},300)},mobileCleanup(c){a.value.classList.remove("non-selectable"),i!==null&&(clearTimeout(i),i=null),e.value===!0&&c!==void 0&&ct()}}),r=function(c=n.contextMenu){if(n.noParentEvent===!0||a.value===null)return;let h;c===!0?t.$q.platform.is.mobile===!0?h=[[a.value,"touchstart","mobileTouch","passive"]]:h=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:h=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],Ne(d,"anchor",h)});function g(){it(d,"anchor")}function f(c){for(a.value=c;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;r()}function m(){if(n.target===!1||n.target===""||t.$el.parentNode===null)a.value=null;else if(n.target===!0)f(t.$el.parentNode);else{let c=n.target;if(typeof n.target=="string")try{c=document.querySelector(n.target)}catch{c=void 0}c!=null?(a.value=c.$el||c,r()):(a.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return ie(()=>n.contextMenu,c=>{a.value!==null&&(g(),r(c))}),ie(()=>n.target,()=>{a.value!==null&&g(),m()}),ie(()=>n.noParentEvent,c=>{a.value!==null&&(c===!0?g():r())}),cn(()=>{m(),o!==!0&&n.modelValue===!0&&a.value===null&&s("update:modelValue",!1)}),Te(()=>{i!==null&&clearTimeout(i),g()}),{anchorEl:a,canShow:l,anchorEvents:d}}function Yn(e,o){const r=O(null);let n;function t(i,l){const d=`${l!==void 0?"add":"remove"}EventListener`,g=l!==void 0?l:n;i!==window&&i[d]("scroll",g,lt.passive),window[d]("scroll",g,lt.passive),n=l}function s(){r.value!==null&&(t(r.value),r.value=null)}const a=ie(()=>e.noParentEvent,()=>{r.value!==null&&(s(),o())});return Te(a),{localScrollTarget:r,unconfigureScrollTarget:s,changeScrollEvent:t}}const{notPassiveCapture:Re}=lt,le=[];function _e(e){const o=e.target;if(o===void 0||o.nodeType===8||o.classList.contains("no-pointer-events")===!0)return;let r=mt.length-1;for(;r>=0;){const n=mt[r].$;if(n.type.name==="QTooltip"){r--;continue}if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;r--}for(let n=le.length-1;n>=0;n--){const t=le[n];if((t.anchorEl.value===null||t.anchorEl.value.contains(o)===!1)&&(o===document.body||t.innerRef.value!==null&&t.innerRef.value.contains(o)===!1))e.qClickOutside=!0,t.onClickOutside(e);else return}}function Xn(e){le.push(e),le.length===1&&(document.addEventListener("mousedown",_e,Re),document.addEventListener("touchstart",_e,Re))}function wt(e){const o=le.findIndex(r=>r===e);o!==-1&&(le.splice(o,1),le.length===0&&(document.removeEventListener("mousedown",_e,Re),document.removeEventListener("touchstart",_e,Re)))}let Et,kt;function Ct(e){const o=e.split(" ");return o.length!==2?!1:["top","center","bottom"].includes(o[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(o[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Zn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const ut={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{ut[`${e}#ltr`]=e,ut[`${e}#rtl`]=e});function Pt(e,o){const r=e.split(" ");return{vertical:r[0],horizontal:ut[`${r[1]}#${o===!0?"rtl":"ltr"}`]}}function eo(e,o){let{top:r,left:n,right:t,bottom:s,width:a,height:i}=e.getBoundingClientRect();return o!==void 0&&(r-=o[1],n-=o[0],s+=o[1],t+=o[0],a+=o[0],i+=o[1]),{top:r,bottom:s,height:i,left:n,right:t,width:a,middle:n+(t-n)/2,center:r+(s-r)/2}}function to(e,o,r){let{top:n,left:t}=e.getBoundingClientRect();return n+=o.top,t+=o.left,r!==void 0&&(n+=r[1],t+=r[0]),{top:n,bottom:n+1,height:1,left:t,right:t+1,width:1,middle:t,center:n}}function no(e,o){return{top:0,center:o/2,bottom:o,left:0,middle:e/2,right:e}}function St(e,o,r,n){return{top:e[r.vertical]-o[n.vertical],left:e[r.horizontal]-o[n.horizontal]}}function dn(e,o=0){if(e.targetEl===null||e.anchorEl===null||o>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{dn(e,o+1)},10);return}const{targetEl:r,offset:n,anchorEl:t,anchorOrigin:s,selfOrigin:a,absoluteOffset:i,fit:l,cover:d,maxHeight:g,maxWidth:f}=e;if(bn.is.ios===!0&&window.visualViewport!==void 0){const b=document.body.style,{offsetLeft:E,offsetTop:k}=window.visualViewport;E!==Et&&(b.setProperty("--q-pe-left",E+"px"),Et=E),k!==kt&&(b.setProperty("--q-pe-top",k+"px"),kt=k)}const{scrollLeft:m,scrollTop:c}=r,h=i===void 0?eo(t,d===!0?[0,0]:n):to(t,i,n);Object.assign(r.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:f,maxHeight:g,visibility:"visible"});const{offsetWidth:y,offsetHeight:D}=r,{elWidth:A,elHeight:w}=l===!0||d===!0?{elWidth:Math.max(h.width,y),elHeight:d===!0?Math.max(h.height,D):D}:{elWidth:y,elHeight:D};let p={maxWidth:f,maxHeight:g};(l===!0||d===!0)&&(p.minWidth=h.width+"px",d===!0&&(p.minHeight=h.height+"px")),Object.assign(r.style,p);const C=no(A,w);let R=St(h,C,s,a);if(i===void 0||n===void 0)Le(R,h,C,s,a);else{const{top:b,left:E}=R;Le(R,h,C,s,a);let k=!1;if(R.top!==b){k=!0;const v=2*n[1];h.center=h.top-=v,h.bottom-=v+2}if(R.left!==E){k=!0;const v=2*n[0];h.middle=h.left-=v,h.right-=v+2}k===!0&&(R=St(h,C,s,a),Le(R,h,C,s,a))}p={top:R.top+"px",left:R.left+"px"},R.maxHeight!==void 0&&(p.maxHeight=R.maxHeight+"px",h.height>R.maxHeight&&(p.minHeight=p.maxHeight)),R.maxWidth!==void 0&&(p.maxWidth=R.maxWidth+"px",h.width>R.maxWidth&&(p.minWidth=p.maxWidth)),Object.assign(r.style,p),r.scrollTop!==c&&(r.scrollTop=c),r.scrollLeft!==m&&(r.scrollLeft=m)}function Le(e,o,r,n,t){const s=r.bottom,a=r.right,i=wn(),l=window.innerHeight-i,d=document.body.clientWidth;if(e.top<0||e.top+s>l)if(t.vertical==="center")e.top=o[n.vertical]>l/2?Math.max(0,l-s):0,e.maxHeight=Math.min(s,l);else if(o[n.vertical]>l/2){const g=Math.min(l,n.vertical==="center"?o.center:n.vertical===t.vertical?o.bottom:o.top);e.maxHeight=Math.min(s,g),e.top=Math.max(0,g-s)}else e.top=Math.max(0,n.vertical==="center"?o.center:n.vertical===t.vertical?o.top:o.bottom),e.maxHeight=Math.min(s,l-e.top);if(e.left<0||e.left+a>d)if(e.maxWidth=Math.min(a,d),t.horizontal==="middle")e.left=o[n.horizontal]>d/2?Math.max(0,d-a):0;else if(o[n.horizontal]>d/2){const g=Math.min(d,n.horizontal==="middle"?o.middle:n.horizontal===t.horizontal?o.right:o.left);e.maxWidth=Math.min(a,g),e.left=Math.max(0,g-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?o.middle:n.horizontal===t.horizontal?o.left:o.right),e.maxWidth=Math.min(a,d-e.left)}const oo=dt({name:"QTooltip",inheritAttrs:!1,props:{...jn,...Cn,...De,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{...De.transitionShow,default:"jump-down"},transitionHide:{...De.transitionHide,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Ct},self:{type:String,default:"top middle",validator:Ct},offset:{type:Array,default:()=>[14,14],validator:Zn},scrollTarget:kn,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...En],setup(e,{slots:o,emit:r,attrs:n}){let t,s;const a=ft(),{proxy:{$q:i}}=a,l=O(null),d=O(!1),g=J(()=>Pt(e.anchor,i.lang.rtl)),f=J(()=>Pt(e.self,i.lang.rtl)),m=J(()=>e.persistent!==!0),{registerTick:c,removeTick:h}=Pn(),{registerTimeout:y}=Sn(),{transitionProps:D,transitionStyle:A}=Bn(e),{localScrollTarget:w,changeScrollEvent:p,unconfigureScrollTarget:C}=Yn(e,B),{anchorEl:R,canShow:b,anchorEvents:E}=Jn({showing:d,configureAnchorEl:u}),{show:k,hide:v}=An({showing:d,canShow:b,handleShow:S,handleHide:_,hideOnRouteChange:m,processOnMount:!0});Object.assign(E,{delayShow:de,delayHide:se});const{showPortal:T,hidePortal:P,renderPortal:N}=Nn(a,l,z,"tooltip");if(i.platform.is.mobile===!0){const F={anchorEl:R,innerRef:l,onClickOutside(Y){return v(Y),Y.target.classList.contains("q-dialog__backdrop")&&_n(Y),!0}},he=J(()=>e.modelValue===null&&e.persistent!==!0&&d.value===!0);ie(he,Y=>{(Y===!0?Xn:wt)(F)}),Te(()=>{wt(F)})}function S(F){T(),c(()=>{s=new MutationObserver(()=>K()),s.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),K(),B()}),t===void 0&&(t=ie(()=>i.screen.width+"|"+i.screen.height+"|"+e.self+"|"+e.anchor+"|"+i.lang.rtl,K)),y(()=>{T(!0),r("show",F)},e.transitionDuration)}function _(F){h(),P(),Q(),y(()=>{P(!0),r("hide",F)},e.transitionDuration)}function Q(){s!==void 0&&(s.disconnect(),s=void 0),t!==void 0&&(t(),t=void 0),C(),it(E,"tooltipTemp")}function K(){dn({targetEl:l.value,offset:e.offset,anchorEl:R.value,anchorOrigin:g.value,selfOrigin:f.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function de(F){if(i.platform.is.mobile===!0){ct(),document.body.classList.add("non-selectable");const he=R.value,Y=["touchmove","touchcancel","touchend","click"].map(me=>[he,me,"delayHide","passiveCapture"]);Ne(E,"tooltipTemp",Y)}y(()=>{k(F)},e.delay)}function se(F){i.platform.is.mobile===!0&&(it(E,"tooltipTemp"),ct(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),y(()=>{v(F)},e.hideDelay)}function u(){if(e.noParentEvent===!0||R.value===null)return;const F=i.platform.is.mobile===!0?[[R.value,"touchstart","delayShow","passive"]]:[[R.value,"mouseenter","delayShow","passive"],[R.value,"mouseleave","delayHide","passive"]];Ne(E,"anchor",F)}function B(){if(R.value!==null||e.scrollTarget!==void 0){w.value=Tn(R.value,e.scrollTarget);const F=e.noParentEvent===!0?K:v;p(w.value,F)}}function U(){return d.value===!0?ye("div",{...n,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",n.class],style:[n.style,A.value],role:"tooltip"},un(o.default)):null}function z(){return ye(Rn,D.value,U)}return Te(Q),Object.assign(a.proxy,{updatePosition:K}),N}}),ro={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function so(){const{props:e,proxy:{$q:o}}=ft(),r=Un(Dn,Me);if(r===Me)return console.error("QPageSticky needs to be child of QLayout"),Me;const n=J(()=>{const f=e.position;return{top:f.indexOf("top")!==-1,right:f.indexOf("right")!==-1,bottom:f.indexOf("bottom")!==-1,left:f.indexOf("left")!==-1,vertical:f==="top"||f==="bottom",horizontal:f==="left"||f==="right"}}),t=J(()=>r.header.offset),s=J(()=>r.right.offset),a=J(()=>r.footer.offset),i=J(()=>r.left.offset),l=J(()=>{let f=0,m=0;const c=n.value,h=o.lang.rtl===!0?-1:1;c.top===!0&&t.value!==0?m=`${t.value}px`:c.bottom===!0&&a.value!==0&&(m=`${-a.value}px`),c.left===!0&&i.value!==0?f=`${h*i.value}px`:c.right===!0&&s.value!==0&&(f=`${-h*s.value}px`);const y={transform:`translate(${f}, ${m})`};return e.offset&&(y.margin=`${e.offset[1]}px ${e.offset[0]}px`),c.vertical===!0?(i.value!==0&&(y[o.lang.rtl===!0?"right":"left"]=`${i.value}px`),s.value!==0&&(y[o.lang.rtl===!0?"left":"right"]=`${s.value}px`)):c.horizontal===!0&&(t.value!==0&&(y.top=`${t.value}px`),a.value!==0&&(y.bottom=`${a.value}px`)),y}),d=J(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function g(f){const m=un(f.default);return ye("div",{class:d.value,style:l.value},e.expand===!0?m:[ye("div",m)])}return{$layout:r,getStickyContent:g}}const ao=dt({name:"QPageSticky",props:ro,setup(e,{slots:o}){const{getStickyContent:r}=so();return()=>r(o)}});function Bt(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const o=parseInt(e,10);return isNaN(o)?0:o}const io=Mn({name:"close-popup",beforeMount(e,{value:o}){const r={depth:Bt(o),handler(n){r.depth!==0&&setTimeout(()=>{const t=In(e);t!==void 0&&Ln(t,n,r.depth)})},handlerKey(n){ln(n,13)===!0&&r.handler(n)}};e.__qclosepopup=r,e.addEventListener("click",r.handler),e.addEventListener("keyup",r.handlerKey)},updated(e,{value:o,oldValue:r}){o!==r&&(e.__qclosepopup.depth=Bt(o))},beforeUnmount(e){const o=e.__qclosepopup;e.removeEventListener("click",o.handler),e.removeEventListener("keyup",o.handlerKey),delete e.__qclosepopup}}),lo=qn("Share",{web:()=>Fn(()=>import("./web-xvjq-Ape.js"),__vite__mapDeps([0,1,2])).then(e=>new e.ShareWeb)});function co(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ge={},qe,At;function uo(){return At||(At=1,qe=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),qe}var Fe={},re={},Nt;function ce(){if(Nt)return re;Nt=1;let e;const o=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return re.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},re.getSymbolTotalCodewords=function(n){return o[n]},re.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},re.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');e=n},re.isKanjiModeEnabled=function(){return typeof e<"u"},re.toSJIS=function(n){return e(n)},re}var $e={},Tt;function gt(){return Tt||(Tt=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function o(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,t){if(e.isValid(n))return n;try{return o(n)}catch{return t}}})($e)),$e}var ze,Rt;function fo(){if(Rt)return ze;Rt=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(o){const r=Math.floor(o/8);return(this.buffer[r]>>>7-o%8&1)===1},put:function(o,r){for(let n=0;n<r;n++)this.putBit((o>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(o){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),o&&(this.buffer[r]|=128>>>this.length%8),this.length++}},ze=e,ze}var Ge,_t;function go(){if(_t)return Ge;_t=1;function e(o){if(!o||o<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=o,this.data=new Uint8Array(o*o),this.reservedBit=new Uint8Array(o*o)}return e.prototype.set=function(o,r,n,t){const s=o*this.size+r;this.data[s]=n,t&&(this.reservedBit[s]=!0)},e.prototype.get=function(o,r){return this.data[o*this.size+r]},e.prototype.xor=function(o,r,n){this.data[o*this.size+r]^=n},e.prototype.isReserved=function(o,r){return this.reservedBit[o*this.size+r]},Ge=e,Ge}var We={},Ut;function ho(){return Ut||(Ut=1,(function(e){const o=ce().getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const t=Math.floor(n/7)+2,s=o(n),a=s===145?26:Math.ceil((s-13)/(2*t-2))*2,i=[s-7];for(let l=1;l<t-1;l++)i[l]=i[l-1]-a;return i.push(6),i.reverse()},e.getPositions=function(n){const t=[],s=e.getRowColCoords(n),a=s.length;for(let i=0;i<a;i++)for(let l=0;l<a;l++)i===0&&l===0||i===0&&l===a-1||i===a-1&&l===0||t.push([s[i],s[l]]);return t}})(We)),We}var xe={},Dt;function mo(){if(Dt)return xe;Dt=1;const e=ce().getSymbolSize,o=7;return xe.getPositions=function(n){const t=e(n);return[[0,0],[t-o,0],[0,t-o]]},xe}var Ve={},Mt;function po(){return Mt||(Mt=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const o={N1:3,N2:3,N3:40,N4:10};e.isValid=function(t){return t!=null&&t!==""&&!isNaN(t)&&t>=0&&t<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(t){const s=t.size;let a=0,i=0,l=0,d=null,g=null;for(let f=0;f<s;f++){i=l=0,d=g=null;for(let m=0;m<s;m++){let c=t.get(f,m);c===d?i++:(i>=5&&(a+=o.N1+(i-5)),d=c,i=1),c=t.get(m,f),c===g?l++:(l>=5&&(a+=o.N1+(l-5)),g=c,l=1)}i>=5&&(a+=o.N1+(i-5)),l>=5&&(a+=o.N1+(l-5))}return a},e.getPenaltyN2=function(t){const s=t.size;let a=0;for(let i=0;i<s-1;i++)for(let l=0;l<s-1;l++){const d=t.get(i,l)+t.get(i,l+1)+t.get(i+1,l)+t.get(i+1,l+1);(d===4||d===0)&&a++}return a*o.N2},e.getPenaltyN3=function(t){const s=t.size;let a=0,i=0,l=0;for(let d=0;d<s;d++){i=l=0;for(let g=0;g<s;g++)i=i<<1&2047|t.get(d,g),g>=10&&(i===1488||i===93)&&a++,l=l<<1&2047|t.get(g,d),g>=10&&(l===1488||l===93)&&a++}return a*o.N3},e.getPenaltyN4=function(t){let s=0;const a=t.data.length;for(let l=0;l<a;l++)s+=t.data[l];return Math.abs(Math.ceil(s*100/a/5)-10)*o.N4};function r(n,t,s){switch(n){case e.Patterns.PATTERN000:return(t+s)%2===0;case e.Patterns.PATTERN001:return t%2===0;case e.Patterns.PATTERN010:return s%3===0;case e.Patterns.PATTERN011:return(t+s)%3===0;case e.Patterns.PATTERN100:return(Math.floor(t/2)+Math.floor(s/3))%2===0;case e.Patterns.PATTERN101:return t*s%2+t*s%3===0;case e.Patterns.PATTERN110:return(t*s%2+t*s%3)%2===0;case e.Patterns.PATTERN111:return(t*s%3+(t+s)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(t,s){const a=s.size;for(let i=0;i<a;i++)for(let l=0;l<a;l++)s.isReserved(l,i)||s.xor(l,i,r(t,l,i))},e.getBestMask=function(t,s){const a=Object.keys(e.Patterns).length;let i=0,l=1/0;for(let d=0;d<a;d++){s(d),e.applyMask(d,t);const g=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(d,t),g<l&&(l=g,i=d)}return i}})(Ve)),Ve}var Pe={},It;function fn(){if(It)return Pe;It=1;const e=gt(),o=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Pe.getBlocksCount=function(t,s){switch(s){case e.L:return o[(t-1)*4+0];case e.M:return o[(t-1)*4+1];case e.Q:return o[(t-1)*4+2];case e.H:return o[(t-1)*4+3];default:return}},Pe.getTotalCodewordsCount=function(t,s){switch(s){case e.L:return r[(t-1)*4+0];case e.M:return r[(t-1)*4+1];case e.Q:return r[(t-1)*4+2];case e.H:return r[(t-1)*4+3];default:return}},Pe}var He={},pe={},Lt;function vo(){if(Lt)return pe;Lt=1;const e=new Uint8Array(512),o=new Uint8Array(256);return(function(){let n=1;for(let t=0;t<255;t++)e[t]=n,o[n]=t,n<<=1,n&256&&(n^=285);for(let t=255;t<512;t++)e[t]=e[t-255]})(),pe.log=function(n){if(n<1)throw new Error("log("+n+")");return o[n]},pe.exp=function(n){return e[n]},pe.mul=function(n,t){return n===0||t===0?0:e[o[n]+o[t]]},pe}var qt;function yo(){return qt||(qt=1,(function(e){const o=vo();e.mul=function(n,t){const s=new Uint8Array(n.length+t.length-1);for(let a=0;a<n.length;a++)for(let i=0;i<t.length;i++)s[a+i]^=o.mul(n[a],t[i]);return s},e.mod=function(n,t){let s=new Uint8Array(n);for(;s.length-t.length>=0;){const a=s[0];for(let l=0;l<t.length;l++)s[l]^=o.mul(t[l],a);let i=0;for(;i<s.length&&s[i]===0;)i++;s=s.slice(i)}return s},e.generateECPolynomial=function(n){let t=new Uint8Array([1]);for(let s=0;s<n;s++)t=e.mul(t,new Uint8Array([1,o.exp(s)]));return t}})(He)),He}var Oe,Ft;function bo(){if(Ft)return Oe;Ft=1;const e=yo();function o(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return o.prototype.initialize=function(n){this.degree=n,this.genPoly=e.generateECPolynomial(this.degree)},o.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(n.length+this.degree);t.set(n);const s=e.mod(t,this.genPoly),a=this.degree-s.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(s,a),i}return s},Oe=o,Oe}var Qe={},Ke={},je={},$t;function gn(){return $t||($t=1,je.isValid=function(o){return!isNaN(o)&&o>=1&&o<=40}),je}var ee={},zt;function hn(){if(zt)return ee;zt=1;const e="[0-9]+",o="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ee.KANJI=new RegExp(r,"g"),ee.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ee.BYTE=new RegExp(n,"g"),ee.NUMERIC=new RegExp(e,"g"),ee.ALPHANUMERIC=new RegExp(o,"g");const t=new RegExp("^"+r+"$"),s=new RegExp("^"+e+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ee.testKanji=function(l){return t.test(l)},ee.testNumeric=function(l){return s.test(l)},ee.testAlphanumeric=function(l){return a.test(l)},ee}var Gt;function ue(){return Gt||(Gt=1,(function(e){const o=gn(),r=hn();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(s,a){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!o.isValid(a))throw new Error("Invalid version: "+a);return a>=1&&a<10?s.ccBits[0]:a<27?s.ccBits[1]:s.ccBits[2]},e.getBestModeForData=function(s){return r.testNumeric(s)?e.NUMERIC:r.testAlphanumeric(s)?e.ALPHANUMERIC:r.testKanji(s)?e.KANJI:e.BYTE},e.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},e.isValid=function(s){return s&&s.bit&&s.ccBits};function n(t){if(typeof t!="string")throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}e.from=function(s,a){if(e.isValid(s))return s;try{return n(s)}catch{return a}}})(Ke)),Ke}var Wt;function wo(){return Wt||(Wt=1,(function(e){const o=ce(),r=fn(),n=gt(),t=ue(),s=gn(),a=7973,i=o.getBCHDigit(a);function l(m,c,h){for(let y=1;y<=40;y++)if(c<=e.getCapacity(y,h,m))return y}function d(m,c){return t.getCharCountIndicator(m,c)+4}function g(m,c){let h=0;return m.forEach(function(y){const D=d(y.mode,c);h+=D+y.getBitsLength()}),h}function f(m,c){for(let h=1;h<=40;h++)if(g(m,h)<=e.getCapacity(h,c,t.MIXED))return h}e.from=function(c,h){return s.isValid(c)?parseInt(c,10):h},e.getCapacity=function(c,h,y){if(!s.isValid(c))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=t.BYTE);const D=o.getSymbolTotalCodewords(c),A=r.getTotalCodewordsCount(c,h),w=(D-A)*8;if(y===t.MIXED)return w;const p=w-d(y,c);switch(y){case t.NUMERIC:return Math.floor(p/10*3);case t.ALPHANUMERIC:return Math.floor(p/11*2);case t.KANJI:return Math.floor(p/13);case t.BYTE:default:return Math.floor(p/8)}},e.getBestVersionForData=function(c,h){let y;const D=n.from(h,n.M);if(Array.isArray(c)){if(c.length>1)return f(c,D);if(c.length===0)return 1;y=c[0]}else y=c;return l(y.mode,y.getLength(),D)},e.getEncodedBits=function(c){if(!s.isValid(c)||c<7)throw new Error("Invalid QR Code version");let h=c<<12;for(;o.getBCHDigit(h)-i>=0;)h^=a<<o.getBCHDigit(h)-i;return c<<12|h}})(Qe)),Qe}var Je={},xt;function Eo(){if(xt)return Je;xt=1;const e=ce(),o=1335,r=21522,n=e.getBCHDigit(o);return Je.getEncodedBits=function(s,a){const i=s.bit<<3|a;let l=i<<10;for(;e.getBCHDigit(l)-n>=0;)l^=o<<e.getBCHDigit(l)-n;return(i<<10|l)^r},Je}var Ye={},Xe,Vt;function ko(){if(Vt)return Xe;Vt=1;const e=ue();function o(r){this.mode=e.NUMERIC,this.data=r.toString()}return o.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(n){let t,s,a;for(t=0;t+3<=this.data.length;t+=3)s=this.data.substr(t,3),a=parseInt(s,10),n.put(a,10);const i=this.data.length-t;i>0&&(s=this.data.substr(t),a=parseInt(s,10),n.put(a,i*3+1))},Xe=o,Xe}var Ze,Ht;function Co(){if(Ht)return Ze;Ht=1;const e=ue(),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=e.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(t){let s;for(s=0;s+2<=this.data.length;s+=2){let a=o.indexOf(this.data[s])*45;a+=o.indexOf(this.data[s+1]),t.put(a,11)}this.data.length%2&&t.put(o.indexOf(this.data[s]),6)},Ze=r,Ze}var et,Ot;function Po(){if(Ot)return et;Ot=1;const e=ue();function o(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return o.getBitsLength=function(n){return n*8},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(r){for(let n=0,t=this.data.length;n<t;n++)r.put(this.data[n],8)},et=o,et}var tt,Qt;function So(){if(Qt)return tt;Qt=1;const e=ue(),o=ce();function r(n){this.mode=e.KANJI,this.data=n}return r.getBitsLength=function(t){return t*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let t;for(t=0;t<this.data.length;t++){let s=o.toSJIS(this.data[t]);if(s>=33088&&s<=40956)s-=33088;else if(s>=57408&&s<=60351)s-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);s=(s>>>8&255)*192+(s&255),n.put(s,13)}},tt=r,tt}var nt={exports:{}},Kt;function Bo(){return Kt||(Kt=1,(function(e){var o={single_source_shortest_paths:function(r,n,t){var s={},a={};a[n]=0;var i=o.PriorityQueue.make();i.push(n,0);for(var l,d,g,f,m,c,h,y,D;!i.empty();){l=i.pop(),d=l.value,f=l.cost,m=r[d]||{};for(g in m)m.hasOwnProperty(g)&&(c=m[g],h=f+c,y=a[g],D=typeof a[g]>"u",(D||y>h)&&(a[g]=h,i.push(g,h),s[g]=d))}if(typeof t<"u"&&typeof a[t]>"u"){var A=["Could not find a path from ",n," to ",t,"."].join("");throw new Error(A)}return s},extract_shortest_path_from_predecessor_list:function(r,n){for(var t=[],s=n;s;)t.push(s),r[s],s=r[s];return t.reverse(),t},find_path:function(r,n,t){var s=o.single_source_shortest_paths(r,n,t);return o.extract_shortest_path_from_predecessor_list(s,t)},PriorityQueue:{make:function(r){var n=o.PriorityQueue,t={},s;r=r||{};for(s in n)n.hasOwnProperty(s)&&(t[s]=n[s]);return t.queue=[],t.sorter=r.sorter||n.default_sorter,t},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var t={value:r,cost:n};this.queue.push(t),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=o})(nt)),nt.exports}var jt;function Ao(){return jt||(jt=1,(function(e){const o=ue(),r=ko(),n=Co(),t=Po(),s=So(),a=hn(),i=ce(),l=Bo();function d(A){return unescape(encodeURIComponent(A)).length}function g(A,w,p){const C=[];let R;for(;(R=A.exec(p))!==null;)C.push({data:R[0],index:R.index,mode:w,length:R[0].length});return C}function f(A){const w=g(a.NUMERIC,o.NUMERIC,A),p=g(a.ALPHANUMERIC,o.ALPHANUMERIC,A);let C,R;return i.isKanjiModeEnabled()?(C=g(a.BYTE,o.BYTE,A),R=g(a.KANJI,o.KANJI,A)):(C=g(a.BYTE_KANJI,o.BYTE,A),R=[]),w.concat(p,C,R).sort(function(E,k){return E.index-k.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function m(A,w){switch(w){case o.NUMERIC:return r.getBitsLength(A);case o.ALPHANUMERIC:return n.getBitsLength(A);case o.KANJI:return s.getBitsLength(A);case o.BYTE:return t.getBitsLength(A)}}function c(A){return A.reduce(function(w,p){const C=w.length-1>=0?w[w.length-1]:null;return C&&C.mode===p.mode?(w[w.length-1].data+=p.data,w):(w.push(p),w)},[])}function h(A){const w=[];for(let p=0;p<A.length;p++){const C=A[p];switch(C.mode){case o.NUMERIC:w.push([C,{data:C.data,mode:o.ALPHANUMERIC,length:C.length},{data:C.data,mode:o.BYTE,length:C.length}]);break;case o.ALPHANUMERIC:w.push([C,{data:C.data,mode:o.BYTE,length:C.length}]);break;case o.KANJI:w.push([C,{data:C.data,mode:o.BYTE,length:d(C.data)}]);break;case o.BYTE:w.push([{data:C.data,mode:o.BYTE,length:d(C.data)}])}}return w}function y(A,w){const p={},C={start:{}};let R=["start"];for(let b=0;b<A.length;b++){const E=A[b],k=[];for(let v=0;v<E.length;v++){const T=E[v],P=""+b+v;k.push(P),p[P]={node:T,lastCount:0},C[P]={};for(let N=0;N<R.length;N++){const S=R[N];p[S]&&p[S].node.mode===T.mode?(C[S][P]=m(p[S].lastCount+T.length,T.mode)-m(p[S].lastCount,T.mode),p[S].lastCount+=T.length):(p[S]&&(p[S].lastCount=T.length),C[S][P]=m(T.length,T.mode)+4+o.getCharCountIndicator(T.mode,w))}}R=k}for(let b=0;b<R.length;b++)C[R[b]].end=0;return{map:C,table:p}}function D(A,w){let p;const C=o.getBestModeForData(A);if(p=o.from(w,C),p!==o.BYTE&&p.bit<C.bit)throw new Error('"'+A+'" cannot be encoded with mode '+o.toString(p)+`.
 Suggested mode is: `+o.toString(C));switch(p===o.KANJI&&!i.isKanjiModeEnabled()&&(p=o.BYTE),p){case o.NUMERIC:return new r(A);case o.ALPHANUMERIC:return new n(A);case o.KANJI:return new s(A);case o.BYTE:return new t(A)}}e.fromArray=function(w){return w.reduce(function(p,C){return typeof C=="string"?p.push(D(C,null)):C.data&&p.push(D(C.data,C.mode)),p},[])},e.fromString=function(w,p){const C=f(w,i.isKanjiModeEnabled()),R=h(C),b=y(R,p),E=l.find_path(b.map,"start","end"),k=[];for(let v=1;v<E.length-1;v++)k.push(b.table[E[v]].node);return e.fromArray(c(k))},e.rawSplit=function(w){return e.fromArray(f(w,i.isKanjiModeEnabled()))}})(Ye)),Ye}var Jt;function No(){if(Jt)return Fe;Jt=1;const e=ce(),o=gt(),r=fo(),n=go(),t=ho(),s=mo(),a=po(),i=fn(),l=bo(),d=wo(),g=Eo(),f=ue(),m=Ao();function c(b,E){const k=b.size,v=s.getPositions(E);for(let T=0;T<v.length;T++){const P=v[T][0],N=v[T][1];for(let S=-1;S<=7;S++)if(!(P+S<=-1||k<=P+S))for(let _=-1;_<=7;_++)N+_<=-1||k<=N+_||(S>=0&&S<=6&&(_===0||_===6)||_>=0&&_<=6&&(S===0||S===6)||S>=2&&S<=4&&_>=2&&_<=4?b.set(P+S,N+_,!0,!0):b.set(P+S,N+_,!1,!0))}}function h(b){const E=b.size;for(let k=8;k<E-8;k++){const v=k%2===0;b.set(k,6,v,!0),b.set(6,k,v,!0)}}function y(b,E){const k=t.getPositions(E);for(let v=0;v<k.length;v++){const T=k[v][0],P=k[v][1];for(let N=-2;N<=2;N++)for(let S=-2;S<=2;S++)N===-2||N===2||S===-2||S===2||N===0&&S===0?b.set(T+N,P+S,!0,!0):b.set(T+N,P+S,!1,!0)}}function D(b,E){const k=b.size,v=d.getEncodedBits(E);let T,P,N;for(let S=0;S<18;S++)T=Math.floor(S/3),P=S%3+k-8-3,N=(v>>S&1)===1,b.set(T,P,N,!0),b.set(P,T,N,!0)}function A(b,E,k){const v=b.size,T=g.getEncodedBits(E,k);let P,N;for(P=0;P<15;P++)N=(T>>P&1)===1,P<6?b.set(P,8,N,!0):P<8?b.set(P+1,8,N,!0):b.set(v-15+P,8,N,!0),P<8?b.set(8,v-P-1,N,!0):P<9?b.set(8,15-P-1+1,N,!0):b.set(8,15-P-1,N,!0);b.set(v-8,8,1,!0)}function w(b,E){const k=b.size;let v=-1,T=k-1,P=7,N=0;for(let S=k-1;S>0;S-=2)for(S===6&&S--;;){for(let _=0;_<2;_++)if(!b.isReserved(T,S-_)){let Q=!1;N<E.length&&(Q=(E[N]>>>P&1)===1),b.set(T,S-_,Q),P--,P===-1&&(N++,P=7)}if(T+=v,T<0||k<=T){T-=v,v=-v;break}}}function p(b,E,k){const v=new r;k.forEach(function(_){v.put(_.mode.bit,4),v.put(_.getLength(),f.getCharCountIndicator(_.mode,b)),_.write(v)});const T=e.getSymbolTotalCodewords(b),P=i.getTotalCodewordsCount(b,E),N=(T-P)*8;for(v.getLengthInBits()+4<=N&&v.put(0,4);v.getLengthInBits()%8!==0;)v.putBit(0);const S=(N-v.getLengthInBits())/8;for(let _=0;_<S;_++)v.put(_%2?17:236,8);return C(v,b,E)}function C(b,E,k){const v=e.getSymbolTotalCodewords(E),T=i.getTotalCodewordsCount(E,k),P=v-T,N=i.getBlocksCount(E,k),S=v%N,_=N-S,Q=Math.floor(v/N),K=Math.floor(P/N),de=K+1,se=Q-K,u=new l(se);let B=0;const U=new Array(N),z=new Array(N);let F=0;const he=new Uint8Array(b.buffer);for(let fe=0;fe<N;fe++){const Ue=fe<_?K:de;U[fe]=he.slice(B,B+Ue),z[fe]=u.encode(U[fe]),B+=Ue,F=Math.max(F,Ue)}const Y=new Uint8Array(v);let me=0,te,ne;for(te=0;te<F;te++)for(ne=0;ne<N;ne++)te<U[ne].length&&(Y[me++]=U[ne][te]);for(te=0;te<se;te++)for(ne=0;ne<N;ne++)Y[me++]=z[ne][te];return Y}function R(b,E,k,v){let T;if(Array.isArray(b))T=m.fromArray(b);else if(typeof b=="string"){let Q=E;if(!Q){const K=m.rawSplit(b);Q=d.getBestVersionForData(K,k)}T=m.fromString(b,Q||40)}else throw new Error("Invalid data");const P=d.getBestVersionForData(T,k);if(!P)throw new Error("The amount of data is too big to be stored in a QR Code");if(!E)E=P;else if(E<P)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+P+`.
`);const N=p(E,k,T),S=e.getSymbolSize(E),_=new n(S);return c(_,E),h(_),y(_,E),A(_,k,0),E>=7&&D(_,E),w(_,N),isNaN(v)&&(v=a.getBestMask(_,A.bind(null,_,k))),a.applyMask(v,_),A(_,k,v),{modules:_,version:E,errorCorrectionLevel:k,maskPattern:v,segments:T}}return Fe.create=function(E,k){if(typeof E>"u"||E==="")throw new Error("No input text");let v=o.M,T,P;return typeof k<"u"&&(v=o.from(k.errorCorrectionLevel,o.M),T=d.from(k.version),P=a.from(k.maskPattern),k.toSJISFunc&&e.setToSJISFunction(k.toSJISFunc)),R(E,T,v,P)},Fe}var ot={},rt={},Yt;function mn(){return Yt||(Yt=1,(function(e){function o(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(s){return[s,s]}))),n.length===6&&n.push("F","F");const t=parseInt(n.join(""),16);return{r:t>>24&255,g:t>>16&255,b:t>>8&255,a:t&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const t=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,s=n.width&&n.width>=21?n.width:void 0,a=n.scale||4;return{width:s,scale:s?4:a,margin:t,color:{dark:o(n.color.dark||"#000000ff"),light:o(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,t){return t.width&&t.width>=n+t.margin*2?t.width/(n+t.margin*2):t.scale},e.getImageWidth=function(n,t){const s=e.getScale(n,t);return Math.floor((n+t.margin*2)*s)},e.qrToImageData=function(n,t,s){const a=t.modules.size,i=t.modules.data,l=e.getScale(a,s),d=Math.floor((a+s.margin*2)*l),g=s.margin*l,f=[s.color.light,s.color.dark];for(let m=0;m<d;m++)for(let c=0;c<d;c++){let h=(m*d+c)*4,y=s.color.light;if(m>=g&&c>=g&&m<d-g&&c<d-g){const D=Math.floor((m-g)/l),A=Math.floor((c-g)/l);y=f[i[D*a+A]?1:0]}n[h++]=y.r,n[h++]=y.g,n[h++]=y.b,n[h]=y.a}}})(rt)),rt}var Xt;function To(){return Xt||(Xt=1,(function(e){const o=mn();function r(t,s,a){t.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=a,s.width=a,s.style.height=a+"px",s.style.width=a+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(s,a,i){let l=i,d=a;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),a||(d=n()),l=o.getOptions(l);const g=o.getImageWidth(s.modules.size,l),f=d.getContext("2d"),m=f.createImageData(g,g);return o.qrToImageData(m.data,s,l),r(f,d,g),f.putImageData(m,0,0),d},e.renderToDataURL=function(s,a,i){let l=i;typeof l>"u"&&(!a||!a.getContext)&&(l=a,a=void 0),l||(l={});const d=e.render(s,a,l),g=l.type||"image/png",f=l.rendererOpts||{};return d.toDataURL(g,f.quality)}})(ot)),ot}var st={},Zt;function Ro(){if(Zt)return st;Zt=1;const e=mn();function o(t,s){const a=t.a/255,i=s+'="'+t.hex+'"';return a<1?i+" "+s+'-opacity="'+a.toFixed(2).slice(1)+'"':i}function r(t,s,a){let i=t+s;return typeof a<"u"&&(i+=" "+a),i}function n(t,s,a){let i="",l=0,d=!1,g=0;for(let f=0;f<t.length;f++){const m=Math.floor(f%s),c=Math.floor(f/s);!m&&!d&&(d=!0),t[f]?(g++,f>0&&m>0&&t[f-1]||(i+=d?r("M",m+a,.5+c+a):r("m",l,0),l=0,d=!1),m+1<s&&t[f+1]||(i+=r("h",g),g=0)):l++}return i}return st.render=function(s,a,i){const l=e.getOptions(a),d=s.modules.size,g=s.modules.data,f=d+l.margin*2,m=l.color.light.a?"<path "+o(l.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",c="<path "+o(l.color.dark,"stroke")+' d="'+n(g,d,l.margin)+'"/>',h='viewBox="0 0 '+f+" "+f+'"',D='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+h+' shape-rendering="crispEdges">'+m+c+`</svg>
`;return typeof i=="function"&&i(null,D),D},st}var en;function _o(){if(en)return ge;en=1;const e=uo(),o=No(),r=To(),n=Ro();function t(s,a,i,l,d){const g=[].slice.call(arguments,1),f=g.length,m=typeof g[f-1]=="function";if(!m&&!e())throw new Error("Callback required as last argument");if(m){if(f<2)throw new Error("Too few arguments provided");f===2?(d=i,i=a,a=l=void 0):f===3&&(a.getContext&&typeof d>"u"?(d=l,l=void 0):(d=l,l=i,i=a,a=void 0))}else{if(f<1)throw new Error("Too few arguments provided");return f===1?(i=a,a=l=void 0):f===2&&!a.getContext&&(l=i,i=a,a=void 0),new Promise(function(c,h){try{const y=o.create(i,l);c(s(y,a,l))}catch(y){h(y)}})}try{const c=o.create(i,l);d(null,s(c,a,l))}catch(c){d(c)}}return ge.create=o.create,ge.toCanvas=t.bind(null,r.render),ge.toDataURL=t.bind(null,r.renderToDataURL),ge.toString=t.bind(null,function(s,a,i){return n.render(s,i)}),ge}var Uo=_o();const Do=co(Uo),Se=e=>{if(!e||typeof e!="string")throw new Error("Invalid user ID");if(!/^[a-zA-Z0-9]{28}$/.test(e))throw new Error("Invalid user ID format");return!0},tn=e=>{if(!e||typeof e!="string")throw new Error("Invalid admin ID");if(!/^[a-zA-Z0-9]{28}$/.test(e))throw new Error("Invalid admin ID format");return!0},pn=(e,o=1e3)=>!e||typeof e!="string"?"":e.replace(/[<>"'&]/g,"").substring(0,o).trim(),nn=e=>{const o=pn(e,500);if(o.length<3)throw new Error("Reason must be at least 3 characters long");return o};class Mo{async checkUserBlockingStatus(o){try{Se(o),console.log("🔍 Checking blocking status for user");const r=be(we,"users",o),n=await pt(r);if(!n.exists())return console.log("⚠️ User document not found"),{isBlocked:!1,blockingDetails:null,error:"User not found"};const t=n.data();if(t.blockedFromGatePasses===!0){const a={blockedAt:t.blockedFromGatePassesAt,blockedBy:t.blockedFromGatePassesBy,reason:pn(t.blockedFromGatePassesReason)||"No reason provided",blockedUntil:t.blockedFromGatePassesUntil||null};if(a.blockedUntil){const i=a.blockedUntil.toDate?a.blockedUntil.toDate():new Date(a.blockedUntil);if(new Date>i)return await this.unblockUserFromGatePasses(o,"system","Blocking period expired"),{isBlocked:!1,blockingDetails:null}}return console.log("🚫 User is blocked from generating gate passes"),{isBlocked:!0,blockingDetails:a}}return console.log("✅ User is not blocked from generating gate passes"),{isBlocked:!1,blockingDetails:null}}catch{return console.error("❌ Error checking user blocking status"),{isBlocked:!1,blockingDetails:null,error:"Unable to check blocking status"}}}async blockUserFromGatePasses(o,r,n,t=null){try{Se(o),tn(r);const s=nn(n);console.log("🚫 Blocking user from gate passes");const a=be(we,"users",o),i={blockedFromGatePasses:!0,blockedFromGatePassesAt:Ee(),blockedFromGatePassesBy:r,blockedFromGatePassesReason:s,updatedAt:Ee()};return t&&(i.blockedFromGatePassesUntil=t),await vt(a,i),console.log("✅ User blocked from gate passes successfully"),!0}catch{throw console.error("❌ Error blocking user from gate passes"),new Error("Failed to block user")}}async unblockUserFromGatePasses(o,r,n){try{Se(o),tn(r);const t=nn(n);console.log("✅ Unblocking user from gate passes");const s=be(we,"users",o),a={blockedFromGatePasses:!1,unblockedFromGatePassesAt:Ee(),unblockedFromGatePassesBy:r,unblockedFromGatePassesReason:t,blockedFromGatePassesAt:null,blockedFromGatePassesBy:null,blockedFromGatePassesReason:null,blockedFromGatePassesUntil:null,updatedAt:Ee()};return await vt(s,a),console.log("✅ User unblocked from gate passes successfully"),!0}catch{throw console.error("❌ Error unblocking user from gate passes"),new Error("Failed to unblock user")}}async checkUserEligibility(o){try{Se(o),console.log("🔍 Checking user eligibility for guest passes");const r=be(we,"users",o),n=await pt(r);if(!n.exists())return{success:!1,error:"User not found",message:"User not found",data:{canGenerate:!1,reason:"user_not_found",user:null}};const t=n.data();return t.blockedFromGatePasses===!0?{success:!1,error:"User blocked",message:"User is blocked from generating passes",data:{canGenerate:!1,reason:"blocked",user:t}}:{success:!0,error:null,message:"User is eligible to generate passes",data:{canGenerate:!0,reason:"eligible",user:t}}}catch{return console.error("❌ Error checking user eligibility"),{success:!1,error:"Check failed",message:"Unable to check user eligibility",data:{canGenerate:!1,reason:"error",user:null}}}}getBlockingMessage(o){if(!o)return{title:"Access Denied",message:"You are not allowed to generate gate passes at this time.",type:"warning"};const{reason:r,blockedUntil:n}=o;let t=`You are blocked from generating gate passes.

Reason: ${r}`;if(n){const s=n.toDate?n.toDate():new Date(n);t+=`

Blocking will end on: ${s.toLocaleString()}`}else t+=`

This is a permanent block.`;return t+=`

You can still use your existing gate passes and access the gate directly.`,{title:"Gate Pass Generation Blocked",message:t,type:"warning"}}}const Be=new Mo,on=e=>{if(!e||typeof e!="string")throw new Error("Phone number is required");const o=e.replace(/\D/g,"");if(o.length<10||o.length>15)throw new Error("Invalid phone number format");return o},ae=(e,o=1e3)=>!e||typeof e!="string"?"":e.replace(/[<>"'&]/g,"").substring(0,o).trim(),Io=e=>{if(!e||typeof e!="object")throw new Error("Invalid pass data");if(!e.guestName||!e.code||!e.validUntil)throw new Error("Pass data is incomplete");return{guestName:ae(e.guestName,100),purpose:ae(e.purpose,200),code:ae(e.code,50),validUntil:e.validUntil}};class Lo{async sendGatePassViaWhatsApp(o,r){try{const n=Io(o),t=on(r),s=this.formatPhoneNumber(t),a=this.createGatePassMessage(n),i=this.createWhatsAppUrl(s,a);return console.log("📱 Sending gate pass via WhatsApp"),Ae.isNativePlatform()?await this.openWhatsAppNative(i):await this.openWhatsAppWeb(i)}catch{throw console.error("❌ Error sending gate pass via WhatsApp"),new Error("Failed to send via WhatsApp")}}formatPhoneNumber(o){let r=o.replace(/\D/g,"");if(r.length===10&&(r="1"+r),r.length<10||r.length>15)throw new Error("Invalid phone number format");return r}createGatePassMessage(o){const r=new Date(o.validUntil).toLocaleString(),n=ae(o.guestName,100),t=ae(o.purpose,200),s=ae(o.code,50);return`🚪 *Gate Pass for ${n}*

📋 *Pass Details:*
• Guest: ${n}
• Purpose: ${t}
• Valid Until: ${r}
• Pass Code: ${s}

📱 *Instructions:*
1. Show this message at the gate
2. The QR code will be sent separately
3. Present valid ID when requested

⚠️ *Important:*
• This pass is valid only for the specified time
• Do not share this pass with others
• Contact the property management if you have issues

---
Sent via PRE Group Mobile App`}createWhatsAppUrl(o,r){if(!/^\d{10,15}$/.test(o))throw new Error("Invalid phone number format for WhatsApp URL");const n=encodeURIComponent(r);return`https://wa.me/${o}?text=${n}`}async openWhatsAppNative(o){try{if(window.open)return window.open(o,"_blank"),{success:!0,message:"WhatsApp opened successfully"};throw new Error("Unable to open WhatsApp on this platform")}catch{throw console.error("❌ Error opening WhatsApp on native"),new Error("Failed to open WhatsApp")}}async openWhatsAppWeb(o){try{if(!window.open(o,"_blank","noopener,noreferrer"))throw new Error("Popup blocked. Please allow popups for this site.");return{success:!0,message:"WhatsApp Web opened successfully"}}catch{throw console.error("❌ Error opening WhatsApp Web"),new Error("Failed to open WhatsApp Web")}}async isWhatsAppAvailable(){try{return Ae.isNativePlatform()?!0:typeof window<"u"&&typeof window.open=="function"}catch{return console.error("❌ Error checking WhatsApp availability"),!1}}async sendQRCodeViaWhatsApp(o,r,n){try{const t=on(o),a=`📱 *QR Code for ${ae(n,100)}*

The QR code for the gate pass has been generated. Please save this image and show it at the gate.

⚠️ *Note:* Due to platform limitations, the QR code image cannot be sent directly through this app. Please use the share function to send it via other means.`,i=this.formatPhoneNumber(t),l=this.createWhatsAppUrl(i,a);return Ae.isNativePlatform()?await this.openWhatsAppNative(l):await this.openWhatsAppWeb(l)}catch{throw console.error("❌ Error sending QR code via WhatsApp"),new Error("Failed to send QR code via WhatsApp")}}}const rn=new Lo,qo={class:"access-page"},Fo={key:0,class:"blocking-warning-bar"},$o={class:"blocking-content"},zo={class:"blocking-text"},Go={class:"blocking-title"},Wo={class:"blocking-message"},xo={class:"tabs-container"},Vo={class:"tabs-nav"},Ho={class:"tab-label"},Oo={class:"tab-label"},Qo={class:"tab-content"},Ko={key:0,class:"ble-content"},jo={class:"ble-control-section"},Jo={class:"bluetooth-icon-container"},Yo={key:0,class:"pulse-ring"},Xo={class:"status-section"},Zo={key:0,class:"status-indicator connected"},er={key:1,class:"status-indicator connecting"},tr={key:2,class:"status-indicator disconnected"},nr={key:3,class:"device-name"},or={key:4,class:"saved-device-hint"},rr={key:0,class:"warning-banner"},sr={class:"warning-text"},ar={class:"button-group"},ir={key:3,class:"secondary-actions"},lr={key:1,class:"passes-content"},cr={class:"passes-section"},ur={class:"generate-section"},dr={key:0,class:"generate-disabled-hint"},fr={key:0,class:"passes-list"},gr={class:"pass-info"},hr={class:"pass-header"},mr={class:"pass-details"},pr={class:"detail-row"},vr={class:"detail-row"},yr={class:"pass-qr"},br={key:1,class:"no-passes-message"},wr={class:"text-h6"},ve="12345678-1234-5678-1234-56789abcdef0",sn="abcdefab-cdef-1234-5678-abcdefabcdef",an="OPEN123",Er=Object.assign({name:"AccessPage"},{__name:"Access",setup(e){const o=O("ble"),{isConnected:r,isConnecting:n,isBLESupported:t,deviceName:s,checkBLESupport:a,connect:i,write:l,disconnect:d}=Hn(),g=O(!1),f=O(""),m=O(""),c=O(!1),h=O(!1),y=O(null),D=O([]),A=O(!1),w=O({guestName:"",purpose:"",validUntil:"",phoneNumber:""}),p=O({isBlocked:!1,blockingDetails:null,loading:!0}),C=new Map,R=async()=>{try{console.log("🔵 Starting BLE connection process..."),f.value="",await i(ve)?(console.log("✅ Successfully connected to gate device"),y.value={name:s.value,serviceUUID:ve,timestamp:Date.now()},localStorage.setItem("lastGateDevice",JSON.stringify(y.value)),f.value="Successfully connected to gate device",m.value="success",setTimeout(()=>{f.value==="Successfully connected to gate device"&&(f.value="")},3e3)):(console.log("❌ Failed to connect to gate device"),f.value="Failed to connect. Please try again.",m.value="error")}catch(u){console.error("❌ Connection error:",u),f.value=u.message||"Connection failed",m.value="error"}},b=async()=>{try{if(h.value=!0,f.value="Connecting to gate...",m.value="info",!await i(ve)){h.value=!1,f.value="Failed to connect. Please try again.",m.value="error";return}g.value=!0,f.value="Opening gate...",await l(ve,sn,an)?(console.log("✅ Gate opened via quick action"),f.value="Gate opened successfully! 🎉",m.value="success",setTimeout(async()=>{await d(),f.value=""},3e3)):(f.value="Failed to open gate. Please try again.",m.value="error")}catch(u){console.error("❌ Quick open error:",u),f.value=u.message||"Quick open failed",m.value="error"}finally{h.value=!1,g.value=!1}},E=()=>{y.value=null,localStorage.removeItem("lastGateDevice"),H.create({type:"info",message:"Device forgotten. You can connect to a new device.",position:"top",timeout:2e3})},k=async()=>{console.log("🔌 Disconnecting from gate device..."),f.value="",await d()},v=async()=>{try{g.value=!0,f.value="",console.log("🚪 Sending open gate command..."),await l(ve,sn,an)?(console.log("✅ Gate command sent successfully"),f.value="Gate opened successfully! 🎉",m.value="success",setTimeout(()=>{f.value.includes("Gate opened successfully")&&(f.value="")},5e3)):(console.log("❌ Failed to send gate command"),f.value="Failed to open gate. Please try again.",m.value="error")}catch(u){console.error("❌ Error opening gate:",u),f.value=u.message||"Failed to open gate",m.value="error"}finally{g.value=!1}},T=async()=>{try{if(p.value.loading=!0,!Z.currentUser){p.value={isBlocked:!1,blockingDetails:null,loading:!1};return}const u=await Be.checkUserBlockingStatus(Z.currentUser.uid);p.value={...u,loading:!1},console.log("🔍 User eligibility checked:",p.value)}catch(u){console.error("❌ Error checking user eligibility:",u),p.value={isBlocked:!1,blockingDetails:null,loading:!1,error:u.message}}},P=(u,B)=>{u&&C.set(B,u)},N=async()=>{try{if(p.value.isBlocked){const F=Be.getBlockingMessage(p.value.blockingDetails);H.create({type:"warning",message:F.message,position:"top",timeout:5e3,actions:[{label:"OK",color:"white"}]});return}if(!w.value.guestName||w.value.guestName.trim().length<2){H.create({type:"negative",message:"Guest name must be at least 2 characters long",position:"top",timeout:3e3});return}if(!w.value.validUntil){H.create({type:"negative",message:"Valid until date is required",position:"top",timeout:3e3});return}if(w.value.phoneNumber&&w.value.phoneNumber.trim()&&!/^[+]?[1-9][\d]{0,15}$/.test(w.value.phoneNumber.replace(/\s/g,""))){H.create({type:"negative",message:"Please enter a valid phone number",position:"top",timeout:3e3});return}const u=w.value.guestName.trim().substring(0,100),B=(w.value.purpose||"Guest Visit").trim().substring(0,200),U=w.value.phoneNumber?w.value.phoneNumber.trim().substring(0,20):null,z={id:Date.now().toString(),guestName:u,purpose:B,validUntil:new Date(w.value.validUntil).toISOString(),status:"active",createdAt:new Date().toISOString(),code:`GATE-${Math.random().toString(36).substr(2,9).toUpperCase()}`,phoneNumber:U};if(D.value.push(z),Z.currentUser?.uid){const F=`gatePasses_${Z.currentUser.uid}`;localStorage.setItem(F,JSON.stringify(D.value))}if(w.value={guestName:"",purpose:"",validUntil:"",phoneNumber:""},A.value=!1,await at(),await S(z),z.phoneNumber&&z.phoneNumber.trim())try{await rn.sendGatePassViaWhatsApp(z,z.phoneNumber),H.create({type:"positive",message:"Pass generated and sent via WhatsApp!",position:"top",timeout:3e3})}catch(F){console.warn("⚠️ WhatsApp sending failed:",F),H.create({type:"positive",message:"Pass generated successfully (WhatsApp sending failed)",position:"top",timeout:3e3})}else H.create({type:"positive",message:"Pass generated successfully",position:"top",timeout:2e3})}catch(u){console.error("Error generating pass:",u),H.create({type:"negative",message:u.message||"Failed to generate pass",position:"top",timeout:3e3})}},S=async u=>{try{const B=C.get(u.id);if(!B){console.warn("⚠️ Canvas not found for pass:",u.id);return}const U=JSON.stringify({code:u.code,guestName:u.guestName,validUntil:u.validUntil});console.log("📱 Generating QR code for:",u.guestName),await Do.toCanvas(B,U,{width:150,margin:1,color:{dark:"#000000",light:"#FFFFFF"}}),console.log("✅ QR code generated successfully for:",u.guestName)}catch(B){console.error("❌ Error generating QR code for pass:",u.id,B)}},_=u=>{if(D.value=D.value.filter(B=>B.id!==u),Z.currentUser?.uid){const B=`gatePasses_${Z.currentUser.uid}`;localStorage.setItem(B,JSON.stringify(D.value))}C.delete(u),H.create({type:"info",message:"Pass deleted",position:"top",timeout:2e3})},Q=async u=>{const B=C.get(u.id);if(!B){console.error("Canvas not found for pass:",u.id),H.create({type:"negative",message:"QR code not ready. Please try again.",position:"top",timeout:2e3});return}try{if(Ae.isNativePlatform()){const U=B.toDataURL("image/png");try{await lo.share({title:`Gate Pass for ${u.guestName}`,text:`Gate Pass Code: ${u.code}
Valid until: ${se(u.validUntil)}`,url:U,dialogTitle:"Share Gate Pass"}),H.create({type:"positive",message:"Pass shared successfully",position:"top",timeout:2e3})}catch(z){console.warn("Share plugin failed, falling back to download:",z),de(B,u.guestName)}}else de(B,u.guestName)}catch(U){console.error("Error sharing pass:",U),H.create({type:"negative",message:"Failed to share pass. Please try again.",position:"top",timeout:3e3})}},K=async u=>{try{if(!u.phoneNumber||!u.phoneNumber.trim()){H.create({type:"warning",message:"Phone number is required to send via WhatsApp",position:"top",timeout:3e3});return}await rn.sendGatePassViaWhatsApp(u,u.phoneNumber),H.create({type:"positive",message:"Pass sent via WhatsApp!",position:"top",timeout:2e3})}catch(B){console.error("Error sending pass via WhatsApp:",B),H.create({type:"negative",message:"Failed to send via WhatsApp. Please try again.",position:"top",timeout:3e3})}},de=(u,B)=>{try{const U=u.toDataURL("image/png"),z=document.createElement("a");z.href=U,z.download=`gate-pass-${B.replace(/\s+/g,"-")}.png`,document.body.appendChild(z),z.click(),document.body.removeChild(z),H.create({type:"positive",message:"QR code downloaded",position:"top",timeout:2e3})}catch(U){throw console.error("Error downloading QR code:",U),U}},se=u=>new Date(u).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return ie(()=>Z.currentUser?.uid,(u,B)=>{u!==B&&(console.log("👤 User changed, clearing passes"),D.value=[],C.clear())}),cn(async()=>{console.log("🚀 AccessPage mounted");try{await a(),c.value=!0,console.log("✅ BLE support check completed")}catch(u){console.error("❌ Error checking BLE support:",u),c.value=!0}try{await T(),console.log("✅ User blocking status checked")}catch(u){console.error("❌ Error checking user blocking status:",u)}try{const u=localStorage.getItem("lastGateDevice");u&&(y.value=JSON.parse(u),console.log("✅ Loaded last connected device:",y.value.name))}catch(u){console.error("❌ Error loading last device:",u),y.value=null}try{if(Z.currentUser?.uid){const u=`gatePasses_${Z.currentUser.uid}`,B=localStorage.getItem(u);B?(D.value=JSON.parse(B),console.log(`✅ Loaded ${D.value.length} saved passes for user ${Z.currentUser.uid}`)):(console.log("📝 No saved passes found for user"),D.value=[])}else console.log("👤 No authenticated user, skipping pass loading"),D.value=[];if(D.value.length>0){await at();for(const u of D.value)try{await S(u)}catch(B){console.error("❌ Error generating QR for pass:",u.id,B)}}}catch(u){console.error("❌ Error loading passes:",u),D.value=[]}}),(u,B)=>(q(),V("div",qo,[M(zn,{title:u.$t("gateAccess")||"Gate Access",subtitle:u.$t("gateAccessDesc")||"Control your gate and manage access passes"},null,8,["title","subtitle"]),p.value.isBlocked&&!p.value.loading?(q(),V("div",Fo,[I("div",$o,[M(G,{name:"warning",size:"24px",class:"blocking-icon"}),I("div",zo,[I("div",Go,L($(Be).getBlockingMessage(p.value.blockingDetails).title),1),I("div",Wo,L($(Be).getBlockingMessage(p.value.blockingDetails).message),1)])])])):x("",!0),I("div",xo,[I("div",Vo,[I("button",{class:ke(["tab-btn",{active:o.value==="ble"}]),onClick:B[0]||(B[0]=U=>o.value="ble")},[M(G,{name:"bluetooth",class:"tab-icon"}),I("span",Ho,L(u.$t("bleControl")||"BLE Control"),1)],2),I("button",{class:ke(["tab-btn",{active:o.value==="passes"}]),onClick:B[1]||(B[1]=U=>o.value="passes")},[M(G,{name:"qr_code",class:"tab-icon"}),I("span",Oo,L(u.$t("gatePasses")||"Gate Passes"),1)],2)])]),I("div",Qo,[o.value==="ble"?(q(),V("div",Ko,[I("div",jo,[I("div",Jo,[I("div",{class:ke(["bluetooth-icon",{connected:$(r),connecting:$(n)}])},[M(G,{name:"bluetooth",size:"48px"}),$(n)?(q(),V("div",Yo)):x("",!0)],2)]),I("div",Xo,[$(r)?(q(),V("div",Zo,[M(G,{name:"check_circle",size:"20px"}),I("span",null,L(u.$t("connected")||"Connected"),1)])):$(n)?(q(),V("div",er,[M(On,{size:"20px",color:"primary"}),I("span",null,L(u.$t("connecting")||"Connecting..."),1)])):(q(),V("div",tr,[M(G,{name:"cancel",size:"20px"}),I("span",null,L(u.$t("disconnected")||"Disconnected"),1)])),$(s)?(q(),V("div",nr,[M(G,{name:"devices",size:"16px"}),I("span",null,L($(s)),1)])):x("",!0),y.value&&!$(r)?(q(),V("div",or,[M(G,{name:"history",size:"14px"}),I("span",null,L(u.$t("lastDevice")||"Last device")+": "+L(y.value.name),1)])):x("",!0)]),!$(t)&&c.value?(q(),V("div",rr,[M(G,{name:"warning",size:"24px"}),I("div",sr,[I("strong",null,L(u.$t("bleNotSupported")||"Bluetooth Not Supported"),1),I("p",null,L(u.$t("bleNotSupportedDesc")||"Your device or browser does not support Bluetooth Low Energy."),1)])])):x("",!0),I("div",ar,[!$(r)&&y.value?(q(),oe(j,{key:0,unelevated:"",rounded:"",color:"positive",size:"lg",class:"action-button quick-action",loading:h.value||g.value,disable:h.value||g.value||c.value&&!$(t),onClick:b},{default:W(()=>[M(G,{name:"flash_on",size:"28px",left:""}),X(" "+L(u.$t("quickOpen")||"Quick Open Gate"),1)]),_:1},8,["loading","disable"])):x("",!0),!$(r)&&!y.value?(q(),oe(j,{key:1,unelevated:"",rounded:"",color:"primary",size:"lg",class:"action-button",loading:$(n),disable:$(n)||c.value&&!$(t),onClick:R},{default:W(()=>[M(G,{name:"bluetooth_searching",size:"24px",left:""}),X(" "+L(u.$t("connect")||"Connect to Gate"),1)]),_:1},8,["loading","disable"])):x("",!0),$(r)?(q(),oe(j,{key:2,unelevated:"",rounded:"",color:"positive",size:"lg",class:"action-button",loading:g.value,disable:g.value,onClick:v},{default:W(()=>[M(G,{name:"door_open",size:"28px",left:""}),X(" "+L(u.$t("openGate")||"Open Gate"),1)]),_:1},8,["loading","disable"])):x("",!0),$(r)||y.value?(q(),V("div",ir,[$(r)?(q(),oe(j,{key:0,flat:"",rounded:"",color:"negative",size:"sm",class:"secondary-button",onClick:k},{default:W(()=>[M(G,{name:"bluetooth_disabled",size:"18px",left:""}),X(" "+L(u.$t("disconnect")||"Disconnect"),1)]),_:1})):x("",!0),y.value&&!$(r)?(q(),oe(j,{key:1,flat:"",rounded:"",color:"primary",size:"sm",class:"secondary-button",loading:$(n),disable:$(n),onClick:R},{default:W(()=>[M(G,{name:"bluetooth_searching",size:"18px",left:""}),X(" "+L(u.$t("newConnection")||"New Device"),1)]),_:1},8,["loading","disable"])):x("",!0),y.value&&!$(r)?(q(),oe(j,{key:2,flat:"",rounded:"",color:"grey",size:"sm",class:"secondary-button",onClick:E},{default:W(()=>[M(G,{name:"delete_outline",size:"18px",left:""}),X(" "+L(u.$t("forget")||"Forget"),1)]),_:1})):x("",!0)])):x("",!0)]),f.value?(q(),V("div",{key:1,class:ke(["status-message",m.value])},[M(G,{name:m.value==="success"?"check_circle":"error",size:"20px"},null,8,["name"]),I("span",null,L(f.value),1)],2)):x("",!0)])])):x("",!0),o.value==="passes"?(q(),V("div",lr,[I("div",cr,[I("div",ur,[M(j,{unelevated:"",rounded:"",color:"primary",size:"lg",class:"generate-btn",disable:D.value.length>=10||p.value.isBlocked,onClick:B[2]||(B[2]=U=>A.value=!0)},{default:W(()=>[M(G,{name:"add_circle",size:"24px",left:""}),X(" "+L(u.$t("generatePass")||"Generate Pass")+" ("+L(D.value.length)+"/10) ",1)]),_:1},8,["disable"]),p.value.isBlocked?(q(),V("div",dr,[M(G,{name:"block",size:"16px"}),I("span",null,L(u.$t("generationBlocked")||"Pass generation is currently disabled"),1)])):x("",!0)]),D.value.length>0?(q(),V("div",fr,[(q(!0),V(Gn,null,Wn(D.value,U=>(q(),oe(bt,{key:U.id,class:"pass-card"},{default:W(()=>[M(Ie,{class:"pass-content"},{default:W(()=>[I("div",gr,[I("div",hr,[I("h3",null,L(U.guestName),1),M(Kn,{color:U.status==="active"?"positive":"negative",label:U.status},null,8,["color","label"])]),I("div",mr,[I("div",pr,[M(G,{name:"event",size:"16px"}),I("span",null,L(se(U.validUntil)),1)]),I("div",vr,[M(G,{name:"person",size:"16px"}),I("span",null,L(U.purpose),1)])])]),I("div",yr,[I("canvas",{ref_for:!0,ref:z=>P(z,U.id),class:"qr-canvas"},null,512)])]),_:2},1024),M(yt,{align:"right"},{default:W(()=>[M(j,{flat:"",color:"primary",icon:"share",onClick:z=>Q(U)},{default:W(()=>[X(L(u.$t("share")||"Share"),1)]),_:2},1032,["onClick"]),U.phoneNumber?(q(),oe(j,{key:0,flat:"",color:"positive",icon:"chat",onClick:z=>K(U)},{default:W(()=>[X(L(u.$t("whatsapp")||"WhatsApp"),1)]),_:2},1032,["onClick"])):x("",!0),M(j,{flat:"",color:"negative",icon:"delete",onClick:z=>_(U.id)},{default:W(()=>[X(L(u.$t("delete")||"Delete"),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(q(),V("div",br,[M(G,{name:"qr_code",size:"64px",color:"grey-5"}),I("h3",null,L(u.$t("noPassesFound")||"No Passes Found"),1),I("p",null,L(u.$t("createFirstPass")||"Create your first guest pass to get started"),1)]))])])):x("",!0)]),M(Vn,{modelValue:A.value,"onUpdate:modelValue":B[7]||(B[7]=U=>A.value=U)},{default:W(()=>[M(bt,{class:"generate-dialog"},{default:W(()=>[M(Ie,null,{default:W(()=>[I("div",wr,L(u.$t("generateNewPass")||"Generate New Pass"),1)]),_:1}),M(Ie,{class:"q-pt-none"},{default:W(()=>[M(Ce,{modelValue:w.value.guestName,"onUpdate:modelValue":B[3]||(B[3]=U=>w.value.guestName=U),label:u.$t("guestName")||"Guest Name",outlined:"",class:"q-mb-md"},null,8,["modelValue","label"]),M(Ce,{modelValue:w.value.purpose,"onUpdate:modelValue":B[4]||(B[4]=U=>w.value.purpose=U),label:u.$t("purpose")||"Purpose of Visit",outlined:"",class:"q-mb-md"},null,8,["modelValue","label"]),M(Ce,{modelValue:w.value.validUntil,"onUpdate:modelValue":B[5]||(B[5]=U=>w.value.validUntil=U),label:u.$t("validUntil")||"Valid Until",outlined:"",type:"datetime-local",class:"q-mb-md"},null,8,["modelValue","label"]),M(Ce,{modelValue:w.value.phoneNumber,"onUpdate:modelValue":B[6]||(B[6]=U=>w.value.phoneNumber=U),label:u.$t("phoneNumber")||"Phone Number (for WhatsApp)",outlined:"",class:"q-mb-md",type:"tel",hint:u.$t("phoneNumberHint")||"Optional: Enter phone number to send pass via WhatsApp"},null,8,["modelValue","label","hint"])]),_:1}),M(yt,{align:"right"},{default:W(()=>[xn(M(j,{flat:"",label:u.$t("cancel")||"Cancel",color:"primary"},null,8,["label"]),[[io]]),M(j,{unelevated:"",label:u.$t("generate")||"Generate",color:"primary",onClick:N,disable:!w.value.guestName||!w.value.validUntil},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),y.value&&!$(r)&&o.value==="ble"?(q(),oe(ao,{key:1,position:"bottom-right",offset:[18,18]},{default:W(()=>[M(j,{fab:"",icon:"flash_on",color:"positive",loading:h.value||g.value,disable:h.value||g.value,onClick:b,class:"fab-button"},{default:W(()=>[M(oo,{anchor:"top middle",self:"bottom middle",offset:[0,8]},{default:W(()=>[X(L(u.$t("quickOpen")||"Quick Open Gate"),1)]),_:1})]),_:1},8,["loading","disable"])]),_:1})):x("",!0)]))}}),Pr=$n(Er,[["__scopeId","data-v-c457140c"]]);export{Pr as default};
