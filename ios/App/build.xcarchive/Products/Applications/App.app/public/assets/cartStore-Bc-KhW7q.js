import{d as a}from"./index-BYuuB5GE.js";const l=a("cart",{state:()=>({items:[],isOpen:!1}),getters:{itemCount:e=>e.items.reduce((i,t)=>i+(t.quantity||0),0),subtotal:e=>e.items.reduce((i,t)=>i+(t.price||0)*(t.quantity||0),0),deliveryFee:e=>e.items.length>0&&e.items[0].storeDeliveryFee?e.items[0].storeDeliveryFee:e.items.reduce((t,s)=>t+(s.price||0)*(s.quantity||0),0)>50?0:5.99,total:e=>{const i=e.items.reduce((s,r)=>s+(r.price||0)*(r.quantity||0),0);let t=0;return e.items.length>0&&e.items[0].storeDeliveryFee?t=e.items[0].storeDeliveryFee:t=i>50?0:5.99,i+t}},actions:{addItem(e,i,t,s=0){const r=this.items.find(o=>o.id===e.id&&o.storeId===i);r?r.quantity+=1:this.items.push({...e,quantity:1,storeId:i,storeName:t,storeDeliveryFee:s}),this.persistCart()},removeItem(e){const i=this.items.findIndex(t=>t.id===e);i>-1&&(this.items.splice(i,1),this.persistCart())},updateQuantity(e,i){const t=this.items.find(s=>s.id===e);t&&(i<=0?this.removeItem(e):(t.quantity=i,this.persistCart()))},clearCart(){this.items=[],this.persistCart()},persistCart(){localStorage.setItem("shopping-cart",JSON.stringify(this.items))},loadCart(){try{const e=localStorage.getItem("shopping-cart");e&&(this.items=JSON.parse(e))}catch(e){console.error("Error loading cart from localStorage:",e),this.items=[]}}}});export{l as u};
