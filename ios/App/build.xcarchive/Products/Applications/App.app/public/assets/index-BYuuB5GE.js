const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/web-DNHb57GS.js","assets/index.esm2017-CIdvQvBW.js","assets/Access-DKYYg0k3.js","assets/useBluetooth-pIL8G3yN.js","assets/Access-CA9ZAtf1.css","assets/Services-DDg24ns8.js","assets/serviceCategoriesStore-BY_eSJkP.js","assets/ModalHeader-C7UKSo1F.js","assets/ModalHeader-TaVpmqri.css","assets/Services-Bw3P80M-.css","assets/ServiceCategoryDetails-CIbUNkT4.js","assets/ServiceCategoryDetails-DxaJ-wOI.css","assets/Requests-DU614TfF.js","assets/requestSubmissionService-CmTvgOhS.js","assets/Requests-DREOrCGm.css","assets/RequestCategoryDetails-icY-ty28.js","assets/RequestCategoryDetails-7UAowb1M.css","assets/StoresShopping-CdpQoioP.js","assets/StoresShopping-Cg-g1ZY4.css","assets/StoreDetails-EUCMz9NO.js","assets/cartStore-Bc-KhW7q.js","assets/StoreDetails-DVRSBomB.css","assets/ShoppingCart-_Tb9H7pa.js","assets/ShoppingCart-OyJSiKXR.css","assets/CourtBooking-LVJzwYLU.js","assets/bookingService-DFeujY8_.js","assets/CourtBooking-F8fu2bce.css","assets/AcademyBooking-D5pbeZVg.js","assets/AcademyBooking-D7MZqRqb.css","assets/AcademyPrograms-BhNWozmr.js","assets/AcademyPrograms-DnSDQuRW.css","assets/AcademyDetails-C1AIEsvY.js","assets/AcademyDetails-EzlVEShe.css","assets/AcademyRegistration-Brmi5f_F.js","assets/AcademyRegistration-EagB36uO.css","assets/MyBookings-T6njAyF0.js","assets/MyBookings-LEQNl6va.css","assets/Calendar-C7uGQjXV.js","assets/Calendar-Eg5Y3P7d.css","assets/Analytics-BJRI8fdP.js","assets/Analytics-DQsAgh6C.css","assets/News-CevX4Ze7.js","assets/News-DaglNgFP.css","assets/Complaints-B5xnRQ5q.js","assets/complaintStore-CQRCRmNB.js","assets/Complaints-p0_It7_8.css","assets/ComplaintChat-CpTZ76T-.js","assets/ComplaintChat-BRxJUwYD.css","assets/ViolationsPage-CvInbAj4.js","assets/ViolationsPage-n1lByRZ2.css","assets/ViolationChat-Cp1SZEtY.js","assets/ViolationChat-tn0RQdqM.css","assets/ServiceBookingChat-hQ4N7IAC.js","assets/SmartDevices-DI2N7h2F.js","assets/SmartDevices-h3jYAlIk.css","assets/GateControlPage-53WG7yQP.js","assets/GateControlPage-D1xKFK3n.css","assets/RequestChat-gSlj0Mn2.js","assets/fcm-B9gs-zVn.js"])))=>i.map(i=>d[i]);
const $S=(function(){const e=typeof document<"u"&&document.createElement("link").relList;return e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"})(),VS=function(t){return"/"+t},m1={},Se=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=a?.nonce||a?.getAttribute("nonce");s=i(n.map(u=>{if(u=VS(u),u in m1)return;m1[u]=!0;const h=u.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":$S,h||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),h)return new Promise((g,C)=>{p.addEventListener("load",g),p.addEventListener("error",()=>C(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})};/**
* @vue/shared v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Mg(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Et={},ua=[],as=()=>{},Iy=()=>!1,ch=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ng=t=>t.startsWith("onUpdate:"),sn=Object.assign,Og=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},jS=Object.prototype.hasOwnProperty,vt=(t,e)=>jS.call(t,e),$e=Array.isArray,da=t=>Nc(t)==="[object Map]",Ba=t=>Nc(t)==="[object Set]",v1=t=>Nc(t)==="[object Date]",He=t=>typeof t=="function",Ft=t=>typeof t=="string",Hr=t=>typeof t=="symbol",St=t=>t!==null&&typeof t=="object",Ry=t=>(St(t)||He(t))&&He(t.then)&&He(t.catch),Dy=Object.prototype.toString,Nc=t=>Dy.call(t),US=t=>Nc(t).slice(8,-1),xy=t=>Nc(t)==="[object Object]",$g=t=>Ft(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ul=Mg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),uh=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},FS=/-(\w)/g,Tr=uh(t=>t.replace(FS,(e,n)=>n?n.toUpperCase():"")),BS=/\B([A-Z])/g,qo=uh(t=>t.replace(BS,"-$1").toLowerCase()),dh=uh(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ef=uh(t=>t?`on${dh(t)}`:""),Eo=(t,e)=>!Object.is(t,e),Ju=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},Ly=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},_d=t=>{const e=parseFloat(t);return isNaN(e)?t:e},qS=t=>{const e=Ft(t)?Number(t):NaN;return isNaN(e)?t:e};let w1;const hh=()=>w1||(w1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ei(t){if($e(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=Ft(r)?GS(r):Ei(r);if(s)for(const o in s)e[o]=s[o]}return e}else if(Ft(t)||St(t))return t}const HS=/;(?![^(]*\))/g,zS=/:([^]+)/,WS=/\/\*[^]*?\*\//g;function GS(t){const e={};return t.replace(WS,"").split(HS).forEach(n=>{if(n){const r=n.split(zS);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function be(t){let e="";if(Ft(t))e=t;else if($e(t))for(let n=0;n<t.length;n++){const r=be(t[n]);r&&(e+=r+" ")}else if(St(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const KS="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",QS=Mg(KS);function My(t){return!!t||t===""}function YS(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=Si(t[r],e[r]);return n}function Si(t,e){if(t===e)return!0;let n=v1(t),r=v1(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Hr(t),r=Hr(e),n||r)return t===e;if(n=$e(t),r=$e(e),n||r)return n&&r?YS(t,e):!1;if(n=St(t),r=St(e),n||r){if(!n||!r)return!1;const s=Object.keys(t).length,o=Object.keys(e).length;if(s!==o)return!1;for(const i in t){const a=t.hasOwnProperty(i),c=e.hasOwnProperty(i);if(a&&!c||!a&&c||!Si(t[i],e[i]))return!1}}return String(t)===String(e)}function Vg(t,e){return t.findIndex(n=>Si(n,e))}const Ny=t=>!!(t&&t.__v_isRef===!0),B=t=>Ft(t)?t:t==null?"":$e(t)||St(t)&&(t.toString===Dy||!He(t.toString))?Ny(t)?B(t.value):JSON.stringify(t,Oy,2):String(t),Oy=(t,e)=>Ny(e)?Oy(t,e.value):da(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],o)=>(n[Sf(r,o)+" =>"]=s,n),{})}:Ba(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Sf(n))}:Hr(e)?Sf(e):St(e)&&!$e(e)&&!xy(e)?String(e):e,Sf=(t,e="")=>{var n;return Hr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dn;class $y{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dn,!e&&Dn&&(this.index=(Dn.scopes||(Dn.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dn;try{return Dn=this,e()}finally{Dn=n}}}on(){++this._on===1&&(this.prevScope=Dn,Dn=this)}off(){this._on>0&&--this._on===0&&(Dn=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function jg(t){return new $y(t)}function Vy(){return Dn}function ZS(t,e=!1){Dn&&Dn.cleanups.push(t)}let At;const Af=new WeakSet;class jy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dn&&Dn.active&&Dn.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Af.has(this)&&(Af.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,y1(this),By(this);const e=At,n=Fr;At=this,Fr=!0;try{return this.fn()}finally{qy(this),At=e,Fr=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Bg(e);this.deps=this.depsTail=void 0,y1(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Af.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){wp(this)&&this.run()}get dirty(){return wp(this)}}let Uy=0,Fl,Bl;function Fy(t,e=!1){if(t.flags|=8,e){t.next=Bl,Bl=t;return}t.next=Fl,Fl=t}function Ug(){Uy++}function Fg(){if(--Uy>0)return;if(Bl){let e=Bl;for(Bl=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Fl;){let e=Fl;for(Fl=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function By(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function qy(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Bg(r),JS(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function wp(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Hy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===lc)||(t.globalVersion=lc,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!wp(t))))return;t.flags|=2;const e=t.dep,n=At,r=Fr;At=t,Fr=!0;try{By(t);const s=t.fn(t._value);(e.version===0||Eo(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{At=n,Fr=r,qy(t),t.flags&=-3}}function Bg(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)Bg(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function JS(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let Fr=!0;const zy=[];function Ws(){zy.push(Fr),Fr=!1}function Gs(){const t=zy.pop();Fr=t===void 0?!0:t}function y1(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=At;At=void 0;try{e()}finally{At=n}}}let lc=0;class XS{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class qg{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!At||!Fr||At===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==At)n=this.activeLink=new XS(At,this),At.deps?(n.prevDep=At.depsTail,At.depsTail.nextDep=n,At.depsTail=n):At.deps=At.depsTail=n,Wy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=At.depsTail,n.nextDep=void 0,At.depsTail.nextDep=n,At.depsTail=n,At.deps===n&&(At.deps=r)}return n}trigger(e){this.version++,lc++,this.notify(e)}notify(e){Ug();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Fg()}}}function Wy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Wy(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const kd=new WeakMap,vi=Symbol(""),yp=Symbol(""),cc=Symbol("");function Ln(t,e,n){if(Fr&&At){let r=kd.get(t);r||kd.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new qg),s.map=r,s.key=n),s.track()}}function Rs(t,e,n,r,s,o){const i=kd.get(t);if(!i){lc++;return}const a=c=>{c&&c.trigger()};if(Ug(),e==="clear")i.forEach(a);else{const c=$e(t),u=c&&$g(n);if(c&&n==="length"){const h=Number(r);i.forEach((f,p)=>{(p==="length"||p===cc||!Hr(p)&&p>=h)&&a(f)})}else switch((n!==void 0||i.has(void 0))&&a(i.get(n)),u&&a(i.get(cc)),e){case"add":c?u&&a(i.get("length")):(a(i.get(vi)),da(t)&&a(i.get(yp)));break;case"delete":c||(a(i.get(vi)),da(t)&&a(i.get(yp)));break;case"set":da(t)&&a(i.get(vi));break}}Fg()}function eA(t,e){const n=kd.get(t);return n&&n.get(e)}function zi(t){const e=Ge(t);return e===t?e:(Ln(e,"iterate",cc),Er(t)?e:e.map(bn))}function fh(t){return Ln(t=Ge(t),"iterate",cc),t}const tA={__proto__:null,[Symbol.iterator](){return Tf(this,Symbol.iterator,bn)},concat(...t){return zi(this).concat(...t.map(e=>$e(e)?zi(e):e))},entries(){return Tf(this,"entries",t=>(t[1]=bn(t[1]),t))},every(t,e){return ks(this,"every",t,e,void 0,arguments)},filter(t,e){return ks(this,"filter",t,e,n=>n.map(bn),arguments)},find(t,e){return ks(this,"find",t,e,bn,arguments)},findIndex(t,e){return ks(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return ks(this,"findLast",t,e,bn,arguments)},findLastIndex(t,e){return ks(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return ks(this,"forEach",t,e,void 0,arguments)},includes(...t){return Pf(this,"includes",t)},indexOf(...t){return Pf(this,"indexOf",t)},join(t){return zi(this).join(t)},lastIndexOf(...t){return Pf(this,"lastIndexOf",t)},map(t,e){return ks(this,"map",t,e,void 0,arguments)},pop(){return wl(this,"pop")},push(...t){return wl(this,"push",t)},reduce(t,...e){return _1(this,"reduce",t,e)},reduceRight(t,...e){return _1(this,"reduceRight",t,e)},shift(){return wl(this,"shift")},some(t,e){return ks(this,"some",t,e,void 0,arguments)},splice(...t){return wl(this,"splice",t)},toReversed(){return zi(this).toReversed()},toSorted(t){return zi(this).toSorted(t)},toSpliced(...t){return zi(this).toSpliced(...t)},unshift(...t){return wl(this,"unshift",t)},values(){return Tf(this,"values",bn)}};function Tf(t,e,n){const r=fh(t),s=r[e]();return r!==t&&!Er(t)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.value&&(o.value=n(o.value)),o}),s}const nA=Array.prototype;function ks(t,e,n,r,s,o){const i=fh(t),a=i!==t&&!Er(t),c=i[e];if(c!==nA[e]){const f=c.apply(t,o);return a?bn(f):f}let u=n;i!==t&&(a?u=function(f,p){return n.call(this,bn(f),p,t)}:n.length>2&&(u=function(f,p){return n.call(this,f,p,t)}));const h=c.call(i,u,r);return a&&s?s(h):h}function _1(t,e,n,r){const s=fh(t);let o=n;return s!==t&&(Er(t)?n.length>3&&(o=function(i,a,c){return n.call(this,i,a,c,t)}):o=function(i,a,c){return n.call(this,i,bn(a),c,t)}),s[e](o,...r)}function Pf(t,e,n){const r=Ge(t);Ln(r,"iterate",cc);const s=r[e](...n);return(s===-1||s===!1)&&Wg(n[0])?(n[0]=Ge(n[0]),r[e](...n)):s}function wl(t,e,n=[]){Ws(),Ug();const r=Ge(t)[e].apply(t,n);return Fg(),Gs(),r}const rA=Mg("__proto__,__v_isRef,__isVue"),Gy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Hr));function sA(t){Hr(t)||(t=String(t));const e=Ge(this);return Ln(e,"has",t),e.hasOwnProperty(t)}class Ky{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(s?o?pA:Jy:o?Zy:Yy).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=$e(e);if(!s){let c;if(i&&(c=tA[n]))return c;if(n==="hasOwnProperty")return sA}const a=Reflect.get(e,n,Ut(e)?e:r);return(Hr(n)?Gy.has(n):rA(n))||(s||Ln(e,"get",n),o)?a:Ut(a)?i&&$g(n)?a:a.value:St(a)?s?e_(a):Sn(a):a}}class Qy extends Ky{constructor(e=!1){super(!1,e)}set(e,n,r,s){let o=e[n];if(!this._isShallow){const c=Do(o);if(!Er(r)&&!Do(r)&&(o=Ge(o),r=Ge(r)),!$e(e)&&Ut(o)&&!Ut(r))return c||(o.value=r),!0}const i=$e(e)&&$g(n)?Number(n)<e.length:vt(e,n),a=Reflect.set(e,n,r,Ut(e)?e:s);return e===Ge(s)&&(i?Eo(r,o)&&Rs(e,"set",n,r):Rs(e,"add",n,r)),a}deleteProperty(e,n){const r=vt(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Rs(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Hr(n)||!Gy.has(n))&&Ln(e,"has",n),r}ownKeys(e){return Ln(e,"iterate",$e(e)?"length":vi),Reflect.ownKeys(e)}}class oA extends Ky{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const iA=new Qy,aA=new oA,lA=new Qy(!0);const _p=t=>t,Su=t=>Reflect.getPrototypeOf(t);function cA(t,e,n){return function(...r){const s=this.__v_raw,o=Ge(s),i=da(o),a=t==="entries"||t===Symbol.iterator&&i,c=t==="keys"&&i,u=s[t](...r),h=n?_p:e?bd:bn;return!e&&Ln(o,"iterate",c?yp:vi),{next(){const{value:f,done:p}=u.next();return p?{value:f,done:p}:{value:a?[h(f[0]),h(f[1])]:h(f),done:p}},[Symbol.iterator](){return this}}}}function Au(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function uA(t,e){const n={get(s){const o=this.__v_raw,i=Ge(o),a=Ge(s);t||(Eo(s,a)&&Ln(i,"get",s),Ln(i,"get",a));const{has:c}=Su(i),u=e?_p:t?bd:bn;if(c.call(i,s))return u(o.get(s));if(c.call(i,a))return u(o.get(a));o!==i&&o.get(s)},get size(){const s=this.__v_raw;return!t&&Ln(Ge(s),"iterate",vi),Reflect.get(s,"size",s)},has(s){const o=this.__v_raw,i=Ge(o),a=Ge(s);return t||(Eo(s,a)&&Ln(i,"has",s),Ln(i,"has",a)),s===a?o.has(s):o.has(s)||o.has(a)},forEach(s,o){const i=this,a=i.__v_raw,c=Ge(a),u=e?_p:t?bd:bn;return!t&&Ln(c,"iterate",vi),a.forEach((h,f)=>s.call(o,u(h),u(f),i))}};return sn(n,t?{add:Au("add"),set:Au("set"),delete:Au("delete"),clear:Au("clear")}:{add(s){!e&&!Er(s)&&!Do(s)&&(s=Ge(s));const o=Ge(this);return Su(o).has.call(o,s)||(o.add(s),Rs(o,"add",s,s)),this},set(s,o){!e&&!Er(o)&&!Do(o)&&(o=Ge(o));const i=Ge(this),{has:a,get:c}=Su(i);let u=a.call(i,s);u||(s=Ge(s),u=a.call(i,s));const h=c.call(i,s);return i.set(s,o),u?Eo(o,h)&&Rs(i,"set",s,o):Rs(i,"add",s,o),this},delete(s){const o=Ge(this),{has:i,get:a}=Su(o);let c=i.call(o,s);c||(s=Ge(s),c=i.call(o,s)),a&&a.call(o,s);const u=o.delete(s);return c&&Rs(o,"delete",s,void 0),u},clear(){const s=Ge(this),o=s.size!==0,i=s.clear();return o&&Rs(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=cA(s,t,e)}),n}function Hg(t,e){const n=uA(t,e);return(r,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(vt(n,s)&&s in r?n:r,s,o)}const dA={get:Hg(!1,!1)},hA={get:Hg(!1,!0)},fA={get:Hg(!0,!1)};const Yy=new WeakMap,Zy=new WeakMap,Jy=new WeakMap,pA=new WeakMap;function gA(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mA(t){return t.__v_skip||!Object.isExtensible(t)?0:gA(US(t))}function Sn(t){return Do(t)?t:zg(t,!1,iA,dA,Yy)}function Xy(t){return zg(t,!1,lA,hA,Zy)}function e_(t){return zg(t,!0,aA,fA,Jy)}function zg(t,e,n,r,s){if(!St(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=mA(t);if(o===0)return t;const i=s.get(t);if(i)return i;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function So(t){return Do(t)?So(t.__v_raw):!!(t&&t.__v_isReactive)}function Do(t){return!!(t&&t.__v_isReadonly)}function Er(t){return!!(t&&t.__v_isShallow)}function Wg(t){return t?!!t.__v_raw:!1}function Ge(t){const e=t&&t.__v_raw;return e?Ge(e):t}function Mi(t){return!vt(t,"__v_skip")&&Object.isExtensible(t)&&Ly(t,"__v_skip",!0),t}const bn=t=>St(t)?Sn(t):t,bd=t=>St(t)?e_(t):t;function Ut(t){return t?t.__v_isRef===!0:!1}function K(t){return n_(t,!1)}function t_(t){return n_(t,!0)}function n_(t,e){return Ut(t)?t:new vA(t,e)}class vA{constructor(e,n){this.dep=new qg,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ge(e),this._value=n?e:bn(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Er(e)||Do(e);e=r?e:Ge(e),Eo(e,n)&&(this._rawValue=e,this._value=r?e:bn(e),this.dep.trigger())}}function tt(t){return Ut(t)?t.value:t}const wA={get:(t,e,n)=>e==="__v_raw"?t:tt(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return Ut(s)&&!Ut(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function r_(t){return So(t)?t:new Proxy(t,wA)}function yA(t){const e=$e(t)?new Array(t.length):{};for(const n in t)e[n]=kA(t,n);return e}class _A{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return eA(Ge(this._object),this._key)}}function kA(t,e,n){const r=t[e];return Ut(r)?r:new _A(t,e,n)}class bA{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new qg(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=lc-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&At!==this)return Fy(this,!0),!0}get value(){const e=this.dep.track();return Hy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function CA(t,e,n=!1){let r,s;return He(t)?r=t:(r=t.get,s=t.set),new bA(r,s,n)}const Tu={},Cd=new WeakMap;let ai;function EA(t,e=!1,n=ai){if(n){let r=Cd.get(n);r||Cd.set(n,r=[]),r.push(t)}}function SA(t,e,n=Et){const{immediate:r,deep:s,once:o,scheduler:i,augmentJob:a,call:c}=n,u=R=>s?R:Er(R)||s===!1||s===0?Ds(R,1):Ds(R);let h,f,p,g,C=!1,T=!1;if(Ut(t)?(f=()=>t.value,C=Er(t)):So(t)?(f=()=>u(t),C=!0):$e(t)?(T=!0,C=t.some(R=>So(R)||Er(R)),f=()=>t.map(R=>{if(Ut(R))return R.value;if(So(R))return u(R);if(He(R))return c?c(R,2):R()})):He(t)?e?f=c?()=>c(t,2):t:f=()=>{if(p){Ws();try{p()}finally{Gs()}}const R=ai;ai=h;try{return c?c(t,3,[g]):t(g)}finally{ai=R}}:f=as,e&&s){const R=f,D=s===!0?1/0:s;f=()=>Ds(R(),D)}const v=Vy(),_=()=>{h.stop(),v&&v.active&&Og(v.effects,h)};if(o&&e){const R=e;e=(...D)=>{R(...D),_()}}let S=T?new Array(t.length).fill(Tu):Tu;const x=R=>{if(!(!(h.flags&1)||!h.dirty&&!R))if(e){const D=h.run();if(s||C||(T?D.some((L,b)=>Eo(L,S[b])):Eo(D,S))){p&&p();const L=ai;ai=h;try{const b=[D,S===Tu?void 0:T&&S[0]===Tu?[]:S,g];S=D,c?c(e,3,b):e(...b)}finally{ai=L}}}else h.run()};return a&&a(x),h=new jy(f),h.scheduler=i?()=>i(x,!1):x,g=R=>EA(R,!1,h),p=h.onStop=()=>{const R=Cd.get(h);if(R){if(c)c(R,4);else for(const D of R)D();Cd.delete(h)}},e?r?x(!0):S=h.run():i?i(x.bind(null,!0),!0):h.run(),_.pause=h.pause.bind(h),_.resume=h.resume.bind(h),_.stop=_,_}function Ds(t,e=1/0,n){if(e<=0||!St(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,Ut(t))Ds(t.value,e,n);else if($e(t))for(let r=0;r<t.length;r++)Ds(t[r],e,n);else if(Ba(t)||da(t))t.forEach(r=>{Ds(r,e,n)});else if(xy(t)){for(const r in t)Ds(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Ds(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Oc(t,e,n,r){try{return r?t(...r):t()}catch(s){ph(s,e,n)}}function zr(t,e,n,r){if(He(t)){const s=Oc(t,e,n,r);return s&&Ry(s)&&s.catch(o=>{ph(o,e,n)}),s}if($e(t)){const s=[];for(let o=0;o<t.length;o++)s.push(zr(t[o],e,n,r));return s}}function ph(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||Et;if(e){let a=e.parent;const c=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let f=0;f<h.length;f++)if(h[f](t,c,u)===!1)return}a=a.parent}if(o){Ws(),Oc(o,null,10,[t,c,u]),Gs();return}}AA(t,n,s,r,i)}function AA(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const qn=[];let ns=-1;const ha=[];let mo=null,Zi=0;const s_=Promise.resolve();let Ed=null;function fn(t){const e=Ed||s_;return t?e.then(this?t.bind(this):t):e}function TA(t){let e=ns+1,n=qn.length;for(;e<n;){const r=e+n>>>1,s=qn[r],o=uc(s);o<t||o===t&&s.flags&2?e=r+1:n=r}return e}function Gg(t){if(!(t.flags&1)){const e=uc(t),n=qn[qn.length-1];!n||!(t.flags&2)&&e>=uc(n)?qn.push(t):qn.splice(TA(e),0,t),t.flags|=1,o_()}}function o_(){Ed||(Ed=s_.then(a_))}function PA(t){$e(t)?ha.push(...t):mo&&t.id===-1?mo.splice(Zi+1,0,t):t.flags&1||(ha.push(t),t.flags|=1),o_()}function k1(t,e,n=ns+1){for(;n<qn.length;n++){const r=qn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;qn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function i_(t){if(ha.length){const e=[...new Set(ha)].sort((n,r)=>uc(n)-uc(r));if(ha.length=0,mo){mo.push(...e);return}for(mo=e,Zi=0;Zi<mo.length;Zi++){const n=mo[Zi];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}mo=null,Zi=0}}const uc=t=>t.id==null?t.flags&2?-1:1/0:t.id;function a_(t){try{for(ns=0;ns<qn.length;ns++){const e=qn[ns];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Oc(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ns<qn.length;ns++){const e=qn[ns];e&&(e.flags&=-2)}ns=-1,qn.length=0,i_(),Ed=null,(qn.length||ha.length)&&a_()}}let Cn=null,l_=null;function Sd(t){const e=Cn;return Cn=t,l_=t&&t.type.__scopeId||null,e}function br(t,e=Cn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&N1(-1);const o=Sd(e);let i;try{i=t(...s)}finally{Sd(o),r._d&&N1(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function dt(t,e){if(Cn===null)return t;const n=_h(Cn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,i,a,c=Et]=e[s];o&&(He(o)&&(o={mounted:o,updated:o}),o.deep&&Ds(i),r.push({dir:o,instance:n,value:i,oldValue:void 0,arg:a,modifiers:c}))}return t}function ei(t,e,n,r){const s=t.dirs,o=e&&e.dirs;for(let i=0;i<s.length;i++){const a=s[i];o&&(a.oldValue=o[i].value);let c=a.dir[r];c&&(Ws(),zr(c,n,8,[t.el,a,t,e]),Gs())}}const c_=Symbol("_vte"),u_=t=>t.__isTeleport,ql=t=>t&&(t.disabled||t.disabled===""),b1=t=>t&&(t.defer||t.defer===""),C1=t=>typeof SVGElement<"u"&&t instanceof SVGElement,E1=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,kp=(t,e)=>{const n=t&&t.to;return Ft(n)?e?e(n):null:n},d_={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,o,i,a,c,u){const{mc:h,pc:f,pbc:p,o:{insert:g,querySelector:C,createText:T,createComment:v}}=u,_=ql(e.props);let{shapeFlag:S,children:x,dynamicChildren:R}=e;if(t==null){const D=e.el=T(""),L=e.anchor=T("");g(D,n,r),g(L,n,r);const b=(y,P)=>{S&16&&(s&&s.isCE&&(s.ce._teleportTarget=y),h(x,y,P,s,o,i,a,c))},A=()=>{const y=e.target=kp(e.props,C),P=h_(y,e,T,g);y&&(i!=="svg"&&C1(y)?i="svg":i!=="mathml"&&E1(y)&&(i="mathml"),_||(b(y,P),Xu(e,!1)))};_&&(b(n,L),Xu(e,!0)),b1(e.props)?(e.el.__isMounted=!1,Bn(()=>{A(),delete e.el.__isMounted},o)):A()}else{if(b1(e.props)&&t.el.__isMounted===!1){Bn(()=>{d_.process(t,e,n,r,s,o,i,a,c,u)},o);return}e.el=t.el,e.targetStart=t.targetStart;const D=e.anchor=t.anchor,L=e.target=t.target,b=e.targetAnchor=t.targetAnchor,A=ql(t.props),y=A?n:L,P=A?D:b;if(i==="svg"||C1(L)?i="svg":(i==="mathml"||E1(L))&&(i="mathml"),R?(p(t.dynamicChildren,R,y,s,o,i,a),Jg(t,e,!0)):c||f(t,e,y,P,s,o,i,a,!1),_)A?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Pu(e,n,D,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const E=e.target=kp(e.props,C);E&&Pu(e,E,null,u,0)}else A&&Pu(e,L,b,u,1);Xu(e,_)}},remove(t,e,n,{um:r,o:{remove:s}},o){const{shapeFlag:i,children:a,anchor:c,targetStart:u,targetAnchor:h,target:f,props:p}=t;if(f&&(s(u),s(h)),o&&s(c),i&16){const g=o||!ql(p);for(let C=0;C<a.length;C++){const T=a[C];r(T,e,n,g,!!T.dynamicChildren)}}},move:Pu,hydrate:IA};function Pu(t,e,n,{o:{insert:r},m:s},o=2){o===0&&r(t.targetAnchor,e,n);const{el:i,anchor:a,shapeFlag:c,children:u,props:h}=t,f=o===2;if(f&&r(i,e,n),(!f||ql(h))&&c&16)for(let p=0;p<u.length;p++)s(u[p],e,n,2);f&&r(a,e,n)}function IA(t,e,n,r,s,o,{o:{nextSibling:i,parentNode:a,querySelector:c,insert:u,createText:h}},f){const p=e.target=kp(e.props,c);if(p){const g=ql(e.props),C=p._lpa||p.firstChild;if(e.shapeFlag&16)if(g)e.anchor=f(i(t),e,a(t),n,r,s,o),e.targetStart=C,e.targetAnchor=C&&i(C);else{e.anchor=i(t);let T=C;for(;T;){if(T&&T.nodeType===8){if(T.data==="teleport start anchor")e.targetStart=T;else if(T.data==="teleport anchor"){e.targetAnchor=T,p._lpa=e.targetAnchor&&i(e.targetAnchor);break}}T=i(T)}e.targetAnchor||h_(p,e,h,u),f(C&&i(C),e,p,n,r,s,o)}Xu(e,g)}return e.anchor&&i(e.anchor)}const bp=d_;function Xu(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function h_(t,e,n,r){const s=e.targetStart=n(""),o=e.targetAnchor=n("");return s[c_]=o,t&&(r(s,t),r(o,t)),o}const Ps=Symbol("_leaveCb"),Iu=Symbol("_enterCb");function f_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return ft(()=>{t.isMounted=!0}),Qr(()=>{t.isUnmounting=!0}),t}const mr=[Function,Array],p_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:mr,onEnter:mr,onAfterEnter:mr,onEnterCancelled:mr,onBeforeLeave:mr,onLeave:mr,onAfterLeave:mr,onLeaveCancelled:mr,onBeforeAppear:mr,onAppear:mr,onAfterAppear:mr,onAppearCancelled:mr},g_=t=>{const e=t.subTree;return e.component?g_(e.component):e},RA={name:"BaseTransition",props:p_,setup(t,{slots:e}){const n=It(),r=f_();return()=>{const s=e.default&&Kg(e.default(),!0);if(!s||!s.length)return;const o=m_(s),i=Ge(t),{mode:a}=i;if(r.isLeaving)return If(o);const c=S1(o);if(!c)return If(o);let u=dc(c,i,r,n,f=>u=f);c.type!==Nn&&Ai(c,u);let h=n.subTree&&S1(n.subTree);if(h&&h.type!==Nn&&!ci(c,h)&&g_(n).type!==Nn){let f=dc(h,i,r,n);if(Ai(h,f),a==="out-in"&&c.type!==Nn)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete f.afterLeave,h=void 0},If(o);a==="in-out"&&c.type!==Nn?f.delayLeave=(p,g,C)=>{const T=v_(r,h);T[String(h.key)]=h,p[Ps]=()=>{g(),p[Ps]=void 0,delete u.delayedLeave,h=void 0},u.delayedLeave=()=>{C(),delete u.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return o}}};function m_(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==Nn){e=n;break}}return e}const DA=RA;function v_(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function dc(t,e,n,r,s){const{appear:o,mode:i,persisted:a=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:f,onBeforeLeave:p,onLeave:g,onAfterLeave:C,onLeaveCancelled:T,onBeforeAppear:v,onAppear:_,onAfterAppear:S,onAppearCancelled:x}=e,R=String(t.key),D=v_(n,t),L=(y,P)=>{y&&zr(y,r,9,P)},b=(y,P)=>{const E=P[1];L(y,P),$e(y)?y.every(w=>w.length<=1)&&E():y.length<=1&&E()},A={mode:i,persisted:a,beforeEnter(y){let P=c;if(!n.isMounted)if(o)P=v||c;else return;y[Ps]&&y[Ps](!0);const E=D[R];E&&ci(t,E)&&E.el[Ps]&&E.el[Ps](),L(P,[y])},enter(y){let P=u,E=h,w=f;if(!n.isMounted)if(o)P=_||u,E=S||h,w=x||f;else return;let k=!1;const $=y[Iu]=U=>{k||(k=!0,U?L(w,[y]):L(E,[y]),A.delayedLeave&&A.delayedLeave(),y[Iu]=void 0)};P?b(P,[y,$]):$()},leave(y,P){const E=String(t.key);if(y[Iu]&&y[Iu](!0),n.isUnmounting)return P();L(p,[y]);let w=!1;const k=y[Ps]=$=>{w||(w=!0,P(),$?L(T,[y]):L(C,[y]),y[Ps]=void 0,D[E]===t&&delete D[E])};D[E]=t,g?b(g,[y,k]):k()},clone(y){const P=dc(y,e,n,r,s);return s&&s(P),P}};return A}function If(t){if(gh(t))return t=xo(t),t.children=null,t}function S1(t){if(!gh(t))return u_(t.type)&&t.children?m_(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&He(n.default))return n.default()}}function Ai(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Ai(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Kg(t,e=!1,n){let r=[],s=0;for(let o=0;o<t.length;o++){let i=t[o];const a=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===Oe?(i.patchFlag&128&&s++,r=r.concat(Kg(i.children,e,a))):(e||i.type!==Nn)&&r.push(a!=null?xo(i,{key:a}):i)}if(s>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function qa(t,e){return He(t)?sn({name:t.name},e,{setup:t}):t}function w_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function Hl(t,e,n,r,s=!1){if($e(t)){t.forEach((C,T)=>Hl(C,e&&($e(e)?e[T]:e),n,r,s));return}if(fa(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Hl(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?_h(r.component):r.el,i=s?null:o,{i:a,r:c}=t,u=e&&e.r,h=a.refs===Et?a.refs={}:a.refs,f=a.setupState,p=Ge(f),g=f===Et?Iy:C=>vt(p,C);if(u!=null&&u!==c){if(Ft(u))h[u]=null,g(u)&&(f[u]=null);else if(Ut(u)){u.value=null;const C=e;C.k&&(h[C.k]=null)}}if(He(c))Oc(c,a,12,[i,h]);else{const C=Ft(c),T=Ut(c);if(C||T){const v=()=>{if(t.f){const _=C?g(c)?f[c]:h[c]:c.value;if(s)$e(_)&&Og(_,o);else if($e(_))_.includes(o)||_.push(o);else if(C)h[c]=[o],g(c)&&(f[c]=h[c]);else{const S=[o];c.value=S,t.k&&(h[t.k]=S)}}else C?(h[c]=i,g(c)&&(f[c]=i)):T&&(c.value=i,t.k&&(h[t.k]=i))};i?(v.id=-1,Bn(v,n)):v()}}}hh().requestIdleCallback;hh().cancelIdleCallback;const fa=t=>!!t.type.__asyncLoader,gh=t=>t.type.__isKeepAlive;function Qg(t,e){y_(t,"a",e)}function mh(t,e){y_(t,"da",e)}function y_(t,e,n=On){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(vh(e,r,n),n){let s=n.parent;for(;s&&s.parent;)gh(s.parent.vnode)&&xA(r,e,n,s),s=s.parent}}function xA(t,e,n,r){const s=vh(e,t,r,!0);rr(()=>{Og(r[e],s)},n)}function vh(t,e,n=On,r=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{Ws();const a=Vc(n),c=zr(e,n,t,i);return a(),Gs(),c});return r?s.unshift(o):s.push(o),o}}const Xs=t=>(e,n=On)=>{(!pc||t==="sp")&&vh(t,(...r)=>e(...r),n)},LA=Xs("bm"),ft=Xs("m"),__=Xs("bu"),k_=Xs("u"),Qr=Xs("bum"),rr=Xs("um"),MA=Xs("sp"),NA=Xs("rtg"),OA=Xs("rtc");function $A(t,e=On){vh("ec",t,e)}const VA="components";function wh(t,e){return UA(VA,t,!0,e)||t}const jA=Symbol.for("v-ndc");function UA(t,e,n=!0,r=!1){const s=Cn||On;if(s){const o=s.type;{const a=TT(o,!1);if(a&&(a===e||a===Tr(e)||a===dh(Tr(e))))return o}const i=A1(s[t]||o[t],e)||A1(s.appContext[t],e);return!i&&r?o:i}}function A1(t,e){return t&&(t[e]||t[Tr(e)]||t[dh(Tr(e))])}function ot(t,e,n,r){let s;const o=n,i=$e(t);if(i||Ft(t)){const a=i&&So(t);let c=!1,u=!1;a&&(c=!Er(t),u=Do(t),t=fh(t)),s=new Array(t.length);for(let h=0,f=t.length;h<f;h++)s[h]=e(c?u?bd(bn(t[h])):bn(t[h]):t[h],h,void 0,o)}else if(typeof t=="number"){s=new Array(t);for(let a=0;a<t;a++)s[a]=e(a+1,a,void 0,o)}else if(St(t))if(t[Symbol.iterator])s=Array.from(t,(a,c)=>e(a,c,void 0,o));else{const a=Object.keys(t);s=new Array(a.length);for(let c=0,u=a.length;c<u;c++){const h=a[c];s[c]=e(t[h],h,c,o)}}else s=[];return s}function b_(t,e,n={},r,s){if(Cn.ce||Cn.parent&&fa(Cn.parent)&&Cn.parent.ce)return e!=="default"&&(n.name=e),M(),$n(Oe,null,[ze("slot",n,r)],64);let o=t[e];o&&o._c&&(o._d=!1),M();const i=o&&C_(o(n)),a=n.key||i&&i.key,c=$n(Oe,{key:(a&&!Hr(a)?a:`_${e}`)+(!i&&r?"_fb":"")},i||[],i&&t._===1?64:-2);return o&&o._c&&(o._d=!0),c}function C_(t){return t.some(e=>fc(e)?!(e.type===Nn||e.type===Oe&&!C_(e.children)):!0)?t:null}const Cp=t=>t?B_(t)?_h(t):Cp(t.parent):null,zl=sn(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cp(t.parent),$root:t=>Cp(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>S_(t),$forceUpdate:t=>t.f||(t.f=()=>{Gg(t.update)}),$nextTick:t=>t.n||(t.n=fn.bind(t.proxy)),$watch:t=>lT.bind(t)}),Rf=(t,e)=>t!==Et&&!t.__isScriptSetup&&vt(t,e),FA={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:o,accessCache:i,type:a,appContext:c}=t;let u;if(e[0]!=="$"){const g=i[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(Rf(r,e))return i[e]=1,r[e];if(s!==Et&&vt(s,e))return i[e]=2,s[e];if((u=t.propsOptions[0])&&vt(u,e))return i[e]=3,o[e];if(n!==Et&&vt(n,e))return i[e]=4,n[e];Ep&&(i[e]=0)}}const h=zl[e];let f,p;if(h)return e==="$attrs"&&Ln(t.attrs,"get",""),h(t);if((f=a.__cssModules)&&(f=f[e]))return f;if(n!==Et&&vt(n,e))return i[e]=4,n[e];if(p=c.config.globalProperties,vt(p,e))return p[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return Rf(s,e)?(s[e]=n,!0):r!==Et&&vt(r,e)?(r[e]=n,!0):vt(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o,type:i}},a){let c,u;return!!(n[a]||t!==Et&&a[0]!=="$"&&vt(t,a)||Rf(e,a)||(c=o[0])&&vt(c,a)||vt(r,a)||vt(zl,a)||vt(s.config.globalProperties,a)||(u=i.__cssModules)&&u[a])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:vt(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function T1(t){return $e(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Ep=!0;function BA(t){const e=S_(t),n=t.proxy,r=t.ctx;Ep=!1,e.beforeCreate&&P1(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:i,watch:a,provide:c,inject:u,created:h,beforeMount:f,mounted:p,beforeUpdate:g,updated:C,activated:T,deactivated:v,beforeDestroy:_,beforeUnmount:S,destroyed:x,unmounted:R,render:D,renderTracked:L,renderTriggered:b,errorCaptured:A,serverPrefetch:y,expose:P,inheritAttrs:E,components:w,directives:k,filters:$}=e;if(u&&qA(u,r,null),i)for(const ee in i){const N=i[ee];He(N)&&(r[ee]=N.bind(n))}if(s){const ee=s.call(n,n);St(ee)&&(t.data=Sn(ee))}if(Ep=!0,o)for(const ee in o){const N=o[ee],H=He(N)?N.bind(n,n):He(N.get)?N.get.bind(n,n):as,Y=!He(N)&&He(N.set)?N.set.bind(n):as,ne=G({get:H,set:Y});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>ne.value,set:Q=>ne.value=Q})}if(a)for(const ee in a)E_(a[ee],r,n,ee);if(c){const ee=He(c)?c.call(n):c;Reflect.ownKeys(ee).forEach(N=>{ed(N,ee[N])})}h&&P1(h,t,"c");function Z(ee,N){$e(N)?N.forEach(H=>ee(H.bind(n))):N&&ee(N.bind(n))}if(Z(LA,f),Z(ft,p),Z(__,g),Z(k_,C),Z(Qg,T),Z(mh,v),Z($A,A),Z(OA,L),Z(NA,b),Z(Qr,S),Z(rr,R),Z(MA,y),$e(P))if(P.length){const ee=t.exposed||(t.exposed={});P.forEach(N=>{Object.defineProperty(ee,N,{get:()=>n[N],set:H=>n[N]=H,enumerable:!0})})}else t.exposed||(t.exposed={});D&&t.render===as&&(t.render=D),E!=null&&(t.inheritAttrs=E),w&&(t.components=w),k&&(t.directives=k),y&&w_(t)}function qA(t,e,n=as){$e(t)&&(t=Sp(t));for(const r in t){const s=t[r];let o;St(s)?"default"in s?o=tr(s.from||r,s.default,!0):o=tr(s.from||r):o=tr(s),Ut(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[r]=o}}function P1(t,e,n){zr($e(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function E_(t,e,n,r){let s=r.includes(".")?$_(n,r):()=>n[r];if(Ft(t)){const o=e[t];He(o)&&Ve(s,o)}else if(He(t))Ve(s,t.bind(n));else if(St(t))if($e(t))t.forEach(o=>E_(o,e,n,r));else{const o=He(t.handler)?t.handler.bind(n):e[t.handler];He(o)&&Ve(s,o,t)}}function S_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,a=o.get(e);let c;return a?c=a:!s.length&&!n&&!r?c=e:(c={},s.length&&s.forEach(u=>Ad(c,u,i,!0)),Ad(c,e,i)),St(e)&&o.set(e,c),c}function Ad(t,e,n,r=!1){const{mixins:s,extends:o}=e;o&&Ad(t,o,n,!0),s&&s.forEach(i=>Ad(t,i,n,!0));for(const i in e)if(!(r&&i==="expose")){const a=HA[i]||n&&n[i];t[i]=a?a(t[i],e[i]):e[i]}return t}const HA={data:I1,props:R1,emits:R1,methods:Dl,computed:Dl,beforeCreate:Un,created:Un,beforeMount:Un,mounted:Un,beforeUpdate:Un,updated:Un,beforeDestroy:Un,beforeUnmount:Un,destroyed:Un,unmounted:Un,activated:Un,deactivated:Un,errorCaptured:Un,serverPrefetch:Un,components:Dl,directives:Dl,watch:WA,provide:I1,inject:zA};function I1(t,e){return e?t?function(){return sn(He(t)?t.call(this,this):t,He(e)?e.call(this,this):e)}:e:t}function zA(t,e){return Dl(Sp(t),Sp(e))}function Sp(t){if($e(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Un(t,e){return t?[...new Set([].concat(t,e))]:e}function Dl(t,e){return t?sn(Object.create(null),t,e):e}function R1(t,e){return t?$e(t)&&$e(e)?[...new Set([...t,...e])]:sn(Object.create(null),T1(t),T1(e??{})):e}function WA(t,e){if(!t)return e;if(!e)return t;const n=sn(Object.create(null),t);for(const r in e)n[r]=Un(t[r],e[r]);return n}function A_(){return{app:null,config:{isNativeTag:Iy,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GA=0;function KA(t,e){return function(r,s=null){He(r)||(r=sn({},r)),s!=null&&!St(s)&&(s=null);const o=A_(),i=new WeakSet,a=[];let c=!1;const u=o.app={_uid:GA++,_component:r,_props:s,_container:null,_context:o,_instance:null,version:IT,get config(){return o.config},set config(h){},use(h,...f){return i.has(h)||(h&&He(h.install)?(i.add(h),h.install(u,...f)):He(h)&&(i.add(h),h(u,...f))),u},mixin(h){return o.mixins.includes(h)||o.mixins.push(h),u},component(h,f){return f?(o.components[h]=f,u):o.components[h]},directive(h,f){return f?(o.directives[h]=f,u):o.directives[h]},mount(h,f,p){if(!c){const g=u._ceVNode||ze(r,s);return g.appContext=o,p===!0?p="svg":p===!1&&(p=void 0),t(g,h,p),c=!0,u._container=h,h.__vue_app__=u,_h(g.component)}},onUnmount(h){a.push(h)},unmount(){c&&(zr(a,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(h,f){return o.provides[h]=f,u},runWithContext(h){const f=wi;wi=u;try{return h()}finally{wi=f}}};return u}}let wi=null;function ed(t,e){if(On){let n=On.provides;const r=On.parent&&On.parent.provides;r===n&&(n=On.provides=Object.create(r)),n[t]=e}}function tr(t,e,n=!1){const r=It();if(r||wi){let s=wi?wi._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&He(e)?e.call(r&&r.proxy):e}}function QA(){return!!(It()||wi)}const T_={},P_=()=>Object.create(T_),I_=t=>Object.getPrototypeOf(t)===T_;function YA(t,e,n,r=!1){const s={},o=P_();t.propsDefaults=Object.create(null),R_(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:Xy(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function ZA(t,e,n,r){const{props:s,attrs:o,vnode:{patchFlag:i}}=t,a=Ge(s),[c]=t.propsOptions;let u=!1;if((r||i>0)&&!(i&16)){if(i&8){const h=t.vnode.dynamicProps;for(let f=0;f<h.length;f++){let p=h[f];if(yh(t.emitsOptions,p))continue;const g=e[p];if(c)if(vt(o,p))g!==o[p]&&(o[p]=g,u=!0);else{const C=Tr(p);s[C]=Ap(c,a,C,g,t,!1)}else g!==o[p]&&(o[p]=g,u=!0)}}}else{R_(t,e,s,o)&&(u=!0);let h;for(const f in a)(!e||!vt(e,f)&&((h=qo(f))===f||!vt(e,h)))&&(c?n&&(n[f]!==void 0||n[h]!==void 0)&&(s[f]=Ap(c,a,f,void 0,t,!0)):delete s[f]);if(o!==a)for(const f in o)(!e||!vt(e,f))&&(delete o[f],u=!0)}u&&Rs(t.attrs,"set","")}function R_(t,e,n,r){const[s,o]=t.propsOptions;let i=!1,a;if(e)for(let c in e){if(Ul(c))continue;const u=e[c];let h;s&&vt(s,h=Tr(c))?!o||!o.includes(h)?n[h]=u:(a||(a={}))[h]=u:yh(t.emitsOptions,c)||(!(c in r)||u!==r[c])&&(r[c]=u,i=!0)}if(o){const c=Ge(n),u=a||Et;for(let h=0;h<o.length;h++){const f=o[h];n[f]=Ap(s,c,f,u[f],t,!vt(u,f))}}return i}function Ap(t,e,n,r,s,o){const i=t[n];if(i!=null){const a=vt(i,"default");if(a&&r===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&He(c)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const h=Vc(s);r=u[n]=c.call(null,e),h()}}else r=c;s.ce&&s.ce._setProp(n,r)}i[0]&&(o&&!a?r=!1:i[1]&&(r===""||r===qo(n))&&(r=!0))}return r}const JA=new WeakMap;function D_(t,e,n=!1){const r=n?JA:e.propsCache,s=r.get(t);if(s)return s;const o=t.props,i={},a=[];let c=!1;if(!He(t)){const h=f=>{c=!0;const[p,g]=D_(f,e,!0);sn(i,p),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!o&&!c)return St(t)&&r.set(t,ua),ua;if($e(o))for(let h=0;h<o.length;h++){const f=Tr(o[h]);D1(f)&&(i[f]=Et)}else if(o)for(const h in o){const f=Tr(h);if(D1(f)){const p=o[h],g=i[f]=$e(p)||He(p)?{type:p}:sn({},p),C=g.type;let T=!1,v=!0;if($e(C))for(let _=0;_<C.length;++_){const S=C[_],x=He(S)&&S.name;if(x==="Boolean"){T=!0;break}else x==="String"&&(v=!1)}else T=He(C)&&C.name==="Boolean";g[0]=T,g[1]=v,(T||vt(g,"default"))&&a.push(f)}}const u=[i,a];return St(t)&&r.set(t,u),u}function D1(t){return t[0]!=="$"&&!Ul(t)}const Yg=t=>t==="_"||t==="_ctx"||t==="$stable",Zg=t=>$e(t)?t.map(ss):[ss(t)],XA=(t,e,n)=>{if(e._n)return e;const r=br((...s)=>Zg(e(...s)),n);return r._c=!1,r},x_=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Yg(s))continue;const o=t[s];if(He(o))e[s]=XA(s,o,r);else if(o!=null){const i=Zg(o);e[s]=()=>i}}},L_=(t,e)=>{const n=Zg(e);t.slots.default=()=>n},M_=(t,e,n)=>{for(const r in e)(n||!Yg(r))&&(t[r]=e[r])},eT=(t,e,n)=>{const r=t.slots=P_();if(t.vnode.shapeFlag&32){const s=e._;s?(M_(r,e,n),n&&Ly(r,"_",s,!0)):x_(e,r)}else e&&L_(t,e)},tT=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,i=Et;if(r.shapeFlag&32){const a=e._;a?n&&a===1?o=!1:M_(s,e,n):(o=!e.$stable,x_(e,s)),i=e}else e&&(L_(t,e),i={default:1});if(o)for(const a in s)!Yg(a)&&i[a]==null&&delete s[a]},Bn=gT;function nT(t){return rT(t)}function rT(t,e){const n=hh();n.__VUE__=!0;const{insert:r,remove:s,patchProp:o,createElement:i,createText:a,createComment:c,setText:u,setElementText:h,parentNode:f,nextSibling:p,setScopeId:g=as,insertStaticContent:C}=t,T=(z,W,te,de=null,ge=null,he=null,F=void 0,q=null,J=!!W.dynamicChildren)=>{if(z===W)return;z&&!ci(z,W)&&(de=se(z),Q(z,ge,he,!0),z=null),W.patchFlag===-2&&(J=!1,W.dynamicChildren=null);const{type:oe,ref:Re,shapeFlag:ve}=W;switch(oe){case $c:v(z,W,te,de);break;case Nn:_(z,W,te,de);break;case td:z==null&&S(W,te,de,F);break;case Oe:w(z,W,te,de,ge,he,F,q,J);break;default:ve&1?D(z,W,te,de,ge,he,F,q,J):ve&6?k(z,W,te,de,ge,he,F,q,J):(ve&64||ve&128)&&oe.process(z,W,te,de,ge,he,F,q,J,ye)}Re!=null&&ge?Hl(Re,z&&z.ref,he,W||z,!W):Re==null&&z&&z.ref!=null&&Hl(z.ref,null,he,z,!0)},v=(z,W,te,de)=>{if(z==null)r(W.el=a(W.children),te,de);else{const ge=W.el=z.el;W.children!==z.children&&u(ge,W.children)}},_=(z,W,te,de)=>{z==null?r(W.el=c(W.children||""),te,de):W.el=z.el},S=(z,W,te,de)=>{[z.el,z.anchor]=C(z.children,W,te,de,z.el,z.anchor)},x=({el:z,anchor:W},te,de)=>{let ge;for(;z&&z!==W;)ge=p(z),r(z,te,de),z=ge;r(W,te,de)},R=({el:z,anchor:W})=>{let te;for(;z&&z!==W;)te=p(z),s(z),z=te;s(W)},D=(z,W,te,de,ge,he,F,q,J)=>{W.type==="svg"?F="svg":W.type==="math"&&(F="mathml"),z==null?L(W,te,de,ge,he,F,q,J):y(z,W,ge,he,F,q,J)},L=(z,W,te,de,ge,he,F,q)=>{let J,oe;const{props:Re,shapeFlag:ve,transition:X,dirs:ae}=z;if(J=z.el=i(z.type,he,Re&&Re.is,Re),ve&8?h(J,z.children):ve&16&&A(z.children,J,null,de,ge,Df(z,he),F,q),ae&&ei(z,null,de,"created"),b(J,z,z.scopeId,F,de),Re){for(const Me in Re)Me!=="value"&&!Ul(Me)&&o(J,Me,null,Re[Me],he,de);"value"in Re&&o(J,"value",null,Re.value,he),(oe=Re.onVnodeBeforeMount)&&Xr(oe,de,z)}ae&&ei(z,null,de,"beforeMount");const Ae=sT(ge,X);Ae&&X.beforeEnter(J),r(J,W,te),((oe=Re&&Re.onVnodeMounted)||Ae||ae)&&Bn(()=>{oe&&Xr(oe,de,z),Ae&&X.enter(J),ae&&ei(z,null,de,"mounted")},ge)},b=(z,W,te,de,ge)=>{if(te&&g(z,te),de)for(let he=0;he<de.length;he++)g(z,de[he]);if(ge){let he=ge.subTree;if(W===he||j_(he.type)&&(he.ssContent===W||he.ssFallback===W)){const F=ge.vnode;b(z,F,F.scopeId,F.slotScopeIds,ge.parent)}}},A=(z,W,te,de,ge,he,F,q,J=0)=>{for(let oe=J;oe<z.length;oe++){const Re=z[oe]=q?vo(z[oe]):ss(z[oe]);T(null,Re,W,te,de,ge,he,F,q)}},y=(z,W,te,de,ge,he,F)=>{const q=W.el=z.el;let{patchFlag:J,dynamicChildren:oe,dirs:Re}=W;J|=z.patchFlag&16;const ve=z.props||Et,X=W.props||Et;let ae;if(te&&ti(te,!1),(ae=X.onVnodeBeforeUpdate)&&Xr(ae,te,W,z),Re&&ei(W,z,te,"beforeUpdate"),te&&ti(te,!0),(ve.innerHTML&&X.innerHTML==null||ve.textContent&&X.textContent==null)&&h(q,""),oe?P(z.dynamicChildren,oe,q,te,de,Df(W,ge),he):F||N(z,W,q,null,te,de,Df(W,ge),he,!1),J>0){if(J&16)E(q,ve,X,te,ge);else if(J&2&&ve.class!==X.class&&o(q,"class",null,X.class,ge),J&4&&o(q,"style",ve.style,X.style,ge),J&8){const Ae=W.dynamicProps;for(let Me=0;Me<Ae.length;Me++){const Be=Ae[Me],Rt=ve[Be],_t=X[Be];(_t!==Rt||Be==="value")&&o(q,Be,Rt,_t,ge,te)}}J&1&&z.children!==W.children&&h(q,W.children)}else!F&&oe==null&&E(q,ve,X,te,ge);((ae=X.onVnodeUpdated)||Re)&&Bn(()=>{ae&&Xr(ae,te,W,z),Re&&ei(W,z,te,"updated")},de)},P=(z,W,te,de,ge,he,F)=>{for(let q=0;q<W.length;q++){const J=z[q],oe=W[q],Re=J.el&&(J.type===Oe||!ci(J,oe)||J.shapeFlag&198)?f(J.el):te;T(J,oe,Re,null,de,ge,he,F,!0)}},E=(z,W,te,de,ge)=>{if(W!==te){if(W!==Et)for(const he in W)!Ul(he)&&!(he in te)&&o(z,he,W[he],null,ge,de);for(const he in te){if(Ul(he))continue;const F=te[he],q=W[he];F!==q&&he!=="value"&&o(z,he,q,F,ge,de)}"value"in te&&o(z,"value",W.value,te.value,ge)}},w=(z,W,te,de,ge,he,F,q,J)=>{const oe=W.el=z?z.el:a(""),Re=W.anchor=z?z.anchor:a("");let{patchFlag:ve,dynamicChildren:X,slotScopeIds:ae}=W;ae&&(q=q?q.concat(ae):ae),z==null?(r(oe,te,de),r(Re,te,de),A(W.children||[],te,Re,ge,he,F,q,J)):ve>0&&ve&64&&X&&z.dynamicChildren?(P(z.dynamicChildren,X,te,ge,he,F,q),(W.key!=null||ge&&W===ge.subTree)&&Jg(z,W,!0)):N(z,W,te,Re,ge,he,F,q,J)},k=(z,W,te,de,ge,he,F,q,J)=>{W.slotScopeIds=q,z==null?W.shapeFlag&512?ge.ctx.activate(W,te,de,F,J):$(W,te,de,ge,he,F,J):U(z,W,J)},$=(z,W,te,de,ge,he,F)=>{const q=z.component=bT(z,de,ge);if(gh(z)&&(q.ctx.renderer=ye),CT(q,!1,F),q.asyncDep){if(ge&&ge.registerDep(q,Z,F),!z.el){const J=q.subTree=ze(Nn);_(null,J,W,te),z.placeholder=J.el}}else Z(q,z,W,te,ge,he,F)},U=(z,W,te)=>{const de=W.component=z.component;if(fT(z,W,te))if(de.asyncDep&&!de.asyncResolved){ee(de,W,te);return}else de.next=W,de.update();else W.el=z.el,de.vnode=W},Z=(z,W,te,de,ge,he,F)=>{const q=()=>{if(z.isMounted){let{next:ve,bu:X,u:ae,parent:Ae,vnode:Me}=z;{const Jt=N_(z);if(Jt){ve&&(ve.el=Me.el,ee(z,ve,F)),Jt.asyncDep.then(()=>{z.isUnmounted||q()});return}}let Be=ve,Rt;ti(z,!1),ve?(ve.el=Me.el,ee(z,ve,F)):ve=Me,X&&Ju(X),(Rt=ve.props&&ve.props.onVnodeBeforeUpdate)&&Xr(Rt,Ae,ve,Me),ti(z,!0);const _t=L1(z),vn=z.subTree;z.subTree=_t,T(vn,_t,f(vn.el),se(vn),z,ge,he),ve.el=_t.el,Be===null&&pT(z,_t.el),ae&&Bn(ae,ge),(Rt=ve.props&&ve.props.onVnodeUpdated)&&Bn(()=>Xr(Rt,Ae,ve,Me),ge)}else{let ve;const{el:X,props:ae}=W,{bm:Ae,m:Me,parent:Be,root:Rt,type:_t}=z,vn=fa(W);ti(z,!1),Ae&&Ju(Ae),!vn&&(ve=ae&&ae.onVnodeBeforeMount)&&Xr(ve,Be,W),ti(z,!0);{Rt.ce&&Rt.ce._def.shadowRoot!==!1&&Rt.ce._injectChildStyle(_t);const Jt=z.subTree=L1(z);T(null,Jt,te,de,z,ge,he),W.el=Jt.el}if(Me&&Bn(Me,ge),!vn&&(ve=ae&&ae.onVnodeMounted)){const Jt=W;Bn(()=>Xr(ve,Be,Jt),ge)}(W.shapeFlag&256||Be&&fa(Be.vnode)&&Be.vnode.shapeFlag&256)&&z.a&&Bn(z.a,ge),z.isMounted=!0,W=te=de=null}};z.scope.on();const J=z.effect=new jy(q);z.scope.off();const oe=z.update=J.run.bind(J),Re=z.job=J.runIfDirty.bind(J);Re.i=z,Re.id=z.uid,J.scheduler=()=>Gg(Re),ti(z,!0),oe()},ee=(z,W,te)=>{W.component=z;const de=z.vnode.props;z.vnode=W,z.next=null,ZA(z,W.props,de,te),tT(z,W.children,te),Ws(),k1(z),Gs()},N=(z,W,te,de,ge,he,F,q,J=!1)=>{const oe=z&&z.children,Re=z?z.shapeFlag:0,ve=W.children,{patchFlag:X,shapeFlag:ae}=W;if(X>0){if(X&128){Y(oe,ve,te,de,ge,he,F,q,J);return}else if(X&256){H(oe,ve,te,de,ge,he,F,q,J);return}}ae&8?(Re&16&&De(oe,ge,he),ve!==oe&&h(te,ve)):Re&16?ae&16?Y(oe,ve,te,de,ge,he,F,q,J):De(oe,ge,he,!0):(Re&8&&h(te,""),ae&16&&A(ve,te,de,ge,he,F,q,J))},H=(z,W,te,de,ge,he,F,q,J)=>{z=z||ua,W=W||ua;const oe=z.length,Re=W.length,ve=Math.min(oe,Re);let X;for(X=0;X<ve;X++){const ae=W[X]=J?vo(W[X]):ss(W[X]);T(z[X],ae,te,null,ge,he,F,q,J)}oe>Re?De(z,ge,he,!0,!1,ve):A(W,te,de,ge,he,F,q,J,ve)},Y=(z,W,te,de,ge,he,F,q,J)=>{let oe=0;const Re=W.length;let ve=z.length-1,X=Re-1;for(;oe<=ve&&oe<=X;){const ae=z[oe],Ae=W[oe]=J?vo(W[oe]):ss(W[oe]);if(ci(ae,Ae))T(ae,Ae,te,null,ge,he,F,q,J);else break;oe++}for(;oe<=ve&&oe<=X;){const ae=z[ve],Ae=W[X]=J?vo(W[X]):ss(W[X]);if(ci(ae,Ae))T(ae,Ae,te,null,ge,he,F,q,J);else break;ve--,X--}if(oe>ve){if(oe<=X){const ae=X+1,Ae=ae<Re?W[ae].el:de;for(;oe<=X;)T(null,W[oe]=J?vo(W[oe]):ss(W[oe]),te,Ae,ge,he,F,q,J),oe++}}else if(oe>X)for(;oe<=ve;)Q(z[oe],ge,he,!0),oe++;else{const ae=oe,Ae=oe,Me=new Map;for(oe=Ae;oe<=X;oe++){const Xt=W[oe]=J?vo(W[oe]):ss(W[oe]);Xt.key!=null&&Me.set(Xt.key,oe)}let Be,Rt=0;const _t=X-Ae+1;let vn=!1,Jt=0;const Jr=new Array(_t);for(oe=0;oe<_t;oe++)Jr[oe]=0;for(oe=ae;oe<=ve;oe++){const Xt=z[oe];if(Rt>=_t){Q(Xt,ge,he,!0);continue}let Gn;if(Xt.key!=null)Gn=Me.get(Xt.key);else for(Be=Ae;Be<=X;Be++)if(Jr[Be-Ae]===0&&ci(Xt,W[Be])){Gn=Be;break}Gn===void 0?Q(Xt,ge,he,!0):(Jr[Gn-Ae]=oe+1,Gn>=Jt?Jt=Gn:vn=!0,T(Xt,W[Gn],te,null,ge,he,F,q,J),Rt++)}const so=vn?oT(Jr):ua;for(Be=so.length-1,oe=_t-1;oe>=0;oe--){const Xt=Ae+oe,Gn=W[Xt],ie=W[Xt+1],V=Xt+1<Re?ie.el||ie.placeholder:de;Jr[oe]===0?T(null,Gn,te,V,ge,he,F,q,J):vn&&(Be<0||oe!==so[Be]?ne(Gn,te,V,2):Be--)}}},ne=(z,W,te,de,ge=null)=>{const{el:he,type:F,transition:q,children:J,shapeFlag:oe}=z;if(oe&6){ne(z.component.subTree,W,te,de);return}if(oe&128){z.suspense.move(W,te,de);return}if(oe&64){F.move(z,W,te,ye);return}if(F===Oe){r(he,W,te);for(let ve=0;ve<J.length;ve++)ne(J[ve],W,te,de);r(z.anchor,W,te);return}if(F===td){x(z,W,te);return}if(de!==2&&oe&1&&q)if(de===0)q.beforeEnter(he),r(he,W,te),Bn(()=>q.enter(he),ge);else{const{leave:ve,delayLeave:X,afterLeave:ae}=q,Ae=()=>{z.ctx.isUnmounted?s(he):r(he,W,te)},Me=()=>{he._isLeaving&&he[Ps](!0),ve(he,()=>{Ae(),ae&&ae()})};X?X(he,Ae,Me):Me()}else r(he,W,te)},Q=(z,W,te,de=!1,ge=!1)=>{const{type:he,props:F,ref:q,children:J,dynamicChildren:oe,shapeFlag:Re,patchFlag:ve,dirs:X,cacheIndex:ae}=z;if(ve===-2&&(ge=!1),q!=null&&(Ws(),Hl(q,null,te,z,!0),Gs()),ae!=null&&(W.renderCache[ae]=void 0),Re&256){W.ctx.deactivate(z);return}const Ae=Re&1&&X,Me=!fa(z);let Be;if(Me&&(Be=F&&F.onVnodeBeforeUnmount)&&Xr(Be,W,z),Re&6)lt(z.component,te,de);else{if(Re&128){z.suspense.unmount(te,de);return}Ae&&ei(z,null,W,"beforeUnmount"),Re&64?z.type.remove(z,W,te,ye,de):oe&&!oe.hasOnce&&(he!==Oe||ve>0&&ve&64)?De(oe,W,te,!1,!0):(he===Oe&&ve&384||!ge&&Re&16)&&De(J,W,te),de&&we(z)}(Me&&(Be=F&&F.onVnodeUnmounted)||Ae)&&Bn(()=>{Be&&Xr(Be,W,z),Ae&&ei(z,null,W,"unmounted")},te)},we=z=>{const{type:W,el:te,anchor:de,transition:ge}=z;if(W===Oe){Ye(te,de);return}if(W===td){R(z);return}const he=()=>{s(te),ge&&!ge.persisted&&ge.afterLeave&&ge.afterLeave()};if(z.shapeFlag&1&&ge&&!ge.persisted){const{leave:F,delayLeave:q}=ge,J=()=>F(te,he);q?q(z.el,he,J):J()}else he()},Ye=(z,W)=>{let te;for(;z!==W;)te=p(z),s(z),z=te;s(W)},lt=(z,W,te)=>{const{bum:de,scope:ge,job:he,subTree:F,um:q,m:J,a:oe}=z;x1(J),x1(oe),de&&Ju(de),ge.stop(),he&&(he.flags|=8,Q(F,z,W,te)),q&&Bn(q,W),Bn(()=>{z.isUnmounted=!0},W)},De=(z,W,te,de=!1,ge=!1,he=0)=>{for(let F=he;F<z.length;F++)Q(z[F],W,te,de,ge)},se=z=>{if(z.shapeFlag&6)return se(z.component.subTree);if(z.shapeFlag&128)return z.suspense.next();const W=p(z.anchor||z.el),te=W&&W[c_];return te?p(te):W};let ke=!1;const Ce=(z,W,te)=>{z==null?W._vnode&&Q(W._vnode,null,null,!0):T(W._vnode||null,z,W,null,null,null,te),W._vnode=z,ke||(ke=!0,k1(),i_(),ke=!1)},ye={p:T,um:Q,m:ne,r:we,mt:$,mc:A,pc:N,pbc:P,n:se,o:t};return{render:Ce,hydrate:void 0,createApp:KA(Ce)}}function Df({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ti({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function sT(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Jg(t,e,n=!1){const r=t.children,s=e.children;if($e(r)&&$e(s))for(let o=0;o<r.length;o++){const i=r[o];let a=s[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[o]=vo(s[o]),a.el=i.el),!n&&a.patchFlag!==-2&&Jg(i,a)),a.type===$c&&a.patchFlag!==-1&&(a.el=i.el),a.type===Nn&&!a.el&&(a.el=i.el)}}function oT(t){const e=t.slice(),n=[0];let r,s,o,i,a;const c=t.length;for(r=0;r<c;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(o=0,i=n.length-1;o<i;)a=o+i>>1,t[n[a]]<u?o=a+1:i=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=e[i];return n}function N_(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:N_(e)}function x1(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const iT=Symbol.for("v-scx"),aT=()=>tr(iT);function Ve(t,e,n){return O_(t,e,n)}function O_(t,e,n=Et){const{immediate:r,deep:s,flush:o,once:i}=n,a=sn({},n),c=e&&r||!e&&o!=="post";let u;if(pc){if(o==="sync"){const g=aT();u=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=as,g.resume=as,g.pause=as,g}}const h=On;a.call=(g,C,T)=>zr(g,h,C,T);let f=!1;o==="post"?a.scheduler=g=>{Bn(g,h&&h.suspense)}:o!=="sync"&&(f=!0,a.scheduler=(g,C)=>{C?g():Gg(g)}),a.augmentJob=g=>{e&&(g.flags|=4),f&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const p=SA(t,e,a);return pc&&(u?u.push(p):c&&p()),p}function lT(t,e,n){const r=this.proxy,s=Ft(t)?t.includes(".")?$_(r,t):()=>r[t]:t.bind(r,r);let o;He(e)?o=e:(o=e.handler,n=e);const i=Vc(this),a=O_(s,o.bind(r),n);return i(),a}function $_(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const cT=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Tr(e)}Modifiers`]||t[`${qo(e)}Modifiers`];function uT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Et;let s=n;const o=e.startsWith("update:"),i=o&&cT(r,e.slice(7));i&&(i.trim&&(s=n.map(h=>Ft(h)?h.trim():h)),i.number&&(s=n.map(_d)));let a,c=r[a=Ef(e)]||r[a=Ef(Tr(e))];!c&&o&&(c=r[a=Ef(qo(e))]),c&&zr(c,t,6,s);const u=r[a+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,zr(u,t,6,s)}}function V_(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const o=t.emits;let i={},a=!1;if(!He(t)){const c=u=>{const h=V_(u,e,!0);h&&(a=!0,sn(i,h))};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!o&&!a?(St(t)&&r.set(t,null),null):($e(o)?o.forEach(c=>i[c]=null):sn(i,o),St(t)&&r.set(t,i),i)}function yh(t,e){return!t||!ch(e)?!1:(e=e.slice(2).replace(/Once$/,""),vt(t,e[0].toLowerCase()+e.slice(1))||vt(t,qo(e))||vt(t,e))}function L1(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[o],slots:i,attrs:a,emit:c,render:u,renderCache:h,props:f,data:p,setupState:g,ctx:C,inheritAttrs:T}=t,v=Sd(t);let _,S;try{if(n.shapeFlag&4){const R=s||r,D=R;_=ss(u.call(D,R,h,f,g,p,C)),S=a}else{const R=e;_=ss(R.length>1?R(f,{attrs:a,slots:i,emit:c}):R(f,null)),S=e.props?a:dT(a)}}catch(R){Wl.length=0,ph(R,t,1),_=ze(Nn)}let x=_;if(S&&T!==!1){const R=Object.keys(S),{shapeFlag:D}=x;R.length&&D&7&&(o&&R.some(Ng)&&(S=hT(S,o)),x=xo(x,S,!1,!0))}return n.dirs&&(x=xo(x,null,!1,!0),x.dirs=x.dirs?x.dirs.concat(n.dirs):n.dirs),n.transition&&Ai(x,n.transition),_=x,Sd(v),_}const dT=t=>{let e;for(const n in t)(n==="class"||n==="style"||ch(n))&&((e||(e={}))[n]=t[n]);return e},hT=(t,e)=>{const n={};for(const r in t)(!Ng(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function fT(t,e,n){const{props:r,children:s,component:o}=t,{props:i,children:a,patchFlag:c}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?M1(r,i,u):!!i;if(c&8){const h=e.dynamicProps;for(let f=0;f<h.length;f++){const p=h[f];if(i[p]!==r[p]&&!yh(u,p))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?M1(r,i,u):!0:!!i;return!1}function M1(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const o=r[s];if(e[o]!==t[o]&&!yh(n,o))return!0}return!1}function pT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const j_=t=>t.__isSuspense;function gT(t,e){e&&e.pendingBranch?$e(t)?e.effects.push(...t):e.effects.push(t):PA(t)}const Oe=Symbol.for("v-fgt"),$c=Symbol.for("v-txt"),Nn=Symbol.for("v-cmt"),td=Symbol.for("v-stc"),Wl=[];let dr=null;function M(t=!1){Wl.push(dr=t?null:[])}function mT(){Wl.pop(),dr=Wl[Wl.length-1]||null}let hc=1;function N1(t,e=!1){hc+=t,t<0&&dr&&e&&(dr.hasOnce=!0)}function U_(t){return t.dynamicChildren=hc>0?dr||ua:null,mT(),hc>0&&dr&&dr.push(t),t}function O(t,e,n,r,s,o){return U_(l(t,e,n,r,s,o,!0))}function $n(t,e,n,r,s){return U_(ze(t,e,n,r,s,!0))}function fc(t){return t?t.__v_isVNode===!0:!1}function ci(t,e){return t.type===e.type&&t.key===e.key}const F_=({key:t})=>t??null,nd=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ft(t)||Ut(t)||He(t)?{i:Cn,r:t,k:e,f:!!n}:t:null);function l(t,e=null,n=null,r=0,s=null,o=t===Oe?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&F_(e),ref:e&&nd(e),scopeId:l_,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Cn};return a?(Xg(c,n),o&128&&t.normalize(c)):n&&(c.shapeFlag|=Ft(n)?8:16),hc>0&&!i&&dr&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&dr.push(c),c}const ze=vT;function vT(t,e=null,n=null,r=0,s=null,o=!1){if((!t||t===jA)&&(t=Nn),fc(t)){const a=xo(t,e,!0);return n&&Xg(a,n),hc>0&&!o&&dr&&(a.shapeFlag&6?dr[dr.indexOf(t)]=a:dr.push(a)),a.patchFlag=-2,a}if(PT(t)&&(t=t.__vccOpts),e){e=wT(e);let{class:a,style:c}=e;a&&!Ft(a)&&(e.class=be(a)),St(c)&&(Wg(c)&&!$e(c)&&(c=sn({},c)),e.style=Ei(c))}const i=Ft(t)?1:j_(t)?128:u_(t)?64:St(t)?4:He(t)?2:0;return l(t,e,n,r,s,i,o,!0)}function wT(t){return t?Wg(t)||I_(t)?sn({},t):t:null}function xo(t,e,n=!1,r=!1){const{props:s,ref:o,patchFlag:i,children:a,transition:c}=t,u=e?yT(s||{},e):s,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&F_(u),ref:e&&e.ref?n&&o?$e(o)?o.concat(nd(e)):[o,nd(e)]:nd(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Oe?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&xo(t.ssContent),ssFallback:t.ssFallback&&xo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&r&&Ai(h,c.clone(h)),h}function xe(t=" ",e=0){return ze($c,null,t,e)}function et(t,e){const n=ze(td,null,t);return n.staticCount=e,n}function fe(t="",e=!1){return e?(M(),$n(Nn,null,t)):ze(Nn,null,t)}function ss(t){return t==null||typeof t=="boolean"?ze(Nn):$e(t)?ze(Oe,null,t.slice()):fc(t)?vo(t):ze($c,null,String(t))}function vo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:xo(t)}function Xg(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if($e(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Xg(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!I_(e)?e._ctx=Cn:s===3&&Cn&&(Cn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else He(e)?(e={default:e,_ctx:Cn},n=32):(e=String(e),r&64?(n=16,e=[xe(e)]):n=8);t.children=e,t.shapeFlag|=n}function yT(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=be([e.class,r.class]));else if(s==="style")e.style=Ei([e.style,r.style]);else if(ch(s)){const o=e[s],i=r[s];i&&o!==i&&!($e(o)&&o.includes(i))&&(e[s]=o?[].concat(o,i):i)}else s!==""&&(e[s]=r[s])}return e}function Xr(t,e,n,r=null){zr(t,e,7,[n,r])}const _T=A_();let kT=0;function bT(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||_T,o={uid:kT++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new $y(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:D_(r,s),emitsOptions:V_(r,s),emit:null,emitted:null,propsDefaults:Et,inheritAttrs:r.inheritAttrs,ctx:Et,data:Et,props:Et,attrs:Et,slots:Et,refs:Et,setupState:Et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=uT.bind(null,o),t.ce&&t.ce(o),o}let On=null;const It=()=>On||Cn;let Td,Tp;{const t=hh(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),o=>{s.length>1?s.forEach(i=>i(o)):s[0](o)}};Td=e("__VUE_INSTANCE_SETTERS__",n=>On=n),Tp=e("__VUE_SSR_SETTERS__",n=>pc=n)}const Vc=t=>{const e=On;return Td(t),t.scope.on(),()=>{t.scope.off(),Td(e)}},O1=()=>{On&&On.scope.off(),Td(null)};function B_(t){return t.vnode.shapeFlag&4}let pc=!1;function CT(t,e=!1,n=!1){e&&Tp(e);const{props:r,children:s}=t.vnode,o=B_(t);YA(t,r,o,e),eT(t,s,n||e);const i=o?ET(t,e):void 0;return e&&Tp(!1),i}function ET(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,FA);const{setup:r}=n;if(r){Ws();const s=t.setupContext=r.length>1?AT(t):null,o=Vc(t),i=Oc(r,t,0,[t.props,s]),a=Ry(i);if(Gs(),o(),(a||t.sp)&&!fa(t)&&w_(t),a){if(i.then(O1,O1),e)return i.then(c=>{$1(t,c)}).catch(c=>{ph(c,t,0)});t.asyncDep=i}else $1(t,i)}else q_(t)}function $1(t,e,n){He(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:St(e)&&(t.setupState=r_(e)),q_(t)}function q_(t,e,n){const r=t.type;t.render||(t.render=r.render||as);{const s=Vc(t);Ws();try{BA(t)}finally{Gs(),s()}}}const ST={get(t,e){return Ln(t,"get",""),t[e]}};function AT(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,ST),slots:t.slots,emit:t.emit,expose:e}}function _h(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(r_(Mi(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in zl)return zl[n](t)},has(e,n){return n in e||n in zl}})):t.proxy}function TT(t,e=!0){return He(t)?t.displayName||t.name:t.name||e&&t.__name}function PT(t){return He(t)&&"__vccOpts"in t}const G=(t,e)=>CA(t,e,pc);function ue(t,e,n){const r=arguments.length;return r===2?St(e)&&!$e(e)?fc(e)?ze(t,null,[e]):ze(t,e):ze(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&fc(n)&&(n=[n]),ze(t,e,n))}const IT="3.5.19";/**
* @vue/runtime-dom v3.5.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pp;const V1=typeof window<"u"&&window.trustedTypes;if(V1)try{Pp=V1.createPolicy("vue",{createHTML:t=>t})}catch{}const H_=Pp?t=>Pp.createHTML(t):t=>t,RT="http://www.w3.org/2000/svg",DT="http://www.w3.org/1998/Math/MathML",Ss=typeof document<"u"?document:null,j1=Ss&&Ss.createElement("template"),xT={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Ss.createElementNS(RT,t):e==="mathml"?Ss.createElementNS(DT,t):n?Ss.createElement(t,{is:n}):Ss.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Ss.createTextNode(t),createComment:t=>Ss.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Ss.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,o){const i=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{j1.innerHTML=H_(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=j1.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}e.insertBefore(a,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},co="transition",yl="animation",ba=Symbol("_vtc"),z_={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},W_=sn({},p_,z_),LT=t=>(t.displayName="Transition",t.props=W_,t),Lo=LT((t,{slots:e})=>ue(DA,G_(t),e)),ni=(t,e=[])=>{$e(t)?t.forEach(n=>n(...e)):t&&t(...e)},U1=t=>t?$e(t)?t.some(e=>e.length>1):t.length>1:!1;function G_(t){const e={};for(const w in t)w in z_||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:u=i,appearToClass:h=a,leaveFromClass:f=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,C=MT(s),T=C&&C[0],v=C&&C[1],{onBeforeEnter:_,onEnter:S,onEnterCancelled:x,onLeave:R,onLeaveCancelled:D,onBeforeAppear:L=_,onAppear:b=S,onAppearCancelled:A=x}=e,y=(w,k,$,U)=>{w._enterCancelled=U,po(w,k?h:a),po(w,k?u:i),$&&$()},P=(w,k)=>{w._isLeaving=!1,po(w,f),po(w,g),po(w,p),k&&k()},E=w=>(k,$)=>{const U=w?b:S,Z=()=>y(k,w,$);ni(U,[k,Z]),F1(()=>{po(k,w?c:o),ts(k,w?h:a),U1(U)||B1(k,r,T,Z)})};return sn(e,{onBeforeEnter(w){ni(_,[w]),ts(w,o),ts(w,i)},onBeforeAppear(w){ni(L,[w]),ts(w,c),ts(w,u)},onEnter:E(!1),onAppear:E(!0),onLeave(w,k){w._isLeaving=!0;const $=()=>P(w,k);ts(w,f),w._enterCancelled?(ts(w,p),Ip()):(Ip(),ts(w,p)),F1(()=>{w._isLeaving&&(po(w,f),ts(w,g),U1(R)||B1(w,r,v,$))}),ni(R,[w,$])},onEnterCancelled(w){y(w,!1,void 0,!0),ni(x,[w])},onAppearCancelled(w){y(w,!0,void 0,!0),ni(A,[w])},onLeaveCancelled(w){P(w),ni(D,[w])}})}function MT(t){if(t==null)return null;if(St(t))return[xf(t.enter),xf(t.leave)];{const e=xf(t);return[e,e]}}function xf(t){return qS(t)}function ts(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[ba]||(t[ba]=new Set)).add(e)}function po(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[ba];n&&(n.delete(e),n.size||(t[ba]=void 0))}function F1(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let NT=0;function B1(t,e,n,r){const s=t._endId=++NT,o=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:i,timeout:a,propCount:c}=K_(t,e);if(!i)return r();const u=i+"end";let h=0;const f=()=>{t.removeEventListener(u,p),o()},p=g=>{g.target===t&&++h>=c&&f()};setTimeout(()=>{h<c&&f()},a+1),t.addEventListener(u,p)}function K_(t,e){const n=window.getComputedStyle(t),r=C=>(n[C]||"").split(", "),s=r(`${co}Delay`),o=r(`${co}Duration`),i=q1(s,o),a=r(`${yl}Delay`),c=r(`${yl}Duration`),u=q1(a,c);let h=null,f=0,p=0;e===co?i>0&&(h=co,f=i,p=o.length):e===yl?u>0&&(h=yl,f=u,p=c.length):(f=Math.max(i,u),h=f>0?i>u?co:yl:null,p=h?h===co?o.length:c.length:0);const g=h===co&&/\b(transform|all)(,|$)/.test(r(`${co}Property`).toString());return{type:h,timeout:f,propCount:p,hasTransform:g}}function q1(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>H1(n)+H1(t[r])))}function H1(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function Ip(){return document.body.offsetHeight}function OT(t,e,n){const r=t[ba];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Pd=Symbol("_vod"),Q_=Symbol("_vsh"),tte={beforeMount(t,{value:e},{transition:n}){t[Pd]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):_l(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),_l(t,!0),r.enter(t)):r.leave(t,()=>{_l(t,!1)}):_l(t,e))},beforeUnmount(t,{value:e}){_l(t,e)}};function _l(t,e){t.style.display=e?t[Pd]:"none",t[Q_]=!e}const $T=Symbol(""),VT=/(^|;)\s*display\s*:/;function jT(t,e,n){const r=t.style,s=Ft(n);let o=!1;if(n&&!s){if(e)if(Ft(e))for(const i of e.split(";")){const a=i.slice(0,i.indexOf(":")).trim();n[a]==null&&rd(r,a,"")}else for(const i in e)n[i]==null&&rd(r,i,"");for(const i in n)i==="display"&&(o=!0),rd(r,i,n[i])}else if(s){if(e!==n){const i=r[$T];i&&(n+=";"+i),r.cssText=n,o=VT.test(n)}}else e&&t.removeAttribute("style");Pd in t&&(t[Pd]=o?r.display:"",t[Q_]&&(r.display="none"))}const z1=/\s*!important$/;function rd(t,e,n){if($e(n))n.forEach(r=>rd(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=UT(t,e);z1.test(n)?t.setProperty(qo(r),n.replace(z1,""),"important"):t[r]=n}}const W1=["Webkit","Moz","ms"],Lf={};function UT(t,e){const n=Lf[e];if(n)return n;let r=Tr(e);if(r!=="filter"&&r in t)return Lf[e]=r;r=dh(r);for(let s=0;s<W1.length;s++){const o=W1[s]+r;if(o in t)return Lf[e]=o}return e}const G1="http://www.w3.org/1999/xlink";function K1(t,e,n,r,s,o=QS(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(G1,e.slice(6,e.length)):t.setAttributeNS(G1,e,n):n==null||o&&!My(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Hr(n)?String(n):n)}function Q1(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?H_(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?t.getAttribute("value")||"":t.value,c=n==null?t.type==="checkbox"?"on":"":String(n);(a!==c||!("_value"in t))&&(t.value=c),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=My(n):n==null&&a==="string"?(n="",i=!0):a==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(s||e)}function xs(t,e,n,r){t.addEventListener(e,n,r)}function FT(t,e,n,r){t.removeEventListener(e,n,r)}const Y1=Symbol("_vei");function BT(t,e,n,r,s=null){const o=t[Y1]||(t[Y1]={}),i=o[e];if(r&&i)i.value=r;else{const[a,c]=qT(e);if(r){const u=o[e]=WT(r,s);xs(t,a,u,c)}else i&&(FT(t,a,i,c),o[e]=void 0)}}const Z1=/(?:Once|Passive|Capture)$/;function qT(t){let e;if(Z1.test(t)){e={};let r;for(;r=t.match(Z1);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):qo(t.slice(2)),e]}let Mf=0;const HT=Promise.resolve(),zT=()=>Mf||(HT.then(()=>Mf=0),Mf=Date.now());function WT(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;zr(GT(r,n.value),e,5,[r])};return n.value=t,n.attached=zT(),n}function GT(t,e){if($e(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const J1=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,KT=(t,e,n,r,s,o)=>{const i=s==="svg";e==="class"?OT(t,r,i):e==="style"?jT(t,n,r):ch(e)?Ng(e)||BT(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):QT(t,e,r,i))?(Q1(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&K1(t,e,r,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ft(r))?Q1(t,Tr(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),K1(t,e,r,i))};function QT(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&J1(e)&&He(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return J1(e)&&Ft(n)?!1:e in t}const Y_=new WeakMap,Z_=new WeakMap,Id=Symbol("_moveCb"),X1=Symbol("_enterCb"),YT=t=>(delete t.props.mode,t),ZT=YT({name:"TransitionGroup",props:sn({},W_,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=It(),r=f_();let s,o;return k_(()=>{if(!s.length)return;const i=t.moveClass||`${t.name||"v"}-move`;if(!tP(s[0].el,n.vnode.el,i)){s=[];return}s.forEach(JT),s.forEach(XT);const a=s.filter(eP);Ip(),a.forEach(c=>{const u=c.el,h=u.style;ts(u,i),h.transform=h.webkitTransform=h.transitionDuration="";const f=u[Id]=p=>{p&&p.target!==u||(!p||/transform$/.test(p.propertyName))&&(u.removeEventListener("transitionend",f),u[Id]=null,po(u,i))};u.addEventListener("transitionend",f)}),s=[]}),()=>{const i=Ge(t),a=G_(i);let c=i.tag||Oe;if(s=[],o)for(let u=0;u<o.length;u++){const h=o[u];h.el&&h.el instanceof Element&&(s.push(h),Ai(h,dc(h,a,r,n)),Y_.set(h,h.el.getBoundingClientRect()))}o=e.default?Kg(e.default()):[];for(let u=0;u<o.length;u++){const h=o[u];h.key!=null&&Ai(h,dc(h,a,r,n))}return ze(c,null,o)}}}),em=ZT;function JT(t){const e=t.el;e[Id]&&e[Id](),e[X1]&&e[X1]()}function XT(t){Z_.set(t,t.el.getBoundingClientRect())}function eP(t){const e=Y_.get(t),n=Z_.get(t),r=e.left-n.left,s=e.top-n.top;if(r||s){const o=t.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${s}px)`,o.transitionDuration="0s",t}}function tP(t,e,n){const r=t.cloneNode(),s=t[ba];s&&s.forEach(a=>{a.split(/\s+/).forEach(c=>c&&r.classList.remove(c))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(r);const{hasTransform:i}=K_(r);return o.removeChild(r),i}const Mo=t=>{const e=t.props["onUpdate:modelValue"]||!1;return $e(e)?n=>Ju(e,n):e};function nP(t){t.target.composing=!0}function e0(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Sr=Symbol("_assign"),Dt={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[Sr]=Mo(s);const o=r||s.props&&s.props.type==="number";xs(t,e?"change":"input",i=>{if(i.target.composing)return;let a=t.value;n&&(a=a.trim()),o&&(a=_d(a)),t[Sr](a)}),n&&xs(t,"change",()=>{t.value=t.value.trim()}),e||(xs(t,"compositionstart",nP),xs(t,"compositionend",e0),xs(t,"change",e0))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:o}},i){if(t[Sr]=Mo(i),t.composing)return;const a=(o||t.type==="number")&&!/^0\d/.test(t.value)?_d(t.value):t.value,c=e??"";a!==c&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===c)||(t.value=c))}},J_={deep:!0,created(t,e,n){t[Sr]=Mo(n),xs(t,"change",()=>{const r=t._modelValue,s=Ea(t),o=t.checked,i=t[Sr];if($e(r)){const a=Vg(r,s),c=a!==-1;if(o&&!c)i(r.concat(s));else if(!o&&c){const u=[...r];u.splice(a,1),i(u)}}else if(Ba(r)){const a=new Set(r);o?a.add(s):a.delete(s),i(a)}else i(X_(t,o))})},mounted:t0,beforeUpdate(t,e,n){t[Sr]=Mo(n),t0(t,e,n)}};function t0(t,{value:e,oldValue:n},r){t._modelValue=e;let s;if($e(e))s=Vg(e,r.props.value)>-1;else if(Ba(e))s=e.has(r.props.value);else{if(e===n)return;s=Si(e,X_(t,!0))}t.checked!==s&&(t.checked=s)}const rP={created(t,{value:e},n){t.checked=Si(e,n.props.value),t[Sr]=Mo(n),xs(t,"change",()=>{t[Sr](Ea(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Sr]=Mo(r),e!==n&&(t.checked=Si(e,r.props.value))}},Ca={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const s=Ba(e);xs(t,"change",()=>{const o=Array.prototype.filter.call(t.options,i=>i.selected).map(i=>n?_d(Ea(i)):Ea(i));t[Sr](t.multiple?s?new Set(o):o:o[0]),t._assigning=!0,fn(()=>{t._assigning=!1})}),t[Sr]=Mo(r)},mounted(t,{value:e}){n0(t,e)},beforeUpdate(t,e,n){t[Sr]=Mo(n)},updated(t,{value:e}){t._assigning||n0(t,e)}};function n0(t,e){const n=t.multiple,r=$e(e);if(!(n&&!r&&!Ba(e))){for(let s=0,o=t.options.length;s<o;s++){const i=t.options[s],a=Ea(i);if(n)if(r){const c=typeof a;c==="string"||c==="number"?i.selected=e.some(u=>String(u)===String(a)):i.selected=Vg(e,a)>-1}else i.selected=e.has(a);else if(Si(Ea(i),e)){t.selectedIndex!==s&&(t.selectedIndex=s);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Ea(t){return"_value"in t?t._value:t.value}function X_(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Rp={created(t,e,n){Ru(t,e,n,null,"created")},mounted(t,e,n){Ru(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){Ru(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){Ru(t,e,n,r,"updated")}};function sP(t,e){switch(t){case"SELECT":return Ca;case"TEXTAREA":return Dt;default:switch(e){case"checkbox":return J_;case"radio":return rP;default:return Dt}}}function Ru(t,e,n,r,s){const i=sP(t.tagName,n.props&&n.props.type)[s];i&&i(t,e,n,r)}const oP=["ctrl","shift","alt","meta"],iP={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>oP.some(n=>t[`${n}Key`]&&!e.includes(n))},ht=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...o)=>{for(let i=0;i<e.length;i++){const a=iP[e[i]];if(a&&a(s,e))return}return t(s,...o)}))},aP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Dp=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=(s=>{if(!("key"in s))return;const o=qo(s.key);if(e.some(i=>i===o||aP[i]===o))return t(s)}))},lP=sn({patchProp:KT},xT);let r0;function cP(){return r0||(r0=nT(lP))}const ek=((...t)=>{const e=cP().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=dP(r);if(!s)return;const o=e._component;!He(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,uP(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e});function uP(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function dP(t){return Ft(t)?document.querySelector(t):t}function Ha(t,e,n,r){return Object.defineProperty(t,e,{get:n,set:r,enumerable:!0}),t}const No=K(!1);let xp;function hP(t,e){const n=/(edg|edge|edga|edgios)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(vivaldi)[\/]([\w.]+)/.exec(t)||/(chrome|crios)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+).*(version)[\/]([\w.]+).*(safari)[\/]([\w.]+)/.exec(t)||/(firefox|fxios)[\/]([\w.]+)/.exec(t)||/(webkit)[\/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[\/]([\w.]+)/.exec(t)||[];return{browser:n[5]||n[3]||n[1]||"",version:n[4]||n[2]||"0",platform:e[0]||""}}function fP(t){return/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[]}const tk="ontouchstart"in window||window.navigator.maxTouchPoints>0;function pP(t){const e=t.toLowerCase(),n=fP(e),r=hP(e,n),s={mobile:!1,desktop:!1,cordova:!1,capacitor:!1,nativeMobile:!1,electron:!1,bex:!1,linux:!1,mac:!1,win:!1,cros:!1,chrome:!1,firefox:!1,opera:!1,safari:!1,vivaldi:!1,edge:!1,edgeChromium:!1,ie:!1,webkit:!1,android:!1,ios:!1,ipad:!1,iphone:!1,ipod:!1,kindle:!1,winphone:!1,blackberry:!1,playbook:!1,silk:!1};r.browser&&(s[r.browser]=!0,s.version=r.version,s.versionNumber=parseInt(r.version,10)),r.platform&&(s[r.platform]=!0);const o=s.android||s.ios||s.bb||s.blackberry||s.ipad||s.iphone||s.ipod||s.kindle||s.playbook||s.silk||s["windows phone"];if(o===!0||e.indexOf("mobile")!==-1?s.mobile=!0:s.desktop=!0,s["windows phone"]&&(s.winphone=!0,delete s["windows phone"]),s.edga||s.edgios||s.edg?(s.edge=!0,r.browser="edge"):s.crios?(s.chrome=!0,r.browser="chrome"):s.fxios&&(s.firefox=!0,r.browser="firefox"),(s.ipod||s.ipad||s.iphone)&&(s.ios=!0),s.vivaldi&&(r.browser="vivaldi",s.vivaldi=!0),(s.chrome||s.opr||s.safari||s.vivaldi||s.mobile===!0&&s.ios!==!0&&o!==!0)&&(s.webkit=!0),s.opr&&(r.browser="opera",s.opera=!0),s.safari&&(s.blackberry||s.bb?(r.browser="blackberry",s.blackberry=!0):s.playbook?(r.browser="playbook",s.playbook=!0):s.android?(r.browser="android",s.android=!0):s.kindle?(r.browser="kindle",s.kindle=!0):s.silk&&(r.browser="silk",s.silk=!0)),s.name=r.browser,s.platform=r.platform,e.indexOf("electron")!==-1)s.electron=!0;else if(document.location.href.indexOf("-extension://")!==-1)s.bex=!0;else{if(window.Capacitor!==void 0?(s.capacitor=!0,s.nativeMobile=!0,s.nativeMobileWrapper="capacitor"):(window._cordovaNative!==void 0||window.cordova!==void 0)&&(s.cordova=!0,s.nativeMobile=!0,s.nativeMobileWrapper="cordova"),No.value===!0&&(xp={is:{...s}}),tk===!0&&s.mac===!0&&(s.desktop===!0&&s.safari===!0||s.nativeMobile===!0&&s.android!==!0&&s.ios!==!0&&s.ipad!==!0)){delete s.mac,delete s.desktop;const i=Math.min(window.innerHeight,window.innerWidth)>414?"ipad":"iphone";Object.assign(s,{mobile:!0,ios:!0,platform:i,[i]:!0})}s.mobile!==!0&&window.navigator.userAgentData&&window.navigator.userAgentData.mobile&&(delete s.desktop,s.mobile=!0)}return s}const s0=navigator.userAgent||navigator.vendor||window.opera,gP={has:{touch:!1,webStorage:!1},within:{iframe:!1}},tn={userAgent:s0,is:pP(s0),has:{touch:tk},within:{iframe:window.self!==window.top}},Lp={install(t){const{$q:e}=t;No.value===!0?(t.onSSRHydrated.push(()=>{Object.assign(e.platform,tn),No.value=!1}),e.platform=Sn(this)):e.platform=this}};{let t;Ha(tn.has,"webStorage",()=>{if(t!==void 0)return t;try{if(window.localStorage)return t=!0,!0}catch{}return t=!1,!1}),Object.assign(Lp,tn),No.value===!0&&(Object.assign(Lp,xp,gP),xp=null)}function An(t){return Mi(qa(t))}function mP(t){return Mi(t)}const jc=(t,e)=>{const n=Sn(t);for(const r in t)Ha(e,r,()=>n[r],s=>{n[r]=s});return e},_r={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const t=Object.defineProperty({},"passive",{get(){Object.assign(_r,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,t),window.removeEventListener("qtest",null,t)}catch{}function gc(){}function vP(t){return t.touches&&t.touches[0]?t=t.touches[0]:t.changedTouches&&t.changedTouches[0]?t=t.changedTouches[0]:t.targetTouches&&t.targetTouches[0]&&(t=t.targetTouches[0]),{top:t.clientY,left:t.clientX}}function wP(t){if(t.path)return t.path;if(t.composedPath)return t.composedPath();const e=[];let n=t.target;for(;n;){if(e.push(n),n.tagName==="HTML")return e.push(document),e.push(window),e;n=n.parentElement}}function Rd(t){t.stopPropagation()}function Ji(t){t.cancelable!==!1&&t.preventDefault()}function kr(t){t.cancelable!==!1&&t.preventDefault(),t.stopPropagation()}function yP(t,e,n){const r=`__q_${e}_evt`;t[r]=t[r]!==void 0?t[r].concat(n):n,n.forEach(s=>{s[0].addEventListener(s[1],t[s[2]],_r[s[3]])})}function _P(t,e){const n=`__q_${e}_evt`;t[n]!==void 0&&(t[n].forEach(r=>{r[0].removeEventListener(r[1],t[r[2]],_r[r[3]])}),t[n]=void 0)}function nk(t,e=250,n){let r=null;function s(){const o=arguments,i=()=>{r=null,t.apply(this,o)};r!==null&&clearTimeout(r),r=setTimeout(i,e)}return s.cancel=()=>{r!==null&&clearTimeout(r)},s}const Nf=["sm","md","lg","xl"],{passive:o0}=_r,kP=jc({width:0,height:0,name:"xs",sizes:{sm:600,md:1024,lg:1440,xl:1920},lt:{sm:!0,md:!0,lg:!0,xl:!0},gt:{xs:!1,sm:!1,md:!1,lg:!1},xs:!0,sm:!1,md:!1,lg:!1,xl:!1},{setSizes:gc,setDebounce:gc,install({$q:t,onSSRHydrated:e}){if(t.screen=this,this.__installed===!0){t.config.screen!==void 0&&(t.config.screen.bodyClasses===!1?document.body.classList.remove(`screen--${this.name}`):this.__update(!0));return}const{visualViewport:n}=window,r=n||window,s=document.scrollingElement||document.documentElement,o=n===void 0||tn.is.mobile===!0?()=>[Math.max(window.innerWidth,s.clientWidth),Math.max(window.innerHeight,s.clientHeight)]:()=>[n.width*n.scale+window.innerWidth-s.clientWidth,n.height*n.scale+window.innerHeight-s.clientHeight],i=t.config.screen?.bodyClasses===!0;this.__update=f=>{const[p,g]=o();if(g!==this.height&&(this.height=g),p!==this.width)this.width=p;else if(f!==!0)return;let C=this.sizes;this.gt.xs=p>=C.sm,this.gt.sm=p>=C.md,this.gt.md=p>=C.lg,this.gt.lg=p>=C.xl,this.lt.sm=p<C.sm,this.lt.md=p<C.md,this.lt.lg=p<C.lg,this.lt.xl=p<C.xl,this.xs=this.lt.sm,this.sm=this.gt.xs===!0&&this.lt.md===!0,this.md=this.gt.sm===!0&&this.lt.lg===!0,this.lg=this.gt.md===!0&&this.lt.xl===!0,this.xl=this.gt.lg,C=this.xs===!0&&"xs"||this.sm===!0&&"sm"||this.md===!0&&"md"||this.lg===!0&&"lg"||"xl",C!==this.name&&(i===!0&&(document.body.classList.remove(`screen--${this.name}`),document.body.classList.add(`screen--${C}`)),this.name=C)};let a,c={},u=16;this.setSizes=f=>{Nf.forEach(p=>{f[p]!==void 0&&(c[p]=f[p])})},this.setDebounce=f=>{u=f};const h=()=>{const f=getComputedStyle(document.body);f.getPropertyValue("--q-size-sm")&&Nf.forEach(p=>{this.sizes[p]=parseInt(f.getPropertyValue(`--q-size-${p}`),10)}),this.setSizes=p=>{Nf.forEach(g=>{p[g]&&(this.sizes[g]=p[g])}),this.__update(!0)},this.setDebounce=p=>{a!==void 0&&r.removeEventListener("resize",a,o0),a=p>0?nk(this.__update,p):this.__update,r.addEventListener("resize",a,o0)},this.setDebounce(u),Object.keys(c).length!==0?(this.setSizes(c),c=void 0):this.__update(),i===!0&&this.name==="xs"&&document.body.classList.add("screen--xs")};No.value===!0?e.push(h):h()}}),Rn=jc({isActive:!1,mode:!1},{__media:void 0,set(t){Rn.mode=t,t==="auto"?(Rn.__media===void 0&&(Rn.__media=window.matchMedia("(prefers-color-scheme: dark)"),Rn.__updateMedia=()=>{Rn.set("auto")},Rn.__media.addListener(Rn.__updateMedia)),t=Rn.__media.matches):Rn.__media!==void 0&&(Rn.__media.removeListener(Rn.__updateMedia),Rn.__media=void 0),Rn.isActive=t===!0,document.body.classList.remove(`body--${t===!0?"light":"dark"}`),document.body.classList.add(`body--${t===!0?"dark":"light"}`)},toggle(){Rn.set(Rn.isActive===!1)},install({$q:t,ssrContext:e}){const n=t.config.dark;t.dark=this,this.__installed!==!0&&this.set(n!==void 0?n:!1)}});function bP(t,e,n=document.body){if(typeof t!="string")throw new TypeError("Expected a string as propName");if(typeof e!="string")throw new TypeError("Expected a string as value");if(!(n instanceof Element))throw new TypeError("Expected a DOM element");n.style.setProperty(`--q-${t}`,e)}let rk=!1;function CP(t){rk=t.isComposing===!0}function sk(t){return rk===!0||t!==Object(t)||t.isComposing===!0||t.qKeyEvent===!0}function mc(t,e){return sk(t)===!0?!1:[].concat(e).includes(t.keyCode)}function ok(t){if(t.ios===!0)return"ios";if(t.android===!0)return"android"}function EP({is:t,has:e,within:n},r){const s=[t.desktop===!0?"desktop":"mobile",`${e.touch===!1?"no-":""}touch`];if(t.mobile===!0){const o=ok(t);o!==void 0&&s.push("platform-"+o)}if(t.nativeMobile===!0){const o=t.nativeMobileWrapper;s.push(o),s.push("native-mobile"),t.ios===!0&&(r[o]===void 0||r[o].iosStatusBarPadding!==!1)&&s.push("q-ios-padding")}else t.electron===!0?s.push("electron"):t.bex===!0&&s.push("bex");return n.iframe===!0&&s.push("within-iframe"),s}function SP(){const{is:t}=tn,e=document.body.className,n=new Set(e.replace(/ {2}/g," ").split(" "));if(t.nativeMobile!==!0&&t.electron!==!0&&t.bex!==!0){if(t.desktop===!0)n.delete("mobile"),n.delete("platform-ios"),n.delete("platform-android"),n.add("desktop");else if(t.mobile===!0){n.delete("desktop"),n.add("mobile"),n.delete("platform-ios"),n.delete("platform-android");const s=ok(t);s!==void 0&&n.add(`platform-${s}`)}}tn.has.touch===!0&&(n.delete("no-touch"),n.add("touch")),tn.within.iframe===!0&&n.add("within-iframe");const r=Array.from(n).join(" ");e!==r&&(document.body.className=r)}function AP(t){for(const e in t)bP(e,t[e])}const TP={install(t){if(this.__installed!==!0){if(No.value===!0)SP();else{const{$q:e}=t;e.config.brand!==void 0&&AP(e.config.brand);const n=EP(tn,e.config);document.body.classList.add.apply(document.body.classList,n)}tn.is.ios===!0&&document.body.addEventListener("touchstart",gc),window.addEventListener("keydown",CP,!0)}}},ik=()=>!0;function PP(t){return typeof t=="string"&&t!==""&&t!=="/"&&t!=="#/"}function IP(t){return t.startsWith("#")===!0&&(t=t.substring(1)),t.startsWith("/")===!1&&(t="/"+t),t.endsWith("/")===!0&&(t=t.substring(0,t.length-1)),"#"+t}function RP(t){if(t.backButtonExit===!1)return()=>!1;if(t.backButtonExit==="*")return ik;const e=["#/"];return Array.isArray(t.backButtonExit)===!0&&e.push(...t.backButtonExit.filter(PP).map(IP)),()=>e.includes(window.location.hash)}const Mp={__history:[],add:gc,remove:gc,install({$q:t}){if(this.__installed===!0)return;const{cordova:e,capacitor:n}=tn.is;if(e!==!0&&n!==!0)return;const r=t.config[e===!0?"cordova":"capacitor"];if(r?.backButton===!1||n===!0&&(window.Capacitor===void 0||window.Capacitor.Plugins.App===void 0))return;this.add=i=>{i.condition===void 0&&(i.condition=ik),this.__history.push(i)},this.remove=i=>{const a=this.__history.indexOf(i);a>=0&&this.__history.splice(a,1)};const s=RP(Object.assign({backButtonExit:!0},r)),o=()=>{if(this.__history.length){const i=this.__history[this.__history.length-1];i.condition()===!0&&(this.__history.pop(),i.handler())}else s()===!0?navigator.app.exitApp():window.history.back()};e===!0?document.addEventListener("deviceready",()=>{document.addEventListener("backbutton",o,!1)}):window.Capacitor.Plugins.App.addListener("backButton",o)}},Np={isoName:"en-US",nativeName:"English (US)",label:{clear:"Clear",ok:"OK",cancel:"Cancel",close:"Close",set:"Set",select:"Select",reset:"Reset",remove:"Remove",update:"Update",create:"Create",search:"Search",filter:"Filter",refresh:"Refresh",expand:t=>t?`Expand "${t}"`:"Expand",collapse:t=>t?`Collapse "${t}"`:"Collapse"},date:{days:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),daysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),firstDayOfWeek:0,format24h:!1,pluralDay:"days",prevMonth:"Previous month",nextMonth:"Next month",prevYear:"Previous year",nextYear:"Next year",today:"Today",prevRangeYears:t=>`Previous ${t} years`,nextRangeYears:t=>`Next ${t} years`},table:{noData:"No data available",noResults:"No matching records found",loading:"Loading...",selectedRecords:t=>t===1?"1 record selected.":(t===0?"No":t)+" records selected.",recordsPerPage:"Records per page:",allRows:"All",pagination:(t,e,n)=>t+"-"+e+" of "+n,columns:"Columns"},pagination:{first:"First page",prev:"Previous page",next:"Next page",last:"Last page"},editor:{url:"URL",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",unorderedList:"Unordered List",orderedList:"Ordered List",subscript:"Subscript",superscript:"Superscript",hyperlink:"Hyperlink",toggleFullscreen:"Toggle Fullscreen",quote:"Quote",left:"Left align",center:"Center align",right:"Right align",justify:"Justify align",print:"Print",outdent:"Decrease indentation",indent:"Increase indentation",removeFormat:"Remove formatting",formatting:"Formatting",fontSize:"Font Size",align:"Align",hr:"Insert Horizontal Rule",undo:"Undo",redo:"Redo",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",heading4:"Heading 4",heading5:"Heading 5",heading6:"Heading 6",paragraph:"Paragraph",code:"Code",size1:"Very small",size2:"A bit small",size3:"Normal",size4:"Medium-large",size5:"Big",size6:"Very big",size7:"Maximum",defaultFont:"Default Font",viewSource:"View Source"},tree:{noNodes:"No nodes available",noResults:"No matching nodes found"}};function i0(){const t=Array.isArray(navigator.languages)===!0&&navigator.languages.length!==0?navigator.languages[0]:navigator.language;if(typeof t=="string")return t.split(/[-_]/).map((e,n)=>n===0?e.toLowerCase():n>1||e.length<4?e.toUpperCase():e[0].toUpperCase()+e.slice(1).toLowerCase()).join("-")}const wo=jc({__qLang:{}},{getLocale:i0,set(t=Np,e){const n={...t,rtl:t.rtl===!0,getLocale:i0};{if(n.set=wo.set,wo.__langConfig===void 0||wo.__langConfig.noHtmlAttrs!==!0){const r=document.documentElement;r.setAttribute("dir",n.rtl===!0?"rtl":"ltr"),r.setAttribute("lang",n.isoName)}Object.assign(wo.__qLang,n)}},install({$q:t,lang:e,ssrContext:n}){t.lang=wo.__qLang,wo.__langConfig=t.config.lang,this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qLang,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set"&&s!=="getLocale")}}),this.set(e||Np))}}),DP={name:"material-icons",type:{positive:"check_circle",negative:"warning",info:"info",warning:"priority_high"},arrow:{up:"arrow_upward",right:"arrow_forward",down:"arrow_downward",left:"arrow_back",dropdown:"arrow_drop_down"},chevron:{left:"chevron_left",right:"chevron_right"},colorPicker:{spectrum:"gradient",tune:"tune",palette:"style"},pullToRefresh:{icon:"refresh"},carousel:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down",navigationIcon:"lens"},chip:{remove:"cancel",selected:"check"},datetime:{arrowLeft:"chevron_left",arrowRight:"chevron_right",now:"access_time",today:"today"},editor:{bold:"format_bold",italic:"format_italic",strikethrough:"strikethrough_s",underline:"format_underlined",unorderedList:"format_list_bulleted",orderedList:"format_list_numbered",subscript:"vertical_align_bottom",superscript:"vertical_align_top",hyperlink:"link",toggleFullscreen:"fullscreen",quote:"format_quote",left:"format_align_left",center:"format_align_center",right:"format_align_right",justify:"format_align_justify",print:"print",outdent:"format_indent_decrease",indent:"format_indent_increase",removeFormat:"format_clear",formatting:"text_format",fontSize:"format_size",align:"format_align_left",hr:"remove",undo:"undo",redo:"redo",heading:"format_size",code:"code",size:"format_size",font:"font_download",viewSource:"code"},expansionItem:{icon:"keyboard_arrow_down",denseIcon:"arrow_drop_down"},fab:{icon:"add",activeIcon:"close"},field:{clear:"cancel",error:"error"},pagination:{first:"first_page",prev:"keyboard_arrow_left",next:"keyboard_arrow_right",last:"last_page"},rating:{icon:"grade"},stepper:{done:"check",active:"edit",error:"warning"},tabs:{left:"chevron_left",right:"chevron_right",up:"keyboard_arrow_up",down:"keyboard_arrow_down"},table:{arrowUp:"arrow_upward",warning:"warning",firstPage:"first_page",prevPage:"chevron_left",nextPage:"chevron_right",lastPage:"last_page"},tree:{icon:"play_arrow"},uploader:{done:"done",clear:"clear",add:"add_box",upload:"cloud_upload",removeQueue:"clear_all",removeUploaded:"done_all"}},Dd=jc({iconMapFn:null,__qIconSet:{}},{set(t,e){const n={...t};n.set=Dd.set,Object.assign(Dd.__qIconSet,n)},install({$q:t,iconSet:e,ssrContext:n}){t.config.iconMapFn!==void 0&&(this.iconMapFn=t.config.iconMapFn),t.iconSet=this.__qIconSet,Ha(t,"iconMapFn",()=>this.iconMapFn,r=>{this.iconMapFn=r}),this.__installed===!0?e!==void 0&&this.set(e):(this.props=new Proxy(this.__qIconSet,{get(){return Reflect.get(...arguments)},ownKeys(r){return Reflect.ownKeys(r).filter(s=>s!=="set")}}),this.set(e||DP))}}),xP="_q_",nte="_q_l_",LP="_q_fo_";function rte(){}const xd={};let ak=!1;function MP(){ak=!0}function cr(t){return t!==null&&typeof t=="object"&&Array.isArray(t)!==!0}const a0=[Lp,TP,Rn,kP,Mp,wo,Dd];function tm(t,e){const n=ek(t);n.config.globalProperties=e.config.globalProperties;const{reload:r,...s}=e._context;return Object.assign(n._context,s),n}function l0(t,e){e.forEach(n=>{n.install(t),n.__installed=!0})}function NP(t,e,n){t.config.globalProperties.$q=n.$q,t.provide(xP,n.$q),l0(n,a0),e.components!==void 0&&Object.values(e.components).forEach(r=>{cr(r)===!0&&r.name!==void 0&&t.component(r.name,r)}),e.directives!==void 0&&Object.values(e.directives).forEach(r=>{cr(r)===!0&&r.name!==void 0&&t.directive(r.name,r)}),e.plugins!==void 0&&l0(n,Object.values(e.plugins).filter(r=>typeof r.install=="function"&&a0.includes(r)===!1)),No.value===!0&&(n.$q.onSSRHydrated=()=>{n.onSSRHydrated.forEach(r=>{r()}),n.$q.onSSRHydrated=()=>{}})}const OP=function(t,e={}){const n={version:"2.18.2"};ak===!1?(e.config!==void 0&&Object.assign(xd,e.config),n.config={...xd},MP()):n.config=e.config||{},NP(t,e,{parentApp:t,$q:n,lang:e.lang,iconSet:e.iconSet,onSSRHydrated:[]})},Op={name:"Quasar",version:"2.18.2",install:OP,lang:wo,iconSet:Dd};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Xi=typeof document<"u";function lk(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function $P(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&lk(t.default)}const mt=Object.assign;function Of(t,e){const n={};for(const r in e){const s=e[r];n[r]=Wr(s)?s.map(t):t(s)}return n}const Gl=()=>{},Wr=Array.isArray,ck=/#/g,VP=/&/g,jP=/\//g,UP=/=/g,FP=/\?/g,uk=/\+/g,BP=/%5B/g,qP=/%5D/g,dk=/%5E/g,HP=/%60/g,hk=/%7B/g,zP=/%7C/g,fk=/%7D/g,WP=/%20/g;function nm(t){return encodeURI(""+t).replace(zP,"|").replace(BP,"[").replace(qP,"]")}function GP(t){return nm(t).replace(hk,"{").replace(fk,"}").replace(dk,"^")}function $p(t){return nm(t).replace(uk,"%2B").replace(WP,"+").replace(ck,"%23").replace(VP,"%26").replace(HP,"`").replace(hk,"{").replace(fk,"}").replace(dk,"^")}function KP(t){return $p(t).replace(UP,"%3D")}function QP(t){return nm(t).replace(ck,"%23").replace(FP,"%3F")}function YP(t){return t==null?"":QP(t).replace(jP,"%2F")}function vc(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const ZP=/\/$/,JP=t=>t.replace(ZP,"");function $f(t,e,n="/"){let r,s={},o="",i="";const a=e.indexOf("#");let c=e.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(r=e.slice(0,c),o=e.slice(c+1,a>-1?a:e.length),s=t(o)),a>-1&&(r=r||e.slice(0,a),i=e.slice(a,e.length)),r=nI(r??e,n),{fullPath:r+(o&&"?")+o+i,path:r,query:s,hash:vc(i)}}function XP(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function c0(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function eI(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Sa(e.matched[r],n.matched[s])&&pk(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Sa(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function pk(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!tI(t[n],e[n]))return!1;return!0}function tI(t,e){return Wr(t)?u0(t,e):Wr(e)?u0(e,t):t===e}function u0(t,e){return Wr(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function nI(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let o=n.length-1,i,a;for(i=0;i<r.length;i++)if(a=r[i],a!==".")if(a==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(i).join("/")}const uo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var wc;(function(t){t.pop="pop",t.push="push"})(wc||(wc={}));var Kl;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Kl||(Kl={}));function rI(t){if(!t)if(Xi){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),JP(t)}const sI=/^[^#]+#/;function oI(t,e){return t.replace(sI,"#")+e}function iI(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const kh=()=>({left:window.scrollX,top:window.scrollY});function aI(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=iI(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function d0(t,e){return(history.state?history.state.position-e:-1)+t}const Vp=new Map;function lI(t,e){Vp.set(t,e)}function cI(t){const e=Vp.get(t);return Vp.delete(t),e}let uI=()=>location.protocol+"//"+location.host;function gk(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let a=s.includes(t.slice(o))?t.slice(o).length:1,c=s.slice(a);return c[0]!=="/"&&(c="/"+c),c0(c,"")}return c0(n,t)+r+s}function dI(t,e,n,r){let s=[],o=[],i=null;const a=({state:p})=>{const g=gk(t,location),C=n.value,T=e.value;let v=0;if(p){if(n.value=g,e.value=p,i&&i===C){i=null;return}v=T?p.position-T.position:0}else r(g);s.forEach(_=>{_(n.value,C,{delta:v,type:wc.pop,direction:v?v>0?Kl.forward:Kl.back:Kl.unknown})})};function c(){i=n.value}function u(p){s.push(p);const g=()=>{const C=s.indexOf(p);C>-1&&s.splice(C,1)};return o.push(g),g}function h(){const{history:p}=window;p.state&&p.replaceState(mt({},p.state,{scroll:kh()}),"")}function f(){for(const p of o)p();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:f}}function h0(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?kh():null}}function hI(t){const{history:e,location:n}=window,r={value:gk(t,n)},s={value:e.state};s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(c,u,h){const f=t.indexOf("#"),p=f>-1?(n.host&&document.querySelector("base")?t:t.slice(f))+c:uI()+t+c;try{e[h?"replaceState":"pushState"](u,"",p),s.value=u}catch(g){console.error(g),n[h?"replace":"assign"](p)}}function i(c,u){const h=mt({},e.state,h0(s.value.back,c,s.value.forward,!0),u,{position:s.value.position});o(c,h,!0),r.value=c}function a(c,u){const h=mt({},s.value,e.state,{forward:c,scroll:kh()});o(h.current,h,!0);const f=mt({},h0(r.value,c,null),{position:h.position+1},u);o(c,f,!1),r.value=c}return{location:r,state:s,push:a,replace:i}}function fI(t){t=rI(t);const e=hI(t),n=dI(t,e.state,e.location,e.replace);function r(o,i=!0){i||n.pauseListeners(),history.go(o)}const s=mt({location:"",base:t,go:r,createHref:oI.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function pI(t){return typeof t=="string"||t&&typeof t=="object"}function mk(t){return typeof t=="string"||typeof t=="symbol"}const vk=Symbol("");var f0;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(f0||(f0={}));function Aa(t,e){return mt(new Error,{type:t,[vk]:!0},e)}function bs(t,e){return t instanceof Error&&vk in t&&(e==null||!!(t.type&e))}const p0="[^/]+?",gI={sensitive:!1,strict:!1,start:!0,end:!0},mI=/[.+*?^${}()[\]/\\]/g;function vI(t,e){const n=mt({},gI,e),r=[];let s=n.start?"^":"";const o=[];for(const u of t){const h=u.length?[]:[90];n.strict&&!u.length&&(s+="/");for(let f=0;f<u.length;f++){const p=u[f];let g=40+(n.sensitive?.25:0);if(p.type===0)f||(s+="/"),s+=p.value.replace(mI,"\\$&"),g+=40;else if(p.type===1){const{value:C,repeatable:T,optional:v,regexp:_}=p;o.push({name:C,repeatable:T,optional:v});const S=_||p0;if(S!==p0){g+=10;try{new RegExp(`(${S})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${C}" (${S}): `+R.message)}}let x=T?`((?:${S})(?:/(?:${S}))*)`:`(${S})`;f||(x=v&&u.length<2?`(?:/${x})`:"/"+x),v&&(x+="?"),s+=x,g+=20,v&&(g+=-8),T&&(g+=-20),S===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function a(u){const h=u.match(i),f={};if(!h)return null;for(let p=1;p<h.length;p++){const g=h[p]||"",C=o[p-1];f[C.name]=g&&C.repeatable?g.split("/"):g}return f}function c(u){let h="",f=!1;for(const p of t){(!f||!h.endsWith("/"))&&(h+="/"),f=!1;for(const g of p)if(g.type===0)h+=g.value;else if(g.type===1){const{value:C,repeatable:T,optional:v}=g,_=C in u?u[C]:"";if(Wr(_)&&!T)throw new Error(`Provided param "${C}" is an array but it is not repeatable (* or + modifiers)`);const S=Wr(_)?_.join("/"):_;if(!S)if(v)p.length<2&&(h.endsWith("/")?h=h.slice(0,-1):f=!0);else throw new Error(`Missing required param "${C}"`);h+=S}}return h||"/"}return{re:i,score:r,keys:o,parse:a,stringify:c}}function wI(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function wk(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const o=wI(r[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-r.length)===1){if(g0(r))return 1;if(g0(s))return-1}return s.length-r.length}function g0(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yI={type:0,value:""},_I=/[a-zA-Z0-9_]/;function kI(t){if(!t)return[[]];if(t==="/")return[[yI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${u}": ${g}`)}let n=0,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let a=0,c,u="",h="";function f(){u&&(n===0?o.push({type:0,value:u}):n===1||n===2||n===3?(o.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:h,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),u="")}function p(){u+=c}for(;a<t.length;){if(c=t[a++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(u&&f(),i()):c===":"?(f(),n=1):p();break;case 4:p(),n=r;break;case 1:c==="("?n=2:_I.test(c)?p():(f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+c:n=3:h+=c;break;case 3:f(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${u}"`),f(),i(),s}function bI(t,e,n){const r=vI(kI(t.path),n),s=mt(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function CI(t,e){const n=[],r=new Map;e=y0({strict:!1,end:!0,sensitive:!1},e);function s(f){return r.get(f)}function o(f,p,g){const C=!g,T=v0(f);T.aliasOf=g&&g.record;const v=y0(e,f),_=[T];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const D of R)_.push(v0(mt({},T,{components:g?g.record.components:T.components,path:D,aliasOf:g?g.record:T})))}let S,x;for(const R of _){const{path:D}=R;if(p&&D[0]!=="/"){const L=p.record.path,b=L[L.length-1]==="/"?"":"/";R.path=p.record.path+(D&&b+D)}if(S=bI(R,p,v),g?g.alias.push(S):(x=x||S,x!==S&&x.alias.push(S),C&&f.name&&!w0(S)&&i(f.name)),yk(S)&&c(S),T.children){const L=T.children;for(let b=0;b<L.length;b++)o(L[b],S,g&&g.children[b])}g=g||S}return x?()=>{i(x)}:Gl}function i(f){if(mk(f)){const p=r.get(f);p&&(r.delete(f),n.splice(n.indexOf(p),1),p.children.forEach(i),p.alias.forEach(i))}else{const p=n.indexOf(f);p>-1&&(n.splice(p,1),f.record.name&&r.delete(f.record.name),f.children.forEach(i),f.alias.forEach(i))}}function a(){return n}function c(f){const p=AI(f,n);n.splice(p,0,f),f.record.name&&!w0(f)&&r.set(f.record.name,f)}function u(f,p){let g,C={},T,v;if("name"in f&&f.name){if(g=r.get(f.name),!g)throw Aa(1,{location:f});v=g.record.name,C=mt(m0(p.params,g.keys.filter(x=>!x.optional).concat(g.parent?g.parent.keys.filter(x=>x.optional):[]).map(x=>x.name)),f.params&&m0(f.params,g.keys.map(x=>x.name))),T=g.stringify(C)}else if(f.path!=null)T=f.path,g=n.find(x=>x.re.test(T)),g&&(C=g.parse(T),v=g.record.name);else{if(g=p.name?r.get(p.name):n.find(x=>x.re.test(p.path)),!g)throw Aa(1,{location:f,currentLocation:p});v=g.record.name,C=mt({},p.params,f.params),T=g.stringify(C)}const _=[];let S=g;for(;S;)_.unshift(S.record),S=S.parent;return{name:v,path:T,params:C,matched:_,meta:SI(_)}}t.forEach(f=>o(f));function h(){n.length=0,r.clear()}return{addRoute:o,resolve:u,removeRoute:i,clearRoutes:h,getRoutes:a,getRecordMatcher:s}}function m0(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function v0(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:EI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function EI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function w0(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function SI(t){return t.reduce((e,n)=>mt(e,n.meta),{})}function y0(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function AI(t,e){let n=0,r=e.length;for(;n!==r;){const o=n+r>>1;wk(t,e[o])<0?r=o:n=o+1}const s=TI(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function TI(t){let e=t;for(;e=e.parent;)if(yk(e)&&wk(t,e)===0)return e}function yk({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function PI(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const o=r[s].replace(uk," "),i=o.indexOf("="),a=vc(i<0?o:o.slice(0,i)),c=i<0?null:vc(o.slice(i+1));if(a in e){let u=e[a];Wr(u)||(u=e[a]=[u]),u.push(c)}else e[a]=c}return e}function _0(t){let e="";for(let n in t){const r=t[n];if(n=KP(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Wr(r)?r.map(o=>o&&$p(o)):[r&&$p(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+n,o!=null&&(e+="="+o))})}return e}function II(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Wr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const RI=Symbol(""),k0=Symbol(""),bh=Symbol(""),rm=Symbol(""),jp=Symbol("");function kl(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function yo(t,e,n,r,s,o=i=>i()){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,c)=>{const u=p=>{p===!1?c(Aa(4,{from:n,to:e})):p instanceof Error?c(p):pI(p)?c(Aa(2,{from:e,to:p})):(i&&r.enterCallbacks[s]===i&&typeof p=="function"&&i.push(p),a())},h=o(()=>t.call(r&&r.instances[s],e,n,u));let f=Promise.resolve(h);t.length<3&&(f=f.then(u)),f.catch(p=>c(p))})}function Vf(t,e,n,r,s=o=>o()){const o=[];for(const i of t)for(const a in i.components){let c=i.components[a];if(!(e!=="beforeRouteEnter"&&!i.instances[a]))if(lk(c)){const h=(c.__vccOpts||c)[e];h&&o.push(yo(h,n,r,i,a,s))}else{let u=c();o.push(()=>u.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${i.path}"`);const f=$P(h)?h.default:h;i.mods[a]=h,i.components[a]=f;const g=(f.__vccOpts||f)[e];return g&&yo(g,n,r,i,a,s)()}))}}return o}function b0(t){const e=tr(bh),n=tr(rm),r=G(()=>{const c=tt(t.to);return e.resolve(c)}),s=G(()=>{const{matched:c}=r.value,{length:u}=c,h=c[u-1],f=n.matched;if(!h||!f.length)return-1;const p=f.findIndex(Sa.bind(null,h));if(p>-1)return p;const g=C0(c[u-2]);return u>1&&C0(h)===g&&f[f.length-1].path!==g?f.findIndex(Sa.bind(null,c[u-2])):p}),o=G(()=>s.value>-1&&NI(n.params,r.value.params)),i=G(()=>s.value>-1&&s.value===n.matched.length-1&&pk(n.params,r.value.params));function a(c={}){if(MI(c)){const u=e[tt(t.replace)?"replace":"push"](tt(t.to)).catch(Gl);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:G(()=>r.value.href),isActive:o,isExactActive:i,navigate:a}}function DI(t){return t.length===1?t[0]:t}const xI=qa({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:b0,setup(t,{slots:e}){const n=Sn(b0(t)),{options:r}=tr(bh),s=G(()=>({[E0(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[E0(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&DI(e.default(n));return t.custom?o:ue("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),LI=xI;function MI(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function NI(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Wr(s)||s.length!==r.length||r.some((o,i)=>o!==s[i]))return!1}return!0}function C0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const E0=(t,e,n)=>t??e??n,OI=qa({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=tr(jp),s=G(()=>t.route||r.value),o=tr(k0,0),i=G(()=>{let u=tt(o);const{matched:h}=s.value;let f;for(;(f=h[u])&&!f.components;)u++;return u}),a=G(()=>s.value.matched[i.value]);ed(k0,G(()=>i.value+1)),ed(RI,a),ed(jp,s);const c=K();return Ve(()=>[c.value,a.value,t.name],([u,h,f],[p,g,C])=>{h&&(h.instances[f]=u,g&&g!==h&&u&&u===p&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),u&&h&&(!g||!Sa(h,g)||!p)&&(h.enterCallbacks[f]||[]).forEach(T=>T(u))},{flush:"post"}),()=>{const u=s.value,h=t.name,f=a.value,p=f&&f.components[h];if(!p)return S0(n.default,{Component:p,route:u});const g=f.props[h],C=g?g===!0?u.params:typeof g=="function"?g(u):g:null,v=ue(p,mt({},C,e,{onVnodeUnmounted:_=>{_.component.isUnmounted&&(f.instances[h]=null)},ref:c}));return S0(n.default,{Component:v,route:u})||v}}});function S0(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const $I=OI;function VI(t){const e=CI(t.routes,t),n=t.parseQuery||PI,r=t.stringifyQuery||_0,s=t.history,o=kl(),i=kl(),a=kl(),c=t_(uo);let u=uo;Xi&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=Of.bind(null,se=>""+se),f=Of.bind(null,YP),p=Of.bind(null,vc);function g(se,ke){let Ce,ye;return mk(se)?(Ce=e.getRecordMatcher(se),ye=ke):ye=se,e.addRoute(ye,Ce)}function C(se){const ke=e.getRecordMatcher(se);ke&&e.removeRoute(ke)}function T(){return e.getRoutes().map(se=>se.record)}function v(se){return!!e.getRecordMatcher(se)}function _(se,ke){if(ke=mt({},ke||c.value),typeof se=="string"){const te=$f(n,se,ke.path),de=e.resolve({path:te.path},ke),ge=s.createHref(te.fullPath);return mt(te,de,{params:p(de.params),hash:vc(te.hash),redirectedFrom:void 0,href:ge})}let Ce;if(se.path!=null)Ce=mt({},se,{path:$f(n,se.path,ke.path).path});else{const te=mt({},se.params);for(const de in te)te[de]==null&&delete te[de];Ce=mt({},se,{params:f(te)}),ke.params=f(ke.params)}const ye=e.resolve(Ce,ke),Ze=se.hash||"";ye.params=h(p(ye.params));const z=XP(r,mt({},se,{hash:GP(Ze),path:ye.path})),W=s.createHref(z);return mt({fullPath:z,hash:Ze,query:r===_0?II(se.query):se.query||{}},ye,{redirectedFrom:void 0,href:W})}function S(se){return typeof se=="string"?$f(n,se,c.value.path):mt({},se)}function x(se,ke){if(u!==se)return Aa(8,{from:ke,to:se})}function R(se){return b(se)}function D(se){return R(mt(S(se),{replace:!0}))}function L(se){const ke=se.matched[se.matched.length-1];if(ke&&ke.redirect){const{redirect:Ce}=ke;let ye=typeof Ce=="function"?Ce(se):Ce;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=S(ye):{path:ye},ye.params={}),mt({query:se.query,hash:se.hash,params:ye.path!=null?{}:se.params},ye)}}function b(se,ke){const Ce=u=_(se),ye=c.value,Ze=se.state,z=se.force,W=se.replace===!0,te=L(Ce);if(te)return b(mt(S(te),{state:typeof te=="object"?mt({},Ze,te.state):Ze,force:z,replace:W}),ke||Ce);const de=Ce;de.redirectedFrom=ke;let ge;return!z&&eI(r,ye,Ce)&&(ge=Aa(16,{to:de,from:ye}),ne(ye,ye,!0,!1)),(ge?Promise.resolve(ge):P(de,ye)).catch(he=>bs(he)?bs(he,2)?he:Y(he):N(he,de,ye)).then(he=>{if(he){if(bs(he,2))return b(mt({replace:W},S(he.to),{state:typeof he.to=="object"?mt({},Ze,he.to.state):Ze,force:z}),ke||de)}else he=w(de,ye,!0,W,Ze);return E(de,ye,he),he})}function A(se,ke){const Ce=x(se,ke);return Ce?Promise.reject(Ce):Promise.resolve()}function y(se){const ke=Ye.values().next().value;return ke&&typeof ke.runWithContext=="function"?ke.runWithContext(se):se()}function P(se,ke){let Ce;const[ye,Ze,z]=jI(se,ke);Ce=Vf(ye.reverse(),"beforeRouteLeave",se,ke);for(const te of ye)te.leaveGuards.forEach(de=>{Ce.push(yo(de,se,ke))});const W=A.bind(null,se,ke);return Ce.push(W),De(Ce).then(()=>{Ce=[];for(const te of o.list())Ce.push(yo(te,se,ke));return Ce.push(W),De(Ce)}).then(()=>{Ce=Vf(Ze,"beforeRouteUpdate",se,ke);for(const te of Ze)te.updateGuards.forEach(de=>{Ce.push(yo(de,se,ke))});return Ce.push(W),De(Ce)}).then(()=>{Ce=[];for(const te of z)if(te.beforeEnter)if(Wr(te.beforeEnter))for(const de of te.beforeEnter)Ce.push(yo(de,se,ke));else Ce.push(yo(te.beforeEnter,se,ke));return Ce.push(W),De(Ce)}).then(()=>(se.matched.forEach(te=>te.enterCallbacks={}),Ce=Vf(z,"beforeRouteEnter",se,ke,y),Ce.push(W),De(Ce))).then(()=>{Ce=[];for(const te of i.list())Ce.push(yo(te,se,ke));return Ce.push(W),De(Ce)}).catch(te=>bs(te,8)?te:Promise.reject(te))}function E(se,ke,Ce){a.list().forEach(ye=>y(()=>ye(se,ke,Ce)))}function w(se,ke,Ce,ye,Ze){const z=x(se,ke);if(z)return z;const W=ke===uo,te=Xi?history.state:{};Ce&&(ye||W?s.replace(se.fullPath,mt({scroll:W&&te&&te.scroll},Ze)):s.push(se.fullPath,Ze)),c.value=se,ne(se,ke,Ce,W),Y()}let k;function $(){k||(k=s.listen((se,ke,Ce)=>{if(!lt.listening)return;const ye=_(se),Ze=L(ye);if(Ze){b(mt(Ze,{replace:!0,force:!0}),ye).catch(Gl);return}u=ye;const z=c.value;Xi&&lI(d0(z.fullPath,Ce.delta),kh()),P(ye,z).catch(W=>bs(W,12)?W:bs(W,2)?(b(mt(S(W.to),{force:!0}),ye).then(te=>{bs(te,20)&&!Ce.delta&&Ce.type===wc.pop&&s.go(-1,!1)}).catch(Gl),Promise.reject()):(Ce.delta&&s.go(-Ce.delta,!1),N(W,ye,z))).then(W=>{W=W||w(ye,z,!1),W&&(Ce.delta&&!bs(W,8)?s.go(-Ce.delta,!1):Ce.type===wc.pop&&bs(W,20)&&s.go(-1,!1)),E(ye,z,W)}).catch(Gl)}))}let U=kl(),Z=kl(),ee;function N(se,ke,Ce){Y(se);const ye=Z.list();return ye.length?ye.forEach(Ze=>Ze(se,ke,Ce)):console.error(se),Promise.reject(se)}function H(){return ee&&c.value!==uo?Promise.resolve():new Promise((se,ke)=>{U.add([se,ke])})}function Y(se){return ee||(ee=!se,$(),U.list().forEach(([ke,Ce])=>se?Ce(se):ke()),U.reset()),se}function ne(se,ke,Ce,ye){const{scrollBehavior:Ze}=t;if(!Xi||!Ze)return Promise.resolve();const z=!Ce&&cI(d0(se.fullPath,0))||(ye||!Ce)&&history.state&&history.state.scroll||null;return fn().then(()=>Ze(se,ke,z)).then(W=>W&&aI(W)).catch(W=>N(W,se,ke))}const Q=se=>s.go(se);let we;const Ye=new Set,lt={currentRoute:c,listening:!0,addRoute:g,removeRoute:C,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:T,resolve:_,options:t,push:R,replace:D,go:Q,back:()=>Q(-1),forward:()=>Q(1),beforeEach:o.add,beforeResolve:i.add,afterEach:a.add,onError:Z.add,isReady:H,install(se){const ke=this;se.component("RouterLink",LI),se.component("RouterView",$I),se.config.globalProperties.$router=ke,Object.defineProperty(se.config.globalProperties,"$route",{enumerable:!0,get:()=>tt(c)}),Xi&&!we&&c.value===uo&&(we=!0,R(s.location).catch(Ze=>{}));const Ce={};for(const Ze in uo)Object.defineProperty(Ce,Ze,{get:()=>c.value[Ze],enumerable:!0});se.provide(bh,ke),se.provide(rm,Xy(Ce)),se.provide(jp,c);const ye=se.unmount;Ye.add(se),se.unmount=function(){Ye.delete(se),Ye.size<1&&(u=uo,k&&k(),k=null,c.value=uo,we=!1,ee=!1),ye()}}};function De(se){return se.reduce((ke,Ce)=>ke.then(()=>y(Ce)),Promise.resolve())}return lt}function jI(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const a=e.matched[i];a&&(t.matched.find(u=>Sa(u,a))?r.push(a):n.push(a));const c=t.matched[i];c&&(e.matched.find(u=>Sa(u,c))||s.push(c))}return[n,r,s]}function an(){return tr(bh)}function za(t){return tr(rm)}const UI="/assets/logo02-BzNWneaE.png";/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let _k;const Ch=t=>_k=t,kk=Symbol();function Up(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Ql;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Ql||(Ql={}));function FI(){const t=jg(!0),e=t.run(()=>K({}));let n=[],r=[];const s=Mi({install(o){Ch(s),s._a=o,o.provide(kk,s),o.config.globalProperties.$pinia=s,r.forEach(i=>n.push(i)),r=[]},use(o){return this._a?n.push(o):r.push(o),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return s}const bk=()=>{};function A0(t,e,n,r=bk){t.push(e);const s=()=>{const o=t.indexOf(e);o>-1&&(t.splice(o,1),r())};return!n&&Vy()&&ZS(s),s}function Wi(t,...e){t.slice().forEach(n=>{n(...e)})}const BI=t=>t(),T0=Symbol(),jf=Symbol();function Fp(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],s=t[n];Up(s)&&Up(r)&&t.hasOwnProperty(n)&&!Ut(r)&&!So(r)?t[n]=Fp(s,r):t[n]=r}return t}const qI=Symbol();function HI(t){return!Up(t)||!Object.prototype.hasOwnProperty.call(t,qI)}const{assign:go}=Object;function zI(t){return!!(Ut(t)&&t.effect)}function WI(t,e,n,r){const{state:s,actions:o,getters:i}=e,a=n.state.value[t];let c;function u(){a||(n.state.value[t]=s?s():{});const h=yA(n.state.value[t]);return go(h,o,Object.keys(i||{}).reduce((f,p)=>(f[p]=Mi(G(()=>{Ch(n);const g=n._s.get(t);return i[p].call(g,g)})),f),{}))}return c=Ck(t,u,e,n,r,!0),c}function Ck(t,e,n={},r,s,o){let i;const a=go({actions:{}},n),c={deep:!0};let u,h,f=[],p=[],g;const C=r.state.value[t];!o&&!C&&(r.state.value[t]={}),K({});let T;function v(A){let y;u=h=!1,typeof A=="function"?(A(r.state.value[t]),y={type:Ql.patchFunction,storeId:t,events:g}):(Fp(r.state.value[t],A),y={type:Ql.patchObject,payload:A,storeId:t,events:g});const P=T=Symbol();fn().then(()=>{T===P&&(u=!0)}),h=!0,Wi(f,y,r.state.value[t])}const _=o?function(){const{state:y}=n,P=y?y():{};this.$patch(E=>{go(E,P)})}:bk;function S(){i.stop(),f=[],p=[],r._s.delete(t)}const x=(A,y="")=>{if(T0 in A)return A[jf]=y,A;const P=function(){Ch(r);const E=Array.from(arguments),w=[],k=[];function $(ee){w.push(ee)}function U(ee){k.push(ee)}Wi(p,{args:E,name:P[jf],store:D,after:$,onError:U});let Z;try{Z=A.apply(this&&this.$id===t?this:D,E)}catch(ee){throw Wi(k,ee),ee}return Z instanceof Promise?Z.then(ee=>(Wi(w,ee),ee)).catch(ee=>(Wi(k,ee),Promise.reject(ee))):(Wi(w,Z),Z)};return P[T0]=!0,P[jf]=y,P},R={_p:r,$id:t,$onAction:A0.bind(null,p),$patch:v,$reset:_,$subscribe(A,y={}){const P=A0(f,A,y.detached,()=>E()),E=i.run(()=>Ve(()=>r.state.value[t],w=>{(y.flush==="sync"?h:u)&&A({storeId:t,type:Ql.direct,events:g},w)},go({},c,y)));return P},$dispose:S},D=Sn(R);r._s.set(t,D);const b=(r._a&&r._a.runWithContext||BI)(()=>r._e.run(()=>(i=jg()).run(()=>e({action:x}))));for(const A in b){const y=b[A];if(Ut(y)&&!zI(y)||So(y))o||(C&&HI(y)&&(Ut(y)?y.value=C[A]:Fp(y,C[A])),r.state.value[t][A]=y);else if(typeof y=="function"){const P=x(y,A);b[A]=P,a.actions[A]=y}}return go(D,b),go(Ge(D),b),Object.defineProperty(D,"$state",{get:()=>r.state.value[t],set:A=>{v(y=>{go(y,A)})}}),r._p.forEach(A=>{go(D,i.run(()=>A({store:D,app:r._a,pinia:r,options:a})))}),C&&o&&n.hydrate&&n.hydrate(D.$state,C),u=!0,h=!0,D}/*! #__NO_SIDE_EFFECTS__ */function Yr(t,e,n){let r;const s=typeof e=="function";r=s?n:e;function o(i,a){const c=QA();return i=i||(c?tr(kk,null):null),i&&Ch(i),i=_k,i._s.has(t)||(s?Ck(t,e,r,i):WI(t,r,i)),i._s.get(t)}return o.$id=t,o}const GI=Yr("splash",()=>{const t=K(!0),e=K(!1),n=K(""),r=()=>{t.value=!1},s=()=>{t.value=!0},o=c=>{e.value=c},i=c=>{n.value=c};return{show:t,loading:e,loadingMessage:n,hideSplash:r,showSplash:s,setLoading:o,setLoadingMessage:i,showLoadingWithMessage:(c,u=3e3)=>{i(c),s(),o(!0),setTimeout(()=>{o(!1),setTimeout(()=>{r(),i("")},500)},u)}}}),pt=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},KI={key:0,class:"splash-screen"},QI={class:"content"},YI={class:"logo-container"},ZI={key:0,class:"loading"},JI={key:0,class:"loading-text"},XI={__name:"SplashScreen",setup(t){const e=GI(),n=s=>{console.warn("Logo failed to load, trying fallback"),s.target.src="../assets/logo.png",s.target.onerror=()=>{console.warn("Fallback logo also failed, using text fallback"),s.target.style.display="none"}},r=()=>{console.log("Logo loaded successfully")};return ft(()=>{e.setLoading(!0),e.setLoadingMessage("Initializing...");const s=()=>{e.setLoadingMessage("Almost ready..."),setTimeout(()=>{e.setLoading(!1),e.setLoadingMessage(""),setTimeout(()=>{e.hideSplash()},500)},800)};return window.addEventListener("appReady",s),setTimeout(()=>{e.show&&(console.warn("Splash screen timeout, forcing hide"),s())},8e3),()=>{window.removeEventListener("appReady",s)}}),(s,o)=>(M(),$n(Lo,{name:"splash-fade"},{default:br(()=>[tt(e).show?(M(),O("div",KI,[o[1]||(o[1]=l("div",{class:"background"},null,-1)),o[2]||(o[2]=l("div",{class:"floaters"},[l("div",{class:"floater floater-1"}),l("div",{class:"floater floater-2"}),l("div",{class:"floater floater-3"}),l("div",{class:"floater floater-4"}),l("div",{class:"floater floater-5"}),l("div",{class:"floater floater-6"}),l("div",{class:"particle particle-1"}),l("div",{class:"particle particle-2"}),l("div",{class:"particle particle-3"}),l("div",{class:"particle particle-4"}),l("div",{class:"particle particle-5"}),l("div",{class:"particle particle-6"}),l("div",{class:"particle particle-7"}),l("div",{class:"particle particle-8"}),l("div",{class:"orb orb-1"}),l("div",{class:"orb orb-2"}),l("div",{class:"orb orb-3"})],-1)),l("div",QI,[l("div",YI,[l("img",{src:UI,alt:"PRE GROUP Logo",class:"logo",onError:n,onLoad:r},null,32)]),tt(e).loading?(M(),O("div",ZI,[o[0]||(o[0]=l("div",{class:"loading-spinner"},null,-1)),tt(e).loadingMessage?(M(),O("p",JI,B(tt(e).loadingMessage),1)):fe("",!0)])):fe("",!0)])])):fe("",!0)]),_:1}))}},e3=pt(XI,[["__scopeId","data-v-d8f1525e"]]),Bp={xs:18,sm:24,md:32,lg:38,xl:46},Uc={size:String};function Fc(t,e=Bp){return G(()=>t.size!==void 0?{fontSize:t.size in e?`${e[t.size]}px`:t.size}:null)}function Vr(t,e){return t!==void 0&&t()||e}function ste(t,e){if(t!==void 0){const n=t();if(n!=null)return n.slice()}return e}function hi(t,e){return t!==void 0?e.concat(t()):e}function t3(t,e){return t===void 0?e:e!==void 0?e.concat(t()):t()}const P0="0 0 24 24",Uf=t=>t,Ff=t=>`ionicons ${t}`,Ek={"mdi-":t=>`mdi ${t}`,"icon-":Uf,"bt-":t=>`bt ${t}`,"eva-":t=>`eva ${t}`,"ion-md":Ff,"ion-ios":Ff,"ion-logo":Ff,"iconfont ":Uf,"ti-":t=>`themify-icon ${t}`,"bi-":t=>`bootstrap-icons ${t}`,"i-":Uf},Sk={o_:"-outlined",r_:"-round",s_:"-sharp"},Ak={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},n3=new RegExp("^("+Object.keys(Ek).join("|")+")"),r3=new RegExp("^("+Object.keys(Sk).join("|")+")"),I0=new RegExp("^("+Object.keys(Ak).join("|")+")"),s3=/^[Mm]\s?[-+]?\.?\d/,o3=/^img:/,i3=/^svguse:/,a3=/^ion-/,l3=/^(fa-(classic|sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,Pr=An({name:"QIcon",props:{...Uc,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=It(),r=Fc(t),s=G(()=>"q-icon"+(t.left===!0?" on-left":"")+(t.right===!0?" on-right":"")+(t.color!==void 0?` text-${t.color}`:"")),o=G(()=>{let i,a=t.name;if(a==="none"||!a)return{none:!0};if(n.iconMapFn!==null){const h=n.iconMapFn(a);if(h!==void 0)if(h.icon!==void 0){if(a=h.icon,a==="none"||!a)return{none:!0}}else return{cls:h.cls,content:h.content!==void 0?h.content:" "}}if(s3.test(a)===!0){const[h,f=P0]=a.split("|");return{svg:!0,viewBox:f,nodes:h.split("&&").map(p=>{const[g,C,T]=p.split("@@");return ue("path",{style:C,d:g,transform:T})})}}if(o3.test(a)===!0)return{img:!0,src:a.substring(4)};if(i3.test(a)===!0){const[h,f=P0]=a.split("|");return{svguse:!0,src:h.substring(7),viewBox:f}}let c=" ";const u=a.match(n3);if(u!==null)i=Ek[u[1]](a);else if(l3.test(a)===!0)i=a;else if(a3.test(a)===!0)i=`ionicons ion-${n.platform.is.ios===!0?"ios":"md"}${a.substring(3)}`;else if(I0.test(a)===!0){i="notranslate material-symbols";const h=a.match(I0);h!==null&&(a=a.substring(6),i+=Ak[h[1]]),c=a}else{i="notranslate material-icons";const h=a.match(r3);h!==null&&(a=a.substring(2),i+=Sk[h[1]]),c=a}return{cls:i,content:c}});return()=>{const i={class:s.value,style:r.value,"aria-hidden":"true"};return o.value.none===!0?ue(t.tag,i,Vr(e.default)):o.value.img===!0?ue(t.tag,i,hi(e.default,[ue("img",{src:o.value.src})])):o.value.svg===!0?ue(t.tag,i,hi(e.default,[ue("svg",{viewBox:o.value.viewBox||"0 0 24 24"},o.value.nodes)])):o.value.svguse===!0?ue(t.tag,i,hi(e.default,[ue("svg",{viewBox:o.value.viewBox},[ue("use",{"xlink:href":o.value.src})])])):(o.value.cls!==void 0&&(i.class+=" "+o.value.cls),ue(t.tag,i,hi(e.default,[o.value.content])))}}}),Zr=Yr("notifications",()=>{const t=K([]),e=K(1),n=(u,h,f=5e3)=>{const p=e.value++,g={id:p,type:u,message:h,timestamp:Date.now(),visible:!0};return t.value.push(g),f>0&&setTimeout(()=>{r(p)},f),p},r=u=>{const h=t.value.findIndex(f=>f.id===u);h>-1&&t.value.splice(h,1)};return{notifications:t,addNotification:n,removeNotification:r,clearNotifications:()=>{t.value=[]},showSuccess:(u,h)=>n("success",u,h),showError:(u,h)=>n("error",u,h),showWarning:(u,h)=>n("warning",u,h),showInfo:(u,h)=>n("info",u,h)}}),c3={class:"notification-container"},u3=["onClick"],d3={class:"notification-content"},h3={class:"notification-icon"},f3={class:"notification-message"},p3=["onClick"],g3=Object.assign({name:"NotificationPopup"},{__name:"NotificationPopup",setup(t){const e=Zr(),n=G(()=>e.notifications),r=i=>{e.removeNotification(i)},s=i=>{switch(i){case"success":return"check_circle";case"error":return"error";case"warning":return"warning";case"info":return"info";default:return"info"}},o=i=>{switch(i){case"success":return"positive";case"error":return"negative";case"warning":return"warning";case"info":return"primary";default:return"primary"}};return(i,a)=>(M(),O("div",c3,[ze(em,{name:"notification",tag:"div"},{default:br(()=>[(M(!0),O(Oe,null,ot(n.value,c=>(M(),O("div",{key:c.id,class:be(["notification-popup",`notification-${c.type}`,{"notification-visible":c.visible}]),onClick:u=>r(c.id)},[l("div",d3,[l("div",h3,[ze(Pr,{name:s(c.type),color:o(c.type),size:"20px"},null,8,["name","color"])]),l("div",f3,B(c.message),1),l("button",{class:"notification-close",onClick:ht(u=>r(c.id),["stop"])},[ze(Pr,{name:"close",size:"16px"})],8,p3)]),a[0]||(a[0]=l("div",{class:"notification-progress"},[l("div",{class:"notification-progress-bar",style:{animationDuration:"5s"}})],-1))],10,u3))),128))]),_:1})]))}}),m3=pt(g3,[["__scopeId","data-v-e36fb2be"]]);/*! Capacitor: https://capacitorjs.com/ - MIT License */var Ti;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ti||(Ti={}));class sd extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const v3=t=>{var e,n;return t?.androidBridge?"android":!((n=(e=t?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},w3=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},s=()=>e!==null?e.name:v3(t),o=()=>s()!=="web",i=f=>{const p=u.get(f);return!!(p?.platforms.has(s())||a(f))},a=f=>{var p;return(p=n.PluginHeaders)===null||p===void 0?void 0:p.find(g=>g.name===f)},c=f=>t.console.error(f),u=new Map,h=(f,p={})=>{const g=u.get(f);if(g)return console.warn(`Capacitor plugin "${f}" already registered. Cannot register plugins twice.`),g.proxy;const C=s(),T=a(f);let v;const _=async()=>(!v&&C in p?v=typeof p[C]=="function"?v=await p[C]():v=p[C]:e!==null&&!v&&"web"in p&&(v=typeof p.web=="function"?v=await p.web():v=p.web),v),S=(A,y)=>{var P,E;if(T){const w=T?.methods.find(k=>y===k.name);if(w)return w.rtype==="promise"?k=>n.nativePromise(f,y.toString(),k):(k,$)=>n.nativeCallback(f,y.toString(),k,$);if(A)return(P=A[y])===null||P===void 0?void 0:P.bind(A)}else{if(A)return(E=A[y])===null||E===void 0?void 0:E.bind(A);throw new sd(`"${f}" plugin is not implemented on ${C}`,Ti.Unimplemented)}},x=A=>{let y;const P=(...E)=>{const w=_().then(k=>{const $=S(k,A);if($){const U=$(...E);return y=U?.remove,U}else throw new sd(`"${f}.${A}()" is not implemented on ${C}`,Ti.Unimplemented)});return A==="addListener"&&(w.remove=async()=>y()),w};return P.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(P,"name",{value:A,writable:!1,configurable:!1}),P},R=x("addListener"),D=x("removeListener"),L=(A,y)=>{const P=R({eventName:A},y),E=async()=>{const k=await P;D({eventName:A,callbackId:k},y)},w=new Promise(k=>P.then(()=>k({remove:E})));return w.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await E()},w},b=new Proxy({},{get(A,y){switch(y){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return T?L:R;case"removeListener":return D;default:return x(y)}}});return r[f]=b,u.set(f,{name:f,proxy:b,platforms:new Set([...Object.keys(p),...T?[C]:[]])}),b};return n.convertFileSrc||(n.convertFileSrc=f=>f),n.getPlatform=s,n.handleError=c,n.isNativePlatform=o,n.isPluginAvailable=i,n.registerPlugin=h,n.Exception=sd,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},y3=t=>t.Capacitor=w3(t),Ht=y3(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Wa=Ht.registerPlugin;class sm{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const o=this.windowListeners[e];o&&!o.registered&&this.addWindowListener(o),r&&this.sendRetainedArgumentsForEvent(e);const i=async()=>this.removeListener(e,n);return Promise.resolve({remove:i})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const s=this.listeners[e];if(!s){if(r){let o=this.retainedEventArguments[e];o||(o=[]),o.push(n),this.retainedEventArguments[e]=o}return}s.forEach(o=>o(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new Ht.Exception(e,Ti.Unimplemented)}unavailable(e="not available"){return new Ht.Exception(e,Ti.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const s=r.indexOf(n);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const R0=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),D0=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class _3 extends sm{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[s,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=D0(s).trim(),o=D0(o).trim(),n[s]=o}),n}async setCookie(e){try{const n=R0(e.key),r=R0(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),i=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${s}; path=${o}; ${i};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Wa("CapacitorCookies",{web:()=>new _3});const k3=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const s=r.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},r.onerror=s=>n(s),r.readAsDataURL(t)}),b3=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(s=>s.toLocaleLowerCase()).reduce((s,o,i)=>(s[o]=t[e[i]],s),{})},C3=(t,e=!0)=>t?Object.entries(t).reduce((r,s)=>{const[o,i]=s;let a,c;return Array.isArray(i)?(c="",i.forEach(u=>{a=e?encodeURIComponent(u):u,c+=`${o}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(i):i,c=`${o}=${a}`),`${r}&${c}`},"").substr(1):null,Tk=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),s=b3(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(s.includes("application/x-www-form-urlencoded")){const o=new URLSearchParams;for(const[i,a]of Object.entries(t.data||{}))o.set(i,a);n.body=o.toString()}else if(s.includes("multipart/form-data")||t.data instanceof FormData){const o=new FormData;if(t.data instanceof FormData)t.data.forEach((a,c)=>{o.append(c,a)});else for(const a of Object.keys(t.data))o.append(a,t.data[a]);n.body=o;const i=new Headers(n.headers);i.delete("content-type"),n.headers=i}else(s.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class E3 extends sm{async request(e){const n=Tk(e,e.webFetchExtra),r=C3(e.params,e.shouldEncodeUrlParams),s=r?`${e.url}?${r}`:e.url,o=await fetch(s,n),i=o.headers.get("content-type")||"";let{responseType:a="text"}=o.ok?e:{};i.includes("application/json")&&(a="json");let c,u;switch(a){case"arraybuffer":case"blob":u=await o.blob(),c=await k3(u);break;case"json":c=await o.json();break;case"document":case"text":default:c=await o.text()}const h={};return o.headers.forEach((f,p)=>{h[p]=f}),{data:c,headers:h,status:o.status,url:o.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}const qp=Wa("CapacitorHttp",{web:()=>new E3}),Ls=Object.freeze(Object.defineProperty({__proto__:null,Capacitor:Ht,CapacitorException:sd,CapacitorHttp:qp,get ExceptionCode(){return Ti},WebPlugin:sm,buildRequestInit:Tk,registerPlugin:Wa},Symbol.toStringTag,{value:"Module"})),Du=Wa("Network",{web:()=>Se(()=>import("./web-BurFYntg.js"),[]).then(t=>new t.NetworkWeb)}),S3=An({name:"QAvatar",props:{...Uc,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(t,{slots:e}){const n=Fc(t),r=G(()=>"q-avatar"+(t.color?` bg-${t.color}`:"")+(t.textColor?` text-${t.textColor} q-chip--colored`:"")+(t.square===!0?" q-avatar--square":t.rounded===!0?" rounded-borders":"")),s=G(()=>t.fontSize?{fontSize:t.fontSize}:null);return()=>{const o=t.icon!==void 0?[ue(Pr,{name:t.icon})]:void 0;return ue("div",{class:r.value,style:n.value},[ue("div",{class:"q-avatar__content row flex-center overflow-hidden",style:s.value},t3(e.default,o))])}}}),A3={size:{type:[String,Number],default:"1em"},color:String};function T3(t){return{cSize:G(()=>t.size in Bp?`${Bp[t.size]}px`:t.size),classes:G(()=>"q-spinner"+(t.color?` text-${t.color}`:""))}}const Ta=An({name:"QSpinner",props:{...A3,thickness:{type:Number,default:5}},setup(t){const{cSize:e,classes:n}=T3(t);return()=>ue("svg",{class:n.value+" q-spinner-mat",width:e.value,height:e.value,viewBox:"25 25 50 50"},[ue("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":t.thickness,"stroke-miterlimit":"10"})])}});function Hp(t,e){const n=t.style;for(const r in e)n[r]=e[r]}function P3(t){if(t==null)return;if(typeof t=="string")try{return document.querySelector(t)||void 0}catch{return}const e=tt(t);if(e)return e.$el||e}function I3(t,e){if(t==null||t.contains(e)===!0)return!0;for(let n=t.nextElementSibling;n!==null;n=n.nextElementSibling)if(n.contains(e))return!0;return!1}function R3(t,e=250){let n=!1,r;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},e),r=t.apply(this,arguments)),r}}function x0(t,e,n,r){n.modifiers.stop===!0&&Rd(t);const s=n.modifiers.color;let o=n.modifiers.center;o=o===!0||r===!0;const i=document.createElement("span"),a=document.createElement("span"),c=vP(t),{left:u,top:h,width:f,height:p}=e.getBoundingClientRect(),g=Math.sqrt(f*f+p*p),C=g/2,T=`${(f-g)/2}px`,v=o?T:`${c.left-u-C}px`,_=`${(p-g)/2}px`,S=o?_:`${c.top-h-C}px`;a.className="q-ripple__inner",Hp(a,{height:`${g}px`,width:`${g}px`,transform:`translate3d(${v},${S},0) scale3d(.2,.2,1)`,opacity:0}),i.className=`q-ripple${s?" text-"+s:""}`,i.setAttribute("dir","ltr"),i.appendChild(a),e.appendChild(i);const x=()=>{i.remove(),clearTimeout(R)};n.abort.push(x);let R=setTimeout(()=>{a.classList.add("q-ripple__inner--enter"),a.style.transform=`translate3d(${T},${_},0) scale3d(1,1,1)`,a.style.opacity=.2,R=setTimeout(()=>{a.classList.remove("q-ripple__inner--enter"),a.classList.add("q-ripple__inner--leave"),a.style.opacity=0,R=setTimeout(()=>{i.remove(),n.abort.splice(n.abort.indexOf(x),1)},275)},250)},50)}function L0(t,{modifiers:e,value:n,arg:r}){const s=Object.assign({},t.cfg.ripple,e,n);t.modifiers={early:s.early===!0,stop:s.stop===!0,center:s.center===!0,color:s.color||r,keyCodes:[].concat(s.keyCodes||13)}}const D3=mP({name:"ripple",beforeMount(t,e){const n=e.instance.$.appContext.config.globalProperties.$q.config||{};if(n.ripple===!1)return;const r={cfg:n,enabled:e.value!==!1,modifiers:{},abort:[],start(s){r.enabled===!0&&s.qSkipRipple!==!0&&s.type===(r.modifiers.early===!0?"pointerdown":"click")&&x0(s,t,r,s.qKeyEvent===!0)},keystart:R3(s=>{r.enabled===!0&&s.qSkipRipple!==!0&&mc(s,r.modifiers.keyCodes)===!0&&s.type===`key${r.modifiers.early===!0?"down":"up"}`&&x0(s,t,r,!0)},300)};L0(r,e),t.__qripple=r,yP(r,"main",[[t,"pointerdown","start","passive"],[t,"click","start","passive"],[t,"keydown","keystart","passive"],[t,"keyup","keystart","passive"]])},updated(t,e){if(e.oldValue!==e.value){const n=t.__qripple;n!==void 0&&(n.enabled=e.value!==!1,n.enabled===!0&&Object(e.value)===e.value&&L0(n,e))}},beforeUnmount(t){const e=t.__qripple;e!==void 0&&(e.abort.forEach(n=>{n()}),_P(e,"main"),delete t._qripple)}}),Pk={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},x3=Object.keys(Pk),Ik={align:{type:String,validator:t=>x3.includes(t)}};function Rk(t){return G(()=>{const e=t.align===void 0?t.vertical===!0?"stretch":"left":t.align;return`${t.vertical===!0?"items":"justify"}-${Pk[e]}`})}function od(t){if(Object(t.$parent)===t.$parent)return t.$parent;let{parent:e}=t.$;for(;Object(e)===e;){if(Object(e.proxy)===e.proxy)return e.proxy;e=e.parent}}function Dk(t){return t.appContext.config.globalProperties.$router!==void 0}function xk(t){return t.isUnmounted===!0||t.isDeactivated===!0}function M0(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}function N0(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function L3(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(Array.isArray(s)===!1||s.length!==r.length||r.some((o,i)=>o!==s[i]))return!1}return!0}function O0(t,e){return Array.isArray(e)===!0?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function M3(t,e){return Array.isArray(t)===!0?O0(t,e):Array.isArray(e)===!0?O0(e,t):t===e}function N3(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(M3(t[n],e[n])===!1)return!1;return!0}const Lk={to:[String,Object],replace:Boolean,href:String,target:String,disable:Boolean},ote={...Lk,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"}};function O3({fallbackTag:t,useDisableForRouterLinkProps:e=!0}={}){const n=It(),{props:r,proxy:s,emit:o}=n,i=Dk(n),a=G(()=>r.disable!==!0&&r.href!==void 0),c=G(e===!0?()=>i===!0&&r.disable!==!0&&a.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!=="":()=>i===!0&&a.value!==!0&&r.to!==void 0&&r.to!==null&&r.to!==""),u=G(()=>c.value===!0?S(r.to):null),h=G(()=>u.value!==null),f=G(()=>a.value===!0||h.value===!0),p=G(()=>r.type==="a"||f.value===!0?"a":r.tag||t||"div"),g=G(()=>a.value===!0?{href:r.href,target:r.target}:h.value===!0?{href:u.value.href,target:r.target}:{}),C=G(()=>{if(h.value===!1)return-1;const{matched:D}=u.value,{length:L}=D,b=D[L-1];if(b===void 0)return-1;const A=s.$route.matched;if(A.length===0)return-1;const y=A.findIndex(N0.bind(null,b));if(y!==-1)return y;const P=M0(D[L-2]);return L>1&&M0(b)===P&&A[A.length-1].path!==P?A.findIndex(N0.bind(null,D[L-2])):y}),T=G(()=>h.value===!0&&C.value!==-1&&L3(s.$route.params,u.value.params)),v=G(()=>T.value===!0&&C.value===s.$route.matched.length-1&&N3(s.$route.params,u.value.params)),_=G(()=>h.value===!0?v.value===!0?` ${r.exactActiveClass} ${r.activeClass}`:r.exact===!0?"":T.value===!0?` ${r.activeClass}`:"":"");function S(D){try{return s.$router.resolve(D)}catch{}return null}function x(D,{returnRouterError:L,to:b=r.to,replace:A=r.replace}={}){if(r.disable===!0)return D.preventDefault(),Promise.resolve(!1);if(D.metaKey||D.altKey||D.ctrlKey||D.shiftKey||D.button!==void 0&&D.button!==0||r.target==="_blank")return Promise.resolve(!1);D.preventDefault();const y=s.$router[A===!0?"replace":"push"](b);return L===!0?y:y.then(()=>{}).catch(()=>{})}function R(D){if(h.value===!0){const L=b=>x(D,b);o("click",D,L),D.defaultPrevented!==!0&&L()}else o("click",D)}return{hasRouterLink:h,hasHrefLink:a,hasLink:f,linkTag:p,resolvedLink:u,linkIsActive:T,linkIsExactActive:v,linkClass:_,linkAttrs:g,getLink:S,navigateToRouterLink:x,navigateOnClick:R}}const $0={none:0,xs:4,sm:8,md:16,lg:24,xl:32},$3={xs:8,sm:10,md:14,lg:20,xl:24},V3=["button","submit","reset"],j3=/[^\s]\/[^\s]/,U3=["flat","outline","push","unelevated"];function F3(t,e){return t.flat===!0?"flat":t.outline===!0?"outline":t.push===!0?"push":t.unelevated===!0?"unelevated":e}const B3={...Uc,...Lk,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...U3.reduce((t,e)=>(t[e]=Boolean)&&t,{}),square:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Ik.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean},q3={...B3,round:Boolean};function H3(t){const e=Fc(t,$3),n=Rk(t),{hasRouterLink:r,hasLink:s,linkTag:o,linkAttrs:i,navigateOnClick:a}=O3({fallbackTag:"button"}),c=G(()=>{const v=t.fab===!1&&t.fabMini===!1?e.value:{};return t.padding!==void 0?Object.assign({},v,{padding:t.padding.split(/\s+/).map(_=>_ in $0?$0[_]+"px":_).join(" "),minWidth:"0",minHeight:"0"}):v}),u=G(()=>t.rounded===!0||t.fab===!0||t.fabMini===!0),h=G(()=>t.disable!==!0&&t.loading!==!0),f=G(()=>h.value===!0?t.tabindex||0:-1),p=G(()=>F3(t,"standard")),g=G(()=>{const v={tabindex:f.value};return s.value===!0?Object.assign(v,i.value):V3.includes(t.type)===!0&&(v.type=t.type),o.value==="a"?(t.disable===!0?v["aria-disabled"]="true":v.href===void 0&&(v.role="button"),r.value!==!0&&j3.test(t.type)===!0&&(v.type=t.type)):t.disable===!0&&(v.disabled="",v["aria-disabled"]="true"),t.loading===!0&&t.percentage!==void 0&&Object.assign(v,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":t.percentage}),v}),C=G(()=>{let v;t.color!==void 0?t.flat===!0||t.outline===!0?v=`text-${t.textColor||t.color}`:v=`bg-${t.color} text-${t.textColor||"white"}`:t.textColor&&(v=`text-${t.textColor}`);const _=t.round===!0?"round":`rectangle${u.value===!0?" q-btn--rounded":t.square===!0?" q-btn--square":""}`;return`q-btn--${p.value} q-btn--${_}`+(v!==void 0?" "+v:"")+(h.value===!0?" q-btn--actionable q-focusable q-hoverable":t.disable===!0?" disabled":"")+(t.fab===!0?" q-btn--fab":t.fabMini===!0?" q-btn--fab-mini":"")+(t.noCaps===!0?" q-btn--no-uppercase":"")+(t.dense===!0?" q-btn--dense":"")+(t.stretch===!0?" no-border-radius self-stretch":"")+(t.glossy===!0?" glossy":"")+(t.square?" q-btn--square":"")}),T=G(()=>n.value+(t.stack===!0?" column":" row")+(t.noWrap===!0?" no-wrap text-no-wrap":"")+(t.loading===!0?" q-btn__content--hidden":""));return{classes:C,style:c,innerClasses:T,attributes:g,hasLink:s,linkTag:o,navigateOnClick:a,isActionable:h}}const{passiveCapture:vr}=_r;let Gi=null,Ki=null,Qi=null;const zp=An({name:"QBtn",props:{...q3,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(t,{slots:e,emit:n}){const{proxy:r}=It(),{classes:s,style:o,innerClasses:i,attributes:a,hasLink:c,linkTag:u,navigateOnClick:h,isActionable:f}=H3(t),p=K(null),g=K(null);let C=null,T,v=null;const _=G(()=>t.label!==void 0&&t.label!==null&&t.label!==""),S=G(()=>t.disable===!0||t.ripple===!1?!1:{keyCodes:c.value===!0?[13,32]:[13],...t.ripple===!0?{}:t.ripple}),x=G(()=>({center:t.round})),R=G(()=>{const $=Math.max(0,Math.min(100,t.percentage));return $>0?{transition:"transform 0.6s",transform:`translateX(${$-100}%)`}:{}}),D=G(()=>{if(t.loading===!0)return{onMousedown:k,onTouchstart:k,onClick:k,onKeydown:k,onKeyup:k};if(f.value===!0){const $={onClick:b,onKeydown:A,onMousedown:P};if(r.$q.platform.has.touch===!0){const U=t.onTouchstart!==void 0?"":"Passive";$[`onTouchstart${U}`]=y}return $}return{onClick:kr}}),L=G(()=>({ref:p,class:"q-btn q-btn-item non-selectable no-outline "+s.value,style:o.value,...a.value,...D.value}));function b($){if(p.value!==null){if($!==void 0){if($.defaultPrevented===!0)return;const U=document.activeElement;if(t.type==="submit"&&U!==document.body&&p.value.contains(U)===!1&&U.contains(p.value)===!1){$.qAvoidFocus!==!0&&p.value.focus();const Z=()=>{document.removeEventListener("keydown",kr,!0),document.removeEventListener("keyup",Z,vr),p.value?.removeEventListener("blur",Z,vr)};document.addEventListener("keydown",kr,!0),document.addEventListener("keyup",Z,vr),p.value.addEventListener("blur",Z,vr)}}h($)}}function A($){p.value!==null&&(n("keydown",$),mc($,[13,32])===!0&&Ki!==p.value&&(Ki!==null&&w(),$.defaultPrevented!==!0&&($.qAvoidFocus!==!0&&p.value.focus(),Ki=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("keyup",E,!0),p.value.addEventListener("blur",E,vr)),kr($)))}function y($){p.value!==null&&(n("touchstart",$),$.defaultPrevented!==!0&&(Gi!==p.value&&(Gi!==null&&w(),Gi=p.value,C=$.target,C.addEventListener("touchcancel",E,vr),C.addEventListener("touchend",E,vr)),T=!0,v!==null&&clearTimeout(v),v=setTimeout(()=>{v=null,T=!1},200)))}function P($){p.value!==null&&($.qSkipRipple=T===!0,n("mousedown",$),$.defaultPrevented!==!0&&Qi!==p.value&&(Qi!==null&&w(),Qi=p.value,p.value.classList.add("q-btn--active"),document.addEventListener("mouseup",E,vr)))}function E($){if(p.value!==null&&!($?.type==="blur"&&document.activeElement===p.value)){if($?.type==="keyup"){if(Ki===p.value&&mc($,[13,32])===!0){const U=new MouseEvent("click",$);U.qKeyEvent=!0,$.defaultPrevented===!0&&Ji(U),$.cancelBubble===!0&&Rd(U),p.value.dispatchEvent(U),kr($),$.qKeyEvent=!0}n("keyup",$)}w()}}function w($){const U=g.value;$!==!0&&(Gi===p.value||Qi===p.value)&&U!==null&&U!==document.activeElement&&(U.setAttribute("tabindex",-1),U.focus()),Gi===p.value&&(C!==null&&(C.removeEventListener("touchcancel",E,vr),C.removeEventListener("touchend",E,vr)),Gi=C=null),Qi===p.value&&(document.removeEventListener("mouseup",E,vr),Qi=null),Ki===p.value&&(document.removeEventListener("keyup",E,!0),p.value?.removeEventListener("blur",E,vr),Ki=null),p.value?.classList.remove("q-btn--active")}function k($){kr($),$.qSkipRipple=!0}return Qr(()=>{w(!0)}),Object.assign(r,{click:$=>{f.value===!0&&b($)}}),()=>{let $=[];t.icon!==void 0&&$.push(ue(Pr,{name:t.icon,left:t.stack!==!0&&_.value===!0,role:"img"})),_.value===!0&&$.push(ue("span",{class:"block"},[t.label])),$=hi(e.default,$),t.iconRight!==void 0&&t.round===!1&&$.push(ue(Pr,{name:t.iconRight,right:t.stack!==!0&&_.value===!0,role:"img"}));const U=[ue("span",{class:"q-focus-helper",ref:g})];return t.loading===!0&&t.percentage!==void 0&&U.push(ue("span",{class:"q-btn__progress absolute-full overflow-hidden"+(t.darkPercentage===!0?" q-btn__progress--dark":"")},[ue("span",{class:"q-btn__progress-indicator fit block",style:R.value})])),U.push(ue("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+i.value},$)),t.loading!==null&&U.push(ue(Lo,{name:"q-transition--fade"},()=>t.loading===!0?[ue("span",{key:"loading",class:"absolute-full flex flex-center"},e.loading!==void 0?e.loading():[ue(Ta)])]:null)),dt(ue(u.value,L.value,U),[[D3,S.value,void 0,x.value]])}}});let z3=1,W3=document.body;function Eh(t,e){const n=document.createElement("div");if(n.id=e!==void 0?`q-portal--${e}--${z3++}`:t,xd.globalNodes!==void 0){const r=xd.globalNodes.class;r!==void 0&&(n.className=r)}return W3.appendChild(n),n}function om(t){t.remove()}let G3=0;const id={},ad={},Nr={},Mk={},K3=/^\s*$/,Nk=[],Q3=[void 0,null,!0,!1,""],im=["top-left","top-right","bottom-left","bottom-right","top","bottom","left","right","center"],Y3=["top-left","top-right","bottom-left","bottom-right"],xl={positive:{icon:t=>t.iconSet.type.positive,color:"positive"},negative:{icon:t=>t.iconSet.type.negative,color:"negative"},warning:{icon:t=>t.iconSet.type.warning,color:"warning",textColor:"dark"},info:{icon:t=>t.iconSet.type.info,color:"info"},ongoing:{group:!1,timeout:0,spinner:!0,color:"grey-8"}};function Ok(t,e,n){if(!t)return bl("parameter required");let r;const s={textColor:"white"};if(t.ignoreDefaults!==!0&&Object.assign(s,id),cr(t)===!1&&(s.type&&Object.assign(s,xl[s.type]),t={message:t}),Object.assign(s,xl[t.type||s.type],t),typeof s.icon=="function"&&(s.icon=s.icon(e)),s.spinner?(s.spinner===!0&&(s.spinner=Ta),s.spinner=Mi(s.spinner)):s.spinner=!1,s.meta={hasMedia:!!(s.spinner!==!1||s.icon||s.avatar),hasText:V0(s.message)||V0(s.caption)},s.position){if(im.includes(s.position)===!1)return bl("wrong position",t)}else s.position="bottom";if(Q3.includes(s.timeout)===!0)s.timeout=5e3;else{const c=Number(s.timeout);if(isNaN(c)||c<0)return bl("wrong timeout",t);s.timeout=Number.isFinite(c)?c:0}s.timeout===0?s.progress=!1:s.progress===!0&&(s.meta.progressClass="q-notification__progress"+(s.progressClass?` ${s.progressClass}`:""),s.meta.progressStyle={animationDuration:`${s.timeout+1e3}ms`});const o=(Array.isArray(t.actions)===!0?t.actions:[]).concat(t.ignoreDefaults!==!0&&Array.isArray(id.actions)===!0?id.actions:[]).concat(Array.isArray(xl[t.type]?.actions)===!0?xl[t.type].actions:[]),{closeBtn:i}=s;if(i&&o.push({label:typeof i=="string"?i:e.lang.label.close}),s.actions=o.map(({handler:c,noDismiss:u,...h})=>({flat:!0,...h,onClick:typeof c=="function"?()=>{c(),u!==!0&&a()}:()=>{a()}})),s.multiLine===void 0&&(s.multiLine=s.actions.length>1),Object.assign(s.meta,{class:`q-notification row items-stretch q-notification--${s.multiLine===!0?"multi-line":"standard"}`+(s.color!==void 0?` bg-${s.color}`:"")+(s.textColor!==void 0?` text-${s.textColor}`:"")+(s.classes!==void 0?` ${s.classes}`:""),wrapperClass:"q-notification__wrapper col relative-position border-radius-inherit "+(s.multiLine===!0?"column no-wrap justify-center":"row items-center"),contentClass:"q-notification__content row items-center"+(s.multiLine===!0?"":" col"),leftClass:s.meta.hasText===!0?"additional":"single",attrs:{role:"alert",...s.attrs}}),s.group===!1?(s.group=void 0,s.meta.group=void 0):((s.group===void 0||s.group===!0)&&(s.group=[s.message,s.caption,s.multiline].concat(s.actions.map(c=>`${c.label}*${c.icon}`)).join("|")),s.meta.group=s.group+"|"+s.position),s.actions.length===0?s.actions=void 0:s.meta.actionsClass="q-notification__actions row items-center "+(s.multiLine===!0?"justify-end":"col-auto")+(s.meta.hasMedia===!0?" q-notification__actions--with-media":""),n!==void 0){n.notif.meta.timer&&(clearTimeout(n.notif.meta.timer),n.notif.meta.timer=void 0),s.meta.uid=n.notif.meta.uid;const c=Nr[s.position].value.indexOf(n.notif);Nr[s.position].value[c]=s}else{const c=ad[s.meta.group];if(c===void 0){if(s.meta.uid=G3++,s.meta.badge=1,["left","right","center"].indexOf(s.position)!==-1)Nr[s.position].value.splice(Math.floor(Nr[s.position].value.length/2),0,s);else{const u=s.position.indexOf("top")!==-1?"unshift":"push";Nr[s.position].value[u](s)}s.group!==void 0&&(ad[s.meta.group]=s)}else{if(c.meta.timer&&(clearTimeout(c.meta.timer),c.meta.timer=void 0),s.badgePosition!==void 0){if(Y3.includes(s.badgePosition)===!1)return bl("wrong badgePosition",t)}else s.badgePosition=`top-${s.position.indexOf("left")!==-1?"right":"left"}`;s.meta.uid=c.meta.uid,s.meta.badge=c.meta.badge+1,s.meta.badgeClass=`q-notification__badge q-notification__badge--${s.badgePosition}`+(s.badgeColor!==void 0?` bg-${s.badgeColor}`:"")+(s.badgeTextColor!==void 0?` text-${s.badgeTextColor}`:"")+(s.badgeClass?` ${s.badgeClass}`:"");const u=Nr[s.position].value.indexOf(c);Nr[s.position].value[u]=ad[s.meta.group]=s}}const a=()=>{Z3(s),r=void 0};if(s.timeout>0&&(s.meta.timer=setTimeout(()=>{s.meta.timer=void 0,a()},s.timeout+1e3)),s.group!==void 0)return c=>{c!==void 0?bl("trying to update a grouped one which is forbidden",t):a()};if(r={dismiss:a,config:t,notif:s},n!==void 0){Object.assign(n,r);return}return c=>{if(r!==void 0)if(c===void 0)r.dismiss();else{const u=Object.assign({},r.config,c,{group:!1,position:s.position});Ok(u,e,r)}}}function Z3(t){t.meta.timer&&(clearTimeout(t.meta.timer),t.meta.timer=void 0);const e=Nr[t.position].value.indexOf(t);if(e!==-1){t.group!==void 0&&delete ad[t.meta.group];const n=Nk[""+t.meta.uid];if(n){const{width:r,height:s}=getComputedStyle(n);n.style.left=`${n.offsetLeft}px`,n.style.width=r,n.style.height=s}Nr[t.position].value.splice(e,1),typeof t.onDismiss=="function"&&t.onDismiss()}}function V0(t){return t!=null&&K3.test(t)!==!0}function bl(t,e){return console.error(`Notify: ${t}`,e),!1}function J3(){return An({name:"QNotifications",devtools:{hide:!0},setup(){return()=>ue("div",{class:"q-notifications"},im.map(t=>ue(em,{key:t,class:Mk[t],tag:"div",name:`q-notification--${t}`},()=>Nr[t].value.map(e=>{const n=e.meta,r=[];if(n.hasMedia===!0&&(e.spinner!==!1?r.push(ue(e.spinner,{class:"q-notification__spinner q-notification__spinner--"+n.leftClass,color:e.spinnerColor,size:e.spinnerSize})):e.icon?r.push(ue(Pr,{class:"q-notification__icon q-notification__icon--"+n.leftClass,name:e.icon,color:e.iconColor,size:e.iconSize,role:"img"})):e.avatar&&r.push(ue(S3,{class:"q-notification__avatar q-notification__avatar--"+n.leftClass},()=>ue("img",{src:e.avatar,"aria-hidden":"true"})))),n.hasText===!0){let o;const i={class:"q-notification__message col"};if(e.html===!0)i.innerHTML=e.caption?`<div>${e.message}</div><div class="q-notification__caption">${e.caption}</div>`:e.message;else{const a=[e.message];o=e.caption?[ue("div",a),ue("div",{class:"q-notification__caption"},[e.caption])]:a}r.push(ue("div",i,o))}const s=[ue("div",{class:n.contentClass},r)];return e.progress===!0&&s.push(ue("div",{key:`${n.uid}|p|${n.badge}`,class:n.progressClass,style:n.progressStyle})),e.actions!==void 0&&s.push(ue("div",{class:n.actionsClass},e.actions.map(o=>ue(zp,o)))),n.badge>1&&s.push(ue("div",{key:`${n.uid}|${n.badge}`,class:e.meta.badgeClass,style:e.badgeStyle},[n.badge])),ue("div",{ref:o=>{Nk[""+n.uid]=o},key:n.uid,class:n.class,...n.attrs},[ue("div",{class:n.wrapperClass},s)])}))))}})}const ld={setDefaults(t){cr(t)===!0&&Object.assign(id,t)},registerType(t,e){cr(e)===!0&&(xl[t]=e)},install({$q:t,parentApp:e}){if(t.notify=this.create=n=>Ok(n,t),t.notify.setDefaults=this.setDefaults,t.notify.registerType=this.registerType,t.config.notify!==void 0&&this.setDefaults(t.config.notify),this.__installed!==!0){im.forEach(r=>{Nr[r]=K([]);const s=["left","center","right"].includes(r)===!0?"center":r.indexOf("top")!==-1?"top":"bottom",o=r.indexOf("left")!==-1?"start":r.indexOf("right")!==-1?"end":"center",i=["left","right"].includes(r)?`items-${r==="left"?"start":"end"} justify-center`:r==="center"?"flex-center":`items-${o}`;Mk[r]=`q-notifications__list q-notifications__list--${s} fixed column no-wrap ${i}`});const n=Eh("q-notify");tm(J3(),e).mount(n)}}};let xu=null,Bf=!1;const Cl=K(!0),Lu=K("unknown"),El=K(!1);function $k(){const t=async()=>{try{const c=await Du.getStatus();return c.connectionType==="cellular"?El.value=!1:c.connectionType==="2g"||c.connectionType==="slow-2g"?El.value=!0:El.value=!1,c}catch(c){return console.error("Error checking connection speed:",c),null}},e=()=>{ld.create({type:"negative",message:"No Internet Connection",caption:"Please check your internet connection and try again",position:"top",timeout:0,icon:"wifi_off",classes:"notif-with-safe-area",actions:[{label:"Dismiss",color:"white",handler:()=>{}}]})},n=()=>{ld.create({type:"warning",message:"Weak Internet Connection",caption:"Your connection is slow. Some features may not work properly",position:"top",timeout:5e3,icon:"signal_wifi_statusbar_connected_no_internet_4",classes:"notif-with-safe-area"})},r=()=>{ld.create({type:"positive",message:"Back Online",caption:"Your internet connection has been restored",position:"top",timeout:3e3,icon:"wifi",classes:"notif-with-safe-area"})},s=async c=>{console.log("🌐 Network status changed:",c);const u=!Cl.value;Cl.value=c.connected,Lu.value=c.connectionType,c.connected?u&&(console.log("✅ Internet connection restored"),r(),await t(),El.value&&n()):(console.warn("⚠️ No internet connection detected"),e())};return{isOnline:Cl,connectionType:Lu,isSlowConnection:El,initNetworkMonitoring:async()=>{try{if(Bf){console.log("🌐 Network monitoring already active");return}const c=await Du.getStatus();console.log("🌐 Initial network status:",c),Cl.value=c.connected,Lu.value=c.connectionType,c.connected||e(),xu=await Du.addListener("networkStatusChange",s),Bf=!0,console.log("✅ Network monitoring initialized")}catch(c){console.error("❌ Error initializing network monitoring:",c)}},stopNetworkMonitoring:async()=>{try{xu&&(await xu.remove(),xu=null,Bf=!1,console.log("🛑 Network monitoring stopped"))}catch(c){console.error("❌ Error stopping network monitoring:",c)}},checkNetworkStatus:async()=>{try{const c=await Du.getStatus();return Cl.value=c.connected,Lu.value=c.connectionType,c.connected||e(),c}catch(c){return console.error("❌ Error checking network status:",c),null}},checkConnectionSpeed:t}}const X3={class:"banner-content"},e9={class:"banner-title"},t9={class:"banner-message"},n9=Object.assign({name:"NetworkStatusBanner"},{__name:"NetworkStatusBanner",setup(t){const{isOnline:e,isSlowConnection:n}=$k(),r=G(()=>e.value?n.value?"banner-slow":"":"banner-offline"),s=G(()=>e.value?n.value?"signal_wifi_statusbar_connected_no_internet_4":"wifi":"wifi_off"),o=G(()=>e.value?n.value?"Weak Connection":"Connected":"No Internet Connection"),i=G(()=>e.value?n.value?"Some features may be slow or unavailable":"":"Please check your internet connection");return(a,c)=>(M(),$n(Lo,{name:"slide-down"},{default:br(()=>[!tt(e)||tt(n)?(M(),O("div",{key:0,class:be(["network-status-banner",r.value])},[ze(Pr,{name:s.value,size:"20px",class:"banner-icon"},null,8,["name"]),l("div",X3,[l("div",e9,B(o.value),1),l("div",t9,B(i.value),1)])],2)):fe("",!0)]),_:1}))}}),r9=pt(n9,[["__scopeId","data-v-67a068bf"]]),Vk="/assets/logo-C4WrjDwz.png",jk=t=>t,Uk=jk,s9=jk,o9=()=>{};var j0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},i9=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],a=t[n++],c=((s&7)<<18|(o&63)<<12|(i&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},Bk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,a=i?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=o>>2,f=(o&3)<<4|a>>4;let p=(a&15)<<2|u>>6,g=u&63;c||(g=64,i||(p=64)),r.push(n[h],n[f],n[p],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):i9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||a==null||u==null||f==null)throw new a9;const p=o<<2|a>>4;if(r.push(p),u!==64){const g=a<<4&240|u>>2;if(r.push(g),f!==64){const C=u<<6&192|f;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class a9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const l9=function(t){const e=Fk(t);return Bk.encodeByteArray(e,!0)},Ld=function(t){return l9(t).replace(/\./g,"")},qk=function(t){try{return Bk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=()=>Hk().__FIREBASE_DEFAULTS__,u9=()=>{if(typeof process>"u"||typeof j0>"u")return;const t=j0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},d9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&qk(t[1]);return e&&JSON.parse(e)},Sh=()=>{try{return o9()||c9()||u9()||d9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},zk=t=>{var e,n;return(n=(e=Sh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},am=t=>{const e=zk(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Wk=()=>{var t;return(t=Sh())===null||t===void 0?void 0:t.config},Gk=t=>{var e;return(e=Sh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ah(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ld(JSON.stringify(n)),Ld(JSON.stringify(i)),""].join(".")}const Yl={};function f9(){const t={prod:[],emulator:[]};for(const e of Object.keys(Yl))Yl[e]?t.emulator.push(e):t.prod.push(e);return t}function p9(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let U0=!1;function Th(t,e){if(typeof window>"u"||typeof document>"u"||!eo(window.location.host)||Yl[t]===e||Yl[t]||U0)return;Yl[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",o=f9().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function a(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,g){p.setAttribute("width","24"),p.setAttribute("id",g),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{U0=!0,i()},p}function h(p,g){p.setAttribute("id",g),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function f(){const p=p9(r),g=n("text"),C=document.getElementById(g)||document.createElement("span"),T=n("learnmore"),v=document.getElementById(T)||document.createElement("a"),_=n("preprendIcon"),S=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const x=p.element;a(x),h(v,T);const R=u();c(S,_),x.append(S,C,v,R),document.body.appendChild(x)}o?(C.innerText="Preview backend disconnected.",S.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(S.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g9(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(on())}function m9(){var t;const e=(t=Sh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v9(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function w9(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function y9(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _9(){const t=on();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function k9(){return!m9()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qk(){try{return typeof indexedDB=="object"}catch{return!1}}function b9(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function ite(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9="FirebaseError";class Dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=C9,Object.setPrototypeOf(this,Dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bc.prototype.create)}}class Bc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?E9(o,r):"Error",a=`${this.serviceName}: ${i} (${s}).`;return new Dr(s,a,r)}}function E9(t,e){return t.replace(S9,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const S9=/\{\$([^}]+)}/g;function A9(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],i=e[s];if(F0(o)&&F0(i)){if(!Pi(o,i))return!1}else if(o!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function F0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ll(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,o]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function T9(t,e){const n=new P9(t,e);return n.subscribe.bind(n)}class P9{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");I9(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=qf),s.error===void 0&&(s.error=qf),s.complete===void 0&&(s.complete=qf);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function I9(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t){return t&&t._delegate?t._delegate:t}class Ks{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const li="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new h9;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(x9(e))try{this.getOrInitializeService({instanceIdentifier:li})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=li){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=li){return this.instances.has(e)}getOptions(e=li){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:D9(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=li){return this.component?this.component.multipleInstances?e:li:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function D9(t){return t===li?void 0:t}function x9(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L9{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new R9(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var st;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(st||(st={}));const M9={debug:st.DEBUG,verbose:st.VERBOSE,info:st.INFO,warn:st.WARN,error:st.ERROR,silent:st.SILENT},N9=st.INFO,O9={[st.DEBUG]:"log",[st.VERBOSE]:"log",[st.INFO]:"info",[st.WARN]:"warn",[st.ERROR]:"error"},$9=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=O9[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class lm{constructor(e){this.name=e,this._logLevel=N9,this._logHandler=$9,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in st))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,st.DEBUG,...e),this._logHandler(this,st.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,st.VERBOSE,...e),this._logHandler(this,st.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,st.INFO,...e),this._logHandler(this,st.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,st.WARN,...e),this._logHandler(this,st.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,st.ERROR,...e),this._logHandler(this,st.ERROR,...e)}}const V9=(t,e)=>e.some(n=>t instanceof n);let B0,q0;function j9(){return B0||(B0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function U9(){return q0||(q0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Yk=new WeakMap,Wp=new WeakMap,Zk=new WeakMap,Hf=new WeakMap,cm=new WeakMap;function F9(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(Bs(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&Yk.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function B9(t){if(Wp.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});Wp.set(t,e)}let Gp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Zk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Bs(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function q9(t){Gp=t(Gp)}function H9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zf(this),e,...n);return Zk.set(r,e.sort?e.sort():[e]),Bs(r)}:U9().includes(t)?function(...e){return t.apply(zf(this),e),Bs(Yk.get(this))}:function(...e){return Bs(t.apply(zf(this),e))}}function z9(t){return typeof t=="function"?H9(t):(t instanceof IDBTransaction&&B9(t),V9(t,j9())?new Proxy(t,Gp):t)}function Bs(t){if(t instanceof IDBRequest)return F9(t);if(Hf.has(t))return Hf.get(t);const e=z9(t);return e!==t&&(Hf.set(t,e),cm.set(e,t)),e}const zf=t=>cm.get(t);function W9(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),a=Bs(i);return r&&i.addEventListener("upgradeneeded",c=>{r(Bs(i.result),c.oldVersion,c.newVersion,Bs(i.transaction),c)}),n&&i.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function ate(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Bs(n).then(()=>{})}const G9=["get","getKey","getAll","getAllKeys","count"],K9=["put","add","delete","clear"],Wf=new Map;function H0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wf.get(e))return Wf.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=K9.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||G9.includes(n)))return;const o=async function(i,...a){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&c.done]))[0]};return Wf.set(e,o),o}q9(t=>({...t,get:(e,n,r)=>H0(e,n)||t.get(e,n,r),has:(e,n)=>!!H0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Y9(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Y9(t){const e=t.getComponent();return e?.type==="VERSION"}const Kp="@firebase/app",z0="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs=new lm("@firebase/app"),Z9="@firebase/app-compat",J9="@firebase/analytics-compat",X9="@firebase/analytics",e6="@firebase/app-check-compat",t6="@firebase/app-check",n6="@firebase/auth",r6="@firebase/auth-compat",s6="@firebase/database",o6="@firebase/data-connect",i6="@firebase/database-compat",a6="@firebase/functions",l6="@firebase/functions-compat",c6="@firebase/installations",u6="@firebase/installations-compat",d6="@firebase/messaging",h6="@firebase/messaging-compat",f6="@firebase/performance",p6="@firebase/performance-compat",g6="@firebase/remote-config",m6="@firebase/remote-config-compat",v6="@firebase/storage",w6="@firebase/storage-compat",y6="@firebase/firestore",_6="@firebase/ai",k6="@firebase/firestore-compat",b6="firebase",C6="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Md="[DEFAULT]",E6={[Kp]:"fire-core",[Z9]:"fire-core-compat",[X9]:"fire-analytics",[J9]:"fire-analytics-compat",[t6]:"fire-app-check",[e6]:"fire-app-check-compat",[n6]:"fire-auth",[r6]:"fire-auth-compat",[s6]:"fire-rtdb",[o6]:"fire-data-connect",[i6]:"fire-rtdb-compat",[a6]:"fire-fn",[l6]:"fire-fn-compat",[c6]:"fire-iid",[u6]:"fire-iid-compat",[d6]:"fire-fcm",[h6]:"fire-fcm-compat",[f6]:"fire-perf",[p6]:"fire-perf-compat",[g6]:"fire-rc",[m6]:"fire-rc-compat",[v6]:"fire-gcs",[w6]:"fire-gcs-compat",[y6]:"fire-fst",[k6]:"fire-fst-compat",[_6]:"fire-vertex","fire-js":"fire-js",[b6]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pa=new Map,Jk=new Map,Nd=new Map;function Qp(t,e){try{t.container.addComponent(e)}catch(n){Qs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ys(t){const e=t.name;if(Nd.has(e))return Qs.debug(`There were multiple attempts to register component ${e}.`),!1;Nd.set(e,t);for(const n of Pa.values())Qp(n,t);for(const n of Jk.values())Qp(n,t);return!0}function Ka(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ao=new Bc("app","Firebase",S6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ks("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ao.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho=C6;function Ph(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Md,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw Ao.create("bad-app-name",{appName:String(s)});if(n||(n=Wk()),!n)throw Ao.create("no-options");const o=Pa.get(s);if(o){if(Pi(n,o.options)&&Pi(r,o.config))return o;throw Ao.create("duplicate-app",{appName:s})}const i=new L9(s);for(const c of Nd.values())i.addComponent(c);const a=new A6(n,r,i);return Pa.set(s,a),a}function qc(t=Md){const e=Pa.get(t);if(!e&&t===Md&&Wk())return Ph();if(!e)throw Ao.create("no-app",{appName:t});return e}function Xk(){return Array.from(Pa.values())}function pr(t,e,n){var r;let s=(r=E6[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const a=[`Unable to register library "${s}" with version "${e}":`];o&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qs.warn(a.join(" "));return}Ys(new Ks(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6="firebase-heartbeat-database",P6=1,yc="firebase-heartbeat-store";let Gf=null;function eb(){return Gf||(Gf=W9(T6,P6,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(yc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ao.create("idb-open",{originalErrorMessage:t.message})})),Gf}async function I6(t){try{const n=(await eb()).transaction(yc),r=await n.objectStore(yc).get(tb(t));return await n.done,r}catch(e){if(e instanceof Dr)Qs.warn(e.message);else{const n=Ao.create("idb-get",{originalErrorMessage:e?.message});Qs.warn(n.message)}}}async function W0(t,e){try{const r=(await eb()).transaction(yc,"readwrite");await r.objectStore(yc).put(e,tb(t)),await r.done}catch(n){if(n instanceof Dr)Qs.warn(n.message);else{const r=Ao.create("idb-set",{originalErrorMessage:n?.message});Qs.warn(r.message)}}}function tb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=1024,D6=30;class x6{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new M6(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=G0();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>D6){const i=N6(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Qs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=G0(),{heartbeatsToSend:r,unsentEntries:s}=L6(this._heartbeatsCache.heartbeats),o=Ld(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Qs.warn(n),""}}}function G0(){return new Date().toISOString().substring(0,10)}function L6(t,e=R6){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),K0(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),K0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class M6{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qk()?b9().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I6(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return W0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function K0(t){return Ld(JSON.stringify({version:2,heartbeats:t})).length}function N6(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O6(t){Ys(new Ks("platform-logger",e=>new Q9(e),"PRIVATE")),Ys(new Ks("heartbeat",e=>new x6(e),"PRIVATE")),pr(Kp,z0,t),pr(Kp,z0,"esm2017"),pr("fire-js","")}O6("");var $6="firebase",V6="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr($6,V6,"app");const j6=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Dr,SDK_VERSION:Ho,_DEFAULT_ENTRY_NAME:Md,_addComponent:Qp,_apps:Pa,_components:Nd,_getProvider:Ka,_isFirebaseServerApp:jt,_registerComponent:Ys,_serverApps:Jk,getApp:qc,getApps:Xk,initializeApp:Ph,registerVersion:pr},Symbol.toStringTag,{value:"Module"}));function um(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function nb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const rb=nb,sb=new Bc("auth","Firebase",nb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od=new lm("@firebase/auth");function U6(t,...e){Od.logLevel<=st.WARN&&Od.warn(`Auth (${Ho}): ${t}`,...e)}function cd(t,...e){Od.logLevel<=st.ERROR&&Od.error(`Auth (${Ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,...e){throw hm(t,...e)}function nr(t,...e){return hm(t,...e)}function dm(t,e,n){const r=Object.assign(Object.assign({},rb()),{[e]:n});return new Bc("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return dm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ih(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ir(t,"argument-error"),dm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function hm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return sb.create(t,...e)}function Ie(t,e,...n){if(!t)throw hm(e,...n)}function Vs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cd(e),new Error(e)}function Zs(t,e){t||Vs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _c(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fm(){return Q0()==="http:"||Q0()==="https:"}function Q0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fm()||w9()||"connection"in navigator)?navigator.onLine:!0}function B6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zs(n>e,"Short delay should be less than long delay!"),this.isMobile=g9()||y9()}get(){return F6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t,e){Zs(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],z6=new Hc(3e4,6e4);function ln(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function cn(t,e,n,r,s={}){return ib(t,s,async()=>{let o={},i={};r&&(e==="GET"?i=r:o={body:JSON.stringify(r)});const a=Ga(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return v9()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&eo(t.emulatorConfig.host)&&(u.credentials="include"),ob.fetch()(await ab(t,t.config.apiHost,n,a),u)})}async function ib(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},q6),e);try{const s=new G6(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Nl(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const a=o.ok?i.errorMessage:i.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Nl(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw Nl(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw Nl(t,"user-disabled",i);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw dm(t,h,u);Ir(t,h)}}catch(s){if(s instanceof Dr)throw s;Ir(t,"network-request-failed",{message:String(s)})}}async function to(t,e,n,r,s={}){const o=await cn(t,e,n,r,s);return"mfaPendingCredential"in o&&Ir(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function ab(t,e,n,r){const s=`${e}${n}?${r}`,o=t,i=o.config.emulator?pm(t.config,s):`${t.config.apiScheme}://${s}`;return H6.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}function W6(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class G6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(nr(this.auth,"network-request-failed")),z6.get())})}}function Nl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=nr(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y0(t){return t!==void 0&&t.getResponse!==void 0}function Z0(t){return t!==void 0&&t.enterprise!==void 0}class lb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return W6(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t){return(await cn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function cb(t,e){return cn(t,"GET","/v2/recaptchaConfig",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q6(t,e){return cn(t,"POST","/v1/accounts:delete",e)}async function Y6(t,e){return cn(t,"POST","/v1/accounts:update",e)}async function $d(t,e){return cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ub(t,e=!1){const n=Ue(t),r=await n.getIdToken(e),s=Rh(r);Ie(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o?.sign_in_provider;return{claims:s,token:r,authTime:Zl(Kf(s.auth_time)),issuedAtTime:Zl(Kf(s.iat)),expirationTime:Zl(Kf(s.exp)),signInProvider:i||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Kf(t){return Number(t)*1e3}function Rh(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const s=qk(n);return s?JSON.parse(s):(cd("Failed to decode base64 JWT payload"),null)}catch(s){return cd("Caught error parsing JWT payload as JSON",s?.toString()),null}}function J0(t){const e=Rh(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dr&&Z6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Z6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ii(t,$d(n,{idToken:r}));Ie(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?hb(o.providerUserInfo):[],a=X6(t.providerData,i),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!a?.length,h=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Yp(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function db(t){const e=Ue(t);await kc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function X6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function hb(t){return t.map(e=>{var{providerId:n}=e,r=um(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eR(t,e){const n=await ib(t,{},async()=>{const r=Ga({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=await ab(t,s,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:r};return t.emulatorConfig&&eo(t.emulatorConfig.host)&&(c.credentials="include"),ob.fetch()(i,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function tR(t,e){return cn(t,"POST","/v2/accounts:revokeToken",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):J0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const n=J0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await eR(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,i=new pa;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(Ie(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(Ie(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pa,this.toJSON())}_performRefresh(){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=um(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Yp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Ii(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return ub(this,e)}reload(){return db(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await Ii(this,Q6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,i,a,c,u,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,C=(i=n.photoURL)!==null&&i!==void 0?i:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,_=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:D,providerData:L,stsTokenManager:b}=n;Ie(x&&b,e,"internal-error");const A=pa.fromJSON(this.name,b);Ie(typeof x=="string",e,"internal-error"),ho(f,e.name),ho(p,e.name),Ie(typeof R=="boolean",e,"internal-error"),Ie(typeof D=="boolean",e,"internal-error"),ho(g,e.name),ho(C,e.name),ho(T,e.name),ho(v,e.name),ho(_,e.name),ho(S,e.name);const y=new jr({uid:x,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:D,photoURL:C,phoneNumber:g,tenantId:T,stsTokenManager:A,createdAt:_,lastLoginAt:S});return L&&Array.isArray(L)&&(y.providerData=L.map(P=>Object.assign({},P))),v&&(y._redirectEventId=v),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new pa;s.updateFromServerResponse(n);const o=new jr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kc(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ie(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?hb(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!o?.length,a=new pa;a.updateFromIdToken(r);const c=new jr({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Yp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0=new Map;function js(t){Zs(t instanceof Function,"Expected a class definition");let e=X0.get(t);return e?(Zs(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,X0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fb.type="NONE";const Zp=fb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(t,e,n){return`firebase:${t}:${e}:${n}`}class ga{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=ud(this.userKey,s.apiKey,o),this.fullPersistenceKey=ud("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await $d(this.auth,{idToken:e}).catch(()=>{});return n?jr._fromGetAccountInfoResponse(this.auth,n,e):null}return jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ga(js(Zp),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||js(Zp);const i=ud(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(i);if(h){let f;if(typeof h=="string"){const p=await $d(e,{idToken:h}).catch(()=>{});if(!p)break;f=await jr._fromGetAccountInfoResponse(e,p,h)}else f=jr._fromJSON(e,h);u!==o&&(a=f),o=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new ga(o,e,r):(o=c[0],a&&await o._set(i,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(i)}catch{}})),new ga(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yb(e))return"Blackberry";if(_b(e))return"Webos";if(gb(e))return"Safari";if((e.includes("chrome/")||mb(e))&&!e.includes("edge/"))return"Chrome";if(wb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function pb(t=on()){return/firefox\//i.test(t)}function gb(t=on()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function mb(t=on()){return/crios\//i.test(t)}function vb(t=on()){return/iemobile/i.test(t)}function wb(t=on()){return/android/i.test(t)}function yb(t=on()){return/blackberry/i.test(t)}function _b(t=on()){return/webos/i.test(t)}function gm(t=on()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nR(t=on()){var e;return gm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rR(){return _9()&&document.documentMode===10}function kb(t=on()){return gm(t)||wb(t)||_b(t)||yb(t)||/windows phone/i.test(t)||vb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(t,e=[]){let n;switch(t){case"Browser":n=ew(on());break;case"Worker":n=`${ew(on())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((i,a)=>{try{const c=e(o);i(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e={}){return cn(t,"GET","/v2/passwordPolicy",ln(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=6;class aR{constructor(e){var n,r,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:iR,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,i,a;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tw(this),this.idTokenSubscription=new tw(this),this.beforeStateQueue=new sR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=sb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=js(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await ga.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $d(this,{idToken:e}),r=await jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(jt(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===a)&&c?.user&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kc(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=B6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(zn(this));const n=e?Ue(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(js(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oR(this),n=new aR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Bc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await tR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&js(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=await ga.create(this,[js(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{i||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{i=!0,c()}}else{const c=e.addObserver(n);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&U6(`Error while retrieving App Check token: ${n.error}`),n?.token}}function mn(t){return Ue(t)}class tw{constructor(e){this.auth=e,this.observer=null,this.addObserver=T9(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cR(t){zc=t}function mm(t){return zc.loadJS(t)}function uR(){return zc.recaptchaV2Script}function dR(){return zc.recaptchaEnterpriseScript}function hR(){return zc.gapiScript}function Cb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=500,pR=6e4,Mu=1e12;class gR{constructor(e){this.auth=e,this.counter=Mu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new wR(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Mu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Mu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Mu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class mR{constructor(){this.enterprise=new vR}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vR{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wR{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Ie(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=yR(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},pR)},fR))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function yR(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const _R="recaptcha-enterprise",Jl="NO_RECAPTCHA";class Eb{constructor(e){this.type=_R,this.auth=mn(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(i,a)=>{cb(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new lb(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,i(u.siteKey)}}).catch(c=>{a(c)})})}function s(o,i,a){const c=window.grecaptcha;Z0(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{i(u)}).catch(()=>{i(Jl)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new mR().execute("siteKey",{action:"verify"}):new Promise((o,i)=>{r(this.auth).then(a=>{if(!n&&Z0(window.grecaptcha))s(a,o,i);else{if(typeof window>"u"){i(new Error("RecaptchaVerifier is only supported in browser"));return}let c=dR();c.length!==0&&(c+=a),mm(c).then(()=>{s(a,o,i)}).catch(u=>{i(u)})}}).catch(a=>{i(a)})})}}async function Sl(t,e,n,r=!1,s=!1){const o=new Eb(t);let i;if(s)i=Jl;else try{i=await o.verify(n)}catch{i=await o.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:i,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function To(t,e,n,r,s){var o,i;if(s==="EMAIL_PASSWORD_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Sl(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await Sl(t,e,n,n==="getOobCode");return r(t,c)}else return Promise.reject(a)});else if(s==="PHONE_PROVIDER")if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("PHONE_PROVIDER")){const a=await Sl(t,e,n);return r(t,a).catch(async c=>{var u;if(((u=t._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const h=await Sl(t,e,n,!1,!0);return r(t,h)}return Promise.reject(c)})}else{const a=await Sl(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(s+" provider is not supported.")}async function kR(t){const e=mn(t),n=await cb(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new lb(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Eb(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){const n=Ka(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Pi(o,e??{}))return s;Ir(s,"already-initialized")}return n.initialize({options:e})}function bR(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(js);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Sb(t,e,n){const r=mn(t);Ie(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Ab(e),{host:i,port:a}=CR(e),c=a===null?"":`:${a}`,u={url:`${o}//${i}${c}/`},h=Object.freeze({host:i,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ie(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ie(Pi(u,r.config.emulator)&&Pi(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,eo(i)?(Ah(`${o}//${i}${c}`),Th("Auth",!0)):ER()}function Ab(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CR(t){const e=Ab(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:nw(r.substr(o.length+1))}}else{const[o,i]=r.split(":");return{host:o,port:nw(i)}}}function nw(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ER(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vs("not implemented")}_getIdTokenResponse(e){return Vs("not implemented")}_linkToIdToken(e,n){return Vs("not implemented")}_getReauthenticationResolver(e){return Vs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR(t,e){return cn(t,"POST","/v1/accounts:resetPassword",ln(t,e))}async function AR(t,e){return cn(t,"POST","/v1/accounts:update",e)}async function TR(t,e){return cn(t,"POST","/v1/accounts:signUp",e)}async function PR(t,e){return cn(t,"POST","/v1/accounts:update",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IR(t,e){return to(t,"POST","/v1/accounts:signInWithPassword",ln(t,e))}async function Dh(t,e){return cn(t,"POST","/v1/accounts:sendOobCode",ln(t,e))}async function RR(t,e){return Dh(t,e)}async function DR(t,e){return Dh(t,e)}async function xR(t,e){return Dh(t,e)}async function LR(t,e){return Dh(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return to(t,"POST","/v1/accounts:signInWithEmailLink",ln(t,e))}async function NR(t,e){return to(t,"POST","/v1/accounts:signInWithEmailLink",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Wc{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ia(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ia(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return To(e,n,"signInWithPassword",IR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MR(e,{email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return To(e,r,"signUpPassword",TR,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return NR(e,{idToken:n,email:this._email,oobCode:this._password});default:Ir(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t,e){return to(t,"POST","/v1/accounts:signInWithIdp",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR="http://localhost";class fs extends Wc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new fs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ir("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=um(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new fs(r,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return ma(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ma(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ma(e,n)}buildRequest(){const e={requestUri:OR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ga(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rw(t,e){return cn(t,"POST","/v1/accounts:sendVerificationCode",ln(t,e))}async function $R(t,e){return to(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,e))}async function VR(t,e){const n=await to(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,e));if(n.temporaryProof)throw Nl(t,"account-exists-with-different-credential",n);return n}const jR={USER_NOT_FOUND:"user-not-found"};async function UR(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return to(t,"POST","/v1/accounts:signInWithPhoneNumber",ln(t,n),jR)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Wc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new va({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new va({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return $R(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return VR(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return UR(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:o}=e;return!r&&!n&&!s&&!o?null:new va({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BR(t){const e=Ll(Ml(t)).link,n=e?Ll(Ml(e)).deep_link_id:null,r=Ll(Ml(t)).deep_link_id;return(r?Ll(Ml(r)).link:null)||r||n||e||t}class Gc{constructor(e){var n,r,s,o,i,a;const c=Ll(Ml(e)),u=(n=c.apiKey)!==null&&n!==void 0?n:null,h=(r=c.oobCode)!==null&&r!==void 0?r:null,f=FR((s=c.mode)!==null&&s!==void 0?s:null);Ie(u&&h&&f,"argument-error"),this.apiKey=u,this.operation=f,this.code=h,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(i=c.lang)!==null&&i!==void 0?i:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=BR(e);try{return new Gc(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(){this.providerId=zo.PROVIDER_ID}static credential(e,n){return Ia._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Gc.parseLink(n);return Ie(r,"argument-error"),Ia._fromEmailAndCode(e,r.code,r.tenantId)}}zo.PROVIDER_ID="password";zo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Qa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xl extends Ya{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return Ie("providerId"in n&&"signInMethod"in n,"argument-error"),fs._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Ie(e.idToken||e.accessToken,"argument-error"),fs._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Xl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Xl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:i,providerId:a}=e;if(!r&&!s&&!n&&!o||!a)return null;try{return new Xl(a)._credential({idToken:n,accessToken:r,nonce:i,pendingToken:o})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Ya{constructor(){super("facebook.com")}static credential(e){return fs._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return fs._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return os.credential(n,r)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends Ya{constructor(){super("github.com")}static credential(e){return fs._fromParams({providerId:Ns.PROVIDER_ID,signInMethod:Ns.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ns.credentialFromTaggedObject(e)}static credentialFromError(e){return Ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ns.credential(e.oauthAccessToken)}catch{return null}}}Ns.GITHUB_SIGN_IN_METHOD="github.com";Ns.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ya{constructor(){super("twitter.com")}static credential(e,n){return fs._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Os.credential(n,r)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t,e){return to(t,"POST","/v1/accounts:signUp",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await jr._fromIdTokenResponse(e,r,s),i=sw(r);return new ps({user:o,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=sw(r);return new ps({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function sw(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t){var e;if(jt(t.app))return Promise.reject(zn(t));const n=mn(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new ps({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Tb(n,{returnSecureToken:!0}),s=await ps._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd extends Dr{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Vd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Vd(e,n,r,s)}}function Pb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Vd._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e){const n=Ue(t);await xh(!0,n,e);const{providerUserInfo:r}=await Y6(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=Ib(r||[]);return n.providerData=n.providerData.filter(o=>s.has(o.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Rb(t,e,n=!1){const r=await Ii(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ps._forOperation(t,"link",r)}async function xh(t,e,n){await kc(e);const r=Ib(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";Ie(r.has(n)===t,e.auth,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e,n=!1){const{auth:r}=t;if(jt(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const o=await Ii(t,Pb(r,s,e,t),n);Ie(o.idToken,r,"internal-error");const i=Rh(o.idToken);Ie(i,r,"internal-error");const{sub:a}=i;return Ie(t.uid===a,r,"user-mismatch"),ps._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ir(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e,n=!1){if(jt(t.app))return Promise.reject(zn(t));const r="signIn",s=await Pb(t,r,e),o=await ps._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}async function Lh(t,e){return Db(mn(t),e)}async function xb(t,e){const n=Ue(t);return await xh(!1,n,e.providerId),Rb(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e){return to(t,"POST","/v1/accounts:signInWithCustomToken",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GR(t,e){if(jt(t.app))return Promise.reject(zn(t));const n=mn(t),r=await WR(n,{token:e,returnSecureToken:!0}),s=await ps._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(t,e,n){var r;Ie(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),Ie(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),Ie(typeof n.linkDomain>"u"||n.linkDomain.length>0,t,"invalid-hosting-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.linkDomain=n.linkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Ie(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(Ie(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wm(t){const e=mn(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Lb(t,e,n){const r=mn(t),s={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&Mh(r,s,n),await To(r,s,"getOobCode",DR,"EMAIL_PASSWORD_PROVIDER")}async function KR(t,e,n){await SR(Ue(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wm(t),r})}async function QR(t,e){await PR(Ue(t),{oobCode:e})}async function Mb(t,e,n){if(jt(t.app))return Promise.reject(zn(t));const r=mn(t),i=await To(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tb,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&wm(t),c}),a=await ps._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}function ym(t,e,n){return jt(t.app)?Promise.reject(zn(t)):Lh(Ue(t),zo.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wm(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YR(t,e,n){const r=mn(t),s={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(i,a){Ie(a.handleCodeInApp,r,"argument-error"),a&&Mh(r,i,a)}o(s,n),await To(r,s,"getOobCode",xR,"EMAIL_PASSWORD_PROVIDER")}function ZR(t,e){const n=Gc.parseLink(e);return n?.operation==="EMAIL_SIGNIN"}async function JR(t,e,n){if(jt(t.app))return Promise.reject(zn(t));const r=Ue(t),s=zo.credentialWithLink(e,n||_c());return Ie(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Lh(r,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(t,e){return cn(t,"POST","/v1/accounts:createAuthUri",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e5(t,e){const n=fm()?_c():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await XR(Ue(t),r);return s||[]}async function t5(t,e){const n=Ue(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&Mh(n.auth,s,e);const{email:o}=await RR(n.auth,s);o!==t.email&&await t.reload()}async function n5(t,e,n){const r=Ue(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&Mh(r.auth,o,n);const{email:i}=await LR(r.auth,o);i!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r5(t,e){return cn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ue(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},i=await Ii(r,r5(r.auth,o));r.displayName=i.displayName||null,r.photoURL=i.photoUrl||null;const a=r.providerData.find(({providerId:c})=>c==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(i)}function s5(t,e){const n=Ue(t);return jt(n.auth.app)?Promise.reject(zn(n.auth)):Ob(n,e,null)}function o5(t,e){return Ob(Ue(t),null,e)}async function Ob(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const i=await Ii(t,AR(r,o));await t._updateTokensIfNecessary(i,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&t?.idToken){const i=(n=(e=Rh(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(i){const a=i!=="anonymous"&&i!=="custom"?i:null;return new wa(o,a)}}if(!r)return null;switch(r){case"facebook.com":return new a5(o,s);case"github.com":return new l5(o,s);case"google.com":return new c5(o,s);case"twitter.com":return new u5(o,s,t.screenName||null);case"custom":case"anonymous":return new wa(o,null);default:return new wa(o,r,s)}}class wa{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class $b extends wa{constructor(e,n,r,s){super(e,n,r),this.username=s}}class a5 extends wa{constructor(e,n){super(e,"facebook.com",n)}}class l5 extends $b{constructor(e,n){super(e,"github.com",n,typeof n?.login=="string"?n?.login:null)}}class c5 extends wa{constructor(e,n){super(e,"google.com",n)}}class u5 extends $b{constructor(e,n,r){super(e,"twitter.com",n,r)}}function d5(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:i5(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vb(t,e){return Ue(t).setPersistence(e)}function jb(t,e,n,r){return Ue(t).onIdTokenChanged(e,n,r)}function Ub(t,e,n){return Ue(t).beforeAuthStateChanged(e,n)}function Kc(t,e,n,r){return Ue(t).onAuthStateChanged(e,n,r)}function Qc(t){return Ue(t).signOut()}function h5(t,e){return mn(t).revokeAccessToken(e)}async function f5(t){return Ue(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t,e){return cn(t,"POST","/v2/accounts/mfaEnrollment:start",ln(t,e))}const jd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(jd,"1"),this.storage.removeItem(jd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=1e3,g5=10;class Bb extends Fb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,a,c)=>{this.notifyListeners(i,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},o=this.storage.getItem(r);rR()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,g5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},p5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bb.type="LOCAL";const _m=Bb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb extends Fb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}qb.type="SESSION";const km=qb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,i=this.handlersMap[s];if(!i?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(i).map(async u=>u(n.origin,o)),c=await m5(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oh(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((a,c)=>{const u=Oh("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(p.data.response);break;default:clearTimeout(h),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return window}function w5(t){Kt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){return typeof Kt().WorkerGlobalScope<"u"&&typeof Kt().importScripts=="function"}async function y5(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _5(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function k5(){return bm()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hb="firebaseLocalStorageDb",b5=1,Ud="firebaseLocalStorage",zb="fbase_key";class Yc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $h(t,e){return t.transaction([Ud],e?"readwrite":"readonly").objectStore(Ud)}function C5(){const t=indexedDB.deleteDatabase(Hb);return new Yc(t).toPromise()}function Jp(){const t=indexedDB.open(Hb,b5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ud,{keyPath:zb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ud)?e(r):(r.close(),await C5(),e(await Jp()))})})}async function iw(t,e,n){const r=$h(t,!0).put({[zb]:e,value:n});return new Yc(r).toPromise()}async function E5(t,e){const n=$h(t,!1).get(e),r=await new Yc(n).toPromise();return r===void 0?null:r.value}function aw(t,e){const n=$h(t,!0).delete(e);return new Yc(n).toPromise()}const S5=800,A5=3;class Wb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>A5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return bm()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nh._getInstance(k5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await y5(),!this.activeServiceWorker)return;this.sender=new v5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await iw(e,jd,"1"),await aw(e,jd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>iw(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>E5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>aw(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=$h(s,!1).getAll();return new Yc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wb.type="LOCAL";const Cm=Wb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(t,e){return cn(t,"POST","/v2/accounts/mfaSignIn:start",ln(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qf=Cb("rcb"),T5=new Hc(3e4,6e4);class P5{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Kt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Ie(I5(n),e,"argument-error"),this.shouldResolveImmediately(n)&&Y0(Kt().grecaptcha)?Promise.resolve(Kt().grecaptcha):new Promise((r,s)=>{const o=Kt().setTimeout(()=>{s(nr(e,"network-request-failed"))},T5.get());Kt()[Qf]=()=>{Kt().clearTimeout(o),delete Kt()[Qf];const a=Kt().grecaptcha;if(!a||!Y0(a)){s(nr(e,"internal-error"));return}const c=a.render;a.render=(u,h)=>{const f=c(u,h);return this.counter++,f},this.hostLanguage=n,r(a)};const i=`${uR()}?${Ga({onload:Qf,render:"explicit",hl:n})}`;mm(i).catch(()=>{clearTimeout(o),s(nr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Kt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function I5(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class R5{async load(e){return new gR(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec="recaptcha",D5={theme:"light",type:"image"};class x5{constructor(e,n,r=Object.assign({},D5)){this.parameters=r,this.type=ec,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mn(e),this.isInvisible=this.parameters.size==="invisible",Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Ie(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new R5:new P5,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const o=i=>{i&&(this.tokenChangeListeners.delete(o),s(i))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Ie(!this.parameters.sitekey,this.auth,"argument-error"),Ie(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ie(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Kt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Ie(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Ie(fm()&&!bm(),this.auth,"internal-error"),await L5(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await K6(this.auth);Ie(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Ie(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function L5(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=va._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function M5(t,e,n){if(jt(t.app))return Promise.reject(zn(t));const r=mn(t),s=await Kb(r,e,Ue(n));return new Gb(s,o=>Lh(r,o))}async function N5(t,e,n){const r=Ue(t);await xh(!1,r,"phone");const s=await Kb(r.auth,e,Ue(n));return new Gb(s,o=>xb(r,o))}async function Kb(t,e,n){var r;if(!t._getRecaptchaConfig())try{await kR(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){Ie(o.type==="enroll",t,"internal-error");const i={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await To(t,i,"mfaSmsEnrollment",async(h,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===Jl){Ie(n?.type===ec,h,"argument-error");const p=await Yf(h,f,n);return ow(h,p)}return ow(h,f)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{Ie(o.type==="signin",t,"internal-error");const i=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;Ie(i,t,"missing-multi-factor-info");const a={mfaPendingCredential:o.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await To(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===Jl){Ie(n?.type===ec,f,"argument-error");const g=await Yf(f,p,n);return lw(f,g)}return lw(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await To(t,o,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===Jl){Ie(n?.type===ec,u,"argument-error");const f=await Yf(u,h,n);return rw(u,f)}return rw(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{n?._reset()}}async function Yf(t,e,n){Ie(n.type===ec,t,"argument-error");const r=await n.verify();Ie(typeof r=="string",t,"argument-error");const s=Object.assign({},e);if("phoneEnrollmentInfo"in s){const o=s.phoneEnrollmentInfo.phoneNumber,i=s.phoneEnrollmentInfo.captchaResponse,a=s.phoneEnrollmentInfo.clientType,c=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r,captchaResponse:i,clientType:a,recaptchaVersion:c}}),s}else if("phoneSignInInfo"in s){const o=s.phoneSignInInfo.captchaResponse,i=s.phoneSignInInfo.clientType,a=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:o,clientType:i,recaptchaVersion:a}}),s}else return Object.assign(s,{recaptchaToken:r}),s}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,e){return e?js(e):(Ie(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends Wc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ma(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ma(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ma(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function O5(t){return Db(t.auth,new Em(t),t.bypassAuthState)}function $5(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),zR(n,new Em(t),t.bypassAuthState)}async function V5(t){const{auth:e,user:n}=t;return Ie(n,e,"internal-error"),Rb(n,new Em(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:i,type:a}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return O5;case"linkViaPopup":case"linkViaRedirect":return V5;case"reauthViaPopup":case"reauthViaRedirect":return $5;default:Ir(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5=new Hc(2e3,1e4);async function Yb(t,e,n){if(jt(t.app))return Promise.reject(nr(t,"operation-not-supported-in-this-environment"));const r=mn(t);Ih(t,e,Qa);const s=Zc(r,n);return new bo(r,"signInViaPopup",e,s).executeNotNull()}async function U5(t,e,n){const r=Ue(t);Ih(r.auth,e,Qa);const s=Zc(r.auth,n);return new bo(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class bo extends Qb{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=Oh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,j5.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F5="pendingRedirect",dd=new Map;class B5 extends Qb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const r=await q5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q5(t,e){const n=Xb(e),r=Jb(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function Zb(t,e){return Jb(t)._set(Xb(e),"true")}function H5(t,e){dd.set(t._key(),e)}function Jb(t){return js(t._redirectPersistence)}function Xb(t){return ud(F5,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(t,e,n){return W5(t,e,n)}async function W5(t,e,n){if(jt(t.app))return Promise.reject(zn(t));const r=mn(t);Ih(t,e,Qa),await r._initializationPromise;const s=Zc(r,n);return await Zb(s,r),s._openRedirect(r,e,"signInViaRedirect")}function G5(t,e,n){return K5(t,e,n)}async function K5(t,e,n){const r=Ue(t);Ih(r.auth,e,Qa),await r.auth._initializationPromise;const s=Zc(r.auth,n);await xh(!1,r,e.providerId),await Zb(s,r.auth);const o=await Y5(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function Q5(t,e){return await mn(t)._initializationPromise,eC(t,e,!1)}async function eC(t,e,n=!1){if(jt(t.app))return Promise.reject(zn(t));const r=mn(t),s=Zc(r,e),i=await new B5(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}async function Y5(t){const e=Oh(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=600*1e3;class J5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tC(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(nr(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cw(e))}saveEventToCache(e){this.cachedEventUids.add(cw(e)),this.lastProcessedEventTime=Date.now()}}function cw(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tC({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function X5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tC(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e={}){return cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nD=/^https?/;async function rD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eD(t);for(const n of e)try{if(sD(n))return}catch{}Ir(t,"unauthorized-domain")}function sD(t){const e=_c(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!nD.test(n))return!1;if(tD.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new Hc(3e4,6e4);function uw(){const t=Kt().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iD(t){return new Promise((e,n)=>{var r,s,o;function i(){uw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uw(),n(nr(t,"network-request-failed"))},timeout:oD.get()})}if(!((s=(r=Kt().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Kt().gapi)===null||o===void 0)&&o.load)i();else{const a=Cb("iframefcb");return Kt()[a]=()=>{gapi.load?i():n(nr(t,"network-request-failed"))},mm(`${hR()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw hd=null,e})}let hd=null;function aD(t){return hd=hd||iD(t),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Hc(5e3,15e3),cD="__/auth/iframe",uD="emulator/auth/iframe",dD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fD(t){const e=t.config;Ie(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?pm(e,uD):`https://${t.config.authDomain}/${cD}`,r={apiKey:e.apiKey,appName:t.name,v:Ho},s=hD.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Ga(r).slice(1)}`}async function pD(t){const e=await aD(t),n=Kt().gapi;return Ie(n,t,"internal-error"),e.open({where:document.body,url:fD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dD,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const i=nr(t,"network-request-failed"),a=Kt().setTimeout(()=>{o(i)},lD.get());function c(){Kt().clearTimeout(a),s(r)}r.ping(c).then(c,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mD=500,vD=600,wD="_blank",yD="http://localhost";class dw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _D(t,e,n,r=mD,s=vD){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const c=Object.assign(Object.assign({},gD),{width:r.toString(),height:s.toString(),top:o,left:i}),u=on().toLowerCase();n&&(a=mb(u)?wD:n),pb(u)&&(e=e||yD,c.scrollbars="yes");const h=Object.entries(c).reduce((p,[g,C])=>`${p}${g}=${C},`,"");if(nR(u)&&a!=="_self")return kD(e||"",a),new dw(null);const f=window.open(e||"",a,h);Ie(f,t,"popup-blocked");try{f.focus()}catch{}return new dw(f)}function kD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="__/auth/handler",CD="emulator/auth/handler",ED=encodeURIComponent("fac");async function hw(t,e,n,r,s,o){Ie(t.config.authDomain,t,"auth-domain-config-required"),Ie(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ho,eventId:s};if(e instanceof Qa){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",A9(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))i[h]=f}if(e instanceof Ya){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(i.scopes=h.join(","))}t.tenantId&&(i.tid=t.tenantId);const a=i;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),u=c?`#${ED}=${encodeURIComponent(c)}`:"";return`${SD(t)}?${Ga(a).slice(1)}${u}`}function SD({config:t}){return t.emulator?pm(t,CD):`https://${t.authDomain}/${bD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="webStorageSupport";class AD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=km,this._completeRedirectFn=eC,this._overrideRedirectResult=H5}async _openPopup(e,n,r,s){var o;Zs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await hw(e,n,r,_c(),s);return _D(e,i,Oh())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await hw(e,n,r,_c(),s);return w5(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(Zs(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pD(e),r=new J5(e);return n.register("authEvent",s=>(Ie(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zf,{type:Zf},s=>{var o;const i=(o=s?.[0])===null||o===void 0?void 0:o[Zf];i!==void 0&&n(!!i),Ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kb()||gb()||gm()}}const nC=AD;var fw="@firebase/auth",pw="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ID(t){Ys(new Ks("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:a}=r.options;Ie(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:i,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bb(t)},u=new lR(r,s,o,c);return bR(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ys(new Ks("auth-internal",e=>{const n=mn(e.getProvider("auth").getImmediate());return(r=>new TD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(fw,pw,PD(t)),pr(fw,pw,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=300,DD=Gk("authIdTokenMaxAge")||RD;let gw=null;const xD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DD)return;const s=n?.token;gw!==s&&(gw=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function lr(t=qc()){const e=Ka(t,"auth");if(e.isInitialized())return e.getImmediate();const n=vm(t,{popupRedirectResolver:nC,persistence:[Cm,_m,km]}),r=Gk("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const i=xD(o.toString());Ub(n,i,()=>i(n.currentUser)),jb(n,a=>i(a))}}const s=zk("auth");return s&&Sb(n,`http://${s}`),n}function LD(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=nr("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",LD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ID("Browser");const yi=Object.freeze(Object.defineProperty({__proto__:null,ActionCodeURL:Gc,AuthCredential:Wc,EmailAuthCredential:Ia,EmailAuthProvider:zo,FacebookAuthProvider:Ms,GithubAuthProvider:Ns,GoogleAuthProvider:os,OAuthCredential:fs,OAuthProvider:Xl,PhoneAuthCredential:va,RecaptchaVerifier:x5,TwitterAuthProvider:Os,applyActionCode:QR,beforeAuthStateChanged:Ub,browserLocalPersistence:_m,browserPopupRedirectResolver:nC,browserSessionPersistence:km,confirmPasswordReset:KR,connectAuthEmulator:Sb,createUserWithEmailAndPassword:Mb,deleteUser:f5,fetchSignInMethodsForEmail:e5,getAdditionalUserInfo:d5,getAuth:lr,getIdTokenResult:ub,getRedirectResult:Q5,inMemoryPersistence:Zp,indexedDBLocalPersistence:Cm,initializeAuth:vm,isSignInWithEmailLink:ZR,linkWithCredential:xb,linkWithPhoneNumber:N5,linkWithPopup:U5,linkWithRedirect:G5,onAuthStateChanged:Kc,onIdTokenChanged:jb,prodErrorMap:rb,reload:db,revokeAccessToken:h5,sendEmailVerification:t5,sendPasswordResetEmail:Lb,sendSignInLinkToEmail:YR,setPersistence:Vb,signInAnonymously:qR,signInWithCredential:Lh,signInWithCustomToken:GR,signInWithEmailAndPassword:ym,signInWithEmailLink:JR,signInWithPhoneNumber:M5,signInWithPopup:Yb,signInWithRedirect:z5,signOut:Qc,unlink:HR,updateEmail:s5,updatePassword:o5,updateProfile:Nb,verifyBeforeUpdateEmail:n5},Symbol.toStringTag,{value:"Module"}));var mw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Po,rC;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,A){function y(){}y.prototype=A.prototype,b.D=A.prototype,b.prototype=new y,b.prototype.constructor=b,b.C=function(P,E,w){for(var k=Array(arguments.length-2),$=2;$<arguments.length;$++)k[$-2]=arguments[$];return A.prototype[E].apply(P,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,A,y){y||(y=0);var P=Array(16);if(typeof A=="string")for(var E=0;16>E;++E)P[E]=A.charCodeAt(y++)|A.charCodeAt(y++)<<8|A.charCodeAt(y++)<<16|A.charCodeAt(y++)<<24;else for(E=0;16>E;++E)P[E]=A[y++]|A[y++]<<8|A[y++]<<16|A[y++]<<24;A=b.g[0],y=b.g[1],E=b.g[2];var w=b.g[3],k=A+(w^y&(E^w))+P[0]+3614090360&4294967295;A=y+(k<<7&4294967295|k>>>25),k=w+(E^A&(y^E))+P[1]+3905402710&4294967295,w=A+(k<<12&4294967295|k>>>20),k=E+(y^w&(A^y))+P[2]+606105819&4294967295,E=w+(k<<17&4294967295|k>>>15),k=y+(A^E&(w^A))+P[3]+3250441966&4294967295,y=E+(k<<22&4294967295|k>>>10),k=A+(w^y&(E^w))+P[4]+4118548399&4294967295,A=y+(k<<7&4294967295|k>>>25),k=w+(E^A&(y^E))+P[5]+1200080426&4294967295,w=A+(k<<12&4294967295|k>>>20),k=E+(y^w&(A^y))+P[6]+2821735955&4294967295,E=w+(k<<17&4294967295|k>>>15),k=y+(A^E&(w^A))+P[7]+4249261313&4294967295,y=E+(k<<22&4294967295|k>>>10),k=A+(w^y&(E^w))+P[8]+1770035416&4294967295,A=y+(k<<7&4294967295|k>>>25),k=w+(E^A&(y^E))+P[9]+2336552879&4294967295,w=A+(k<<12&4294967295|k>>>20),k=E+(y^w&(A^y))+P[10]+4294925233&4294967295,E=w+(k<<17&4294967295|k>>>15),k=y+(A^E&(w^A))+P[11]+2304563134&4294967295,y=E+(k<<22&4294967295|k>>>10),k=A+(w^y&(E^w))+P[12]+1804603682&4294967295,A=y+(k<<7&4294967295|k>>>25),k=w+(E^A&(y^E))+P[13]+4254626195&4294967295,w=A+(k<<12&4294967295|k>>>20),k=E+(y^w&(A^y))+P[14]+2792965006&4294967295,E=w+(k<<17&4294967295|k>>>15),k=y+(A^E&(w^A))+P[15]+1236535329&4294967295,y=E+(k<<22&4294967295|k>>>10),k=A+(E^w&(y^E))+P[1]+4129170786&4294967295,A=y+(k<<5&4294967295|k>>>27),k=w+(y^E&(A^y))+P[6]+3225465664&4294967295,w=A+(k<<9&4294967295|k>>>23),k=E+(A^y&(w^A))+P[11]+643717713&4294967295,E=w+(k<<14&4294967295|k>>>18),k=y+(w^A&(E^w))+P[0]+3921069994&4294967295,y=E+(k<<20&4294967295|k>>>12),k=A+(E^w&(y^E))+P[5]+3593408605&4294967295,A=y+(k<<5&4294967295|k>>>27),k=w+(y^E&(A^y))+P[10]+38016083&4294967295,w=A+(k<<9&4294967295|k>>>23),k=E+(A^y&(w^A))+P[15]+3634488961&4294967295,E=w+(k<<14&4294967295|k>>>18),k=y+(w^A&(E^w))+P[4]+3889429448&4294967295,y=E+(k<<20&4294967295|k>>>12),k=A+(E^w&(y^E))+P[9]+568446438&4294967295,A=y+(k<<5&4294967295|k>>>27),k=w+(y^E&(A^y))+P[14]+3275163606&4294967295,w=A+(k<<9&4294967295|k>>>23),k=E+(A^y&(w^A))+P[3]+4107603335&4294967295,E=w+(k<<14&4294967295|k>>>18),k=y+(w^A&(E^w))+P[8]+1163531501&4294967295,y=E+(k<<20&4294967295|k>>>12),k=A+(E^w&(y^E))+P[13]+2850285829&4294967295,A=y+(k<<5&4294967295|k>>>27),k=w+(y^E&(A^y))+P[2]+4243563512&4294967295,w=A+(k<<9&4294967295|k>>>23),k=E+(A^y&(w^A))+P[7]+1735328473&4294967295,E=w+(k<<14&4294967295|k>>>18),k=y+(w^A&(E^w))+P[12]+2368359562&4294967295,y=E+(k<<20&4294967295|k>>>12),k=A+(y^E^w)+P[5]+4294588738&4294967295,A=y+(k<<4&4294967295|k>>>28),k=w+(A^y^E)+P[8]+2272392833&4294967295,w=A+(k<<11&4294967295|k>>>21),k=E+(w^A^y)+P[11]+1839030562&4294967295,E=w+(k<<16&4294967295|k>>>16),k=y+(E^w^A)+P[14]+4259657740&4294967295,y=E+(k<<23&4294967295|k>>>9),k=A+(y^E^w)+P[1]+2763975236&4294967295,A=y+(k<<4&4294967295|k>>>28),k=w+(A^y^E)+P[4]+1272893353&4294967295,w=A+(k<<11&4294967295|k>>>21),k=E+(w^A^y)+P[7]+4139469664&4294967295,E=w+(k<<16&4294967295|k>>>16),k=y+(E^w^A)+P[10]+3200236656&4294967295,y=E+(k<<23&4294967295|k>>>9),k=A+(y^E^w)+P[13]+681279174&4294967295,A=y+(k<<4&4294967295|k>>>28),k=w+(A^y^E)+P[0]+3936430074&4294967295,w=A+(k<<11&4294967295|k>>>21),k=E+(w^A^y)+P[3]+3572445317&4294967295,E=w+(k<<16&4294967295|k>>>16),k=y+(E^w^A)+P[6]+76029189&4294967295,y=E+(k<<23&4294967295|k>>>9),k=A+(y^E^w)+P[9]+3654602809&4294967295,A=y+(k<<4&4294967295|k>>>28),k=w+(A^y^E)+P[12]+3873151461&4294967295,w=A+(k<<11&4294967295|k>>>21),k=E+(w^A^y)+P[15]+530742520&4294967295,E=w+(k<<16&4294967295|k>>>16),k=y+(E^w^A)+P[2]+3299628645&4294967295,y=E+(k<<23&4294967295|k>>>9),k=A+(E^(y|~w))+P[0]+4096336452&4294967295,A=y+(k<<6&4294967295|k>>>26),k=w+(y^(A|~E))+P[7]+1126891415&4294967295,w=A+(k<<10&4294967295|k>>>22),k=E+(A^(w|~y))+P[14]+2878612391&4294967295,E=w+(k<<15&4294967295|k>>>17),k=y+(w^(E|~A))+P[5]+4237533241&4294967295,y=E+(k<<21&4294967295|k>>>11),k=A+(E^(y|~w))+P[12]+1700485571&4294967295,A=y+(k<<6&4294967295|k>>>26),k=w+(y^(A|~E))+P[3]+2399980690&4294967295,w=A+(k<<10&4294967295|k>>>22),k=E+(A^(w|~y))+P[10]+4293915773&4294967295,E=w+(k<<15&4294967295|k>>>17),k=y+(w^(E|~A))+P[1]+2240044497&4294967295,y=E+(k<<21&4294967295|k>>>11),k=A+(E^(y|~w))+P[8]+1873313359&4294967295,A=y+(k<<6&4294967295|k>>>26),k=w+(y^(A|~E))+P[15]+4264355552&4294967295,w=A+(k<<10&4294967295|k>>>22),k=E+(A^(w|~y))+P[6]+2734768916&4294967295,E=w+(k<<15&4294967295|k>>>17),k=y+(w^(E|~A))+P[13]+1309151649&4294967295,y=E+(k<<21&4294967295|k>>>11),k=A+(E^(y|~w))+P[4]+4149444226&4294967295,A=y+(k<<6&4294967295|k>>>26),k=w+(y^(A|~E))+P[11]+3174756917&4294967295,w=A+(k<<10&4294967295|k>>>22),k=E+(A^(w|~y))+P[2]+718787259&4294967295,E=w+(k<<15&4294967295|k>>>17),k=y+(w^(E|~A))+P[9]+3951481745&4294967295,b.g[0]=b.g[0]+A&4294967295,b.g[1]=b.g[1]+(E+(k<<21&4294967295|k>>>11))&4294967295,b.g[2]=b.g[2]+E&4294967295,b.g[3]=b.g[3]+w&4294967295}r.prototype.u=function(b,A){A===void 0&&(A=b.length);for(var y=A-this.blockSize,P=this.B,E=this.h,w=0;w<A;){if(E==0)for(;w<=y;)s(this,b,w),w+=this.blockSize;if(typeof b=="string"){for(;w<A;)if(P[E++]=b.charCodeAt(w++),E==this.blockSize){s(this,P),E=0;break}}else for(;w<A;)if(P[E++]=b[w++],E==this.blockSize){s(this,P),E=0;break}}this.h=E,this.o+=A},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var A=1;A<b.length-8;++A)b[A]=0;var y=8*this.o;for(A=b.length-8;A<b.length;++A)b[A]=y&255,y/=256;for(this.u(b),b=Array(16),A=y=0;4>A;++A)for(var P=0;32>P;P+=8)b[y++]=this.g[A]>>>P&255;return b};function o(b,A){var y=a;return Object.prototype.hasOwnProperty.call(y,b)?y[b]:y[b]=A(b)}function i(b,A){this.h=A;for(var y=[],P=!0,E=b.length-1;0<=E;E--){var w=b[E]|0;P&&w==A||(y[E]=w,P=!1)}this.g=y}var a={};function c(b){return-128<=b&&128>b?o(b,function(A){return new i([A|0],0>A?-1:0)}):new i([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return v(u(-b));for(var A=[],y=1,P=0;b>=y;P++)A[P]=b/y|0,y*=4294967296;return new i(A,0)}function h(b,A){if(b.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b.charAt(0)=="-")return v(h(b.substring(1),A));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=u(Math.pow(A,8)),P=f,E=0;E<b.length;E+=8){var w=Math.min(8,b.length-E),k=parseInt(b.substring(E,E+w),A);8>w?(w=u(Math.pow(A,w)),P=P.j(w).add(u(k))):(P=P.j(y),P=P.add(u(k)))}return P}var f=c(0),p=c(1),g=c(16777216);t=i.prototype,t.m=function(){if(T(this))return-v(this).m();for(var b=0,A=1,y=0;y<this.g.length;y++){var P=this.i(y);b+=(0<=P?P:4294967296+P)*A,A*=4294967296}return b},t.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(C(this))return"0";if(T(this))return"-"+v(this).toString(b);for(var A=u(Math.pow(b,6)),y=this,P="";;){var E=R(y,A).g;y=_(y,E.j(A));var w=((0<y.g.length?y.g[0]:y.h)>>>0).toString(b);if(y=E,C(y))return w+P;for(;6>w.length;)w="0"+w;P=w+P}},t.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function C(b){if(b.h!=0)return!1;for(var A=0;A<b.g.length;A++)if(b.g[A]!=0)return!1;return!0}function T(b){return b.h==-1}t.l=function(b){return b=_(this,b),T(b)?-1:C(b)?0:1};function v(b){for(var A=b.g.length,y=[],P=0;P<A;P++)y[P]=~b.g[P];return new i(y,~b.h).add(p)}t.abs=function(){return T(this)?v(this):this},t.add=function(b){for(var A=Math.max(this.g.length,b.g.length),y=[],P=0,E=0;E<=A;E++){var w=P+(this.i(E)&65535)+(b.i(E)&65535),k=(w>>>16)+(this.i(E)>>>16)+(b.i(E)>>>16);P=k>>>16,w&=65535,k&=65535,y[E]=k<<16|w}return new i(y,y[y.length-1]&-2147483648?-1:0)};function _(b,A){return b.add(v(A))}t.j=function(b){if(C(this)||C(b))return f;if(T(this))return T(b)?v(this).j(v(b)):v(v(this).j(b));if(T(b))return v(this.j(v(b)));if(0>this.l(g)&&0>b.l(g))return u(this.m()*b.m());for(var A=this.g.length+b.g.length,y=[],P=0;P<2*A;P++)y[P]=0;for(P=0;P<this.g.length;P++)for(var E=0;E<b.g.length;E++){var w=this.i(P)>>>16,k=this.i(P)&65535,$=b.i(E)>>>16,U=b.i(E)&65535;y[2*P+2*E]+=k*U,S(y,2*P+2*E),y[2*P+2*E+1]+=w*U,S(y,2*P+2*E+1),y[2*P+2*E+1]+=k*$,S(y,2*P+2*E+1),y[2*P+2*E+2]+=w*$,S(y,2*P+2*E+2)}for(P=0;P<A;P++)y[P]=y[2*P+1]<<16|y[2*P];for(P=A;P<2*A;P++)y[P]=0;return new i(y,0)};function S(b,A){for(;(b[A]&65535)!=b[A];)b[A+1]+=b[A]>>>16,b[A]&=65535,A++}function x(b,A){this.g=b,this.h=A}function R(b,A){if(C(A))throw Error("division by zero");if(C(b))return new x(f,f);if(T(b))return A=R(v(b),A),new x(v(A.g),v(A.h));if(T(A))return A=R(b,v(A)),new x(v(A.g),A.h);if(30<b.g.length){if(T(b)||T(A))throw Error("slowDivide_ only works with positive integers.");for(var y=p,P=A;0>=P.l(b);)y=D(y),P=D(P);var E=L(y,1),w=L(P,1);for(P=L(P,2),y=L(y,2);!C(P);){var k=w.add(P);0>=k.l(b)&&(E=E.add(y),w=k),P=L(P,1),y=L(y,1)}return A=_(b,E.j(A)),new x(E,A)}for(E=f;0<=b.l(A);){for(y=Math.max(1,Math.floor(b.m()/A.m())),P=Math.ceil(Math.log(y)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),w=u(y),k=w.j(A);T(k)||0<k.l(b);)y-=P,w=u(y),k=w.j(A);C(w)&&(w=p),E=E.add(w),b=_(b,k)}return new x(E,b)}t.A=function(b){return R(this,b).h},t.and=function(b){for(var A=Math.max(this.g.length,b.g.length),y=[],P=0;P<A;P++)y[P]=this.i(P)&b.i(P);return new i(y,this.h&b.h)},t.or=function(b){for(var A=Math.max(this.g.length,b.g.length),y=[],P=0;P<A;P++)y[P]=this.i(P)|b.i(P);return new i(y,this.h|b.h)},t.xor=function(b){for(var A=Math.max(this.g.length,b.g.length),y=[],P=0;P<A;P++)y[P]=this.i(P)^b.i(P);return new i(y,this.h^b.h)};function D(b){for(var A=b.g.length+1,y=[],P=0;P<A;P++)y[P]=b.i(P)<<1|b.i(P-1)>>>31;return new i(y,b.h)}function L(b,A){var y=A>>5;A%=32;for(var P=b.g.length-y,E=[],w=0;w<P;w++)E[w]=0<A?b.i(w+y)>>>A|b.i(w+y+1)<<32-A:b.i(w+y);return new i(E,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,rC=r,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=u,i.fromString=h,Po=i}).apply(typeof mw<"u"?mw:typeof self<"u"?self:typeof window<"u"?window:{});var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sC,Ol,oC,fd,Xp,iC,aC,lC;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,I){return d==Array.prototype||d==Object.prototype||(d[m]=I.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nu=="object"&&Nu];for(var m=0;m<d.length;++m){var I=d[m];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function s(d,m){if(m)e:{var I=r;d=d.split(".");for(var j=0;j<d.length-1;j++){var re=d[j];if(!(re in I))break e;I=I[re]}d=d[d.length-1],j=I[d],m=m(j),m!=j&&m!=null&&e(I,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var I=0,j=!1,re={next:function(){if(!j&&I<d.length){var le=I++;return{value:m(le,d[le]),done:!1}}return j=!0,{done:!0,value:void 0}}};return re[Symbol.iterator]=function(){return re},re}s("Array.prototype.values",function(d){return d||function(){return o(this,function(m,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function c(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function u(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function h(d,m,I){return d.call.apply(d.bind,arguments)}function f(d,m,I){if(!d)throw Error();if(2<arguments.length){var j=Array.prototype.slice.call(arguments,2);return function(){var re=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(re,j),d.apply(m,re)}}return function(){return d.apply(m,arguments)}}function p(d,m,I){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,m){var I=Array.prototype.slice.call(arguments,1);return function(){var j=I.slice();return j.push.apply(j,arguments),d.apply(this,j)}}function C(d,m){function I(){}I.prototype=m.prototype,d.aa=m.prototype,d.prototype=new I,d.prototype.constructor=d,d.Qb=function(j,re,le){for(var Pe=Array(arguments.length-2),bt=2;bt<arguments.length;bt++)Pe[bt-2]=arguments[bt];return m.prototype[re].apply(j,Pe)}}function T(d){const m=d.length;if(0<m){const I=Array(m);for(let j=0;j<m;j++)I[j]=d[j];return I}return[]}function v(d,m){for(let I=1;I<arguments.length;I++){const j=arguments[I];if(c(j)){const re=d.length||0,le=j.length||0;d.length=re+le;for(let Pe=0;Pe<le;Pe++)d[re+Pe]=j[Pe]}else d.push(j)}}class _{constructor(m,I){this.i=m,this.j=I,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function S(d){return/^[\s\xa0]*$/.test(d)}function x(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function L(d,m,I){for(const j in d)m.call(I,d[j],j,d)}function b(d,m){for(const I in d)m.call(void 0,d[I],I,d)}function A(d){const m={};for(const I in d)m[I]=d[I];return m}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,m){let I,j;for(let re=1;re<arguments.length;re++){j=arguments[re];for(I in j)d[I]=j[I];for(let le=0;le<y.length;le++)I=y[le],Object.prototype.hasOwnProperty.call(j,I)&&(d[I]=j[I])}}function E(d){var m=1;d=d.split(":");const I=[];for(;0<m&&d.length;)I.push(d.shift()),m--;return d.length&&I.push(d.join(":")),I}function w(d){a.setTimeout(()=>{throw d},0)}function k(){var d=H;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class ${constructor(){this.h=this.g=null}add(m,I){const j=U.get();j.set(m,I),this.h?this.h.next=j:this.g=j,this.h=j}}var U=new _(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(m,I){this.h=m,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,N=!1,H=new $,Y=()=>{const d=a.Promise.resolve(void 0);ee=()=>{d.then(ne)}};var ne=()=>{for(var d;d=k();){try{d.h.call(d.g)}catch(I){w(I)}var m=U;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}N=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function we(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}we.prototype.h=function(){this.defaultPrevented=!0};var Ye=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const I=()=>{};a.addEventListener("test",I,m),a.removeEventListener("test",I,m)}catch{}return d})();function lt(d,m){if(we.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var I=this.type=d.type,j=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(D){e:{try{R(m.nodeName);var re=!0;break e}catch{}re=!1}re||(m=null)}}else I=="mouseover"?m=d.fromElement:I=="mouseout"&&(m=d.toElement);this.relatedTarget=m,j?(this.clientX=j.clientX!==void 0?j.clientX:j.pageX,this.clientY=j.clientY!==void 0?j.clientY:j.pageY,this.screenX=j.screenX||0,this.screenY=j.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:De[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&lt.aa.h.call(this)}}C(lt,we);var De={2:"touch",3:"pen",4:"mouse"};lt.prototype.h=function(){lt.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ke=0;function Ce(d,m,I,j,re){this.listener=d,this.proxy=null,this.src=m,this.type=I,this.capture=!!j,this.ha=re,this.key=++ke,this.da=this.fa=!1}function ye(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Ze(d){this.src=d,this.g={},this.h=0}Ze.prototype.add=function(d,m,I,j,re){var le=d.toString();d=this.g[le],d||(d=this.g[le]=[],this.h++);var Pe=W(d,m,j,re);return-1<Pe?(m=d[Pe],I||(m.fa=!1)):(m=new Ce(m,this.src,le,!!j,re),m.fa=I,d.push(m)),m};function z(d,m){var I=m.type;if(I in d.g){var j=d.g[I],re=Array.prototype.indexOf.call(j,m,void 0),le;(le=0<=re)&&Array.prototype.splice.call(j,re,1),le&&(ye(m),d.g[I].length==0&&(delete d.g[I],d.h--))}}function W(d,m,I,j){for(var re=0;re<d.length;++re){var le=d[re];if(!le.da&&le.listener==m&&le.capture==!!I&&le.ha==j)return re}return-1}var te="closure_lm_"+(1e6*Math.random()|0),de={};function ge(d,m,I,j,re){if(Array.isArray(m)){for(var le=0;le<m.length;le++)ge(d,m[le],I,j,re);return null}return I=ae(I),d&&d[se]?d.K(m,I,u(j)?!!j.capture:!1,re):he(d,m,I,!1,j,re)}function he(d,m,I,j,re,le){if(!m)throw Error("Invalid event type");var Pe=u(re)?!!re.capture:!!re,bt=ve(d);if(bt||(d[te]=bt=new Ze(d)),I=bt.add(m,I,j,Pe,le),I.proxy)return I;if(j=F(),I.proxy=j,j.src=d,j.listener=I,d.addEventListener)Ye||(re=Pe),re===void 0&&(re=!1),d.addEventListener(m.toString(),j,re);else if(d.attachEvent)d.attachEvent(oe(m.toString()),j);else if(d.addListener&&d.removeListener)d.addListener(j);else throw Error("addEventListener and attachEvent are unavailable.");return I}function F(){function d(I){return m.call(d.src,d.listener,I)}const m=Re;return d}function q(d,m,I,j,re){if(Array.isArray(m))for(var le=0;le<m.length;le++)q(d,m[le],I,j,re);else j=u(j)?!!j.capture:!!j,I=ae(I),d&&d[se]?(d=d.i,m=String(m).toString(),m in d.g&&(le=d.g[m],I=W(le,I,j,re),-1<I&&(ye(le[I]),Array.prototype.splice.call(le,I,1),le.length==0&&(delete d.g[m],d.h--)))):d&&(d=ve(d))&&(m=d.g[m.toString()],d=-1,m&&(d=W(m,I,j,re)),(I=-1<d?m[d]:null)&&J(I))}function J(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[se])z(m.i,d);else{var I=d.type,j=d.proxy;m.removeEventListener?m.removeEventListener(I,j,d.capture):m.detachEvent?m.detachEvent(oe(I),j):m.addListener&&m.removeListener&&m.removeListener(j),(I=ve(m))?(z(I,d),I.h==0&&(I.src=null,m[te]=null)):ye(d)}}}function oe(d){return d in de?de[d]:de[d]="on"+d}function Re(d,m){if(d.da)d=!0;else{m=new lt(m,this);var I=d.listener,j=d.ha||d.src;d.fa&&J(d),d=I.call(j,m)}return d}function ve(d){return d=d[te],d instanceof Ze?d:null}var X="__closure_events_fn_"+(1e9*Math.random()>>>0);function ae(d){return typeof d=="function"?d:(d[X]||(d[X]=function(m){return d.handleEvent(m)}),d[X])}function Ae(){Q.call(this),this.i=new Ze(this),this.M=this,this.F=null}C(Ae,Q),Ae.prototype[se]=!0,Ae.prototype.removeEventListener=function(d,m,I,j){q(this,d,m,I,j)};function Me(d,m){var I,j=d.F;if(j)for(I=[];j;j=j.F)I.push(j);if(d=d.M,j=m.type||m,typeof m=="string")m=new we(m,d);else if(m instanceof we)m.target=m.target||d;else{var re=m;m=new we(j,d),P(m,re)}if(re=!0,I)for(var le=I.length-1;0<=le;le--){var Pe=m.g=I[le];re=Be(Pe,j,!0,m)&&re}if(Pe=m.g=d,re=Be(Pe,j,!0,m)&&re,re=Be(Pe,j,!1,m)&&re,I)for(le=0;le<I.length;le++)Pe=m.g=I[le],re=Be(Pe,j,!1,m)&&re}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var I=d.g[m],j=0;j<I.length;j++)ye(I[j]);delete d.g[m],d.h--}}this.F=null},Ae.prototype.K=function(d,m,I,j){return this.i.add(String(d),m,!1,I,j)},Ae.prototype.L=function(d,m,I,j){return this.i.add(String(d),m,!0,I,j)};function Be(d,m,I,j){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var re=!0,le=0;le<m.length;++le){var Pe=m[le];if(Pe&&!Pe.da&&Pe.capture==I){var bt=Pe.listener,wn=Pe.ha||Pe.src;Pe.fa&&z(d.i,Pe),re=bt.call(wn,j)!==!1&&re}}return re&&!j.defaultPrevented}function Rt(d,m,I){if(typeof d=="function")I&&(d=p(d,I));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function _t(d){d.g=Rt(()=>{d.g=null,d.i&&(d.i=!1,_t(d))},d.l);const m=d.h;d.h=null,d.m.apply(null,m)}class vn extends Q{constructor(m,I){super(),this.m=m,this.l=I,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jt(d){Q.call(this),this.h=d,this.g={}}C(Jt,Q);var Jr=[];function so(d){L(d.g,function(m,I){this.g.hasOwnProperty(I)&&J(m)},d),d.g={}}Jt.prototype.N=function(){Jt.aa.N.call(this),so(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=a.JSON.stringify,Gn=a.JSON.parse,ie=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function V(){}V.prototype.h=null;function me(d){return d.h||(d.h=d.i())}function rt(){}var at={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Kn(){we.call(this,"d")}C(Kn,we);function ws(){we.call(this,"c")}C(ws,we);var un={},df=null;function oo(){return df=df||new Ae}un.La="serverreachability";function uu(d){we.call(this,un.La,d)}C(uu,we);function al(d){const m=oo();Me(m,new uu(m))}un.STAT_EVENT="statevent";function Iv(d,m){we.call(this,un.STAT_EVENT,d),this.stat=m}C(Iv,we);function Vn(d){const m=oo();Me(m,new Iv(m,d))}un.Ma="timingevent";function Rv(d,m){we.call(this,un.Ma,d),this.size=m}C(Rv,we);function ll(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function cl(){this.g=!0}cl.prototype.xa=function(){this.g=!1};function pS(d,m,I,j,re,le){d.info(function(){if(d.g)if(le)for(var Pe="",bt=le.split("&"),wn=0;wn<bt.length;wn++){var ut=bt[wn].split("=");if(1<ut.length){var Tn=ut[0];ut=ut[1];var Pn=Tn.split("_");Pe=2<=Pn.length&&Pn[1]=="type"?Pe+(Tn+"="+ut+"&"):Pe+(Tn+"=redacted&")}}else Pe=null;else Pe=le;return"XMLHTTP REQ ("+j+") [attempt "+re+"]: "+m+`
`+I+`
`+Pe})}function gS(d,m,I,j,re,le,Pe){d.info(function(){return"XMLHTTP RESP ("+j+") [ attempt "+re+"]: "+m+`
`+I+`
`+le+" "+Pe})}function Fi(d,m,I,j){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+vS(d,I)+(j?" "+j:"")})}function mS(d,m){d.info(function(){return"TIMEOUT: "+m})}cl.prototype.info=function(){};function vS(d,m){if(!d.g)return m;if(!m)return null;try{var I=JSON.parse(m);if(I){for(d=0;d<I.length;d++)if(Array.isArray(I[d])){var j=I[d];if(!(2>j.length)){var re=j[1];if(Array.isArray(re)&&!(1>re.length)){var le=re[0];if(le!="noop"&&le!="stop"&&le!="close")for(var Pe=1;Pe<re.length;Pe++)re[Pe]=""}}}}return Xt(I)}catch{return m}}var du={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hf;function hu(){}C(hu,V),hu.prototype.g=function(){return new XMLHttpRequest},hu.prototype.i=function(){return{}},hf=new hu;function io(d,m,I,j){this.j=d,this.i=m,this.l=I,this.R=j||1,this.U=new Jt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xv}function xv(){this.i=null,this.g="",this.h=!1}var Lv={},ff={};function pf(d,m,I){d.L=1,d.v=mu(ys(m)),d.m=I,d.P=!0,Mv(d,null)}function Mv(d,m){d.F=Date.now(),fu(d),d.A=ys(d.v);var I=d.A,j=d.R;Array.isArray(j)||(j=[String(j)]),Kv(I.i,"t",j),d.C=0,I=d.j.J,d.h=new xv,d.g=h1(d.j,I?m:null,!d.m),0<d.O&&(d.M=new vn(p(d.Y,d,d.g),d.O)),m=d.U,I=d.g,j=d.ca;var re="readystatechange";Array.isArray(re)||(re&&(Jr[0]=re.toString()),re=Jr);for(var le=0;le<re.length;le++){var Pe=ge(I,re[le],j||m.handleEvent,!1,m.h||m);if(!Pe)break;m.g[Pe.key]=Pe}m=d.H?A(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),al(),pS(d.i,d.u,d.A,d.l,d.R,d.m)}io.prototype.ca=function(d){d=d.target;const m=this.M;m&&_s(d)==3?m.j():this.Y(d)},io.prototype.Y=function(d){try{if(d==this.g)e:{const Pn=_s(this.g);var m=this.g.Ba();const Hi=this.g.Z();if(!(3>Pn)&&(Pn!=3||this.g&&(this.h.h||this.g.oa()||t1(this.g)))){this.J||Pn!=4||m==7||(m==8||0>=Hi?al(3):al(2)),gf(this);var I=this.g.Z();this.X=I;t:if(Nv(this)){var j=t1(this.g);d="";var re=j.length,le=_s(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zo(this),ul(this);var Pe="";break t}this.h.i=new a.TextDecoder}for(m=0;m<re;m++)this.h.h=!0,d+=this.h.i.decode(j[m],{stream:!(le&&m==re-1)});j.length=0,this.h.g+=d,this.C=0,Pe=this.h.g}else Pe=this.g.oa();if(this.o=I==200,gS(this.i,this.u,this.A,this.l,this.R,Pn,I),this.o){if(this.T&&!this.K){t:{if(this.g){var bt,wn=this.g;if((bt=wn.g?wn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(bt)){var ut=bt;break t}}ut=null}if(I=ut)Fi(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mf(this,I);else{this.o=!1,this.s=3,Vn(12),Zo(this),ul(this);break e}}if(this.P){I=!0;let xr;for(;!this.J&&this.C<Pe.length;)if(xr=wS(this,Pe),xr==ff){Pn==4&&(this.s=4,Vn(14),I=!1),Fi(this.i,this.l,null,"[Incomplete Response]");break}else if(xr==Lv){this.s=4,Vn(15),Fi(this.i,this.l,Pe,"[Invalid Chunk]"),I=!1;break}else Fi(this.i,this.l,xr,null),mf(this,xr);if(Nv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pn!=4||Pe.length!=0||this.h.h||(this.s=1,Vn(16),I=!1),this.o=this.o&&I,!I)Fi(this.i,this.l,Pe,"[Invalid Chunked Response]"),Zo(this),ul(this);else if(0<Pe.length&&!this.W){this.W=!0;var Tn=this.j;Tn.g==this&&Tn.ba&&!Tn.M&&(Tn.j.info("Great, no buffering proxy detected. Bytes received: "+Pe.length),bf(Tn),Tn.M=!0,Vn(11))}}else Fi(this.i,this.l,Pe,null),mf(this,Pe);Pn==4&&Zo(this),this.o&&!this.J&&(Pn==4?l1(this.j,this):(this.o=!1,fu(this)))}else NS(this.g),I==400&&0<Pe.indexOf("Unknown SID")?(this.s=3,Vn(12)):(this.s=0,Vn(13)),Zo(this),ul(this)}}}catch{}finally{}};function Nv(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function wS(d,m){var I=d.C,j=m.indexOf(`
`,I);return j==-1?ff:(I=Number(m.substring(I,j)),isNaN(I)?Lv:(j+=1,j+I>m.length?ff:(m=m.slice(j,j+I),d.C=j+I,m)))}io.prototype.cancel=function(){this.J=!0,Zo(this)};function fu(d){d.S=Date.now()+d.I,Ov(d,d.I)}function Ov(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ll(p(d.ba,d),m)}function gf(d){d.B&&(a.clearTimeout(d.B),d.B=null)}io.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(mS(this.i,this.A),this.L!=2&&(al(),Vn(17)),Zo(this),this.s=2,ul(this)):Ov(this,this.S-d)};function ul(d){d.j.G==0||d.J||l1(d.j,d)}function Zo(d){gf(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,so(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function mf(d,m){try{var I=d.j;if(I.G!=0&&(I.g==d||vf(I.h,d))){if(!d.K&&vf(I.h,d)&&I.G==3){try{var j=I.Da.g.parse(m)}catch{j=null}if(Array.isArray(j)&&j.length==3){var re=j;if(re[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<d.F)bu(I),_u(I);else break e;kf(I),Vn(18)}}else I.za=re[1],0<I.za-I.T&&37500>re[2]&&I.F&&I.v==0&&!I.C&&(I.C=ll(p(I.Za,I),6e3));if(1>=jv(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else Xo(I,11)}else if((d.K||I.g==d)&&bu(I),!S(m))for(re=I.Da.g.parse(m),m=0;m<re.length;m++){let ut=re[m];if(I.T=ut[0],ut=ut[1],I.G==2)if(ut[0]=="c"){I.K=ut[1],I.ia=ut[2];const Tn=ut[3];Tn!=null&&(I.la=Tn,I.j.info("VER="+I.la));const Pn=ut[4];Pn!=null&&(I.Aa=Pn,I.j.info("SVER="+I.Aa));const Hi=ut[5];Hi!=null&&typeof Hi=="number"&&0<Hi&&(j=1.5*Hi,I.L=j,I.j.info("backChannelRequestTimeoutMs_="+j)),j=I;const xr=d.g;if(xr){const Eu=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eu){var le=j.h;le.g||Eu.indexOf("spdy")==-1&&Eu.indexOf("quic")==-1&&Eu.indexOf("h2")==-1||(le.j=le.l,le.g=new Set,le.h&&(wf(le,le.h),le.h=null))}if(j.D){const Cf=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Cf&&(j.ya=Cf,Pt(j.I,j.D,Cf))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-d.F,I.j.info("Handshake RTT: "+I.R+"ms")),j=I;var Pe=d;if(j.qa=d1(j,j.J?j.ia:null,j.W),Pe.K){Uv(j.h,Pe);var bt=Pe,wn=j.L;wn&&(bt.I=wn),bt.B&&(gf(bt),fu(bt)),j.g=Pe}else i1(j);0<I.i.length&&ku(I)}else ut[0]!="stop"&&ut[0]!="close"||Xo(I,7);else I.G==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?Xo(I,7):_f(I):ut[0]!="noop"&&I.l&&I.l.ta(ut),I.v=0)}}al(4)}catch{}}var yS=class{constructor(d,m){this.g=d,this.map=m}};function $v(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vv(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function jv(d){return d.h?1:d.g?d.g.size:0}function vf(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function wf(d,m){d.g?d.g.add(m):d.h=m}function Uv(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}$v.prototype.cancel=function(){if(this.i=Fv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Fv(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(const I of d.g.values())m=m.concat(I.D);return m}return T(d.i)}function _S(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var m=[],I=d.length,j=0;j<I;j++)m.push(d[j]);return m}m=[],I=0;for(j in d)m[I++]=d[j];return m}function kS(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var m=[];d=d.length;for(var I=0;I<d;I++)m.push(I);return m}m=[],I=0;for(const j in d)m[I++]=j;return m}}}function Bv(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var I=kS(d),j=_S(d),re=j.length,le=0;le<re;le++)m.call(void 0,j[le],I&&I[le],d)}var qv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bS(d,m){if(d){d=d.split("&");for(var I=0;I<d.length;I++){var j=d[I].indexOf("="),re=null;if(0<=j){var le=d[I].substring(0,j);re=d[I].substring(j+1)}else le=d[I];m(le,re?decodeURIComponent(re.replace(/\+/g," ")):"")}}}function Jo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Jo){this.h=d.h,pu(this,d.j),this.o=d.o,this.g=d.g,gu(this,d.s),this.l=d.l;var m=d.i,I=new fl;I.i=m.i,m.g&&(I.g=new Map(m.g),I.h=m.h),Hv(this,I),this.m=d.m}else d&&(m=String(d).match(qv))?(this.h=!1,pu(this,m[1]||"",!0),this.o=dl(m[2]||""),this.g=dl(m[3]||"",!0),gu(this,m[4]),this.l=dl(m[5]||"",!0),Hv(this,m[6]||"",!0),this.m=dl(m[7]||"")):(this.h=!1,this.i=new fl(null,this.h))}Jo.prototype.toString=function(){var d=[],m=this.j;m&&d.push(hl(m,zv,!0),":");var I=this.g;return(I||m=="file")&&(d.push("//"),(m=this.o)&&d.push(hl(m,zv,!0),"@"),d.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&d.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&d.push("/"),d.push(hl(I,I.charAt(0)=="/"?SS:ES,!0))),(I=this.i.toString())&&d.push("?",I),(I=this.m)&&d.push("#",hl(I,TS)),d.join("")};function ys(d){return new Jo(d)}function pu(d,m,I){d.j=I?dl(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function gu(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function Hv(d,m,I){m instanceof fl?(d.i=m,PS(d.i,d.h)):(I||(m=hl(m,AS)),d.i=new fl(m,d.h))}function Pt(d,m,I){d.i.set(m,I)}function mu(d){return Pt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function dl(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function hl(d,m,I){return typeof d=="string"?(d=encodeURI(d).replace(m,CS),I&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function CS(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var zv=/[#\/\?@]/g,ES=/[#\?:]/g,SS=/[#\?]/g,AS=/[#\?@]/g,TS=/#/g;function fl(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function ao(d){d.g||(d.g=new Map,d.h=0,d.i&&bS(d.i,function(m,I){d.add(decodeURIComponent(m.replace(/\+/g," ")),I)}))}t=fl.prototype,t.add=function(d,m){ao(this),this.i=null,d=Bi(this,d);var I=this.g.get(d);return I||this.g.set(d,I=[]),I.push(m),this.h+=1,this};function Wv(d,m){ao(d),m=Bi(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function Gv(d,m){return ao(d),m=Bi(d,m),d.g.has(m)}t.forEach=function(d,m){ao(this),this.g.forEach(function(I,j){I.forEach(function(re){d.call(m,re,j,this)},this)},this)},t.na=function(){ao(this);const d=Array.from(this.g.values()),m=Array.from(this.g.keys()),I=[];for(let j=0;j<m.length;j++){const re=d[j];for(let le=0;le<re.length;le++)I.push(m[j])}return I},t.V=function(d){ao(this);let m=[];if(typeof d=="string")Gv(this,d)&&(m=m.concat(this.g.get(Bi(this,d))));else{d=Array.from(this.g.values());for(let I=0;I<d.length;I++)m=m.concat(d[I])}return m},t.set=function(d,m){return ao(this),this.i=null,d=Bi(this,d),Gv(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},t.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function Kv(d,m,I){Wv(d,m),0<I.length&&(d.i=null,d.g.set(Bi(d,m),T(I)),d.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],m=Array.from(this.g.keys());for(var I=0;I<m.length;I++){var j=m[I];const le=encodeURIComponent(String(j)),Pe=this.V(j);for(j=0;j<Pe.length;j++){var re=le;Pe[j]!==""&&(re+="="+encodeURIComponent(String(Pe[j]))),d.push(re)}}return this.i=d.join("&")};function Bi(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function PS(d,m){m&&!d.j&&(ao(d),d.i=null,d.g.forEach(function(I,j){var re=j.toLowerCase();j!=re&&(Wv(this,j),Kv(this,re,I))},d)),d.j=m}function IS(d,m){const I=new cl;if(a.Image){const j=new Image;j.onload=g(lo,I,"TestLoadImage: loaded",!0,m,j),j.onerror=g(lo,I,"TestLoadImage: error",!1,m,j),j.onabort=g(lo,I,"TestLoadImage: abort",!1,m,j),j.ontimeout=g(lo,I,"TestLoadImage: timeout",!1,m,j),a.setTimeout(function(){j.ontimeout&&j.ontimeout()},1e4),j.src=d}else m(!1)}function RS(d,m){const I=new cl,j=new AbortController,re=setTimeout(()=>{j.abort(),lo(I,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:j.signal}).then(le=>{clearTimeout(re),le.ok?lo(I,"TestPingServer: ok",!0,m):lo(I,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(re),lo(I,"TestPingServer: error",!1,m)})}function lo(d,m,I,j,re){try{re&&(re.onload=null,re.onerror=null,re.onabort=null,re.ontimeout=null),j(I)}catch{}}function DS(){this.g=new ie}function xS(d,m,I){const j=I||"";try{Bv(d,function(re,le){let Pe=re;u(re)&&(Pe=Xt(re)),m.push(j+le+"="+encodeURIComponent(Pe))})}catch(re){throw m.push(j+"type="+encodeURIComponent("_badmap")),re}}function vu(d){this.l=d.Ub||null,this.j=d.eb||!1}C(vu,V),vu.prototype.g=function(){return new wu(this.l,this.j)},vu.prototype.i=(function(d){return function(){return d}})({});function wu(d,m){Ae.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(wu,Ae),t=wu.prototype,t.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,gl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,gl(this)),this.g&&(this.readyState=3,gl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qv(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qv(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?pl(this):gl(this),this.readyState==3&&Qv(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,pl(this))},t.Qa=function(d){this.g&&(this.response=d,pl(this))},t.ga=function(){this.g&&pl(this)};function pl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,gl(d)}t.setRequestHeader=function(d,m){this.u.append(d,m)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],m=this.h.entries();for(var I=m.next();!I.done;)I=I.value,d.push(I[0]+": "+I[1]),I=m.next();return d.join(`\r
`)};function gl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(wu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Yv(d){let m="";return L(d,function(I,j){m+=j,m+=":",m+=I,m+=`\r
`}),m}function yf(d,m,I){e:{for(j in I){var j=!1;break e}j=!0}j||(I=Yv(I),typeof d=="string"?I!=null&&encodeURIComponent(String(I)):Pt(d,m,I))}function Vt(d){Ae.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Vt,Ae);var LS=/^https?$/i,MS=["POST","PUT"];t=Vt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,m,I,j){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hf.g(),this.v=this.o?me(this.o):me(hf),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(le){Zv(this,le);return}if(d=I||"",I=new Map(this.headers),j)if(Object.getPrototypeOf(j)===Object.prototype)for(var re in j)I.set(re,j[re]);else if(typeof j.keys=="function"&&typeof j.get=="function")for(const le of j.keys())I.set(le,j.get(le));else throw Error("Unknown input type for opt_headers: "+String(j));j=Array.from(I.keys()).find(le=>le.toLowerCase()=="content-type"),re=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MS,m,void 0))||j||re||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[le,Pe]of I)this.g.setRequestHeader(le,Pe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{e1(this),this.u=!0,this.g.send(d),this.u=!1}catch(le){Zv(this,le)}};function Zv(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,Jv(d),yu(d)}function Jv(d){d.A||(d.A=!0,Me(d,"complete"),Me(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Me(this,"complete"),Me(this,"abort"),yu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yu(this,!0)),Vt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xv(this):this.bb())},t.bb=function(){Xv(this)};function Xv(d){if(d.h&&typeof i<"u"&&(!d.v[1]||_s(d)!=4||d.Z()!=2)){if(d.u&&_s(d)==4)Rt(d.Ea,0,d);else if(Me(d,"readystatechange"),_s(d)==4){d.h=!1;try{const Pe=d.Z();e:switch(Pe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var I;if(!(I=m)){var j;if(j=Pe===0){var re=String(d.D).match(qv)[1]||null;!re&&a.self&&a.self.location&&(re=a.self.location.protocol.slice(0,-1)),j=!LS.test(re?re.toLowerCase():"")}I=j}if(I)Me(d,"complete"),Me(d,"success");else{d.m=6;try{var le=2<_s(d)?d.g.statusText:""}catch{le=""}d.l=le+" ["+d.Z()+"]",Jv(d)}}finally{yu(d)}}}}function yu(d,m){if(d.g){e1(d);const I=d.g,j=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Me(d,"ready");try{I.onreadystatechange=j}catch{}}}function e1(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function _s(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<_s(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),Gn(m)}};function t1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function NS(d){const m={};d=(d.g&&2<=_s(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let j=0;j<d.length;j++){if(S(d[j]))continue;var I=E(d[j]);const re=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const le=m[re]||[];m[re]=le,le.push(I)}b(m,function(j){return j.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ml(d,m,I){return I&&I.internalChannelParams&&I.internalChannelParams[d]||m}function n1(d){this.Aa=0,this.i=[],this.j=new cl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ml("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ml("baseRetryDelayMs",5e3,d),this.cb=ml("retryDelaySeedMs",1e4,d),this.Wa=ml("forwardChannelMaxRetries",2,d),this.wa=ml("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $v(d&&d.concurrentRequestLimit),this.Da=new DS,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=n1.prototype,t.la=8,t.G=1,t.connect=function(d,m,I,j){Vn(0),this.W=d,this.H=m||{},I&&j!==void 0&&(this.H.OSID=I,this.H.OAID=j),this.F=this.X,this.I=d1(this,null,this.W),ku(this)};function _f(d){if(r1(d),d.G==3){var m=d.U++,I=ys(d.I);if(Pt(I,"SID",d.K),Pt(I,"RID",m),Pt(I,"TYPE","terminate"),vl(d,I),m=new io(d,d.j,m),m.L=2,m.v=mu(ys(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=m.v,I=!0),I||(m.g=h1(m.j,null),m.g.ea(m.v)),m.F=Date.now(),fu(m)}u1(d)}function _u(d){d.g&&(bf(d),d.g.cancel(),d.g=null)}function r1(d){_u(d),d.u&&(a.clearTimeout(d.u),d.u=null),bu(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function ku(d){if(!Vv(d.h)&&!d.s){d.s=!0;var m=d.Ga;ee||Y(),N||(ee(),N=!0),H.add(m,d),d.B=0}}function OS(d,m){return jv(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ll(p(d.Ga,d,m),c1(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const re=new io(this,this.j,d);let le=this.o;if(this.S&&(le?(le=A(le),P(le,this.S)):le=this.S),this.m!==null||this.O||(re.H=le,le=null),this.P)e:{for(var m=0,I=0;I<this.i.length;I++){t:{var j=this.i[I];if("__data__"in j.map&&(j=j.map.__data__,typeof j=="string")){j=j.length;break t}j=void 0}if(j===void 0)break;if(m+=j,4096<m){m=I;break e}if(m===4096||I===this.i.length-1){m=I+1;break e}}m=1e3}else m=1e3;m=o1(this,re,m),I=ys(this.I),Pt(I,"RID",d),Pt(I,"CVER",22),this.D&&Pt(I,"X-HTTP-Session-Id",this.D),vl(this,I),le&&(this.O?m="headers="+encodeURIComponent(String(Yv(le)))+"&"+m:this.m&&yf(I,this.m,le)),wf(this.h,re),this.Ua&&Pt(I,"TYPE","init"),this.P?(Pt(I,"$req",m),Pt(I,"SID","null"),re.T=!0,pf(re,I,null)):pf(re,I,m),this.G=2}}else this.G==3&&(d?s1(this,d):this.i.length==0||Vv(this.h)||s1(this))};function s1(d,m){var I;m?I=m.l:I=d.U++;const j=ys(d.I);Pt(j,"SID",d.K),Pt(j,"RID",I),Pt(j,"AID",d.T),vl(d,j),d.m&&d.o&&yf(j,d.m,d.o),I=new io(d,d.j,I,d.B+1),d.m===null&&(I.H=d.o),m&&(d.i=m.D.concat(d.i)),m=o1(d,I,1e3),I.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),wf(d.h,I),pf(I,j,m)}function vl(d,m){d.H&&L(d.H,function(I,j){Pt(m,j,I)}),d.l&&Bv({},function(I,j){Pt(m,j,I)})}function o1(d,m,I){I=Math.min(d.i.length,I);var j=d.l?p(d.l.Na,d.l,d):null;e:{var re=d.i;let le=-1;for(;;){const Pe=["count="+I];le==-1?0<I?(le=re[0].g,Pe.push("ofs="+le)):le=0:Pe.push("ofs="+le);let bt=!0;for(let wn=0;wn<I;wn++){let ut=re[wn].g;const Tn=re[wn].map;if(ut-=le,0>ut)le=Math.max(0,re[wn].g-100),bt=!1;else try{xS(Tn,Pe,"req"+ut+"_")}catch{j&&j(Tn)}}if(bt){j=Pe.join("&");break e}}}return d=d.i.splice(0,I),m.D=d,j}function i1(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;ee||Y(),N||(ee(),N=!0),H.add(m,d),d.v=0}}function kf(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ll(p(d.Fa,d),c1(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,a1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ll(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Vn(10),_u(this),a1(this))};function bf(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function a1(d){d.g=new io(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=ys(d.qa);Pt(m,"RID","rpc"),Pt(m,"SID",d.K),Pt(m,"AID",d.T),Pt(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&Pt(m,"TO",d.ja),Pt(m,"TYPE","xmlhttp"),vl(d,m),d.m&&d.o&&yf(m,d.m,d.o),d.L&&(d.g.I=d.L);var I=d.g;d=d.ia,I.L=1,I.v=mu(ys(m)),I.m=null,I.P=!0,Mv(I,d)}t.Za=function(){this.C!=null&&(this.C=null,_u(this),kf(this),Vn(19))};function bu(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function l1(d,m){var I=null;if(d.g==m){bu(d),bf(d),d.g=null;var j=2}else if(vf(d.h,m))I=m.D,Uv(d.h,m),j=1;else return;if(d.G!=0){if(m.o)if(j==1){I=m.m?m.m.length:0,m=Date.now()-m.F;var re=d.B;j=oo(),Me(j,new Rv(j,I)),ku(d)}else i1(d);else if(re=m.s,re==3||re==0&&0<m.X||!(j==1&&OS(d,m)||j==2&&kf(d)))switch(I&&0<I.length&&(m=d.h,m.i=m.i.concat(I)),re){case 1:Xo(d,5);break;case 4:Xo(d,10);break;case 3:Xo(d,6);break;default:Xo(d,2)}}}function c1(d,m){let I=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(I*=2),I*m}function Xo(d,m){if(d.j.info("Error code "+m),m==2){var I=p(d.fb,d),j=d.Xa;const re=!j;j=new Jo(j||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||pu(j,"https"),mu(j),re?IS(j.toString(),I):RS(j.toString(),I)}else Vn(2);d.G=0,d.l&&d.l.sa(m),u1(d),r1(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Vn(2)):(this.j.info("Failed to ping google.com"),Vn(1))};function u1(d){if(d.G=0,d.ka=[],d.l){const m=Fv(d.h);(m.length!=0||d.i.length!=0)&&(v(d.ka,m),v(d.ka,d.i),d.h.i.length=0,T(d.i),d.i.length=0),d.l.ra()}}function d1(d,m,I){var j=I instanceof Jo?ys(I):new Jo(I);if(j.g!="")m&&(j.g=m+"."+j.g),gu(j,j.s);else{var re=a.location;j=re.protocol,m=m?m+"."+re.hostname:re.hostname,re=+re.port;var le=new Jo(null);j&&pu(le,j),m&&(le.g=m),re&&gu(le,re),I&&(le.l=I),j=le}return I=d.D,m=d.ya,I&&m&&Pt(j,I,m),Pt(j,"VER",d.la),vl(d,j),j}function h1(d,m,I){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new Vt(new vu({eb:I})):new Vt(d.pa),m.Ha(d.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function f1(){}t=f1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cu(){}Cu.prototype.g=function(d,m){return new ir(d,m)};function ir(d,m){Ae.call(this),this.g=new n1(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!S(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!S(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new qi(this)}C(ir,Ae),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){_f(this.g)},ir.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var I={};I.__data__=d,d=I}else this.u&&(I={},I.__data__=Xt(d),d=I);m.i.push(new yS(m.Ya++,d)),m.G==3&&ku(m)},ir.prototype.N=function(){this.g.l=null,delete this.j,_f(this.g),delete this.g,ir.aa.N.call(this)};function p1(d){Kn.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(const I in m){d=I;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}C(p1,Kn);function g1(){ws.call(this),this.status=1}C(g1,ws);function qi(d){this.g=d}C(qi,f1),qi.prototype.ua=function(){Me(this.g,"a")},qi.prototype.ta=function(d){Me(this.g,new p1(d))},qi.prototype.sa=function(d){Me(this.g,new g1)},qi.prototype.ra=function(){Me(this.g,"b")},Cu.prototype.createWebChannel=Cu.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,lC=function(){return new Cu},aC=function(){return oo()},iC=un,Xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},du.NO_ERROR=0,du.TIMEOUT=8,du.HTTP_ERROR=6,fd=du,Dv.COMPLETE="complete",oC=Dv,rt.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Ol=rt,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,sC=Vt}).apply(typeof Nu<"u"?Nu:typeof self<"u"?self:typeof window<"u"?window:{});const vw="@firebase/firestore",ww="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new lm("@firebase/firestore");function ea(){return Ri.logLevel}function Te(t,...e){if(Ri.logLevel<=st.DEBUG){const n=e.map(Sm);Ri.debug(`Firestore (${Za}): ${t}`,...n)}}function gs(t,...e){if(Ri.logLevel<=st.ERROR){const n=e.map(Sm);Ri.error(`Firestore (${Za}): ${t}`,...n)}}function ms(t,...e){if(Ri.logLevel<=st.WARN){const n=e.map(Sm);Ri.warn(`Firestore (${Za}): ${t}`,...n)}}function Sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function je(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,cC(t,r,n)}function cC(t,e,n){let r=`FIRESTORE (${Za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw gs(r),new Error(r)}function gt(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||cC(e,s,r)}function Fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends Dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class dC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xn.UNAUTHENTICATED)))}shutdown(){}}class MD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class ND{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){gt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ar,e.enqueueRetryable((()=>s(this.currentUser)))};const i=()=>{const c=o;e.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},a=c=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit((c=>a(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ar)}}),0),i()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(gt(typeof r.accessToken=="string",31837,{l:r}),new uC(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class OD{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $D{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new OD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class VD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){gt(this.o===void 0,3512);const r=o=>{o.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const i=o.token!==this.m;return this.m=o.token,Te("FirebaseAppCheckTokenProvider",`Received ${i?"new":"existing"} token.`),i?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new yw(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(gt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yw(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=jD(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function nt(t,e){return t<e?-1:t>e?1:0}function eg(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),s=e.codePointAt(n);if(r!==s){if(r<128&&s<128)return nt(r,s);{const o=hC(),i=UD(o.encode(_w(t,n)),o.encode(_w(e,n)));return i!==0?i:nt(r,s)}}n+=r>65535?2:1}return nt(t.length,e.length)}function _w(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function UD(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return nt(t[n],e[n]);return nt(t.length,e.length)}function Ra(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw="__name__";class rs{constructor(e,n,r){n===void 0?n=0:n>e.length&&je(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&je(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rs?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=rs.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return nt(e.length,n.length)}static compareSegments(e,n){const r=rs.isNumericId(e),s=rs.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rs.extractNumericId(e).compare(rs.extractNumericId(n)):eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Po.fromString(e.substring(4,e.length-2))}}class kt extends rs{construct(e,n,r){return new kt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new kt(n)}static emptyPath(){return new kt([])}}const FD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends rs{construct(e,n,r){return new pn(e,n,r)}static isValidIdentifier(e){return FD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kw}static keyField(){return new pn([kw])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let i=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new _e(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new _e(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else a==="`"?(i=!i,s++):a!=="."||i?(r+=a,s++):(o(),s++)}if(o(),i)throw new _e(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(kt.fromString(e))}static fromName(e){return new Ne(kt.fromString(e).popFirst(5))}static empty(){return new Ne(kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&kt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return kt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new kt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e,n){if(!n)throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fC(t,e,n,r){if(e===!0&&r===!0)throw new _e(ce.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bw(t){if(!Ne.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Cw(t){if(Ne.isDocumentKey(t))throw new _e(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function pC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function jh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":je(12329,{type:typeof t})}function Zt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new _e(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jh(t);throw new _e(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function gC(t,e){if(e<=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Jc(t,e){if(!pC(t))throw new _e(ce.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const i=t[r];if(s&&typeof i!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&i!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new _e(ce.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=-62135596800,Sw=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Sw);return new Tt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new _e(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ew)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sw}_compareTo(e){return this.seconds===e.seconds?nt(this.nanoseconds,e.nanoseconds):nt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Jc(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ew;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Yt("string",Tt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{static fromTimestamp(e){return new qe(e)}static min(){return new qe(new Tt(0,0))}static max(){return new qe(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=-1;function BD(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=qe.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new Oo(s,Ne.empty(),e)}function qD(t){return new Oo(t.readTime,t.key,bc)}class Oo{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Oo(qe.min(),Ne.empty(),bc)}static max(){return new Oo(qe.max(),Ne.empty(),bc)}}function HD(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:nt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t){if(t.code!==ce.FAILED_PRECONDITION||t.message!==zD)throw t;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&je(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new pe(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof pe?n:pe.resolve(n)}catch(n){return pe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):pe.reject(n)}static resolve(e){return new pe(((n,r)=>{n(e)}))}static reject(e){return new pe(((n,r)=>{r(e)}))}static waitFor(e){return new pe(((n,r)=>{let s=0,o=0,i=!1;e.forEach((a=>{++s,a.next((()=>{++o,i&&o===s&&n()}),(c=>r(c)))})),i=!0,o===s&&n()}))}static or(e){let n=pe.resolve(!1);for(const r of e)n=n.next((s=>s?pe.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new pe(((r,s)=>{const o=e.length,i=new Array(o);let a=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next((h=>{i[u]=h,++a,a===o&&r(i)}),(h=>s(h)))}}))}static doWhile(e,n){return new pe(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar="SimpleDb";class Tm{static open(e,n,r,s){try{return new Tm(n,e.transaction(s,r))}catch(o){throw new tc(n,o)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.S=new Ar,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new tc(e,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=Pm(r.target.error);this.S.reject(new tc(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Te(ar,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new KD(n)}}class _i{static delete(e){return Te(ar,"Removing database:",e),ui(Hk().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Qk())return!1;if(_i.F())return!0;const e=on(),n=_i.M(e),r=0<n&&n<10,s=mC(e),o=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,n){return e.store(n)}static M(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.B=r,this.L=null,_i.M(on())===12.2&&gs("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(Te(ar,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=o=>{const i=o.target.result;n(i)},s.onblocked=()=>{r(new tc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const i=o.target.error;i.name==="VersionError"?r(new _e(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):i.name==="InvalidStateError"?r(new _e(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new tc(e,i))},s.onupgradeneeded=o=>{Te(ar,'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const i=o.target.result;if(this.L!==null&&this.L!==o.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${o.oldVersion}, event.newVersion=${o.newVersion}, db.version=${i.version}`);this.B.q(i,s.transaction,o.oldVersion,this.version).next((()=>{Te(ar,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(n=>{const r=n.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(n=>{var r;n.newVersion===null&&(ms('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,n,r,s){const o=n==="readonly";let i=0;for(;;){++i;try{this.db=await this.k(e);const a=Tm.open(this.db,e,o?"readonly":"readwrite",r),c=s(a).next((u=>(a.v(),u))).catch((u=>(a.abort(u),pe.reject(u)))).toPromise();return c.catch((()=>{})),await a.D,c}catch(a){const c=a,u=c.name!=="FirebaseError"&&i<3;if(Te(ar,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function mC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class GD{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return ui(this.$.delete())}}class tc extends _e{constructor(e,n){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Xa(t){return t.name==="IndexedDbTransactionError"}class KD{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Te(ar,"PUT",this.store.name,e,n),r=this.store.put(n,e)):(Te(ar,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ui(r)}add(e){return Te(ar,"ADD",this.store.name,e,e),ui(this.store.add(e))}get(e){return ui(this.store.get(e)).next((n=>(n===void 0&&(n=null),Te(ar,"GET",this.store.name,e,n),n)))}delete(e){return Te(ar,"DELETE",this.store.name,e),ui(this.store.delete(e))}count(){return Te(ar,"COUNT",this.store.name),ui(this.store.count())}j(e,n){const r=this.options(e,n),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const o=s.getAll(r.range);return new pe(((i,a)=>{o.onerror=c=>{a(c.target.error)},o.onsuccess=c=>{i(c.target.result)}}))}{const o=this.cursor(r),i=[];return this.J(o,((a,c)=>{i.push(c)})).next((()=>i))}}H(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new pe(((s,o)=>{r.onerror=i=>{o(i.target.error)},r.onsuccess=i=>{s(i.target.result)}}))}Y(e,n){Te(ar,"DELETE ALL",this.store.name);const r=this.options(e,n);r.Z=!1;const s=this.cursor(r);return this.J(s,((o,i,a)=>a.delete()))}X(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.J(s,n)}ee(e){const n=this.cursor({});return new pe(((r,s)=>{n.onerror=o=>{const i=Pm(o.target.error);s(i)},n.onsuccess=o=>{const i=o.target.result;i?e(i.primaryKey,i.value).next((a=>{a?i.continue():r()})):r()}}))}J(e,n){const r=[];return new pe(((s,o)=>{e.onerror=i=>{o(i.target.error)},e.onsuccess=i=>{const a=i.target.result;if(!a)return void s();const c=new GD(a),u=n(a.primaryKey,a.value,c);if(u instanceof pe){const h=u.catch((f=>(c.done(),pe.reject(f))));r.push(h)}c.isDone?s():c.W===null?a.continue():a.continue(c.W)}})).next((()=>pe.waitFor(r)))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ui(t){return new pe(((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=Pm(r.target.error);n(s)}}))}let Aw=!1;function Pm(t){const e=_i.M(on());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new _e("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Aw||(Aw=!0,setTimeout((()=>{throw r}),0)),r}}return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Uh.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Im=-1;function Fh(t){return t==null}function Fd(t){return t===0&&1/t==-1/0}function QD(t){return typeof t=="number"&&Number.isInteger(t)&&!Fd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC="";function YD(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tw(e)),e=ZD(t.get(n),e);return Tw(e)}function ZD(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case vC:n+="";break;default:n+=o}}return n}function Tw(t){return t+vC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function JD(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function wC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n){this.comparator=e,this.root=n||kn.EMPTY}insert(e,n){return new Nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ou(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ou(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ou(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ou(this.root,e,this.comparator,!0)}}class Ou{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kn{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??kn.RED,this.left=s??kn.EMPTY,this.right=o??kn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new kn(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return kn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return kn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw je(43730,{key:this.key,value:this.value});if(this.right.isRed())throw je(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw je(27949);return e+(this.isRed()?0:1)}}kn.EMPTY=null,kn.RED=!0,kn.BLACK=!1;kn.EMPTY=new class{constructor(){this.size=0}get key(){throw je(57766)}get value(){throw je(16141)}get color(){throw je(16727)}get left(){throw je(29726)}get right(){throw je(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new kn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof nn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new nn(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new hr([])}unionWith(e){let n=new nn(pn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ra(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new yC("Invalid base64 string: "+o):o}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let i=0;i<s.length;++i)o+=String.fromCharCode(s[i]);return o})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return nt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const XD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(t){if(gt(!!t,39018),typeof t=="string"){let e=0;const n=XD.exec(t);if(gt(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qt(t.seconds),nanos:qt(t.nanos)}}function qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Vo(t){return typeof t=="string"?gn.fromBase64String(t):gn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C="server_timestamp",kC="__type__",bC="__previous_value__",CC="__local_write_time__";function Bh(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[kC])===null||n===void 0?void 0:n.stringValue)===_C}function qh(t){const e=t.mapValue.fields[bC];return Bh(e)?qh(e):e}function Cc(t){const e=$o(t.mapValue.fields[CC].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n,r,s,o,i,a,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const Bd="(default)";class Da{constructor(e,n){this.projectId=e,this.database=n||Bd}static empty(){return new Da("","")}get isDefaultDatabase(){return this.database===Bd}isEqual(e){return e instanceof Da&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="__type__",tx="__max__",$u={mapValue:{}},SC="__vector__",qd="value";function jo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Bh(t)?4:rx(t)?9007199254740991:nx(t)?10:11:je(28295,{value:t})}function vs(t,e){if(t===e)return!0;const n=jo(t);if(n!==jo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Cc(t).isEqual(Cc(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const i=$o(s.timestampValue),a=$o(o.timestampValue);return i.seconds===a.seconds&&i.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return Vo(s.bytesValue).isEqual(Vo(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return qt(s.geoPointValue.latitude)===qt(o.geoPointValue.latitude)&&qt(s.geoPointValue.longitude)===qt(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return qt(s.integerValue)===qt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const i=qt(s.doubleValue),a=qt(o.doubleValue);return i===a?Fd(i)===Fd(a):isNaN(i)&&isNaN(a)}return!1})(t,e);case 9:return Ra(t.arrayValue.values||[],e.arrayValue.values||[],vs);case 10:case 11:return(function(s,o){const i=s.mapValue.fields||{},a=o.mapValue.fields||{};if(Pw(i)!==Pw(a))return!1;for(const c in i)if(i.hasOwnProperty(c)&&(a[c]===void 0||!vs(i[c],a[c])))return!1;return!0})(t,e);default:return je(52216,{left:t})}}function Ec(t,e){return(t.values||[]).find((n=>vs(n,e)))!==void 0}function xa(t,e){if(t===e)return 0;const n=jo(t),r=jo(e);if(n!==r)return nt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return nt(t.booleanValue,e.booleanValue);case 2:return(function(o,i){const a=qt(o.integerValue||o.doubleValue),c=qt(i.integerValue||i.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1})(t,e);case 3:return Rw(t.timestampValue,e.timestampValue);case 4:return Rw(Cc(t),Cc(e));case 5:return eg(t.stringValue,e.stringValue);case 6:return(function(o,i){const a=Vo(o),c=Vo(i);return a.compareTo(c)})(t.bytesValue,e.bytesValue);case 7:return(function(o,i){const a=o.split("/"),c=i.split("/");for(let u=0;u<a.length&&u<c.length;u++){const h=nt(a[u],c[u]);if(h!==0)return h}return nt(a.length,c.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,i){const a=nt(qt(o.latitude),qt(i.latitude));return a!==0?a:nt(qt(o.longitude),qt(i.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Dw(t.arrayValue,e.arrayValue);case 10:return(function(o,i){var a,c,u,h;const f=o.fields||{},p=i.fields||{},g=(a=f[qd])===null||a===void 0?void 0:a.arrayValue,C=(c=p[qd])===null||c===void 0?void 0:c.arrayValue,T=nt(((u=g?.values)===null||u===void 0?void 0:u.length)||0,((h=C?.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:Dw(g,C)})(t.mapValue,e.mapValue);case 11:return(function(o,i){if(o===$u.mapValue&&i===$u.mapValue)return 0;if(o===$u.mapValue)return 1;if(i===$u.mapValue)return-1;const a=o.fields||{},c=Object.keys(a),u=i.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const p=eg(c[f],h[f]);if(p!==0)return p;const g=xa(a[c[f]],u[h[f]]);if(g!==0)return g}return nt(c.length,h.length)})(t.mapValue,e.mapValue);default:throw je(23264,{le:n})}}function Rw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return nt(t,e);const n=$o(t),r=$o(e),s=nt(n.seconds,r.seconds);return s!==0?s:nt(n.nanos,r.nanos)}function Dw(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=xa(n[s],r[s]);if(o)return o}return nt(n.length,r.length)}function La(t){return tg(t)}function tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=$o(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Vo(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Ne.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=tg(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const i of r)o?o=!1:s+=",",s+=`${i}:${tg(n.fields[i])}`;return s+"}"})(t.mapValue):je(61005,{value:t})}function pd(t){switch(jo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qh(t);return e?16+pd(e):16;case 5:return 2*t.stringValue.length;case 6:return Vo(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+pd(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return Wo(r.fields,((o,i)=>{s+=o.length+pd(i)})),s})(t.mapValue);default:throw je(13486,{value:t})}}function Hd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ng(t){return!!t&&"integerValue"in t}function Rm(t){return!!t&&"arrayValue"in t}function xw(t){return!!t&&"nullValue"in t}function Lw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gd(t){return!!t&&"mapValue"in t}function nx(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[EC])===null||n===void 0?void 0:n.stringValue)===SC}function nc(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wo(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=nc(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(t.arrayValue.values[n]);return e}return Object.assign({},t)}function rx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.value=e}static empty(){return new Yn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=pn.emptyPath(),r={},s=[];e.forEach(((i,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=a.popLast()}i?r[a.lastSegment()]=nc(i):s.push(a.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());gd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Wo(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Yn(nc(this.value))}}function AC(t){const e=[];return Wo(t.fields,((n,r)=>{const s=new pn([n]);if(gd(r)){const o=AC(r.mapValue).fields;if(o.length===0)e.push(s);else for(const i of o)e.push(s.child(i))}else e.push(s)})),new hr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n,r,s,o,i,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=i,this.documentState=a}static newInvalidDocument(e){return new Mn(e,0,qe.min(),qe.min(),qe.min(),Yn.empty(),0)}static newFoundDocument(e,n,r,s){return new Mn(e,1,n,qe.min(),r,s,0)}static newNoDocument(e,n){return new Mn(e,2,n,qe.min(),qe.min(),Yn.empty(),0)}static newUnknownDocument(e,n){return new Mn(e,3,n,qe.min(),qe.min(),Yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n){this.position=e,this.inclusive=n}}function Mw(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],i=t.position[s];if(o.field.isKeyField()?r=Ne.comparator(Ne.fromName(i.referenceValue),n.key):r=xa(i,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vs(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e,n="asc"){this.field=e,this.dir=n}}function sx(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TC{}class Qt extends TC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ix(e,n,r):n==="array-contains"?new cx(e,r):n==="in"?new ux(e,r):n==="not-in"?new dx(e,r):n==="array-contains-any"?new hx(e,r):new Qt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ax(e,r):new lx(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xa(n,this.value)):n!==null&&jo(this.value)===jo(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return je(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gr extends TC{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Gr(e,n)}matches(e){return PC(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function PC(t){return t.op==="and"}function IC(t){return ox(t)&&PC(t)}function ox(t){for(const e of t.filters)if(e instanceof Gr)return!1;return!0}function rg(t){if(t instanceof Qt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(IC(t))return t.filters.map((e=>rg(e))).join(",");{const e=t.filters.map((n=>rg(n))).join(",");return`${t.op}(${e})`}}function RC(t,e){return t instanceof Qt?(function(r,s){return s instanceof Qt&&r.op===s.op&&r.field.isEqual(s.field)&&vs(r.value,s.value)})(t,e):t instanceof Gr?(function(r,s){return s instanceof Gr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,i,a)=>o&&RC(i,s.filters[a])),!0):!1})(t,e):void je(19439)}function DC(t){return t instanceof Qt?(function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`})(t):t instanceof Gr?(function(n){return n.op.toString()+" {"+n.getFilters().map(DC).join(" ,")+"}"})(t):"Filter"}class ix extends Qt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class ax extends Qt{constructor(e,n){super(e,"in",n),this.keys=xC("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class lx extends Qt{constructor(e,n){super(e,"not-in",n),this.keys=xC("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function xC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map((r=>Ne.fromName(r.referenceValue)))}class cx extends Qt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rm(n)&&Ec(n.arrayValue,this.value)}}class ux extends Qt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ec(this.value.arrayValue,n)}}class dx extends Qt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ec(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ec(this.value.arrayValue,n)}}class hx extends Qt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Ec(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,n=null,r=[],s=[],o=null,i=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=i,this.endAt=a,this.Pe=null}}function Ow(t,e=null,n=[],r=[],s=null,o=null,i=null){return new fx(t,e,n,r,s,o,i)}function Dm(t){const e=Fe(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>rg(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),Fh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>La(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>La(r))).join(",")),e.Pe=n}return e.Pe}function xm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sx(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!RC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nw(t.startAt,e.startAt)&&Nw(t.endAt,e.endAt)}function sg(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,r=[],s=[],o=null,i="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=i,this.startAt=a,this.endAt=c,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function px(t,e,n,r,s,o,i,a){return new no(t,e,n,r,s,o,i,a)}function Hh(t){return new no(t)}function $w(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lm(t){return t.collectionGroup!==null}function ya(t){const e=Fe(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(i){let a=new nn(pn.comparator);return i.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Sc(o,r))})),n.has(pn.keyField().canonicalString())||e.Te.push(new Sc(pn.keyField(),r))}return e.Te}function ls(t){const e=Fe(t);return e.Ie||(e.Ie=LC(e,ya(t))),e.Ie}function gx(t){const e=Fe(t);return e.de||(e.de=LC(e,t.explicitOrderBy)),e.de}function LC(t,e){if(t.limitType==="F")return Ow(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new Sc(s.field,o)}));const n=t.endAt?new Ma(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ma(t.startAt.position,t.startAt.inclusive):null;return Ow(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function og(t,e){const n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function zd(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zh(t,e){return xm(ls(t),ls(e))&&t.limitType===e.limitType}function MC(t){return`${Dm(ls(t))}|lt:${t.limitType}`}function ta(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>DC(s))).join(", ")}]`),Fh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(i){return`${i.field.canonicalString()} (${i.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>La(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>La(s))).join(",")),`Target(${r})`})(ls(t))}; limitType=${t.limitType})`}function Wh(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of ya(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(i,a,c){const u=Mw(i,a,c);return i.inclusive?u<=0:u<0})(r.startAt,ya(r),s)||r.endAt&&!(function(i,a,c){const u=Mw(i,a,c);return i.inclusive?u>=0:u>0})(r.endAt,ya(r),s))})(t,e)}function mx(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NC(t){return(e,n)=>{let r=!1;for(const s of ya(t)){const o=vx(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function vx(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):(function(o,i,a){const c=i.data.field(o),u=a.data.field(o);return c!==null&&u!==null?xa(c,u):je(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return je(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wo(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return wC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=new Nt(Ne.comparator);function Js(){return wx}const OC=new Nt(Ne.comparator);function $l(...t){let e=OC;for(const n of t)e=e.insert(n.key,n);return e}function $C(t){let e=OC;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function fi(){return rc()}function VC(){return rc()}function rc(){return new Ni((t=>t.toString()),((t,e)=>t.isEqual(e)))}const yx=new Nt(Ne.comparator),_x=new nn(Ne.comparator);function it(...t){let e=_x;for(const n of t)e=e.add(n);return e}const kx=new nn(nt);function bx(){return kx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fd(e)?"-0":e}}function jC(t){return{integerValue:""+t}}function Cx(t,e){return QD(e)?jC(e):Mm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function Ex(t,e,n){return t instanceof Ac?(function(s,o){const i={fields:{[kC]:{stringValue:_C},[CC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Bh(o)&&(o=qh(o)),o&&(i.fields[bC]=o),{mapValue:i}})(n,e):t instanceof Tc?FC(t,e):t instanceof Pc?BC(t,e):(function(s,o){const i=UC(s,o),a=Vw(i)+Vw(s.Ee);return ng(i)&&ng(s.Ee)?jC(a):Mm(s.serializer,a)})(t,e)}function Sx(t,e,n){return t instanceof Tc?FC(t,e):t instanceof Pc?BC(t,e):n}function UC(t,e){return t instanceof Wd?(function(r){return ng(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class Ac extends Gh{}class Tc extends Gh{constructor(e){super(),this.elements=e}}function FC(t,e){const n=qC(e);for(const r of t.elements)n.some((s=>vs(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Pc extends Gh{constructor(e){super(),this.elements=e}}function BC(t,e){let n=qC(e);for(const r of t.elements)n=n.filter((s=>!vs(s,r)));return{arrayValue:{values:n}}}class Wd extends Gh{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Vw(t){return qt(t.integerValue||t.doubleValue)}function qC(t){return Rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n){this.field=e,this.transform=n}}function Tx(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof Tc&&s instanceof Tc||r instanceof Pc&&s instanceof Pc?Ra(r.elements,s.elements,vs):r instanceof Wd&&s instanceof Wd?vs(r.Ee,s.Ee):r instanceof Ac&&s instanceof Ac})(t.transform,e.transform)}class Px{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function md(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kh{}function HC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qh(t.key,Wn.none()):new Xc(t.key,t.data,Wn.none());{const n=t.data,r=Yn.empty();let s=new nn(pn.comparator);for(let o of e.fields)if(!s.has(o)){let i=n.field(o);i===null&&o.length>1&&(o=o.popLast(),i=n.field(o)),i===null?r.delete(o):r.set(o,i),s=s.add(o)}return new Go(t.key,r,new hr(s.toArray()),Wn.none())}}function Ix(t,e,n){t instanceof Xc?(function(s,o,i){const a=s.value.clone(),c=Uw(s.fieldTransforms,o,i.transformResults);a.setAll(c),o.convertToFoundDocument(i.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Go?(function(s,o,i){if(!md(s.precondition,o))return void o.convertToUnknownDocument(i.version);const a=Uw(s.fieldTransforms,o,i.transformResults),c=o.data;c.setAll(zC(s)),c.setAll(a),o.convertToFoundDocument(i.version,c).setHasCommittedMutations()})(t,e,n):(function(s,o,i){o.convertToNoDocument(i.version).setHasCommittedMutations()})(0,e,n)}function sc(t,e,n,r){return t instanceof Xc?(function(o,i,a,c){if(!md(o.precondition,i))return a;const u=o.value.clone(),h=Fw(o.fieldTransforms,c,i);return u.setAll(h),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),null})(t,e,n,r):t instanceof Go?(function(o,i,a,c){if(!md(o.precondition,i))return a;const u=Fw(o.fieldTransforms,c,i),h=i.data;return h.setAll(zC(o)),h.setAll(u),i.convertToFoundDocument(i.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((f=>f.field)))})(t,e,n,r):(function(o,i,a){return md(o.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):a})(t,e,n)}function Rx(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=UC(r.transform,s||null);o!=null&&(n===null&&(n=Yn.empty()),n.set(r.field,o))}return n||null}function jw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ra(r,s,((o,i)=>Tx(o,i)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xc extends Kh{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Go extends Kh{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function zC(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Uw(t,e,n){const r=new Map;gt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let s=0;s<n.length;s++){const o=t[s],i=o.transform,a=e.data.field(o.field);r.set(o.field,Sx(i,a,n[s]))}return r}function Fw(t,e,n){const r=new Map;for(const s of t){const o=s.transform,i=n.data.field(s.field);r.set(s.field,Ex(o,i,e))}return r}class Qh extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dx extends Kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ix(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=VC();return this.mutations.forEach((s=>{const o=e.get(s.key),i=o.overlayedDocument;let a=this.applyToLocalView(i,o.mutatedFields);a=n.has(s.key)?null:a;const c=HC(i,a);c!==null&&r.set(s.key,c),i.isValidDocument()||i.convertToNoDocument(qe.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),it())}isEqual(e){return this.batchId===e.batchId&&Ra(this.mutations,e.mutations,((n,r)=>jw(n,r)))&&Ra(this.baseMutations,e.baseMutations,((n,r)=>jw(n,r)))}}class Nm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){gt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let s=(function(){return yx})();const o=e.mutations;for(let i=0;i<o.length;i++)s=s.insert(o[i].key,r[i].version);return new Nm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wt,ct;function Ox(t){switch(t){case ce.OK:return je(64938);case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0;default:return je(15467,{code:t})}}function WC(t){if(t===void 0)return gs("GRPC error has no .code"),ce.UNKNOWN;switch(t){case Wt.OK:return ce.OK;case Wt.CANCELLED:return ce.CANCELLED;case Wt.UNKNOWN:return ce.UNKNOWN;case Wt.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Wt.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Wt.INTERNAL:return ce.INTERNAL;case Wt.UNAVAILABLE:return ce.UNAVAILABLE;case Wt.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Wt.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Wt.NOT_FOUND:return ce.NOT_FOUND;case Wt.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Wt.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Wt.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Wt.ABORTED:return ce.ABORTED;case Wt.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Wt.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Wt.DATA_LOSS:return ce.DATA_LOSS;default:return je(39323,{code:t})}}(ct=Wt||(Wt={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=new Po([4294967295,4294967295],0);function Bw(t){const e=hC().encode(t),n=new rC;return n.update(e),new Uint8Array(n.digest())}function qw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Po([n,r],0),new Po([s,o],0)]}class Om{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Vl(`Invalid padding: ${n}`);if(r<0)throw new Vl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Po.fromNumber(this.fe)}pe(e,n,r){let s=e.add(n.multiply(Po.fromNumber(r)));return s.compare($x)===1&&(s=new Po([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Bw(e),[r,s]=qw(n);for(let o=0;o<this.hashCount;o++){const i=this.pe(r,s,o);if(!this.ye(i))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),i=new Om(o,s,n);return r.forEach((a=>i.insert(a))),i}insert(e){if(this.fe===0)return;const n=Bw(e),[r,s]=qw(n);for(let o=0;o<this.hashCount;o++){const i=this.pe(r,s,o);this.we(i)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yh(qe.min(),s,new Nt(nt),Js(),it())}}class eu{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new eu(r,n,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=s}}class GC{constructor(e,n){this.targetId=e,this.De=n}}class KC{constructor(e,n,r=gn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Hw{constructor(){this.ve=0,this.Ce=zw(),this.Fe=gn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=it(),n=it(),r=it();return this.Ce.forEach(((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:je(38017,{changeType:o})}})),new eu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=zw()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,gt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Vx{constructor(e){this.We=e,this.Ge=new Map,this.ze=Js(),this.je=Vu(),this.Je=Vu(),this.He=new Nt(nt)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,(n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:je(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach(((r,s)=>{this.nt(s)&&n(s)}))}it(e){const n=e.targetId,r=e.De.count,s=this.st(n);if(s){const o=s.target;if(sg(o))if(r===0){const i=new Ne(o.path);this.Xe(n,i,Mn.newNoDocument(i,qe.min()))}else gt(r===1,20013,{expectedCount:r});else{const i=this.ot(n);if(i!==r){const a=this._t(e),c=a?this.ut(a,e,i):1;if(c!==0){this.rt(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let i,a;try{i=Vo(r).toUint8Array()}catch(c){if(c instanceof yC)return ms("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Om(i,s,o)}catch(c){return ms(c instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let s=0;return r.forEach((o=>{const i=this.We.lt(),a=`projects/${i.projectId}/databases/${i.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),s++)})),s}Pt(e){const n=new Map;this.Ge.forEach(((o,i)=>{const a=this.st(i);if(a){if(o.current&&sg(a.target)){const c=new Ne(a.target.path);this.Tt(c).has(i)||this.It(i,c)||this.Xe(i,c,Mn.newNoDocument(c,e))}o.Ne&&(n.set(i,o.Le()),o.ke())}}));let r=it();this.Je.forEach(((o,i)=>{let a=!0;i.forEachWhile((c=>{const u=this.st(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(r=r.add(o))})),this.ze.forEach(((o,i)=>i.setReadTime(e)));const s=new Yh(e,n,this.He,this.ze,r);return this.ze=Js(),this.je=Vu(),this.Je=Vu(),this.He=new Nt(nt),s}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const s=this.tt(e);this.It(e,n)?s.qe(n,1):s.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Hw,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new nn(nt),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new nn(nt),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Hw),this.We.getRemoteKeysForTarget(e).forEach((n=>{this.Xe(e,n,null)}))}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function Vu(){return new Nt(Ne.comparator)}function zw(){return new Nt(Ne.comparator)}const jx={asc:"ASCENDING",desc:"DESCENDING"},Ux={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Fx={and:"AND",or:"OR"};class Bx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ig(t,e){return t.useProto3Json||Fh(e)?e:{value:e}}function Gd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qx(t,e){return Gd(t,e.toTimestamp())}function cs(t){return gt(!!t,49232),qe.fromTimestamp((function(n){const r=$o(n);return new Tt(r.seconds,r.nanos)})(t))}function $m(t,e){return ag(t,e).canonicalString()}function ag(t,e){const n=(function(s){return new kt(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function YC(t){const e=kt.fromString(t);return gt(nE(e),10190,{key:e.toString()}),e}function lg(t,e){return $m(t.databaseId,e.path)}function Jf(t,e){const n=YC(e);if(n.get(1)!==t.databaseId.projectId)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new _e(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(JC(n))}function ZC(t,e){return $m(t.databaseId,e)}function Hx(t){const e=YC(t);return e.length===4?kt.emptyPath():JC(e)}function cg(t){return new kt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function JC(t){return gt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Ww(t,e,n){return{name:lg(t,e),fields:n.value.mapValue.fields}}function zx(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:je(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=(function(u,h){return u.useProto3Json?(gt(h===void 0||typeof h=="string",58123),gn.fromBase64String(h||"")):(gt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),gn.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),i=e.targetChange.cause,a=i&&(function(u){const h=u.code===void 0?ce.UNKNOWN:WC(u.code);return new _e(h,u.message||"")})(i);n=new KC(r,s,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Jf(t,r.document.name),o=cs(r.document.updateTime),i=r.document.createTime?cs(r.document.createTime):qe.min(),a=new Yn({mapValue:{fields:r.document.fields}}),c=Mn.newFoundDocument(s,o,i,a),u=r.targetIds||[],h=r.removedTargetIds||[];n=new vd(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Jf(t,r.document),o=r.readTime?cs(r.readTime):qe.min(),i=Mn.newNoDocument(s,o),a=r.removedTargetIds||[];n=new vd([],a,i.key,i)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Jf(t,r.document),o=r.removedTargetIds||[];n=new vd([],o,s,null)}else{if(!("filter"in e))return je(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,i=new Nx(s,o),a=r.targetId;n=new GC(a,i)}}return n}function Wx(t,e){let n;if(e instanceof Xc)n={update:Ww(t,e.key,e.value)};else if(e instanceof Qh)n={delete:lg(t,e.key)};else if(e instanceof Go)n={update:Ww(t,e.key,e.data),updateMask:t7(e.fieldMask)};else{if(!(e instanceof Dx))return je(16599,{Rt:e.type});n={verify:lg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,i){const a=i.transform;if(a instanceof Ac)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Tc)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pc)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Wd)return{fieldPath:i.field.canonicalString(),increment:a.Ee};throw je(20930,{transform:i.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:qx(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:je(27497)})(t,e.precondition)),n}function Gx(t,e){return t&&t.length>0?(gt(e!==void 0,14353),t.map((n=>(function(s,o){let i=s.updateTime?cs(s.updateTime):cs(o);return i.isEqual(qe.min())&&(i=cs(o)),new Px(i,s.transformResults||[])})(n,e)))):[]}function Kx(t,e){return{documents:[ZC(t,e.path)]}}function XC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ZC(t,s);const o=(function(u){if(u.length!==0)return tE(Gr.create(u,"and"))})(e.filters);o&&(n.structuredQuery.where=o);const i=(function(u){if(u.length!==0)return u.map((h=>(function(p){return{field:ko(p.field),direction:Jx(p.dir)}})(h)))})(e.orderBy);i&&(n.structuredQuery.orderBy=i);const a=ig(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{Vt:n,parent:s}}function Qx(t,e,n,r){const{Vt:s,parent:o}=XC(t,e),i={},a=[];let c=0;return n.forEach((u=>{const h="aggregate_"+c++;i[h]=u.alias,u.aggregateType==="count"?a.push({alias:h,count:{}}):u.aggregateType==="avg"?a.push({alias:h,avg:{field:ko(u.fieldPath)}}):u.aggregateType==="sum"&&a.push({alias:h,sum:{field:ko(u.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},ft:i,parent:o}}function Yx(t){let e=Hx(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){gt(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(f){const p=eE(f);return p instanceof Gr&&IC(p)?p.getFilters():[p]})(n.where));let i=[];n.orderBy&&(i=(function(f){return f.map((p=>(function(C){return new Sc(na(C.field),(function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(C.direction))})(p)))})(n.orderBy));let a=null;n.limit&&(a=(function(f){let p;return p=typeof f=="object"?f.value:f,Fh(p)?null:p})(n.limit));let c=null;n.startAt&&(c=(function(f){const p=!!f.before,g=f.values||[];return new Ma(g,p)})(n.startAt));let u=null;return n.endAt&&(u=(function(f){const p=!f.before,g=f.values||[];return new Ma(g,p)})(n.endAt)),px(e,s,i,o,a,"F",c,u)}function Zx(t,e){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return je(28987,{purpose:s})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function eE(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=na(n.unaryFilter.field);return Qt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=na(n.unaryFilter.field);return Qt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=na(n.unaryFilter.field);return Qt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=na(n.unaryFilter.field);return Qt.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return je(61313);default:return je(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Qt.create(na(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return je(58110);default:return je(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Gr.create(n.compositeFilter.filters.map((r=>eE(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return je(1026)}})(n.compositeFilter.op))})(t):je(30097,{filter:t})}function Jx(t){return jx[t]}function Xx(t){return Ux[t]}function e7(t){return Fx[t]}function ko(t){return{fieldPath:t.canonicalString()}}function na(t){return pn.fromServerFormat(t.fieldPath)}function tE(t){return t instanceof Qt?(function(n){if(n.op==="=="){if(Lw(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NAN"}};if(xw(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lw(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NAN"}};if(xw(n.value))return{unaryFilter:{field:ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ko(n.field),op:Xx(n.op),value:n.value}}})(t):t instanceof Gr?(function(n){const r=n.getFilters().map((s=>tE(s)));return r.length===1?r[0]:{compositeFilter:{op:e7(n.op),filters:r}}})(t):je(54877,{filter:t})}function t7(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function nE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n,r,s,o=qe.min(),i=qe.min(),a=gn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Co(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Co(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e){this.gt=e}}function r7(t){const e=Yx({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(){this.Dn=new o7}addToCollectionParentIndex(e,n){return this.Dn.add(n),pe.resolve()}getCollectionParents(e,n){return pe.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return pe.resolve()}deleteFieldIndex(e,n){return pe.resolve()}deleteAllFieldIndexes(e){return pe.resolve()}createTargetIndexes(e,n){return pe.resolve()}getDocumentsMatchingTarget(e,n){return pe.resolve(null)}getIndexType(e,n){return pe.resolve(0)}getFieldIndexes(e,n){return pe.resolve([])}getNextCollectionGroupToUpdate(e){return pe.resolve(null)}getMinOffset(e,n){return pe.resolve(Oo.min())}getMinOffsetFromCollectionGroup(e,n){return pe.resolve(Oo.min())}updateCollectionGroup(e,n,r){return pe.resolve()}updateIndexEntries(e,n){return pe.resolve()}}class o7{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new nn(kt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new nn(kt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rE=41943040;class Qn{static withCacheSize(e){return new Qn(e,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qn.DEFAULT_COLLECTION_PERCENTILE=10,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qn.DEFAULT=new Qn(rE,Qn.DEFAULT_COLLECTION_PERCENTILE,Qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qn.DISABLED=new Qn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Na(0)}static ur(){return new Na(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="LruGarbageCollector",i7=1048576;function Qw([t,e],[n,r]){const s=nt(t,n);return s===0?nt(e,r):s}class a7{constructor(e){this.Tr=e,this.buffer=new nn(Qw),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qw(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l7{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Te(Kw,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Xa(n)?Te(Kw,"Ignoring IndexedDB error during garbage collection: ",n):await Ja(n)}await this.Rr(3e5)}))}}class c7{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return pe.resolve(Uh.ue);const r=new a7(n);return this.Vr.forEachTarget(e,(s=>r.Er(s.sequenceNumber))).next((()=>this.Vr.gr(e,(s=>r.Er(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),pe.resolve(Gw)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gw):this.pr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,s,o,i,a,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((f=>(f>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,i=Date.now(),this.nthSequenceNumber(e,s)))).next((f=>(r=f,a=Date.now(),this.removeTargets(e,r,n)))).next((f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((f=>(u=Date.now(),ea()<=st.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${i-h}ms
	Determined least recently used ${s} in `+(a-i)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),pe.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f}))))}}function u7(t,e){return new c7(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d7{constructor(){this.changes=new Ni((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?pe.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&sc(r.mutation,s,hr.empty(),Tt.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,it()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=it()){const s=fi();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let i=$l();return o.forEach(((a,c)=>{i=i.insert(a,c.overlayedDocument)})),i}))))}getOverlayedDocuments(e,n){const r=fi();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,it())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((i,a)=>{n.set(i,a)}))}))}computeViews(e,n,r,s){let o=Js();const i=rc(),a=(function(){return rc()})();return n.forEach(((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof Go)?o=o.insert(u.key,u):h!==void 0?(i.set(u.key,h.mutation.getFieldMask()),sc(h.mutation,u,h.mutation.getFieldMask(),Tt.now())):i.set(u.key,hr.empty())})),this.recalculateAndSaveOverlays(e,o).next((c=>(c.forEach(((u,h)=>i.set(u,h))),n.forEach(((u,h)=>{var f;return a.set(u,new h7(h,(f=i.get(u))!==null&&f!==void 0?f:null))})),a)))}recalculateAndSaveOverlays(e,n){const r=rc();let s=new Nt(((i,a)=>i-a)),o=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((i=>{for(const a of i)a.keys().forEach((c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||hr.empty();h=a.applyToLocalView(u,h),r.set(c,h);const f=(s.get(a.batchId)||it()).add(c);s=s.insert(a.batchId,f)}))})).next((()=>{const i=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),u=c.key,h=c.value,f=VC();h.forEach((p=>{if(!o.has(p)){const g=HC(n.get(p),r.get(p));g!==null&&f.set(p,g),o=o.add(p)}})),i.push(this.documentOverlayCache.saveOverlays(e,u,f))}return pe.waitFor(i)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(i){return Ne.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const i=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):pe.resolve(fi());let a=bc,c=o;return i.next((u=>pe.forEach(u,((h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(h)?pe.resolve():this.remoteDocumentCache.getEntry(e,h).next((p=>{c=c.insert(h,p)}))))).next((()=>this.populateOverlays(e,u,o))).next((()=>this.computeViews(e,c,u,it()))).next((h=>({batchId:a,changes:$C(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next((r=>{let s=$l();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let i=$l();return this.indexManager.getCollectionParents(e,o).next((a=>pe.forEach(a,(c=>{const u=(function(f,p){return new no(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)})(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next((h=>{h.forEach(((f,p)=>{i=i.insert(f,p)}))}))})).next((()=>i))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((i=>(o=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((i=>{o.forEach(((c,u)=>{const h=u.getKey();i.get(h)===null&&(i=i.insert(h,Mn.newInvalidDocument(h)))}));let a=$l();return i.forEach(((c,u)=>{const h=o.get(c);h!==void 0&&sc(h.mutation,u,hr.empty(),Tt.now()),Wh(n,u)&&(a=a.insert(c,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p7{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return pe.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:cs(s.createTime)}})(n)),pe.resolve()}getNamedQuery(e,n){return pe.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,(function(s){return{name:s.name,query:r7(s.bundledQuery),readTime:cs(s.readTime)}})(n)),pe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(){this.overlays=new Nt(Ne.comparator),this.kr=new Map}getOverlay(e,n){return pe.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fi();return pe.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.wt(e,n,o)})),pe.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.kr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.kr.delete(r)),pe.resolve()}getOverlaysForCollection(e,n,r){const s=fi(),o=n.length+1,i=new Ne(n.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return pe.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Nt(((u,h)=>u-h));const i=this.overlays.getIterator();for(;i.hasNext();){const u=i.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=o.get(u.largestBatchId);h===null&&(h=fi(),o=o.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=fi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,h)=>a.set(u,h))),!(a.size()>=s)););return pe.resolve(a)}wt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const i=this.kr.get(s.largestBatchId).delete(r.key);this.kr.set(s.largestBatchId,i)}this.overlays=this.overlays.insert(r.key,new Lx(n,r));let o=this.kr.get(n);o===void 0&&(o=it(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return pe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,pe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(){this.qr=new nn(hn.Qr),this.$r=new nn(hn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new hn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new hn(e,n))}Gr(e,n){e.forEach((r=>this.removeReference(r,n)))}zr(e){const n=new Ne(new kt([])),r=new hn(n,e),s=new hn(n,e+1),o=[];return this.$r.forEachInRange([r,s],(i=>{this.Wr(i),o.push(i.key)})),o}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new Ne(new kt([])),r=new hn(n,e),s=new hn(n,e+1);let o=it();return this.$r.forEachInRange([r,s],(i=>{o=o.add(i.key)})),o}containsKey(e){const n=new hn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class hn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return Ne.comparator(e.key,n.key)||nt(e.Hr,n.Hr)}static Ur(e,n){return nt(e.Hr,n.Hr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new nn(hn.Qr)}checkEmpty(e){return pe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new xx(o,n,r,s);this.mutationQueue.push(i);for(const a of s)this.Yr=this.Yr.add(new hn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return pe.resolve(i)}lookupMutationBatch(e,n){return pe.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),o=s<0?0:s;return pe.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return pe.resolve(this.mutationQueue.length===0?Im:this.er-1)}getAllMutationBatches(e){return pe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new hn(n,0),s=new hn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,s],(i=>{const a=this.Zr(i.Hr);o.push(a)})),pe.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new nn(nt);return n.forEach((s=>{const o=new hn(s,0),i=new hn(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,i],(a=>{r=r.add(a.Hr)}))})),pe.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Ne.isDocumentKey(o)||(o=o.child(""));const i=new hn(new Ne(o),0);let a=new nn(nt);return this.Yr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(c.Hr)),!0)}),i),pe.resolve(this.ei(a))}ei(e){const n=[];return e.forEach((r=>{const s=this.Zr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){gt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return pe.forEach(n.mutations,(s=>{const o=new hn(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,n){const r=new hn(n,0),s=this.Yr.firstAfterOrEqual(r);return pe.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,pe.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.ni=e,this.docs=(function(){return new Nt(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,i=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:i}),this.size+=i-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return pe.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(n))}getEntries(e,n){let r=Js();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Mn.newInvalidDocument(s))})),pe.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Js();const i=n.path,a=new Ne(i.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!i.isPrefixOf(u.path))break;u.path.length>i.length+1||HD(qD(h),r)<=0||(s.has(h.key)||Wh(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return pe.resolve(o)}getAllFromCollectionGroup(e,n,r,s){je(9500)}ri(e,n){return pe.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new y7(this)}getSize(e){return pe.resolve(this.size)}}class y7 extends d7{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Or.addEntry(e,s)):this.Or.removeEntry(r)})),pe.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _7{constructor(e){this.persistence=e,this.ii=new Ni((n=>Dm(n)),xm),this.lastRemoteSnapshotVersion=qe.min(),this.highestTargetId=0,this.si=0,this.oi=new Vm,this.targetCount=0,this._i=Na.ar()}forEachTarget(e,n){return this.ii.forEach(((r,s)=>n(s))),pe.resolve()}getLastRemoteSnapshotVersion(e){return pe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return pe.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),pe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),pe.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Na(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,pe.resolve()}updateTargetData(e,n){return this.hr(n),pe.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,pe.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.ii.forEach(((i,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(i),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),pe.waitFor(o).next((()=>s))}getTargetCount(e){return pe.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return pe.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),pe.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((i=>{o.push(s.markPotentiallyOrphaned(e,i))})),pe.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),pe.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return pe.resolve(r)}containsKey(e,n){return pe.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n){this.ai={},this.overlays={},this.ui=new Uh(0),this.ci=!1,this.ci=!0,this.li=new m7,this.referenceDelegate=e(this),this.hi=new _7(this),this.indexManager=new s7,this.remoteDocumentCache=(function(s){return new w7(s)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new n7(n),this.Ti=new p7(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new g7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new v7(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){Te("MemoryPersistence","Starting transaction:",e);const s=new k7(this.ui.next());return this.referenceDelegate.Ii(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ei(e,n){return pe.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,n))))}}class k7 extends WD{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Ai=new Vm,this.Ri=null}static Vi(e){return new jm(e)}get mi(){if(this.Ri)return this.Ri;throw je(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),pe.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),pe.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),pe.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach((s=>this.mi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.mi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return pe.forEach(this.mi,(r=>{const s=Ne.fromPath(r);return this.fi(e,s).next((o=>{o||n.removeEntry(s,qe.min())}))})).next((()=>(this.Ri=null,n.apply(e))))}updateLimboDocument(e,n){return this.fi(e,n).next((r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())}))}Pi(e){return 0}fi(e,n){return pe.or([()=>pe.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kd{constructor(e,n){this.persistence=e,this.gi=new Ni((r=>YD(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=u7(this,n)}static Vi(e,n){return new Kd(e,n)}Ii(){}di(e){return pe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}yr(e){let n=0;return this.gr(e,(r=>{n++})).next((()=>n))}gr(e,n){return pe.forEach(this.gi,((r,s)=>this.Sr(e,r,s).next((o=>o?pe.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ri(e,(i=>this.Sr(e,i,n).next((a=>{a||(r++,o.removeEntry(i,qe.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),pe.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),pe.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),pe.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),pe.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pd(e.data.value)),n}Sr(e,n,r){return pe.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.gi.get(n);return pe.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}const b7="main";function C7(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=s}static Es(e,n){let r=it(),s=it();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Um(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S7{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return k9()?8:mC(on())>0?6:4})()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ps(e,n).next((i=>{o.result=i})).next((()=>{if(!o.result)return this.ys(e,n,s,r).next((i=>{o.result=i}))})).next((()=>{if(o.result)return;const i=new E7;return this.ws(e,n,i).next((a=>{if(o.result=a,this.Rs)return this.Ss(e,n,i,a.size)}))})).next((()=>o.result))}Ss(e,n,r,s){return r.documentReadCount<this.Vs?(ea()<=st.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),pe.resolve()):(ea()<=st.DEBUG&&Te("QueryEngine","Query:",ta(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.fs*s?(ea()<=st.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ls(n))):pe.resolve())}ps(e,n){if($w(n))return pe.resolve(null);let r=ls(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=zd(n,null,"F"),r=ls(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const i=it(...o);return this.gs.getDocuments(e,i).next((a=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.bs(n,a);return this.Ds(n,u,i,c.readTime)?this.ps(e,zd(n,null,"F")):this.vs(e,u,n,c)}))))})))))}ys(e,n,r,s){return $w(n)||s.isEqual(qe.min())?pe.resolve(null):this.gs.getDocuments(e,r).next((o=>{const i=this.bs(n,o);return this.Ds(n,i,r,s)?pe.resolve(null):(ea()<=st.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ta(n)),this.vs(e,i,n,BD(s,bc)).next((a=>a)))}))}bs(e,n){let r=new nn(NC(e));return n.forEach(((s,o)=>{Wh(e,o)&&(r=r.add(o))})),r}Ds(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}ws(e,n,r){return ea()<=st.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ta(n)),this.gs.getDocumentsMatchingQuery(e,n,Oo.min(),r)}vs(e,n,r,s){return this.gs.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((i=>{o=o.insert(i.key,i)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="LocalStore",A7=3e8;class T7{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.Fs=new Nt(nt),this.Ms=new Ni((o=>Dm(o)),xm),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f7(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Fs)))}}function P7(t,e,n,r){return new T7(t,e,n,r)}async function oE(t,e){const n=Fe(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const i=[],a=[];let c=it();for(const u of s){i.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of o){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next((u=>({Bs:u,removedBatchIds:i,addedBatchIds:a})))}))}))}function I7(t,e){const n=Fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return(function(a,c,u,h){const f=u.batch,p=f.keys();let g=pe.resolve();return p.forEach((C=>{g=g.next((()=>h.getEntry(c,C))).next((T=>{const v=u.docVersions.get(C);gt(v!==null,48541),T.version.compareTo(v)<0&&(f.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),h.addEntry(T)))}))})),g.next((()=>a.mutationQueue.removeMutationBatch(c,f)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let c=it();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function iE(t){const e=Fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.hi.getLastRemoteSnapshotVersion(n)))}function R7(t,e){const n=Fe(t),r=e.snapshotVersion;let s=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(o=>{const i=n.Os.newChangeBuffer({trackRemovals:!0});s=n.Fs;const a=[];e.targetChanges.forEach(((h,f)=>{const p=s.get(f);if(!p)return;a.push(n.hi.removeMatchingKeys(o,h.removedDocuments,f).next((()=>n.hi.addMatchingKeys(o,h.addedDocuments,f))));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(gn.EMPTY_BYTE_STRING,qe.min()).withLastLimboFreeSnapshotVersion(qe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,r)),s=s.insert(f,g),(function(T,v,_){return T.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=A7?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0})(p,g,h)&&a.push(n.hi.updateTargetData(o,g))}));let c=Js(),u=it();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))})),a.push(D7(o,i,e.documentUpdates).next((h=>{c=h.Ls,u=h.ks}))),!r.isEqual(qe.min())){const h=n.hi.getLastRemoteSnapshotVersion(o).next((f=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r)));a.push(h)}return pe.waitFor(a).next((()=>i.apply(o))).next((()=>n.localDocuments.getLocalViewOfDocuments(o,c,u))).next((()=>c))})).then((o=>(n.Fs=s,o)))}function D7(t,e,n){let r=it(),s=it();return n.forEach((o=>r=r.add(o))),e.getEntries(t,r).next((o=>{let i=Js();return n.forEach(((a,c)=>{const u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(qe.min())?(e.removeEntry(a,c.readTime),i=i.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),i=i.insert(a,c)):Te(Fm,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)})),{Ls:i,ks:s}}))}function x7(t,e){const n=Fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Im),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function L7(t,e){const n=Fe(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.hi.getTargetData(r,e).next((o=>o?(s=o,pe.resolve(s)):n.hi.allocateTargetId(r).next((i=>(s=new Co(e,i,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Fs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r}))}async function ug(t,e,n){const r=Fe(t),s=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(i=>r.persistence.referenceDelegate.removeTarget(i,s)))}catch(i){if(!Xa(i))throw i;Te(Fm,`Failed to update sequence numbers for target ${e}: ${i}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(s.target)}function Yw(t,e,n){const r=Fe(t);let s=qe.min(),o=it();return r.persistence.runTransaction("Execute query","readwrite",(i=>(function(c,u,h){const f=Fe(c),p=f.Ms.get(h);return p!==void 0?pe.resolve(f.Fs.get(p)):f.hi.getTargetData(u,h)})(r,i,ls(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(i,a.targetId).next((c=>{o=c}))})).next((()=>r.Cs.getDocumentsMatchingQuery(i,e,n?s:qe.min(),n?o:it()))).next((a=>(M7(r,mx(e),a),{documents:a,qs:o})))))}function M7(t,e,n){let r=t.xs.get(e)||qe.min();n.forEach(((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)})),t.xs.set(e,r)}class Zw{constructor(){this.activeTargetIds=bx()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class N7{constructor(){this.Fo=new Zw,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Zw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O7{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="ConnectivityMonitor";class Xw{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Te(Jw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Te(Jw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=null;function dg(){return ju===null?ju=(function(){return 268435456+Math.round(2147483648*Math.random())})():ju++,"0x"+ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf="RestConnection",$7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V7{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.Ko=this.databaseId.database===Bd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,o){const i=dg(),a=this.Go(e,n.toUriEncodedString());Te(Xf,`Sending RPC '${e}' ${i}:`,a,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(c,s,o);const{host:u}=new URL(a),h=eo(u);return this.jo(e,a,c,r,h).then((f=>(Te(Xf,`Received RPC '${e}' ${i}: `,f),f)),(f=>{throw ms(Xf,`RPC '${e}' ${i} failed with error: `,f,"url: ",a,"request:",r),f}))}Jo(e,n,r,s,o,i){return this.Wo(e,n,r,s,o)}zo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Za})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}Go(e,n){const r=$7[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j7{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In="WebChannelConnection";class U7 extends V7{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,s,o){const i=dg();return new Promise(((a,c)=>{const u=new sC;u.setWithCredentials(!0),u.listenOnce(oC.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case fd.NO_ERROR:const f=u.getResponseJson();Te(In,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case fd.TIMEOUT:Te(In,`RPC '${e}' ${i} timed out`),c(new _e(ce.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:const p=u.getStatus();if(Te(In,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const C=g?.error;if(C&&C.status&&C.message){const T=(function(_){const S=_.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(S)>=0?S:ce.UNKNOWN})(C.status);c(new _e(T,C.message))}else c(new _e(ce.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new _e(ce.UNAVAILABLE,"Connection failed."));break;default:je(9055,{c_:e,streamId:i,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{Te(In,`RPC '${e}' ${i} completed.`)}}));const h=JSON.stringify(s);Te(In,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",h,r,15)}))}P_(e,n,r){const s=dg(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=lC(),a=aC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.zo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");Te(In,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=i.createWebChannel(h,c);this.T_(f);let p=!1,g=!1;const C=new j7({Ho:v=>{g?Te(In,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(p||(Te(In,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),Te(In,`RPC '${e}' stream ${s} sending:`,v),f.send(v))},Yo:()=>f.close()}),T=(v,_,S)=>{v.listen(_,(x=>{try{S(x)}catch(R){setTimeout((()=>{throw R}),0)}}))};return T(f,Ol.EventType.OPEN,(()=>{g||(Te(In,`RPC '${e}' stream ${s} transport opened.`),C.s_())})),T(f,Ol.EventType.CLOSE,(()=>{g||(g=!0,Te(In,`RPC '${e}' stream ${s} transport closed`),C.__(),this.I_(f))})),T(f,Ol.EventType.ERROR,(v=>{g||(g=!0,ms(In,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),C.__(new _e(ce.UNAVAILABLE,"The operation could not be completed")))})),T(f,Ol.EventType.MESSAGE,(v=>{var _;if(!g){const S=v.data[0];gt(!!S,16349);const x=S,R=x?.error||((_=x[0])===null||_===void 0?void 0:_.error);if(R){Te(In,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let L=(function(y){const P=Wt[y];if(P!==void 0)return WC(P)})(D),b=R.message;L===void 0&&(L=ce.INTERNAL,b="Unknown error status: "+D+" with message "+R.message),g=!0,C.__(new _e(L,b)),f.close()}else Te(In,`RPC '${e}' stream ${s} received:`,S),C.a_(S)}})),T(a,iC.STAT_EVENT,(v=>{v.stat===Xp.PROXY?Te(In,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===Xp.NOPROXY&&Te(In,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{C.o_()}),0),C}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((n=>n===e))}}function ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(t){return new Bx(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=s,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),s=Math.max(0,n-r);s>0&&Te("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="PersistentStream";class lE{constructor(e,n,r,s,o,i,a,c){this.Fi=e,this.w_=r,this.S_=s,this.connection=o,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new aE(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===ce.RESOURCE_EXHAUSTED?(gs(n.toString()),gs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===ce.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.b_===n&&this.W_(r,s)}),(r=>{e((()=>{const s=new _e(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(s)}))}))}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((s=>{r((()=>this.G_(s)))})),this.stream.onMessage((s=>{r((()=>++this.C_==1?this.j_(s):this.onNext(s)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return Te(e2,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget((()=>this.b_===e?n():(Te(e2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class F7 extends lE{constructor(e,n,r,s,o,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=zx(this.serializer,e),r=(function(o){if(!("targetChange"in o))return qe.min();const i=o.targetChange;return i.targetIds&&i.targetIds.length?qe.min():i.readTime?cs(i.readTime):qe.min()})(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=cg(this.serializer),n.addTarget=(function(o,i){let a;const c=i.target;if(a=sg(c)?{documents:Kx(o,c)}:{query:XC(o,c).Vt},a.targetId=i.targetId,i.resumeToken.approximateByteSize()>0){a.resumeToken=QC(o,i.resumeToken);const u=ig(o,i.expectedCount);u!==null&&(a.expectedCount=u)}else if(i.snapshotVersion.compareTo(qe.min())>0){a.readTime=Gd(o,i.snapshotVersion.toTimestamp());const u=ig(o,i.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const r=Zx(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.k_(n)}}class B7 extends lE{constructor(e,n,r,s,o,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,i),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return gt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){gt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Gx(e.writeResults,e.commitTime),r=cs(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=cg(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>Wx(this.serializer,r)))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q7{}class H7 extends q7{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,i])=>this.connection.Wo(e,ag(n,r),s,o,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(ce.UNKNOWN,o.toString())}))}Jo(e,n,r,s,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Jo(e,ag(n,r),s,i,a,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(ce.UNKNOWN,i.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class z7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(gs(n),this._a=!1):Te("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di="RemoteStore";class W7{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo((i=>{r.enqueueAndForget((async()=>{Oi(this)&&(Te(Di,"Restarting streams for network reachability change."),await(async function(c){const u=Fe(c);u.Ia.add(4),await el(u),u.Aa.set("Unknown"),u.Ia.delete(4),await tu(u)})(this))}))})),this.Aa=new z7(r,s)}}async function tu(t){if(Oi(t))for(const e of t.da)await e(!0)}async function el(t){for(const e of t.da)await e(!1)}function cE(t,e){const n=Fe(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),zm(n)?Hm(n):tl(n).x_()&&qm(n,e))}function Bm(t,e){const n=Fe(t),r=tl(n);n.Ta.delete(e),r.x_()&&uE(n,e),n.Ta.size===0&&(r.x_()?r.B_():Oi(n)&&n.Aa.set("Unknown"))}function qm(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}tl(t).H_(e)}function uE(t,e){t.Ra.$e(e),tl(t).Y_(e)}function Hm(t){t.Ra=new Vx({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),tl(t).start(),t.Aa.aa()}function zm(t){return Oi(t)&&!tl(t).M_()&&t.Ta.size>0}function Oi(t){return Fe(t).Ia.size===0}function dE(t){t.Ra=void 0}async function G7(t){t.Aa.set("Online")}async function K7(t){t.Ta.forEach(((e,n)=>{qm(t,e)}))}async function Q7(t,e){dE(t),zm(t)?(t.Aa.la(e),Hm(t)):t.Aa.set("Unknown")}async function Y7(t,e,n){if(t.Aa.set("Online"),e instanceof KC&&e.state===2&&e.cause)try{await(async function(s,o){const i=o.cause;for(const a of o.targetIds)s.Ta.has(a)&&(await s.remoteSyncer.rejectListen(a,i),s.Ta.delete(a),s.Ra.removeTarget(a))})(t,e)}catch(r){Te(Di,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Qd(t,r)}else if(e instanceof vd?t.Ra.Ye(e):e instanceof GC?t.Ra.it(e):t.Ra.et(e),!n.isEqual(qe.min()))try{const r=await iE(t.localStore);n.compareTo(r)>=0&&await(function(o,i){const a=o.Ra.Pt(i);return a.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ta.get(u);h&&o.Ta.set(u,h.withResumeToken(c.resumeToken,i))}})),a.targetMismatches.forEach(((c,u)=>{const h=o.Ta.get(c);if(!h)return;o.Ta.set(c,h.withResumeToken(gn.EMPTY_BYTE_STRING,h.snapshotVersion)),uE(o,c);const f=new Co(h.target,c,u,h.sequenceNumber);qm(o,f)})),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){Te(Di,"Failed to raise snapshot:",r),await Qd(t,r)}}async function Qd(t,e,n){if(!Xa(e))throw e;t.Ia.add(1),await el(t),t.Aa.set("Offline"),n||(n=()=>iE(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Te(Di,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await tu(t)}))}function hE(t,e){return e().catch((n=>Qd(t,n,e)))}async function Jh(t){const e=Fe(t),n=Uo(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Im;for(;Z7(e);)try{const s=await x7(e.localStore,r);if(s===null){e.Pa.length===0&&n.B_();break}r=s.batchId,J7(e,s)}catch(s){await Qd(e,s)}fE(e)&&pE(e)}function Z7(t){return Oi(t)&&t.Pa.length<10}function J7(t,e){t.Pa.push(e);const n=Uo(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function fE(t){return Oi(t)&&!Uo(t).M_()&&t.Pa.length>0}function pE(t){Uo(t).start()}async function X7(t){Uo(t).na()}async function eL(t){const e=Uo(t);for(const n of t.Pa)e.X_(n.mutations)}async function tL(t,e,n){const r=t.Pa.shift(),s=Nm.from(r,e,n);await hE(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Jh(t)}async function nL(t,e){e&&Uo(t).Z_&&await(async function(r,s){if((function(i){return Ox(i)&&i!==ce.ABORTED})(s.code)){const o=r.Pa.shift();Uo(r).N_(),await hE(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Jh(r)}})(t,e),fE(t)&&pE(t)}async function t2(t,e){const n=Fe(t);n.asyncQueue.verifyOperationInProgress(),Te(Di,"RemoteStore received new credentials");const r=Oi(n);n.Ia.add(3),await el(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await tu(n)}async function rL(t,e){const n=Fe(t);e?(n.Ia.delete(2),await tu(n)):e||(n.Ia.add(2),await el(n),n.Aa.set("Unknown"))}function tl(t){return t.Va||(t.Va=(function(n,r,s){const o=Fe(n);return o.ia(),new F7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:G7.bind(null,t),e_:K7.bind(null,t),n_:Q7.bind(null,t),J_:Y7.bind(null,t)}),t.da.push((async e=>{e?(t.Va.N_(),zm(t)?Hm(t):t.Aa.set("Unknown")):(await t.Va.stop(),dE(t))}))),t.Va}function Uo(t){return t.ma||(t.ma=(function(n,r,s){const o=Fe(n);return o.ia(),new B7(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:X7.bind(null,t),n_:nL.bind(null,t),ea:eL.bind(null,t),ta:tL.bind(null,t)}),t.da.push((async e=>{e?(t.ma.N_(),await Jh(t)):(await t.ma.stop(),t.Pa.length>0&&(Te(Di,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))}))),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((i=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const i=Date.now()+r,a=new Wm(e,n,i,s,o);return a.start(r),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gm(t,e){if(gs("AsyncQueue",`${e}: ${t}`),Xa(t))return new _e(ce.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{static emptySet(e){return new _a(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=$l(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof _a)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new _a;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.fa=new Nt(Ne.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):je(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal(((n,r)=>{e.push(r)})),e}}class Oa{constructor(e,n,r,s,o,i,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,o){const i=[];return n.forEach((a=>{i.push({type:0,doc:a})})),new Oa(e,n,_a.emptySet(n),i,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class oL{constructor(){this.queries=r2(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const s=Fe(n),o=s.queries;s.queries=r2(),o.forEach(((i,a)=>{for(const c of a.wa)c.onError(r)}))})(this,new _e(ce.ABORTED,"Firestore shutting down"))}}function r2(){return new Ni((t=>MC(t)),zh)}async function Km(t,e){const n=Fe(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.Sa()&&e.ba()&&(r=2):(o=new sL,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(s,!0);break;case 1:o.ya=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(i){const a=Gm(i,`Initialization of query '${ta(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Ym(n)}async function Qm(t,e){const n=Fe(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const i=o.wa.indexOf(e);i>=0&&(o.wa.splice(i,1),o.wa.length===0?s=e.ba()?0:1:!o.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function iL(t,e){const n=Fe(t);let r=!1;for(const s of e){const o=s.query,i=n.queries.get(o);if(i){for(const a of i.wa)a.Ca(s)&&(r=!0);i.ya=s}}r&&Ym(n)}function aL(t,e,n){const r=Fe(t),s=r.queries.get(e);if(s)for(const o of s.wa)o.onError(n);r.queries.delete(e)}function Ym(t){t.Da.forEach((e=>{e.next()}))}var hg,s2;(s2=hg||(hg={})).Fa="default",s2.Cache="cache";class Zm{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Oa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==hg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e){this.key=e}}class mE{constructor(e){this.key=e}}class lL{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=it(),this.mutatedKeys=it(),this.Xa=NC(e),this.eu=new _a(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new n2,s=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,i=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((h,f)=>{const p=s.get(h),g=Wh(this.query,f)?f:null,C=!!p&&this.mutatedKeys.has(p.key),T=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let v=!1;p&&g?p.data.isEqual(g.data)?C!==T&&(r.track({type:3,doc:g}),v=!0):this.iu(p,g)||(r.track({type:2,doc:g}),v=!0,(c&&this.Xa(g,c)>0||u&&this.Xa(g,u)<0)&&(a=!0)):!p&&g?(r.track({type:0,doc:g}),v=!0):p&&!g&&(r.track({type:1,doc:p}),v=!0,(c||u)&&(a=!0)),v&&(g?(i=i.add(g),o=T?o.add(h):o.delete(h)):(i=i.delete(h),o=o.delete(h)))})),this.query.limit!==null)for(;i.size>this.query.limit;){const h=this.query.limitType==="F"?i.last():i.first();i=i.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:i,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const i=e.ru.pa();i.sort(((h,f)=>(function(g,C){const T=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return je(20277,{At:v})}};return T(g)-T(C)})(h.type,f.type)||this.Xa(h.doc,f.doc))),this.su(r),s=s!=null&&s;const a=n&&!s?this.ou():[],c=this.Za.size===0&&this.current&&!s?1:0,u=c!==this.Ya;return this.Ya=c,i.length!==0||u?{snapshot:new Oa(this.query,e.eu,o,i,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new n2,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((n=>this.Ha=this.Ha.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ha=this.Ha.delete(n))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=it(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const n=[];return e.forEach((r=>{this.Za.has(r)||n.push(new mE(r))})),this.Za.forEach((r=>{e.has(r)||n.push(new gE(r))})),n}uu(e){this.Ha=e.qs,this.Za=it();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Oa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Jm="SyncEngine";class cL{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uL{constructor(e){this.key=e,this.lu=!1}}class dL{constructor(e,n,r,s,o,i){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=i,this.hu={},this.Pu=new Ni((a=>MC(a)),zh),this.Tu=new Map,this.Iu=new Set,this.du=new Nt(Ne.comparator),this.Eu=new Map,this.Au=new Vm,this.Ru={},this.Vu=new Map,this.mu=Na.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function hL(t,e,n=!0){const r=bE(t);let s;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.cu()):s=await vE(r,e,n,!0),s}async function fL(t,e){const n=bE(t);await vE(n,e,!0,!1)}async function vE(t,e,n,r){const s=await L7(t.localStore,ls(e)),o=s.targetId,i=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await pL(t,e,o,i==="current",s.resumeToken)),t.isPrimaryClient&&n&&cE(t.remoteStore,s),a}async function pL(t,e,n,r,s){t.gu=(f,p,g)=>(async function(T,v,_,S){let x=v.view.nu(_);x.Ds&&(x=await Yw(T.localStore,v.query,!1).then((({documents:b})=>v.view.nu(b,x))));const R=S&&S.targetChanges.get(v.targetId),D=S&&S.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(x,T.isPrimaryClient,R,D);return i2(T,v.targetId,L._u),L.snapshot})(t,f,p,g);const o=await Yw(t.localStore,e,!0),i=new lL(e,o.qs),a=i.nu(o.documents),c=eu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=i.applyChanges(a,t.isPrimaryClient,c);i2(t,n,u._u);const h=new cL(e,n,i);return t.Pu.set(e,h),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function gL(t,e,n){const r=Fe(t),s=r.Pu.get(e),o=r.Tu.get(s.targetId);if(o.length>1)return r.Tu.set(s.targetId,o.filter((i=>!zh(i,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ug(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Bm(r.remoteStore,s.targetId),fg(r,s.targetId)})).catch(Ja)):(fg(r,s.targetId),await ug(r.localStore,s.targetId,!0))}async function mL(t,e){const n=Fe(t),r=n.Pu.get(e),s=n.Tu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bm(n.remoteStore,r.targetId))}async function vL(t,e,n){const r=EL(t);try{const s=await(function(i,a){const c=Fe(i),u=Tt.now(),h=a.reduce(((g,C)=>g.add(C.key)),it());let f,p;return c.persistence.runTransaction("Locally write mutations","readwrite",(g=>{let C=Js(),T=it();return c.Os.getEntries(g,h).next((v=>{C=v,C.forEach(((_,S)=>{S.isValidDocument()||(T=T.add(_))}))})).next((()=>c.localDocuments.getOverlayedDocuments(g,C))).next((v=>{f=v;const _=[];for(const S of a){const x=Rx(S,f.get(S.key).overlayedDocument);x!=null&&_.push(new Go(S.key,x,AC(x.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,_,a)})).next((v=>{p=v;const _=v.applyToLocalDocumentSet(f,T);return c.documentOverlayCache.saveOverlays(g,v.batchId,_)}))})).then((()=>({batchId:p.batchId,changes:$C(f)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(i,a,c){let u=i.Ru[i.currentUser.toKey()];u||(u=new Nt(nt)),u=u.insert(a,c),i.Ru[i.currentUser.toKey()]=u})(r,s.batchId,n),await nu(r,s.changes),await Jh(r.remoteStore)}catch(s){const o=Gm(s,"Failed to persist write");n.reject(o)}}async function wE(t,e){const n=Fe(t);try{const r=await R7(n.localStore,e);e.targetChanges.forEach(((s,o)=>{const i=n.Eu.get(o);i&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?i.lu=!0:s.modifiedDocuments.size>0?gt(i.lu,14607):s.removedDocuments.size>0&&(gt(i.lu,42227),i.lu=!1))})),await nu(n,r,e)}catch(r){await Ja(r)}}function o2(t,e,n){const r=Fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Pu.forEach(((o,i)=>{const a=i.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(i,a){const c=Fe(i);c.onlineState=a;let u=!1;c.queries.forEach(((h,f)=>{for(const p of f.wa)p.va(a)&&(u=!0)})),u&&Ym(c)})(r.eventManager,e),s.length&&r.hu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function wL(t,e,n){const r=Fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Eu.get(e),o=s&&s.key;if(o){let i=new Nt(Ne.comparator);i=i.insert(o,Mn.newNoDocument(o,qe.min()));const a=it().add(o),c=new Yh(qe.min(),new Map,new Nt(nt),i,a);await wE(r,c),r.du=r.du.remove(o),r.Eu.delete(e),Xm(r)}else await ug(r.localStore,e,!1).then((()=>fg(r,e,n))).catch(Ja)}async function yL(t,e){const n=Fe(t),r=e.batch.batchId;try{const s=await I7(n.localStore,e);_E(n,r,null),yE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nu(n,s)}catch(s){await Ja(s)}}async function _L(t,e,n){const r=Fe(t);try{const s=await(function(i,a){const c=Fe(i);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next((f=>(gt(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h))).next((()=>c.localDocuments.getDocuments(u,h)))}))})(r.localStore,e);_E(r,e,n),yE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nu(r,s)}catch(s){await Ja(s)}}function yE(t,e){(t.Vu.get(e)||[]).forEach((n=>{n.resolve()})),t.Vu.delete(e)}function _E(t,e,n){const r=Fe(t);let s=r.Ru[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Ru[r.currentUser.toKey()]=s}}function fg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach((r=>{t.Au.containsKey(r)||kE(t,r)}))}function kE(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Bm(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Xm(t))}function i2(t,e,n){for(const r of n)r instanceof gE?(t.Au.addReference(r.key,e),kL(t,r)):r instanceof mE?(Te(Jm,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||kE(t,r.key)):je(19791,{yu:r})}function kL(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(Te(Jm,"New document in limbo: "+n),t.Iu.add(r),Xm(t))}function Xm(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new Ne(kt.fromString(e)),r=t.mu.next();t.Eu.set(r,new uL(n)),t.du=t.du.insert(n,r),cE(t.remoteStore,new Co(ls(Hh(n.path)),r,"TargetPurposeLimboResolution",Uh.ue))}}async function nu(t,e,n){const r=Fe(t),s=[],o=[],i=[];r.Pu.isEmpty()||(r.Pu.forEach(((a,c)=>{i.push(r.gu(c,e,n).then((u=>{var h;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(h=n?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){s.push(u);const f=Um.Es(c.targetId,u);o.push(f)}})))})),await Promise.all(i),r.hu.J_(s),await(async function(c,u){const h=Fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(f=>pe.forEach(u,(p=>pe.forEach(p.Is,(g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g))).next((()=>pe.forEach(p.ds,(g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))))))}catch(f){if(!Xa(f))throw f;Te(Fm,"Failed to update sequence numbers: "+f)}for(const f of u){const p=f.targetId;if(!f.fromCache){const g=h.Fs.get(p),C=g.snapshotVersion,T=g.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(p,T)}}})(r.localStore,o))}async function bL(t,e){const n=Fe(t);if(!n.currentUser.isEqual(e)){Te(Jm,"User change. New user:",e.toKey());const r=await oE(n.localStore,e);n.currentUser=e,(function(o,i){o.Vu.forEach((a=>{a.forEach((c=>{c.reject(new _e(ce.CANCELLED,i))}))})),o.Vu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(n,r.Bs)}}function CL(t,e){const n=Fe(t),r=n.Eu.get(e);if(r&&r.lu)return it().add(r.key);{let s=it();const o=n.Tu.get(e);if(!o)return s;for(const i of o){const a=n.Pu.get(i);s=s.unionWith(a.view.tu)}return s}}function bE(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=CL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=wL.bind(null,e),e.hu.J_=iL.bind(null,e.eventManager),e.hu.pu=aL.bind(null,e.eventManager),e}function EL(t){const e=Fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_L.bind(null,e),e}class Yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zh(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return P7(this.persistence,new S7,e.initialUser,this.serializer)}Du(e){return new sE(jm.Vi,this.serializer)}bu(e){return new N7}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yd.provider={build:()=>new Yd};class SL extends Yd{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){gt(this.persistence.referenceDelegate instanceof Kd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new l7(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?Qn.withCacheSize(this.cacheSizeBytes):Qn.DEFAULT;return new sE((r=>Kd.Vi(r,n)),this.serializer)}}class pg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>o2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bL.bind(null,this.syncEngine),await rL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oL})()}createDatastore(e){const n=Zh(e.databaseInfo.databaseId),r=(function(o){return new U7(o)})(e.databaseInfo);return(function(o,i,a,c){return new H7(o,i,a,c)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,i,a){return new W7(r,s,o,i,a)})(this.localStore,this.datastore,e.asyncQueue,(n=>o2(this.syncEngine,n,0)),(function(){return Xw.C()?new Xw:new O7})())}createSyncEngine(e,n){return(function(s,o,i,a,c,u,h){const f=new dL(s,o,i,a,c,u);return h&&(f.fu=!0),f})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=Fe(s);Te(Di,"RemoteStore shutting down."),o.Ia.add(5),await el(o),o.Ea.shutdown(),o.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}pg.provider={build:()=>new pg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):gs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="FirestoreClient";class AL{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=xn.UNAUTHENTICATED,this.clientId=Vh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async i=>{Te(Fo,"Received user=",i.uid),await this.authCredentialListener(i),this.user=i})),this.appCheckCredentials.start(r,(i=>(Te(Fo,"Received new app check token=",i),this.appCheckCredentialListener(i,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Gm(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function tp(t,e){t.asyncQueue.verifyOperationInProgress(),Te(Fo,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await oE(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>{ms("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then((()=>{Te("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((s=>{ms("Terminating Firestore due to IndexedDb database deletion failed",s)}))})),t._offlineComponents=e}async function a2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await CE(t);Te(Fo,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>t2(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>t2(e.remoteStore,s))),t._onlineComponents=e}async function CE(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Te(Fo,"Using user provided OfflineComponentProvider");try{await tp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===ce.FAILED_PRECONDITION||s.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ms("Error using user provided cache. Falling back to memory cache: "+n),await tp(t,new Yd)}}else Te(Fo,"Using default OfflineComponentProvider"),await tp(t,new SL(void 0));return t._offlineComponents}async function Xh(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Te(Fo,"Using user provided OnlineComponentProvider"),await a2(t,t._uninitializedComponentsProvider._online)):(Te(Fo,"Using default OnlineComponentProvider"),await a2(t,new pg))),t._onlineComponents}function EE(t){return CE(t).then((e=>e.persistence))}function SE(t){return Xh(t).then((e=>e.remoteStore))}function TL(t){return Xh(t).then((e=>e.syncEngine))}function PL(t){return Xh(t).then((e=>e.datastore))}async function Zd(t){const e=await Xh(t),n=e.eventManager;return n.onListen=hL.bind(null,e.syncEngine),n.onUnlisten=gL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mL.bind(null,e.syncEngine),n}function IL(t){return t.asyncQueue.enqueue((async()=>{const e=await EE(t),n=await SE(t);return e.setNetworkEnabled(!0),(function(s){const o=Fe(s);return o.Ia.delete(0),tu(o)})(n)}))}function RL(t){return t.asyncQueue.enqueue((async()=>{const e=await EE(t),n=await SE(t);return e.setNetworkEnabled(!1),(async function(s){const o=Fe(s);o.Ia.add(0),await el(o),o.Aa.set("Offline")})(n)}))}function DL(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget((async()=>(function(o,i,a,c,u){const h=new ev({next:p=>{h.Ou(),i.enqueueAndForget((()=>Qm(o,f)));const g=p.docs.has(a);!g&&p.fromCache?u.reject(new _e(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&c&&c.source==="server"?u.reject(new _e(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Zm(Hh(a.path),h,{includeMetadataChanges:!0,ka:!0});return Km(o,f)})(await Zd(t),t.asyncQueue,e,n,r))),r.promise}function xL(t,e,n={}){const r=new Ar;return t.asyncQueue.enqueueAndForget((async()=>(function(o,i,a,c,u){const h=new ev({next:p=>{h.Ou(),i.enqueueAndForget((()=>Qm(o,f))),p.fromCache&&c.source==="server"?u.reject(new _e(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(p)},error:p=>u.reject(p)}),f=new Zm(a,h,{includeMetadataChanges:!0,ka:!0});return Km(o,f)})(await Zd(t),t.asyncQueue,e,n,r))),r.promise}function LL(t,e,n){const r=new Ar;return t.asyncQueue.enqueueAndForget((async()=>{try{const s=await PL(t);r.resolve((async function(i,a,c){var u;const h=Fe(i),{request:f,ft:p,parent:g}=Qx(h.serializer,gx(a),c);h.connection.Qo||delete f.parent;const C=(await h.Jo("RunAggregationQuery",h.serializer.databaseId,g,f,1)).filter((v=>!!v.result));gt(C.length===1,64727);const T=(u=C[0].result)===null||u===void 0?void 0:u.aggregateFields;return Object.keys(T).reduce(((v,_)=>(v[p[_]]=T[_],v)),{})})(s,e,n))}catch(s){r.reject(s)}})),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="firestore.googleapis.com",c2=!0;class u2{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TE,this.ssl=c2}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:c2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<i7)throw new _e(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new _e(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ru{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new dC;switch(r.type){case"firstParty":return new $D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=l2.get(n);r&&(Te("ComponentProvider","Removing Datastore"),l2.delete(n),r.terminate())})(this),Promise.resolve()}}function PE(t,e,n,r={}){var s;t=Zt(t,ru);const o=eo(e),i=t._getSettings(),a=Object.assign(Object.assign({},i),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;o&&(Ah(`https://${c}`),Th("Firestore",!0)),i.host!==TE&&i.host!==c&&ms("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},i),{host:c,ssl:o,emulatorOptions:r});if(!Pi(u,a)&&(t._setSettings(u),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=xn.MOCK_USER;else{h=Kk(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new _e(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new xn(p)}t._authCredentials=new MD(new uC(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gr(this.firestore,e,this._query)}}class Mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Jc(n,Mt._jsonSchema))return new Mt(e,r||null,new Ne(kt.fromString(n.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Yt("string",Mt._jsonSchemaVersion),referencePath:Yt("string")};class qs extends gr{constructor(e,n,r){super(e,n,Hh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new Ne(e))}withConverter(e){return new qs(this.firestore,e,this._path)}}function yr(t,e,...n){if(t=Ue(t),Am("collection","path",e),t instanceof ru){const r=kt.fromString(e,...n);return Cw(r),new qs(t,null,r)}{if(!(t instanceof Mt||t instanceof qs))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return Cw(r),new qs(t.firestore,null,r)}}function ML(t,e){if(t=Zt(t,ru),Am("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new _e(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new gr(t,null,(function(r){return new no(kt.emptyPath(),r)})(e))}function Lt(t,e,...n){if(t=Ue(t),arguments.length===1&&(e=Vh.newId()),Am("doc","path",e),t instanceof ru){const r=kt.fromString(e,...n);return bw(r),new Mt(t,null,new Ne(r))}{if(!(t instanceof Mt||t instanceof qs))throw new _e(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(kt.fromString(e,...n));return bw(r),new Mt(t.firestore,t instanceof qs?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2="AsyncQueue";class h2{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new aE(this,"async_queue_retry"),this.oc=()=>{const r=ep();r&&Te(d2,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=ep();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=ep();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const n=new Ar;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Xa(e))throw e;Te(d2,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const n=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,gs("INTERNAL UNHANDLED ERROR: ",f2(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const s=Wm.createAndSchedule(this,e,n,r,(o=>this.lc(o)));return this.ec.push(s),s}ac(){this.tc&&je(47125,{hc:f2(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function f2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const o of r)if(o in s&&typeof s[o]=="function")return!0;return!1})(t,["next","error","complete"])}class sr extends ru{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new h2,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h2(e),this._firestoreClient=void 0,await e}}}function Jd(t,e){const n=typeof t=="object"?t:qc(),r=typeof t=="string"?t:e||Bd,s=Ka(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=am("firestore");o&&PE(s,...o)}return s}function ro(t){if(t._terminated)throw new _e(ce.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||NL(t),t._firestoreClient}function NL(t){var e,n,r;const s=t._freezeSettings(),o=(function(a,c,u,h){return new ex(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,AE(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new AL(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(t._componentsProvider))}function OL(t){if(t._initialized&&!t._terminated)throw new _e(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!_i.C())return Promise.resolve();const s=r+b7;await _i.delete(s)})(C7(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}})),e.promise}function $L(t){return IL(ro(t=Zt(t,sr)))}function VL(t){return RL(ro(t=Zt(t,sr)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class RE{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ur(gn.fromBase64String(e))}catch(n){throw new _e(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ur(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ur._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Jc(e,ur._jsonSchema))return ur.fromBase64String(e.bytes)}}ur._jsonSchemaVersion="firestore/bytes/1.0",ur._jsonSchema={type:Yt("string",ur._jsonSchemaVersion),bytes:Yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new _e(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new _e(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new _e(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return nt(this._lat,e._lat)||nt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Jc(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:Yt("string",Br._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:qr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Jc(e,qr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new qr(e.vectorValues);throw new _e(ce.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}qr._jsonSchemaVersion="firestore/vectorValue/1.0",qr._jsonSchema={type:Yt("string",qr._jsonSchemaVersion),vectorValues:Yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL=/^__.*__$/;class UL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xc(e,this.data,n,this.fieldTransforms)}}class DE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function xE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw je(40011,{Ec:t})}}class tv{constructor(e,n,r,s,o,i){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new tv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.fc(e),s}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Rc({path:r,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Xd(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(xE(this.Ec)&&jL.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FL{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zh(e)}Dc(e,n,r,s=!1){return new tv({Ec:e,methodName:n,bc:r,path:pn.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rl(t){const e=t._freezeSettings(),n=Zh(t._databaseId);return new FL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function nv(t,e,n,r,s,o={}){const i=t.Dc(o.merge||o.mergeFields?2:0,e,n,s);sv("Data must be an object, but it was:",i,r);const a=OE(r,i);let c,u;if(o.merge)c=new hr(i.fieldMask),u=i.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const p=gg(e,f,n);if(!i.contains(p))throw new _e(ce.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);VE(h,p)||h.push(p)}c=new hr(h),u=i.fieldTransforms.filter((f=>c.covers(f.field)))}else c=null,u=i.fieldTransforms;return new UL(new Yn(a),c,u)}class ef extends su{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ef}}class rv extends su{_toFieldTransform(e){return new Ax(e.path,new Ac)}isEqual(e){return e instanceof rv}}function LE(t,e,n,r){const s=t.Dc(1,e,n);sv("Data must be an object, but it was:",s,r);const o=[],i=Yn.empty();Wo(r,((c,u)=>{const h=ov(e,c,n);u=Ue(u);const f=s.gc(h);if(u instanceof ef)o.push(h);else{const p=ou(u,f);p!=null&&(o.push(h),i.set(h,p))}}));const a=new hr(o);return new DE(i,a,s.fieldTransforms)}function ME(t,e,n,r,s,o){const i=t.Dc(1,e,n),a=[gg(e,r,n)],c=[s];if(o.length%2!=0)throw new _e(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)a.push(gg(e,o[p])),c.push(o[p+1]);const u=[],h=Yn.empty();for(let p=a.length-1;p>=0;--p)if(!VE(u,a[p])){const g=a[p];let C=c[p];C=Ue(C);const T=i.gc(g);if(C instanceof ef)u.push(g);else{const v=ou(C,T);v!=null&&(u.push(g),h.set(g,v))}}const f=new hr(u);return new DE(h,f,i.fieldTransforms)}function NE(t,e,n,r=!1){return ou(n,t.Dc(r?4:3,e))}function ou(t,e){if($E(t=Ue(t)))return sv("Unsupported field value:",e,t),OE(t,e);if(t instanceof su)return(function(r,s){if(!xE(s.Ec))throw s.wc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,s){const o=[];let i=0;for(const a of r){let c=ou(a,s.yc(i));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),i++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Cx(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Tt.fromDate(r);return{timestampValue:Gd(s.serializer,o)}}if(r instanceof Tt){const o=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gd(s.serializer,o)}}if(r instanceof Br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:QC(s.serializer,r._byteString)};if(r instanceof Mt){const o=s.databaseId,i=r.firestore._databaseId;if(!i.isEqual(o))throw s.wc(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$m(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof qr)return(function(i,a){return{mapValue:{fields:{[EC]:{stringValue:SC},[qd]:{arrayValue:{values:i.toArray().map((u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return Mm(a.serializer,u)}))}}}}}})(r,s);throw s.wc(`Unsupported field value: ${jh(r)}`)})(t,e)}function OE(t,e){const n={};return wC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wo(t,((r,s)=>{const o=ou(s,e.Vc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function $E(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Br||t instanceof ur||t instanceof Mt||t instanceof su||t instanceof qr)}function sv(t,e,n){if(!$E(n)||!pC(n)){const r=jh(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function gg(t,e,n){if((e=Ue(e))instanceof nl)return e._internalPath;if(typeof e=="string")return ov(t,e);throw Xd("Field path arguments must be of type string or ",t,!1,void 0,n)}const BL=new RegExp("[~\\*/\\[\\]]");function ov(t,e,n){if(e.search(BL)>=0)throw Xd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new nl(...e.split("."))._internalPath}catch{throw Xd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Xd(t,e,n,r,s){const o=r&&!r.isEmpty(),i=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||i)&&(c+=" (found",o&&(c+=` in field ${r}`),i&&(c+=` in document ${s}`),c+=")"),new _e(ce.INVALID_ARGUMENT,a+t+c)}function VE(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qL extends iv{data(){return super.data()}}function tf(t,e){return typeof e=="string"?ov(t,e):e instanceof nl?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new _e(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class av{}class sl extends av{}function _o(t,e,...n){let r=[];e instanceof av&&r.push(e),r=r.concat(n),(function(o){const i=o.filter((c=>c instanceof $i)).length,a=o.filter((c=>c instanceof ol)).length;if(i>1||i>0&&a>0)throw new _e(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)t=s._apply(t);return t}class ol extends sl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new ol(e,n,r)}_apply(e){const n=this._parse(e);return BE(e._query,n),new gr(e.firestore,e.converter,og(e._query,n))}_parse(e){const n=rl(e.firestore);return(function(o,i,a,c,u,h,f){let p;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){m2(f,h);const C=[];for(const T of f)C.push(g2(c,o,T));p={arrayValue:{values:C}}}else p=g2(c,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||m2(f,h),p=NE(a,i,f,h==="in"||h==="not-in");return Qt.create(u,h,p)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function UE(t,e,n){const r=e,s=tf("where",t);return ol._create(s,r,n)}class $i extends av{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new $i(e,n)}_parse(e){const n=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:Gr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(s,o){let i=s;const a=o.getFlattenedFilters();for(const c of a)BE(i,c),i=og(i,c)})(e._query,n),new gr(e.firestore,e.converter,og(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function HL(...t){return t.forEach((e=>qE("or",e))),$i._create("or",t)}function zL(...t){return t.forEach((e=>qE("and",e))),$i._create("and",t)}class nf extends sl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new nf(e,n)}_apply(e){const n=(function(s,o,i){if(s.startAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new _e(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sc(o,i)})(e._query,this._field,this._direction);return new gr(e.firestore,e.converter,(function(s,o){const i=s.explicitOrderBy.concat([o]);return new no(s.path,s.collectionGroup,i,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,n))}}function WL(t,e="asc"){const n=e,r=tf("orderBy",t);return nf._create(r,n)}class iu extends sl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new iu(e,n,r)}_apply(e){return new gr(e.firestore,e.converter,zd(e._query,this._limit,this._limitType))}}function GL(t){return gC("limit",t),iu._create("limit",t,"F")}function KL(t){return gC("limitToLast",t),iu._create("limitToLast",t,"L")}class au extends sl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new au(e,n,r)}_apply(e){const n=FE(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,(function(s,o){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,o,s.endAt)})(e._query,n))}}function QL(...t){return au._create("startAt",t,!0)}function YL(...t){return au._create("startAfter",t,!1)}class lu extends sl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new lu(e,n,r)}_apply(e){const n=FE(e,this.type,this._docOrFields,this._inclusive);return new gr(e.firestore,e.converter,(function(s,o){return new no(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,o)})(e._query,n))}}function ZL(...t){return lu._create("endBefore",t,!1)}function JL(...t){return lu._create("endAt",t,!0)}function FE(t,e,n,r){if(n[0]=Ue(n[0]),n[0]instanceof iv)return(function(o,i,a,c,u){if(!c)throw new _e(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const f of ya(o))if(f.field.isKeyField())h.push(Hd(i,c.key));else{const p=c.data.field(f.field);if(Bh(p))throw new _e(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const g=f.field.canonicalString();throw new _e(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}h.push(p)}return new Ma(h,u)})(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=rl(t.firestore);return(function(i,a,c,u,h,f){const p=i.explicitOrderBy;if(h.length>p.length)throw new _e(ce.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let C=0;C<h.length;C++){const T=h[C];if(p[C].field.isKeyField()){if(typeof T!="string")throw new _e(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof T}`);if(!Lm(i)&&T.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${T}' contains a slash.`);const v=i.path.child(kt.fromString(T));if(!Ne.isDocumentKey(v))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const _=new Ne(v);g.push(Hd(a,_))}else{const v=NE(c,u,T);g.push(v)}}return new Ma(g,f)})(t._query,t.firestore._databaseId,s,e,n,r)}}function g2(t,e,n){if(typeof(n=Ue(n))=="string"){if(n==="")throw new _e(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lm(e)&&n.indexOf("/")!==-1)throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(kt.fromString(n));if(!Ne.isDocumentKey(r))throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Hd(t,new Ne(r))}if(n instanceof Mt)return Hd(t,n._key);throw new _e(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jh(n)}.`)}function m2(t,e){if(!Array.isArray(t)||t.length===0)throw new _e(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BE(t,e){const n=(function(s,o){for(const i of s)for(const a of i.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(t.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(ce.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function qE(t,e){if(!(e instanceof ol||e instanceof $i))throw new _e(ce.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class HE{convertValue(e,n="none"){switch(jo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Vo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw je(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wo(e,((s,o)=>{r[s]=this.convertValue(o,n)})),r}convertVectorValue(e){var n,r,s;const o=(s=(r=(n=e.fields)===null||n===void 0?void 0:n[qd].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map((i=>qt(i.doubleValue)));return new qr(o)}convertGeoPoint(e){return new Br(qt(e.latitude),qt(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Cc(e));default:return null}}convertTimestamp(e){const n=$o(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=kt.fromString(e);gt(nE(r),9688,{name:e});const s=new Da(r.get(1),r.get(3)),o=new Ne(r.popFirst(5));return s.isEqual(n)||gs(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function zE(){return new IE("count")}class aa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Io extends iv{constructor(e,n,r,s,o,i){super(e,n,r,s,i),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new oc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Io._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Io._jsonSchemaVersion="firestore/documentSnapshot/1.0",Io._jsonSchema={type:Yt("string",Io._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class oc extends Io{data(e={}){return super.data(e)}}class Ro{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new aa(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new oc(this._firestore,this._userDataWriter,r.key,r,new aa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new _e(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let i=0;return s._snapshot.docChanges.map((a=>{const c=new oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:i++}}))}{let i=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>o||a.type!==3)).map((a=>{const c=new oc(s._firestore,s._userDataWriter,a.doc.key,a.doc,new aa(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return a.type!==0&&(u=i.indexOf(a.doc.key),i=i.delete(a.doc.key)),a.type!==1&&(i=i.add(a.doc),h=i.indexOf(a.doc.key)),{type:XL(a.type),doc:c,oldIndex:u,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(ce.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Vh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return je(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t){t=Zt(t,Mt);const e=Zt(t.firestore,sr);return DL(ro(e),t._key).then((n=>KE(e,t,n)))}Ro._jsonSchemaVersion="firestore/querySnapshot/1.0",Ro._jsonSchema={type:Yt("string",Ro._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class rf extends HE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}}function Is(t){t=Zt(t,gr);const e=Zt(t.firestore,sr),n=ro(e),r=new rf(e);return jE(t._query),xL(n,t._query).then((s=>new Ro(e,r,t,s)))}function xi(t,e,n){t=Zt(t,Mt);const r=Zt(t.firestore,sr),s=lv(t.converter,e,n);return il(r,[nv(rl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Wn.none())])}function Cr(t,e,n,...r){t=Zt(t,Mt);const s=Zt(t.firestore,sr),o=rl(s);let i;return i=typeof(e=Ue(e))=="string"||e instanceof nl?ME(o,"updateDoc",t._key,e,n,r):LE(o,"updateDoc",t._key,e),il(s,[i.toMutation(t._key,Wn.exists(!0))])}function WE(t){return il(Zt(t.firestore,sr),[new Qh(t._key,Wn.none())])}function GE(t,e){const n=Zt(t.firestore,sr),r=Lt(t),s=lv(t.converter,e);return il(n,[nv(rl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then((()=>r))}function la(t,...e){var n,r,s;t=Ue(t);let o={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||p2(e[i])||(o=e[i++]);const a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(p2(e[i])){const f=e[i];e[i]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[i+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[i+2]=(s=f.complete)===null||s===void 0?void 0:s.bind(f)}let c,u,h;if(t instanceof Mt)u=Zt(t.firestore,sr),h=Hh(t._key.path),c={next:f=>{e[i]&&e[i](KE(u,t,f))},error:e[i+1],complete:e[i+2]};else{const f=Zt(t,gr);u=Zt(f.firestore,sr),h=f._query;const p=new rf(u);c={next:g=>{e[i]&&e[i](new Ro(u,p,f,g))},error:e[i+1],complete:e[i+2]},jE(t._query)}return(function(p,g,C,T){const v=new ev(T),_=new Zm(g,v,C);return p.asyncQueue.enqueueAndForget((async()=>Km(await Zd(p),_))),()=>{v.Ou(),p.asyncQueue.enqueueAndForget((async()=>Qm(await Zd(p),_)))}})(ro(u),h,a,c)}function il(t,e){return(function(r,s){const o=new Ar;return r.asyncQueue.enqueueAndForget((async()=>vL(await TL(r),s,o))),o.promise})(ro(t),e)}function KE(t,e,n){const r=n.docs.get(e._key),s=new rf(t);return new Io(t,s,e._key,r,new aa(n.hasPendingWrites,n.fromCache),e.converter)}function eM(t){return QE(t,{count:zE()})}function QE(t,e){const n=Zt(t.firestore,sr),r=ro(n),s=JD(e,((o,i)=>new Mx(i,o.aggregateType,o._internalFieldPath)));return LL(r,t._query,s).then((o=>(function(a,c,u){const h=new rf(a);return new RE(c,h,u)})(n,t,o)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=rl(e)}set(e,n,r){this._verifyNotCommitted();const s=np(e,this._firestore),o=lv(s.converter,n,r),i=nv(this._dataReader,"WriteBatch.set",s._key,o,s.converter!==null,r);return this._mutations.push(i.toMutation(s._key,Wn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const o=np(e,this._firestore);let i;return i=typeof(n=Ue(n))=="string"||n instanceof nl?ME(this._dataReader,"WriteBatch.update",o._key,n,r,s):LE(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(i.toMutation(o._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=np(e,this._firestore);return this._mutations=this._mutations.concat(new Qh(n._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new _e(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function np(t,e){if((t=Ue(t)).firestore!==e)throw new _e(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function Bo(){return new rv("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t){return ro(t=Zt(t,sr)),new YE(t,(e=>il(t,e)))}(function(e,n=!0){(function(s){Za=s})(Ho),Ys(new Ks("firestore",((r,{instanceIdentifier:s,options:o})=>{const i=r.getProvider("app").getImmediate(),a=new sr(new ND(r.getProvider("auth-internal")),new VD(i,r.getProvider("app-check-internal")),(function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new _e(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Da(u.options.projectId,h)})(i,s),i);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a}),"PUBLIC").setMultipleInstances(!0)),pr(vw,ww,e),pr(vw,ww,"esm2017")})();const ri=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:HE,AggregateField:IE,AggregateQuerySnapshot:RE,Bytes:ur,CollectionReference:qs,DocumentReference:Mt,DocumentSnapshot:Io,FieldPath:nl,FieldValue:su,Firestore:sr,FirestoreError:_e,GeoPoint:Br,Query:gr,QueryCompositeFilterConstraint:$i,QueryConstraint:sl,QueryDocumentSnapshot:oc,QueryEndAtConstraint:lu,QueryFieldFilterConstraint:ol,QueryLimitConstraint:iu,QueryOrderByConstraint:nf,QuerySnapshot:Ro,QueryStartAtConstraint:au,SnapshotMetadata:aa,Timestamp:Tt,VectorValue:qr,WriteBatch:YE,_AutoId:Vh,_ByteString:gn,_DatabaseId:Da,_DocumentKey:Ne,_EmptyAuthCredentialsProvider:dC,_FieldPath:pn,_cast:Zt,_logWarn:ms,_validateIsNotUsedTogether:fC,addDoc:GE,and:zL,clearIndexedDbPersistence:OL,collection:yr,collectionGroup:ML,connectFirestoreEmulator:PE,count:zE,deleteDoc:WE,disableNetwork:VL,doc:Lt,enableNetwork:$L,endAt:JL,endBefore:ZL,ensureFirestoreConfigured:ro,executeWrite:il,getAggregateFromServer:QE,getCountFromServer:eM,getDoc:As,getDocs:Is,getFirestore:Jd,limit:GL,limitToLast:KL,onSnapshot:la,or:HL,orderBy:WL,query:_o,serverTimestamp:Bo,setDoc:xi,startAfter:YL,startAt:QL,updateDoc:Cr,where:UE,writeBatch:tM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebasestorage.googleapis.com",JE="storageBucket",nM=120*1e3,rM=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends Dr{constructor(e,n,r=0){super(rp(e),`Firebase Storage: ${n} (${rp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ot||(Ot={}));function rp(t){return"storage/"+t}function cv(){const t="An unknown error occurred, please check the error payload for server response.";return new $t(Ot.UNKNOWN,t)}function sM(t){return new $t(Ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function oM(t){return new $t(Ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function iM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $t(Ot.UNAUTHENTICATED,t)}function aM(){return new $t(Ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function lM(t){return new $t(Ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function cM(){return new $t(Ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function uM(){return new $t(Ot.CANCELED,"User canceled the upload/download.")}function dM(t){return new $t(Ot.INVALID_URL,"Invalid URL '"+t+"'.")}function hM(t){return new $t(Ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fM(){return new $t(Ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+JE+"' property when initializing the app?")}function pM(){return new $t(Ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gM(){return new $t(Ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mM(t){return new $t(Ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eh(t){return new $t(Ot.INVALID_ARGUMENT,t)}function XE(){return new $t(Ot.APP_DELETED,"The Firebase app was deleted.")}function e4(t){return new $t(Ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ic(t,e){return new $t(Ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Al(t){throw new $t(Ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Jn.makeFromUrl(e,n)}catch{return new Jn(e,"")}if(r.path==="")return r;throw hM(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const i="(/(.*))?$",a=new RegExp("^gs://"+s+i,"i"),c={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${h}/b/${s}/o${p}`,"i"),C={bucket:1,path:3},T=n===ZE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",_=new RegExp(`^https?://${T}/${s}/${v}`,"i"),x=[{regex:a,indices:c,postModify:o},{regex:g,indices:C,postModify:u},{regex:_,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<x.length;R++){const D=x[R],L=D.regex.exec(e);if(L){const b=L[D.indices.bucket];let A=L[D.indices.path];A||(A=""),r=new Jn(b,A),D.postModify(r);break}}if(r==null)throw dM(e);return r}}class vM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t,e,n){let r=1,s=null,o=null,i=!1,a=0;function c(){return a===2}let u=!1;function h(...v){u||(u=!0,e.apply(null,v))}function f(v){s=setTimeout(()=>{s=null,t(g,c())},v)}function p(){o&&clearTimeout(o)}function g(v,..._){if(u){p();return}if(v){p(),h.call(null,v,..._);return}if(c()||i){p(),h.call(null,v,..._);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let C=!1;function T(v){C||(C=!0,p(),!u&&(s!==null?(v||(a=2),clearTimeout(s),f(0)):v||(a=1)))}return f(0),o=setTimeout(()=>{i=!0,T(!0)},n),T}function yM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t){return t!==void 0}function kM(t){return typeof t=="object"&&!Array.isArray(t)}function uv(t){return typeof t=="string"||t instanceof String}function v2(t){return dv()&&t instanceof Blob}function dv(){return typeof Blob<"u"}function w2(t,e,n,r){if(r<e)throw eh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw eh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function t4(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ki;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ki||(ki={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n,r,s,o,i,a,c,u,h,f,p=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=i,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=f,this.retry=p,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,T)=>{this.resolve_=C,this.reject_=T,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Uu(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const i=a=>{const c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(i),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(i),this.pendingConnection_=null;const a=o.getErrorCode()===ki.NO_ERROR,c=o.getStatus();if(!a||bM(c,this.additionalRetryCodes_)&&this.retry){const h=o.getErrorCode()===ki.ABORT;r(!1,new Uu(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new Uu(u,o))})},n=(r,s)=>{const o=this.resolve_,i=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());_M(c)?o(c):o()}catch(c){i(c)}else if(a!==null){const c=cv();c.serverResponse=a.getErrorText(),this.errorCallback_?i(this.errorCallback_(a,c)):i(c)}else if(s.canceled){const c=this.appDelete_?XE():uM();i(c)}else{const c=cM();i(c)}};this.canceled_?n(!1,new Uu(!1,null,!0)):this.backoffId_=wM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&yM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function EM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function SM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function AM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function PM(t,e,n,r,s,o,i=!0,a=!1){const c=t4(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return AM(h,e),EM(h,n),SM(h,o),TM(h,r),new CM(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function RM(...t){const e=IM();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(dv())return new Blob(t);throw new $t(Ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function DM(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xM(t){if(typeof atob>"u")throw mM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sp{constructor(e,n){this.data=e,this.contentType=n||null}}function n4(t,e){switch(t){case Ur.RAW:return new sp(r4(e));case Ur.BASE64:case Ur.BASE64URL:return new sp(s4(t,e));case Ur.DATA_URL:return new sp(MM(e),NM(e))}throw cv()}function r4(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,i=t.charCodeAt(++n);r=65536|(o&1023)<<10|i&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function LM(t){let e;try{e=decodeURIComponent(t)}catch{throw ic(Ur.DATA_URL,"Malformed data URL.")}return r4(e)}function s4(t,e){switch(t){case Ur.BASE64:{const s=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(s||o)throw ic(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ur.BASE64URL:{const s=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(s||o)throw ic(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xM(e)}catch(s){throw s.message.includes("polyfill")?s:ic(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class o4{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ic(Ur.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=OM(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function MM(t){const e=new o4(t);return e.base64?s4(Ur.BASE64,e.rest):LM(e.rest)}function NM(t){return new o4(t).contentType}function OM(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e,n){let r=0,s="";v2(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(v2(this.data_)){const r=this.data_,s=DM(r,e,n);return s===null?null:new $s(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new $s(r,!0)}}static getBlob(...e){if(dv()){const n=e.map(r=>r instanceof $s?r.data_:r);return new $s(RM.apply(null,n))}else{const n=e.map(i=>uv(i)?n4(Ur.RAW,i).data:i.data_);let r=0;n.forEach(i=>{r+=i.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(i=>{for(let a=0;a<i.length;a++)s[o++]=i[a]}),new $s(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i4(t){let e;try{e=JSON.parse(t)}catch{return null}return kM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function VM(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function a4(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t,e){return e}class jn{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||jM}}let Fu=null;function UM(t){return!uv(t)||t.length<2?t:a4(t)}function l4(){if(Fu)return Fu;const t=[];t.push(new jn("bucket")),t.push(new jn("generation")),t.push(new jn("metageneration")),t.push(new jn("name","fullPath",!0));function e(o,i){return UM(i)}const n=new jn("name");n.xform=e,t.push(n);function r(o,i){return i!==void 0?Number(i):i}const s=new jn("size");return s.xform=r,t.push(s),t.push(new jn("timeCreated")),t.push(new jn("updated")),t.push(new jn("md5Hash",null,!0)),t.push(new jn("cacheControl",null,!0)),t.push(new jn("contentDisposition",null,!0)),t.push(new jn("contentEncoding",null,!0)),t.push(new jn("contentLanguage",null,!0)),t.push(new jn("contentType",null,!0)),t.push(new jn("metadata","customMetadata",!0)),Fu=t,Fu}function FM(t,e){function n(){const r=t.bucket,s=t.fullPath,o=new Jn(r,s);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function BM(t,e,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const i=n[o];r[i.local]=i.xform(r,e[i.server])}return FM(r,t),r}function c4(t,e,n){const r=i4(e);return r===null?null:BM(t,r,n)}function qM(t,e,n,r){const s=i4(e);if(s===null||!uv(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const i=encodeURIComponent;return o.split(",").map(u=>{const h=t.bucket,f=t.fullPath,p="/b/"+i(h)+"/o/"+i(f),g=sf(p,n,r),C=t4({alt:"media",token:u});return g+C})[0]}function HM(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const o=e[s];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class hv{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u4(t){if(!t)throw cv()}function zM(t,e){function n(r,s){const o=c4(t,s,e);return u4(o!==null),o}return n}function WM(t,e){function n(r,s){const o=c4(t,s,e);return u4(o!==null),qM(o,s,t.host,t._protocol)}return n}function d4(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=aM():s=iM():n.getStatus()===402?s=oM(t.bucket):n.getStatus()===403?s=lM(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function h4(t){const e=d4(t);function n(r,s){let o=e(r,s);return r.getStatus()===404&&(o=sM(t.path)),o.serverResponse=s.serverResponse,o}return n}function GM(t,e,n){const r=e.fullServerUrl(),s=sf(r,t.host,t._protocol),o="GET",i=t.maxOperationRetryTime,a=new hv(s,o,WM(t,n),i);return a.errorHandler=h4(e),a}function KM(t,e){const n=e.fullServerUrl(),r=sf(n,t.host,t._protocol),s="DELETE",o=t.maxOperationRetryTime;function i(c,u){}const a=new hv(r,s,i,o);return a.successCodes=[200,204],a.errorHandler=h4(e),a}function QM(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function YM(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=QM(null,e)),r}function ZM(t,e,n,r,s){const o=e.bucketOnlyServerUrl(),i={"X-Goog-Upload-Protocol":"multipart"};function a(){let x="";for(let R=0;R<2;R++)x=x+Math.random().toString().slice(2);return x}const c=a();i["Content-Type"]="multipart/related; boundary="+c;const u=YM(e,r,s),h=HM(u,n),f="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,p=`\r
--`+c+"--",g=$s.getBlob(f,r,p);if(g===null)throw pM();const C={name:u.fullPath},T=sf(o,t.host,t._protocol),v="POST",_=t.maxUploadRetryTime,S=new hv(T,v,zM(t,n),_);return S.urlParams=C,S.headers=i,S.body=g.uploadData(),S.errorHandler=d4(e),S}class JM{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ki.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ki.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ki.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,o){if(this.sent_)throw Al("cannot .send() more than once");if(eo(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const i in o)o.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,o[i].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Al("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Al("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Al("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Al("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XM extends JM{initXhr(){this.xhr_.responseType="text"}}function fv(){return new XM}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this._service=e,n instanceof Jn?this._location=n:this._location=Jn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Li(e,n)}get root(){const e=new Jn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return a4(this._location.path)}get storage(){return this._service}get parent(){const e=$M(this._location.path);if(e===null)return null;const n=new Jn(this._location.bucket,e);return new Li(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw e4(e)}}function e8(t,e,n){t._throwIfRoot("uploadBytes");const r=ZM(t.storage,t._location,l4(),new $s(e,!0),n);return t.storage.makeRequestWithTokens(r,fv).then(s=>({metadata:s,ref:t}))}function t8(t){t._throwIfRoot("getDownloadURL");const e=GM(t.storage,t._location,l4());return t.storage.makeRequestWithTokens(e,fv).then(n=>{if(n===null)throw gM();return n})}function n8(t){t._throwIfRoot("deleteObject");const e=KM(t.storage,t._location);return t.storage.makeRequestWithTokens(e,fv)}function r8(t,e){const n=VM(t._location.path,e),r=new Jn(t._location.bucket,n);return new Li(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(t){return/^[A-Za-z]+:\/\//.test(t)}function o8(t,e){return new Li(t,e)}function f4(t,e){if(t instanceof pv){const n=t;if(n._bucket==null)throw fM();const r=new Li(n,n._bucket);return e!=null?f4(r,e):r}else return e!==void 0?r8(t,e):t}function i8(t,e){if(e&&s8(e)){if(t instanceof pv)return o8(t,e);throw eh("To use ref(service, url), the first argument must be a Storage instance.")}else return f4(t,e)}function y2(t,e){const n=e?.[JE];return n==null?null:Jn.makeFromBucketSpec(n,t)}function a8(t,e,n,r={}){t.host=`${e}:${n}`;const s=eo(e);s&&(Ah(`https://${t.host}/b`),Th("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:Kk(o,t.app.options.projectId))}class pv{constructor(e,n,r,s,o,i=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._isUsingEmulator=i,this._bucket=null,this._host=ZE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nM,this._maxUploadRetryTime=rM,this._requests=new Set,s!=null?this._bucket=Jn.makeFromBucketSpec(s,this._host):this._bucket=y2(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Jn.makeFromBucketSpec(this._url,e):this._bucket=y2(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){w2("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){w2("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Li(this,e)}_makeRequest(e,n,r,s,o=!0){if(this._deleted)return new vM(XE());{const i=PM(e,this._appId,r,s,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const _2="@firebase/storage",k2="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p4="storage";function g4(t,e,n){return t=Ue(t),e8(t,e,n)}function gv(t){return t=Ue(t),t8(t)}function m4(t){return t=Ue(t),n8(t)}function th(t,e){return t=Ue(t),i8(t,e)}function mg(t=qc(),e){t=Ue(t);const r=Ka(t,p4).getImmediate({identifier:e}),s=am("storage");return s&&v4(r,...s),r}function v4(t,e,n,r={}){a8(t,e,n,r)}function l8(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new pv(n,r,s,e,Ho)}function c8(){Ys(new Ks(p4,l8,"PUBLIC").setMultipleInstances(!0)),pr(_2,k2,""),pr(_2,k2,"esm2017")}c8();const u8=Object.freeze(Object.defineProperty({__proto__:null,StorageError:$t,get StorageErrorCode(){return Ot},StringFormat:Ur,_FbsBlob:$s,_Location:Jn,_dataFromString:n4,_invalidArgument:eh,_invalidRootOperation:e4,connectStorageEmulator:v4,deleteObject:m4,getDownloadURL:gv,getStorage:mg,ref:th,uploadBytes:g4},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8="type.googleapis.com/google.protobuf.Int64Value",h8="type.googleapis.com/google.protobuf.UInt64Value";function w4(t,e){const n={};for(const r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}function nh(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>nh(e));if(typeof t=="function"||typeof t=="object")return w4(t,e=>nh(e));throw new Error("Data cannot be encoded in JSON: "+t)}function $a(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case d8:case h8:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>$a(e)):typeof t=="function"||typeof t=="object"?w4(t,e=>$a(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xn extends Dr{constructor(e,n,r){super(`${mv}/${e}`,n||""),this.details=r,Object.setPrototypeOf(this,Xn.prototype)}}function f8(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function rh(t,e){let n=f8(t),r=n,s;try{const o=e&&e.error;if(o){const i=o.status;if(typeof i=="string"){if(!b2[i])return new Xn("internal","internal");n=b2[i],r=i}const a=o.message;typeof a=="string"&&(r=a),s=o.details,s!==void 0&&(s=$a(s))}}catch{}return n==="ok"?null:new Xn(n,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e,n,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,jt(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=n.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||n.get().then(o=>this.auth=o,()=>{}),this.messaging||r.get().then(o=>this.messaging=o,()=>{}),this.appCheck||s?.get().then(o=>this.appCheck=o,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg="us-central1",g8=/^data: (.*?)(?:\n|$)/;function m8(t){let e=null;return{promise:new Promise((n,r)=>{e=setTimeout(()=>{r(new Xn("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class v8{constructor(e,n,r,s,o=vg,i=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=i,this.emulatorOrigin=null,this.contextProvider=new p8(e,n,r,s),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{const a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=vg}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function w8(t,e,n){const r=eo(e);t.emulatorOrigin=`http${r?"s":""}://${e}:${n}`,r&&(Ah(t.emulatorOrigin),Th("Functions",!0))}function y8(t,e,n){const r=s=>k8(t,e,s,n||{});return r.stream=(s,o)=>C8(t,e,s,o),r}async function _8(t,e,n,r){n["Content-Type"]="application/json";let s;try{s=await r(t,{method:"POST",body:JSON.stringify(e),headers:n})}catch{return{status:0,json:null}}let o=null;try{o=await s.json()}catch{}return{status:s.status,json:o}}async function y4(t,e){const n={},r=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(n.Authorization="Bearer "+r.authToken),r.messagingToken&&(n["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(n["X-Firebase-AppCheck"]=r.appCheckToken),n}function k8(t,e,n,r){const s=t._url(e);return b8(t,s,n,r)}async function b8(t,e,n,r){n=nh(n);const s={data:n},o=await y4(t,r),i=r.timeout||7e4,a=m8(i),c=await Promise.race([_8(e,s,o,t.fetchImpl),a.promise,t.cancelAllRequests]);if(a.cancel(),!c)throw new Xn("cancelled","Firebase Functions instance was deleted.");const u=rh(c.status,c.json);if(u)throw u;if(!c.json)throw new Xn("internal","Response is not valid JSON object.");let h=c.json.data;if(typeof h>"u"&&(h=c.json.result),typeof h>"u")throw new Xn("internal","Response is missing data field.");return{data:$a(h)}}function C8(t,e,n,r){const s=t._url(e);return E8(t,s,n,r||{})}async function E8(t,e,n,r){var s;n=nh(n);const o={data:n},i=await y4(t,r);i["Content-Type"]="application/json",i.Accept="text/event-stream";let a;try{a=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(o),headers:i,signal:r?.signal})}catch(g){if(g instanceof Error&&g.name==="AbortError"){const T=new Xn("cancelled","Request was cancelled.");return{data:Promise.reject(T),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(T)}}}}}}const C=rh(0,null);return{data:Promise.reject(C),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(C)}}}}}}let c,u;const h=new Promise((g,C)=>{c=g,u=C});(s=r?.signal)===null||s===void 0||s.addEventListener("abort",()=>{const g=new Xn("cancelled","Request was cancelled.");u(g)});const f=a.body.getReader(),p=S8(f,c,u,r?.signal);return{stream:{[Symbol.asyncIterator](){const g=p.getReader();return{async next(){const{value:C,done:T}=await g.read();return{value:C,done:T}},async return(){return await g.cancel(),{done:!0,value:void 0}}}}},data:h}}function S8(t,e,n,r){const s=(i,a)=>{const c=i.match(g8);if(!c)return;const u=c[1];try{const h=JSON.parse(u);if("result"in h){e($a(h.result));return}if("message"in h){a.enqueue($a(h.message));return}if("error"in h){const f=rh(0,h);a.error(f),n(f);return}}catch(h){if(h instanceof Xn){a.error(h),n(h);return}}},o=new TextDecoder;return new ReadableStream({start(i){let a="";return c();async function c(){if(r?.aborted){const u=new Xn("cancelled","Request was cancelled");return i.error(u),n(u),Promise.resolve()}try{const{value:u,done:h}=await t.read();if(h){a.trim()&&s(a.trim(),i),i.close();return}if(r?.aborted){const p=new Xn("cancelled","Request was cancelled");i.error(p),n(p),await t.cancel();return}a+=o.decode(u,{stream:!0});const f=a.split(`
`);a=f.pop()||"";for(const p of f)p.trim()&&s(p.trim(),i);return c()}catch(u){const h=u instanceof Xn?u:rh(0,null);i.error(h),n(h)}}},cancel(){return t.cancel()}})}const C2="@firebase/functions",E2="0.12.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8="auth-internal",T8="app-check-internal",P8="messaging-internal";function I8(t){const e=(n,{instanceIdentifier:r})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider(A8),i=n.getProvider(P8),a=n.getProvider(T8);return new v8(s,o,i,a,r)};Ys(new Ks(mv,e,"PUBLIC").setMultipleInstances(!0)),pr(C2,E2,t),pr(C2,E2,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t=qc(),e=vg){const r=Ka(Ue(t),mv).getImmediate({identifier:e}),s=am("functions");return s&&R8(r,...s),r}function R8(t,e,n){w8(Ue(t),e,n)}function D8(t,e,n){return y8(Ue(t),e,n)}I8();class x8{constructor(){this.metrics=new Map,this.startTimes=new Map,this.isEnabled=!0}startTimer(e){this.isEnabled&&(this.startTimes.set(e,performance.now()),console.log(`⏱️ Performance: Started timing "${e}"`))}endTimer(e){if(!this.isEnabled)return;const n=this.startTimes.get(e);if(!n){console.warn(`⏱️ Performance: No start time found for "${e}"`);return}const s=performance.now()-n;this.metrics.has(e)||this.metrics.set(e,[]);const o=this.metrics.get(e);return o.push({timestamp:Date.now(),duration:s,date:new Date().toISOString()}),o.length>100&&o.shift(),console.log(`⏱️ Performance: "${e}" took ${s.toFixed(2)}ms`),this.startTimes.delete(e),s}getAverageTime(e){const n=this.metrics.get(e);return!n||n.length===0?null:n.reduce((s,o)=>s+o.duration,0)/n.length}getAllMetrics(){const e={};for(const[n,r]of this.metrics.entries())e[n]={count:r.length,average:this.getAverageTime(n),latest:r.length>0?r[r.length-1]:null,all:r};return e}getPerformanceSummary(){const e={totalOperations:0,slowOperations:[],fastOperations:[],averageTimes:{}};for(const[n,r]of this.metrics.entries())if(r.length>0){const s=this.getAverageTime(n);e.totalOperations+=r.length,e.averageTimes[n]=s,s>1e3?e.slowOperations.push({operation:n,average:s}):s<100&&e.fastOperations.push({operation:n,average:s})}return e.slowOperations.sort((n,r)=>r.average-n.average),e.fastOperations.sort((n,r)=>n.average-r.average),e}clearMetrics(){this.metrics.clear(),this.startTimes.clear(),console.log("⏱️ Performance: All metrics cleared")}setEnabled(e){this.isEnabled=e,console.log(`⏱️ Performance: Monitoring ${e?"enabled":"disabled"}`)}async timeOperation(e,n){this.startTimer(e);try{const r=await n();return this.endTimer(e),r}catch(r){throw this.endTimer(e),r}}timeSyncOperation(e,n){this.startTimer(e);try{const r=n();return this.endTimer(e),r}catch(r){throw this.endTimer(e),r}}logSummary(){const e=this.getPerformanceSummary();console.group("⏱️ Performance Summary"),console.log(`Total operations tracked: ${e.totalOperations}`),e.slowOperations.length>0&&(console.group("🐌 Slow Operations (>1s)"),e.slowOperations.forEach(n=>{console.log(`${n.operation}: ${n.average.toFixed(2)}ms average`)}),console.groupEnd()),e.fastOperations.length>0&&(console.group("⚡ Fast Operations (<100ms)"),e.fastOperations.forEach(n=>{console.log(`${n.operation}: ${n.average.toFixed(2)}ms average`)}),console.groupEnd()),console.groupEnd()}}const Xe=new x8;class L8{handleFirestoreError(e,n=""){console.error(`Firestore Error${n?` in ${n}`:""}:`,e);const r=e.code||"unknown",s=e.message||"An unknown error occurred";console.error("Error details:",{code:r,message:s,context:n,timestamp:new Date().toISOString()});let o=this.getUserFriendlyMessage(r,s);return console.error("User-friendly error message:",o),{code:r,message:s,userMessage:o,timestamp:new Date().toISOString()}}handleAuthError(e,n=""){console.error(`Auth Error${n?` in ${n}`:""}:`,e);const r=e.code||"unknown",s=e.message||"Authentication failed";let o=this.getAuthErrorMessage(r,s);return console.error("Auth error message:",o),{code:r,message:s,userMessage:o}}handleNetworkError(e,n=""){console.error(`Network Error${n?` in ${n}`:""}:`,e);const r="Network error. Please check your connection and try again.";return console.error("Network error message:",r),{code:"network-error",message:"Network connection failed",userMessage:r}}getUserFriendlyMessage(e){switch(e){case"invalid-argument":return"Invalid request. Please try again or contact support if the problem persists.";case"not-found":return"The requested data was not found.";case"permission-denied":return"You do not have permission to access this data.";case"unauthenticated":return"You need to sign in to access this data.";case"unavailable":return"Service temporarily unavailable. Please try again later.";case"resource-exhausted":return"Service is temporarily overloaded. Please try again in a moment.";case"failed-precondition":return"Request failed due to a precondition. Please try again.";case"aborted":return"Request was cancelled. Please try again.";case"out-of-range":return"Request is out of range. Please check your input.";case"data-loss":return"Data corruption detected. Please contact support.";case"deadline-exceeded":return"Request timed out. Please try again.";case"already-exists":return"This item already exists.";case"cancelled":return"Operation was cancelled.";case"internal":return"An internal error occurred. Please try again later.";case"unimplemented":return"This feature is not available on your device.";default:return"An error occurred. Please try again or contact support if the problem persists."}}getAuthErrorMessage(e){switch(e){case"auth/user-not-found":return"No account found with this email address.";case"auth/wrong-password":return"Incorrect password. Please try again.";case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/weak-password":return"Password is too weak. Please choose a stronger password.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/too-many-requests":return"Too many failed attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Please check your connection.";case"auth/user-disabled":return"This account has been disabled. Please contact support.";case"auth/requires-recent-login":return"Please sign in again to continue.";case"auth/invalid-credential":return"Invalid credentials. Please check your email and password.";default:return"Authentication failed. Please try again."}}handleGenericError(e,n=""){console.error(`Generic Error${n?` in ${n}`:""}:`,e);const r=e.message||"An unexpected error occurred",s="Something went wrong. Please try again.";return console.error("Generic error message:",s),{code:"generic-error",message:r,userMessage:s}}async withErrorHandling(e,n="",r="generic"){try{return await e()}catch(s){switch(r){case"firestore":return this.handleFirestoreError(s,n);case"auth":return this.handleAuthError(s,n);case"network":return this.handleNetworkError(s,n);default:return this.handleGenericError(s,n)}}}}const Ke=new L8,M8={apiKey:"AIzaSyAur1VKqvq2qAMl5qPfkpcu0nqD53VD4Lg",authDomain:"clixsys-4d367.firebaseapp.com",projectId:"clixsys-4d367",storageBucket:"clixsys-4d367.firebasestorage.app",messagingSenderId:"775251400128",appId:"1:775251400128:web:2fe2decdd9c49ef39a6425",measurementId:"G-XZX0B7TMSR"},sh=Ht.isNativePlatform(),Ic=Ht.getPlatform(),ra="smartMirrorApp";console.log("Smart Mirror Firebase Boot: Platform detected:",Ic,"Native:",sh,"App name:",ra);let wr,_n,Bt;const N8=()=>{const e=Xk().find(n=>n.name===ra);if(e?(console.log("Smart Mirror Firebase Boot: Using existing app instance:",ra),wr=e):(console.log("Smart Mirror Firebase Boot: Creating new app instance:",ra),wr=Ph(M8,ra)),sh){console.log(`Smart Mirror Firebase Boot: ${Ic} - Initializing Web SDK Auth with persistence`);try{_n=vm(wr,{persistence:Cm})}catch(n){console.log("Smart Mirror Firebase Boot: Auth already initialized, using existing instance"),console.log("Smart Mirror Firebase Boot: Init error (expected):",n.message),_n=lr(wr)}}else _n=lr(wr);return Bt=Jd(wr),console.log("✅ Smart Mirror Firebase services initialized:",{platform:Ic,isNative:sh,appName:ra,projectId:wr.options.projectId,authDomain:wr.options.authDomain,authInitialized:!!_n,dbInitialized:!!Bt}),{smartMirrorApp:wr,smartMirrorAuth:_n,smartMirrorDb:Bt}},{smartMirrorApp:O8,smartMirrorAuth:$8,smartMirrorDb:V8}=N8();wr=O8;_n=$8;Bt=V8;const j8=Uk(async({app:t})=>{sh&&(console.log(`Smart Mirror Firebase Boot: ${Ic} detected - stabilizing services...`),await new Promise(e=>setTimeout(e,300)),console.log(`Smart Mirror Firebase Boot: ${Ic} services stable ✅`)),t.config.globalProperties.$smartMirrorAuth=_n,t.config.globalProperties.$smartMirrorDb=Bt,t.config.globalProperties.$smartMirrorApp=wr,console.log("Smart Mirror Firebase Boot: Global properties set ✅"),console.log("Smart Mirror Firebase Boot: Ready for authentication requests")}),U8=Object.freeze(Object.defineProperty({__proto__:null,default:j8,get smartMirrorApp(){return wr},get smartMirrorAuth(){return _n},get smartMirrorDb(){return Bt}},Symbol.toStringTag,{value:"Module"}));class F8{constructor(){this.currentUser=null,this.userProfile=null,this.rooms=[],this.devices=[],this.isConnected=!1,this.currentProjectId=null,this.listeners=[],this.projectConnections=new Map,this.onDevicesUpdate=null,this.preUserId=null}setPreUserId(e){console.log("🔐 Smart Mirror Service: Setting PRE user context:",e),this.preUserId&&this.preUserId!==e&&(console.log("🔄 Smart Mirror Service: Different PRE user detected, clearing Smart Mirror connections"),this.logout()),this.preUserId=e,this.cleanupLegacyStorage(),e&&this.restoreProjectConnections()}cleanupLegacyStorage(){try{const e="smartMirrorProjectConnections";localStorage.getItem(e)&&(console.log("🧹 Smart Mirror Service: Removing legacy non-namespaced data"),localStorage.removeItem(e))}catch(e){console.error("Error cleaning up legacy storage:",e)}}clearPreUserId(){console.log("🚪 Smart Mirror Service: Clearing PRE user context");const e=this.preUserId;this.preUserId=null,this.logout(),console.log(`✅ Smart Mirror Service: Cleared context for PRE user: ${e}`)}getStorageKey(){return this.preUserId?`smartMirrorProjectConnections_${this.preUserId}`:"smartMirrorProjectConnections"}async login(e,n,r){return Xe.timeOperation("smartMirrorLogin",async()=>{try{console.log("🚀 Smart mirror login:",{projectId:r,email:e}),console.log("📍 Step 1: Checking auth instance:",{authExists:!!_n,authApp:_n?.app?.name,authProjectId:_n?.app?.options?.projectId}),console.log("📍 Step 2: Attempting signInWithEmailAndPassword...");const s=ym(_n,e,n),o=new Promise((h,f)=>setTimeout(()=>f(new Error("Authentication timeout after 15 seconds")),15e3)),i=await Promise.race([s,o]);console.log("✅ Step 2 complete: Sign in successful",{uid:i.user.uid}),console.log("📍 Step 3: Fetching user profile...");const a=await this.fetchUserProfileForUser(i.user);console.log("✅ Step 3 complete: User profile fetched"),console.log("📍 Step 4: Fetching devices...");const{rooms:c,devices:u}=await this.fetchDevicesForUser(i.user);return console.log("✅ Step 4 complete: Devices fetched",{roomCount:c.length,deviceCount:u.length}),this.projectConnections.set(r,{user:i.user,userProfile:a,rooms:c,devices:u,isConnected:!0,projectId:r,email:e,password:n,lastUpdated:Date.now()}),this.saveProjectConnections(),this.currentProjectId=r,this.currentUser=i.user,this.userProfile=a,this.rooms=c,this.devices=u,this.isConnected=!0,this.setupRealtimeListeners(),console.log(`✅ Successfully connected project ${r} to smart home account ${e}`),{success:!0,user:i.user}}catch(s){throw console.error("❌ Smart Mirror login error:",s),console.error("❌ Error details:",{code:s.code,message:s.message,name:s.name}),Ke.handleFirestoreError(s,"smartMirrorLogin"),s}})}async logout(e=null){try{return e?(this.projectConnections.delete(e),this.saveProjectConnections(),this.currentProjectId===e&&(this.currentUser=null,this.userProfile=null,this.rooms=[],this.devices=[],this.isConnected=!1,this.currentProjectId=null,this.cleanup())):(await Qc(_n),this.currentUser=null,this.userProfile=null,this.rooms=[],this.devices=[],this.isConnected=!1,this.currentProjectId=null,this.projectConnections.clear(),this.cleanup(),localStorage.removeItem(this.getStorageKey())),{success:!0}}catch(n){throw console.error("Smart Mirror logout error:",n),n}}async switchToProject(e){try{const n=this.projectConnections.get(e);if(this.cleanup(),n){const r=_n.currentUser?.email,s=n.email;return r!==s&&(console.log(`Switching from ${r} to ${s} for project ${e}`),console.log(`Using stored data for project ${e} - no re-authentication needed`)),this.currentUser=n.user,this.userProfile=n.userProfile,this.rooms=n.rooms,this.devices=n.devices,this.isConnected=n.isConnected,this.currentProjectId=e,console.log(`Switched to project ${e} - using user UID: ${this.currentUser.uid}`),this.setupRealtimeListeners(),console.log(`Switched to project ${e} - Smart Home connected with real-time updates`),{success:!0}}else return this.currentUser=null,this.userProfile=null,this.rooms=[],this.devices=[],this.isConnected=!1,this.currentProjectId=e,console.log(`Switched to project ${e} - no Smart Home connection, cleared data`),{success:!0}}catch(n){return console.error("Error switching to project:",n),{success:!1,error:n.message}}}isProjectConnected(e){const n=this.projectConnections.get(e);return n&&n.isConnected&&n.devices&&n.devices.length>0}async reAuthenticateForProject(e){const n=this.projectConnections.get(e);throw!n||!n.email?new Error("No stored credentials found for this project"):new Error("Please re-enter your password to switch to this project")}getProjectConnectionStatus(e){const n=this.projectConnections.get(e);return n?{isConnected:n.isConnected,hasUser:!!n.user,hasProfile:!!n.userProfile,roomsCount:n.rooms.length,devicesCount:n.devices.length}:{isConnected:!1,hasUser:!1,hasProfile:!1,roomsCount:0,devicesCount:0}}getProjectDevices(e){const n=this.projectConnections.get(e);return n&&n.isConnected?{rooms:n.rooms||[],devices:n.devices||[],userProfile:n.userProfile}:{rooms:[],devices:[],userProfile:null}}updateProjectDevices(e,n,r){const s=this.projectConnections.get(e);s&&(s.rooms=n,s.devices=r,s.lastUpdated=Date.now(),this.projectConnections.set(e,s),this.saveProjectConnections())}setupAuthListener(){return Kc(_n,async e=>{if(e){this.currentUser=e,await this.fetchUserProfile(),await this.fetchDevices(),this.isConnected=!0,await this.restoreProjectConnections();const n=localStorage.getItem("selectedProjectId");n&&this.projectConnections.has(n)&&await this.switchToProject(n)}else this.currentUser=null,this.userProfile=null,this.rooms=[],this.devices=[],this.isConnected=!1,this.currentProjectId=null,this.projectConnections.clear(),this.cleanup()})}async initializeApp(){try{if(this.setupAuthListener(),_n.currentUser){this.currentUser=_n.currentUser,await this.fetchUserProfile(),this.isConnected=!0,await this.restoreProjectConnections();const e=localStorage.getItem("selectedProjectId");e&&this.projectConnections.has(e)&&await this.switchToProject(e)}}catch(e){console.error("Error initializing Smart Mirror app:",e)}}async restoreProjectConnections(){try{if(!this.preUserId){console.log("⚠️ Smart Mirror Service: Cannot restore connections - no PRE user ID set");return}const e=this.getStorageKey(),n=localStorage.getItem(e);if(console.log(`Restoring project connections from localStorage (key: ${e}):`,n),n){const r=JSON.parse(n);console.log("Parsed connections:",r);for(const[s,o]of Object.entries(r))o.isConnected&&(this.projectConnections.set(s,{user:{uid:o.userId},userProfile:o.userProfile,rooms:o.rooms||[],devices:o.devices||[],isConnected:!0,email:o.email,password:o.password,projectId:s}),console.log(`Restored connection for project ${s} with email ${o.email}`))}console.log("Final projectConnections:",Array.from(this.projectConnections.keys()))}catch(e){console.error("Error restoring project connections:",e)}}saveProjectConnections(){try{if(!this.preUserId){console.log("⚠️ Smart Mirror Service: Cannot save connections - no PRE user ID set");return}const e={};for(const[r,s]of this.projectConnections.entries())s.isConnected&&(e[r]={isConnected:!0,userId:s.user?.uid,userProfile:s.userProfile,rooms:s.rooms,devices:s.devices,email:s.email,password:s.password,lastUpdated:Date.now()});const n=this.getStorageKey();console.log(`💾 Saving project connections to localStorage (key: ${n}, PRE user: ${this.preUserId})`),localStorage.setItem(n,JSON.stringify(e))}catch(e){console.error("Error saving project connections:",e)}}updateProjectConnection(){if(this.currentProjectId&&this.projectConnections.has(this.currentProjectId)){const e=this.projectConnections.get(this.currentProjectId);e.rooms=this.rooms,e.devices=this.devices,this.projectConnections.set(this.currentProjectId,e),this.saveProjectConnections()}}setDevicesUpdateCallback(e){this.onDevicesUpdate=e}async fetchUserProfile(){if(!this.currentUser)return null;try{const e=await As(Lt(Bt,"users",this.currentUser.uid));if(e.exists()){if(this.userProfile=e.data(),!this.userProfile.approved&&this.userProfile.role!=="admin")throw new Error("User account is not approved");return this.userProfile}else throw new Error("User profile not found")}catch(e){throw console.error("Error fetching user profile:",e),e}}async fetchUserProfileForUser(e){if(!e)return null;try{const n=await As(Lt(Bt,"users",e.uid));if(n.exists()){const r=n.data();if(!r.approved&&r.role!=="admin")throw new Error("User account is not approved");return r}else throw new Error("User profile not found")}catch(n){throw console.error("Error fetching user profile for user:",n),n}}async fetchDevices(){if(!this.currentUser)return[];try{const e=_o(yr(Bt,"users",this.currentUser.uid,"rooms")),n=await Is(e),r=[],s=[];for(const o of n.docs){const i={...o.data(),id:o.id,devices:[]};console.log("Room data:",i),console.log("Room name field:",i.name),console.log("Room title field:",i.title),console.log("Room displayName field:",i.displayName);const a=_o(yr(Bt,"users",this.currentUser.uid,"rooms",o.id,"devices")),c=await Is(a);i.devices=c.docs.map(u=>({id:u.id,roomId:o.id,roomName:i.name||i.roomName||i.title||i.displayName||"Unknown Room",...u.data()})),s.push(...i.devices),r.push(i)}return this.rooms=r,this.devices=s,{rooms:r,devices:s}}catch(e){throw console.error("Error fetching devices:",e),e}}async fetchDevicesForUser(e){if(!e)return{rooms:[],devices:[]};try{console.log("Fetching devices for user:",e.uid);const n=_o(yr(Bt,"users",e.uid,"rooms")),r=await Is(n),s=[],o=[];for(const i of r.docs){const a={...i.data(),id:i.id,devices:[]};console.log("Room data for user",e.uid,":",a);const c=_o(yr(Bt,"users",e.uid,"rooms",i.id,"devices")),u=await Is(c);a.devices=u.docs.map(h=>({id:h.id,roomId:i.id,roomName:a.name||a.roomName||a.title||a.displayName||"Unknown Room",...h.data()})),o.push(...a.devices),s.push(a)}return console.log("Fetched devices for user",e.uid,":",o.length),console.log("Fetched rooms for user",e.uid,":",s.length),{rooms:s,devices:o}}catch(n){throw console.error("Error fetching devices for user:",n),n}}setupRealtimeListeners(){if(!this.currentUser)return;this.cleanup();const e=yr(Bt,"users",this.currentUser.uid,"rooms"),n=la(e,async r=>{const s=[];for(const o of r.docs){const i={...o.data(),id:o.id,devices:[]};console.log("Real-time room data for project",this.currentProjectId,":",i);const a=yr(Bt,"users",this.currentUser.uid,"rooms",o.id,"devices"),c=_o(a),u=await Is(c);i.devices=u.docs.map(f=>({id:f.id,roomId:o.id,roomName:i.name||i.roomName||i.title||i.displayName||"Unknown Room",...f.data()}));const h=la(a,f=>{const p=f.docs.map(C=>({id:C.id,roomId:o.id,roomName:i.name||i.roomName||i.title||i.displayName||"Unknown Room",...C.data()})),g=this.rooms.findIndex(C=>C.id===o.id);g!==-1&&(this.rooms[g].devices=p,this.devices=this.rooms.flatMap(C=>C.devices||[]),this.updateProjectConnection(),this.currentProjectId&&this.updateProjectDevices(this.currentProjectId,this.rooms,this.devices),this.onDevicesUpdate&&this.onDevicesUpdate(this.rooms,this.devices,this.currentProjectId))},f=>{console.error(`Firebase listener error for room ${o.id}:`,f)});this.listeners.push(h),s.push(i)}this.rooms=s,this.devices=this.rooms.flatMap(o=>o.devices||[]),this.updateProjectConnection(),this.currentProjectId&&this.updateProjectDevices(this.currentProjectId,this.rooms,this.devices),this.onDevicesUpdate&&this.onDevicesUpdate(this.rooms,this.devices,this.currentProjectId)},r=>{console.error("Firebase listener error for rooms:",r)});this.listeners.push(n)}setupRealtimeListenersForProject(e){const n=this.projectConnections.get(e);if(!n||!n.user)return;this.cleanup();const r=yr(Bt,"users",n.user.uid,"rooms"),s=la(r,async o=>{const i=[];for(const a of o.docs){const c={...a.data(),id:a.id,devices:[]};console.log("Real-time room data for project",e,":",c);const u=yr(Bt,"users",n.user.uid,"rooms",a.id,"devices"),h=_o(u),f=await Is(h);c.devices=f.docs.map(g=>({id:g.id,roomId:a.id,roomName:c.name||c.roomName||c.title||c.displayName||"Unknown Room",...g.data()}));const p=la(u,g=>{const C=g.docs.map(v=>({id:v.id,roomId:a.id,roomName:c.name||c.roomName||c.title||c.displayName||"Unknown Room",...v.data()})),T=i.findIndex(v=>v.id===a.id);T!==-1&&(i[T].devices=C),n.rooms=i,n.devices=i.flatMap(v=>v.devices||[]),n.lastUpdated=Date.now(),this.projectConnections.set(e,n),this.onDevicesUpdate&&this.onDevicesUpdate(i,n.devices,e)});this.listeners.push(p),i.push(c)}n.rooms=i,n.devices=i.flatMap(a=>a.devices||[]),n.lastUpdated=Date.now(),this.projectConnections.set(e,n),this.onDevicesUpdate&&this.onDevicesUpdate(i,n.devices,e)});this.listeners.push(s)}async toggleLight(e,n,r){if(!this.currentProjectId)throw new Error("No project selected");const s=this.projectConnections.get(this.currentProjectId);if(!s||!s.user)throw new Error("No smart home connection for this project");try{const o=s.user.uid;console.log(`toggleLight: Using user UID ${o} for project ${this.currentProjectId}`);const i=Lt(Bt,"users",o,"rooms",e,"devices",n);return(await As(i)).exists()?(await Cr(i,{state:r}),this.updateLocalDeviceState(e,n,{state:r}),{success:!0}):(console.warn(`Device ${n} not found in room ${e}. Device may have been removed.`),this.updateLocalDeviceState(e,n,{state:r}),{success:!0,warning:"Device not found in database, updated locally only"})}catch(o){return console.error("Error toggling light:",o),this.updateLocalDeviceState(e,n,{state:r}),{success:!1,error:o.message}}}async setLightBrightness(e,n,r){if(!this.currentProjectId)throw new Error("No project selected");const s=this.projectConnections.get(this.currentProjectId);if(!s||!s.user)throw new Error("No smart home connection for this project");try{const o=s.user.uid;console.log(`setLightBrightness: Using user UID ${o} for project ${this.currentProjectId}`);const i=Lt(Bt,"users",o,"rooms",e,"devices",n);return(await As(i)).exists()?(await Cr(i,{brightness:r}),this.updateLocalDeviceState(e,n,{brightness:r}),{success:!0}):(console.warn(`Device ${n} not found in room ${e}. Device may have been removed.`),this.updateLocalDeviceState(e,n,{brightness:r}),{success:!0,warning:"Device not found in database, updated locally only"})}catch(o){return console.error("Error setting light brightness:",o),this.updateLocalDeviceState(e,n,{brightness:r}),{success:!1,error:o.message}}}async setClimateState(e,n,r){if(!this.currentProjectId)throw new Error("No project selected");const s=this.projectConnections.get(this.currentProjectId);if(!s||!s.user)throw new Error("No smart home connection for this project");try{const o=s.user.uid;console.log(`setClimateState: Using user UID ${o} for project ${this.currentProjectId}`);const i=Lt(Bt,"users",o,"rooms",e,"devices",n);return(await As(i)).exists()?(await Cr(i,{state:r}),this.updateLocalDeviceState(e,n,{state:r}),{success:!0}):(console.warn(`Device ${n} not found in room ${e}. Device may have been removed.`),this.updateLocalDeviceState(e,n,{state:r}),{success:!0,warning:"Device not found in database, updated locally only"})}catch(o){return console.error("Error setting climate state:",o),this.updateLocalDeviceState(e,n,{state:r}),{success:!1,error:o.message}}}async setClimateTemperature(e,n,r){if(!this.currentProjectId)throw new Error("No project selected");const s=this.projectConnections.get(this.currentProjectId);if(!s||!s.user)throw new Error("No smart home connection for this project");try{const o=s.user.uid;console.log(`setClimateTemperature: Using user UID ${o} for project ${this.currentProjectId}`);const i=Lt(Bt,"users",o,"rooms",e,"devices",n);return(await As(i)).exists()?(await Cr(i,{temperature:r}),this.updateLocalDeviceState(e,n,{temperature:r}),{success:!0}):(console.warn(`Device ${n} not found in room ${e}. Device may have been removed.`),this.updateLocalDeviceState(e,n,{temperature:r}),{success:!0,warning:"Device not found in database, updated locally only"})}catch(o){return console.error("Error setting climate temperature:",o),this.updateLocalDeviceState(e,n,{temperature:r}),{success:!1,error:o.message}}}async setClimateMode(e,n,r){if(!this.currentProjectId)throw new Error("No project selected");const s=this.projectConnections.get(this.currentProjectId);if(!s||!s.user)throw new Error("No smart home connection for this project");try{const o=s.user.uid;console.log(`setClimateMode: Using user UID ${o} for project ${this.currentProjectId}`);const i=Lt(Bt,"users",o,"rooms",e,"devices",n);return(await As(i)).exists()?(await Cr(i,{mode:r}),this.updateLocalDeviceState(e,n,{mode:r}),{success:!0}):(console.warn(`Device ${n} not found in room ${e}. Device may have been removed.`),this.updateLocalDeviceState(e,n,{mode:r}),{success:!0,warning:"Device not found in database, updated locally only"})}catch(o){return console.error("Error setting climate mode:",o),this.updateLocalDeviceState(e,n,{mode:r}),{success:!1,error:o.message}}}updateLocalDeviceState(e,n,r){if(!this.currentProjectId)return;const s=this.projectConnections.get(this.currentProjectId);if(!s)return;const o=s.rooms.findIndex(i=>i.id===e);if(o!==-1){const i=s.rooms[o].devices.findIndex(a=>a.id===n);i!==-1&&(s.rooms[o].devices[i]={...s.rooms[o].devices[i],...r},s.devices=s.rooms.flatMap(a=>a.devices||[]),this.rooms=s.rooms,this.devices=s.devices,this.saveProjectConnections())}}getDeviceById(e){for(const n of this.rooms){const r=n.devices.find(s=>s.id===e);if(r)return r}return null}getRoomById(e){return this.rooms.find(n=>n.id===e)}getDevicesByType(e){return this.devices.filter(n=>n.type===e)}getDevicesByRoom(e){const n=this.getRoomById(e);return n?n.devices:[]}cleanup(){this.listeners.forEach(e=>e()),this.listeners=[]}getConnectionStatus(){return{isConnected:this.isConnected,hasUser:!!this.currentUser,hasProfile:!!this.userProfile,roomsCount:this.rooms.length,devicesCount:this.devices.length}}}const Je=new F8,wg={apiKey:"AIzaSyB9kD9dw5DzEAys-kss-aSBqRGEuaT9A-0",authDomain:"pre-group.firebaseapp.com",projectId:"pre-group",storageBucket:"pre-group.firebasestorage.app",messagingSenderId:"871778209250",appId:"1:871778209250:web:79e726a4f5b5579bfc7dbb"},is=Ht.isNativePlatform(),ca=Ht.getPlatform();console.log("Firebase Boot: Platform detected:",ca,"Native:",is);console.log("Firebase Boot: Initializing Firebase app with config:",{projectId:wg.projectId,authDomain:wg.authDomain});const Es=Ph(wg);console.log("Firebase Boot: Firebase app initialized successfully ✅");let Le,rn,Hs,Rc,cu;cu=new os;cu.setCustomParameters({prompt:"select_account"});is?(console.log("Firebase Boot: Using Capacitor Firebase plugins for native platform"),Le=lr(Es),rn=Jd(Es),Hs=mg(Es),Rc=S2(Es),console.log("Firebase Boot: Web SDK instances created for native platform compatibility")):(console.log("Firebase Boot: Using Firebase Web SDK for web platform"),Le=lr(Es),rn=Jd(Es),Hs=mg(Es),Rc=S2(Es));if(Le)try{Vb(Le,_m),console.log("Firebase Boot: Authentication persistence set to local storage")}catch(t){console.error("Firebase Boot: Failed to set auth persistence:",t)}Le&&(Le.currentUser&&(console.log("Firebase Boot: PRE user already logged in (from persistence), syncing with Smart Mirror service:",Le.currentUser.uid),Je.setPreUserId(Le.currentUser.uid)),Kc(Le,t=>{t?(console.log("Firebase Boot: PRE user logged in, syncing with Smart Mirror service:",t.uid),Je.setPreUserId(t.uid)):(console.log("Firebase Boot: PRE user logged out, clearing Smart Mirror service"),Je.clearPreUserId())}));const B8=Uk(async({app:t})=>{if(console.log("Firebase Boot: Starting initialization...",{isNative:is,platform:ca}),console.log("Firebase Boot: Using Firebase Web SDK for all platforms (no Capacitor plugins)"),ca==="ios"&&is)try{console.log("Firebase Boot: iOS - Waiting for services to stabilize..."),await new Promise(e=>setTimeout(e,300)),Le.currentUser&&(console.log("Firebase Boot: iOS - User already logged in, syncing with Smart Mirror:",Le.currentUser.uid),Je.setPreUserId(Le.currentUser.uid)),console.log("Firebase Boot: iOS - Services ready",{auth:!!Le,db:!!rn,storage:!!Hs,currentUser:Le.currentUser?.uid||"none"})}catch(e){console.error("Firebase Boot: iOS initialization error:",e)}if(ca==="android"&&is)try{console.log("Firebase Boot: Android - Waiting for services to stabilize..."),await new Promise(e=>setTimeout(e,300)),Le.currentUser&&(console.log("Firebase Boot: Android - User already logged in, syncing with Smart Mirror:",Le.currentUser.uid),Je.setPreUserId(Le.currentUser.uid)),console.log("Firebase Boot: Android - Services ready",{auth:!!Le,db:!!rn,storage:!!Hs,currentUser:Le.currentUser?.uid||"none"})}catch(e){console.error("Firebase Boot: Android initialization error:",e)}t.config.globalProperties.$firebase=t,t.config.globalProperties.$auth=Le,t.config.globalProperties.$db=rn,t.config.globalProperties.$storage=Hs,t.config.globalProperties.$functions=Rc,t.config.globalProperties.$googleProvider=cu,t.config.globalProperties.$isNative=is,t.config.globalProperties.$platform=ca,console.log("Firebase Boot: Complete - Web SDK ready")}),of=Object.freeze(Object.defineProperty({__proto__:null,app:Es,get auth(){return Le},get db(){return rn},default:B8,get functions(){return Rc},get googleProvider(){return cu},isNative:is,platform:ca,get storage(){return Hs}},Symbol.toStringTag,{value:"Module"}));class q8{constructor(){this.cache=new Map,this.defaultTTL=300*1e3,this.maxCacheSize=100}generateKey(e,n=null){return n?`${e}?${JSON.stringify(n)}`:e}set(e,n,r=this.defaultTTL){if(this.cache.size>=this.maxCacheSize){const o=this.cache.keys().next().value;this.cache.delete(o)}const s=Date.now()+r;this.cache.set(e,{data:n,expiresAt:s,createdAt:Date.now()}),console.log(`🗄️ Cache set: ${e} (expires in ${r}ms)`)}get(e){const n=this.cache.get(e);return n?Date.now()>n.expiresAt?(this.cache.delete(e),console.log(`🗄️ Cache expired: ${e}`),null):(console.log(`🗄️ Cache hit: ${e} (age: ${Date.now()-n.createdAt}ms)`),n.data):(console.log(`🗄️ Cache miss: ${e}`),null)}has(e){const n=this.cache.get(e);return n&&Date.now()<=n.expiresAt}delete(e){const n=this.cache.delete(e);return n&&console.log(`🗄️ Cache deleted: ${e}`),n}clear(){this.cache.clear(),console.log("🗄️ Cache cleared")}getStats(){const e=Date.now();let n=0,r=0;for(const[,s]of this.cache.entries())e<=s.expiresAt?n++:r++;return{total:this.cache.size,valid:n,expired:r,maxSize:this.maxCacheSize}}cleanup(){const e=Date.now();let n=0;for(const[r,s]of this.cache.entries())e>s.expiresAt&&(this.cache.delete(r),n++);return n>0&&console.log(`🗄️ Cache cleanup: removed ${n} expired items`),n}setUserDocument(e,n){const r=this.generateKey(`users/${e}`);this.set(r,n,600*1e3)}getUserDocument(e){const n=this.generateKey(`users/${e}`);return this.get(n)}setProjectDocument(e,n){const r=this.generateKey(`projects/${e}`);this.set(r,n,900*1e3)}getProjectDocument(e){const n=this.generateKey(`projects/${e}`);return this.get(n)}setCollectionData(e,n,r){const s=this.generateKey(e,n);this.set(s,r,120*1e3)}getCollectionData(e,n){const r=this.generateKey(e,n);return this.get(r)}invalidatePattern(e){let n=0;for(const r of this.cache.keys())r.includes(e)&&(this.cache.delete(r),n++);return n>0&&console.log(`🗄️ Cache invalidated: ${n} items matching "${e}"`),n}invalidateUser(e){this.invalidatePattern(`users/${e}`)}invalidateProject(e){this.invalidatePattern(`projects/${e}`)}}const We=new q8;setInterval(()=>{We.cleanup()},300*1e3);const cte=Object.freeze(Object.defineProperty({__proto__:null,default:We},Symbol.toStringTag,{value:"Module"}));class H8{constructor(){this.isNative=is,this.db=rn,this.auth=Le,this.capacitorFirestore=null,this.initialized=!1,this.activeListeners=new Map}async isIOSNative(){if(!this.isNative)return!1;const{Capacitor:e}=await Se(async()=>{const{Capacitor:n}=await Promise.resolve().then(()=>Ls);return{Capacitor:n}},void 0);return e.getPlatform()==="ios"}async initialize(){if(this.initialized){console.log("🔧 FirestoreService: Already initialized, skipping");return}console.log("🔧 FirestoreService.initialize called:",{isNative:this.isNative,initialized:this.initialized});try{if(await this.isIOSNative())try{console.log("📦 Importing Capacitor Firebase Firestore for iOS...");const{FirebaseFirestore:n}=await Se(async()=>{const{FirebaseFirestore:r}=await import("./index-BO5nUoOC.js");return{FirebaseFirestore:r}},[]);this.capacitorFirestore=n,console.log("✅ FirestoreService: Capacitor Firebase Firestore initialized for iOS"),await this.ensureAuthContext(),this.initialized=!0}catch(n){console.error("❌ FirestoreService: Failed to initialize Capacitor Firebase Firestore:",n),console.log("⏭️ FirestoreService: Falling back to Web SDK due to iOS init error"),this.initialized=!0}else console.log("⏭️ FirestoreService: Using Web SDK (not iOS or already initialized)"),this.initialized=!0}catch(e){console.error("❌ FirestoreService: Initialization error:",e),this.initialized=!0}}async ensureAuthContext(){if(!await this.isIOSNative())return!0;try{console.log("🔐 FirestoreService: Ensuring authentication context...");const{FirebaseAuthentication:n}=await Se(async()=>{const{FirebaseAuthentication:s}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:s}},[]),r=await n.getCurrentUser();if(r.user){console.log("✅ FirestoreService: Authentication context verified for user:",r.user.uid);try{const{optimizedAuthService:a}=await Se(async()=>{const{optimizedAuthService:u}=await Promise.resolve().then(()=>ka);return{optimizedAuthService:u}},void 0),c=await a.getCurrentUser();c&&c.uid===r.user.uid?console.log("✅ FirestoreService: Authentication context is consistent between services"):console.warn("⚠️ FirestoreService: Authentication context mismatch between services")}catch(a){console.warn("⚠️ FirestoreService: Could not verify with optimized auth service:",a)}const{Capacitor:s}=await Se(async()=>{const{Capacitor:a}=await Promise.resolve().then(()=>Ls);return{Capacitor:a}},void 0),i=s.isNativePlatform()?500:200;return await new Promise(a=>setTimeout(a,i)),!0}else return console.warn("⚠️ FirestoreService: No authenticated user found"),!1}catch(n){console.error("❌ FirestoreService: Failed to ensure authentication context:",n);const{Capacitor:r}=await Se(async()=>{const{Capacitor:s}=await Promise.resolve().then(()=>Ls);return{Capacitor:s}},void 0);if(r.isNativePlatform())try{console.log(`📱 ${r.getPlatform()}: Trying fallback authentication check...`);const{optimizedAuthService:s}=await Se(async()=>{const{optimizedAuthService:i}=await Promise.resolve().then(()=>ka);return{optimizedAuthService:i}},void 0),o=await s.getCurrentUser();if(o&&o.uid)return console.log(`✅ ${r.getPlatform()}: Fallback authentication successful for user:`,o.uid),!0}catch(s){console.warn("⚠️ iOS: Fallback authentication also failed:",s)}return!1}}async getDoc(e,n=!0){try{if(n){const s=We.get(e);if(s)return{exists:()=>s!==null,data:()=>s,id:e.split("/").pop()}}if(await this.isIOSNative()){await this.initialize();const s=await this.capacitorFirestore.getDocument({reference:e});console.log("🔍 FirestoreService getDoc result:",s);const o=s.snapshot&&s.snapshot.data&&Object.keys(s.snapshot.data).length>0,i=s.snapshot.data||{};return n&&o&&We.set(e,i),{exists:()=>o,data:()=>i,id:s.snapshot.id||e.split("/").pop()}}else{const s=Lt(this.db,e),o=await As(s);return n&&o.exists()&&We.set(e,o.data()),o}}catch(r){throw console.error("Get document error:",r),r}}async setDoc(e,n,r={}){try{if(await this.isIOSNative()){await this.initialize();const o=this.serializeDataForCapacitor(n);r.merge?await this.capacitorFirestore.setDocument({reference:e,data:o,merge:!0}):await this.capacitorFirestore.setDocument({reference:e,data:o})}else{const o=Lt(this.db,e);r.merge?await xi(o,n,{merge:!0}):await xi(o,n)}We.delete(e)}catch(s){throw console.error("Set document error:",s),s}}async updateDoc(e,n){try{if(await this.isIOSNative()){await this.initialize();const s=this.serializeDataForCapacitor(n);await this.capacitorFirestore.updateDocument({reference:e,data:s})}else{const s=Lt(this.db,e);await Cr(s,n)}}catch(r){throw console.error("Update document error:",r),r}}async deleteDoc(e){try{if(await this.isIOSNative())await this.initialize(),await this.capacitorFirestore.deleteDocument({reference:e});else{const r=Lt(this.db,e);await WE(r)}}catch(n){throw console.error("Delete document error:",n),n}}serializeDataForCapacitor(e){if(e==null)return e;if(e instanceof Date)return e.toISOString();if(Array.isArray(e))return e.map(n=>this.serializeDataForCapacitor(n));if(typeof e=="object"){const n={};for(const[r,s]of Object.entries(e))n[r]=this.serializeDataForCapacitor(s);return n}return e}async addDoc(e,n){try{if(console.log("🔍 FirestoreService.addDoc called:",{collectionPath:e,dataKeys:Object.keys(n)}),await this.isIOSNative()){console.log("🔍 Using iOS Capacitor Firebase for addDoc..."),await this.initialize();const s=this.serializeDataForCapacitor(n);console.log("🔍 Data serialized for Capacitor"),console.log("🔍 Calling capacitorFirestore.addDocument...");const o=15e3,i=this.capacitorFirestore.addDocument({reference:e,data:s}),a=new Promise((h,f)=>setTimeout(()=>f(new Error("addDocument operation timed out")),o)),c=await Promise.race([i,a]);console.log("✅ Native addDoc result:",c),We.invalidatePattern(`collection:${e}`);const u=c.reference?.id||c.id;return console.log("✅ Extracted document ID:",u),{id:u,documentId:u}}else{console.log("🔍 Using Web SDK for addDoc...");const s=yr(this.db,e);console.log("🔍 Calling Web SDK addDoc...");const o=await GE(s,n);return console.log("🔍 Web addDoc result:",o),We.invalidatePattern(`collection:${e}`),{id:o.id,documentId:o.id}}}catch(r){throw console.error("❌ Add document error:",r),console.error("❌ Error details:",{message:r.message,code:r.code,name:r.name,stack:r.stack}),r}}getNestedValue(e,n){return n.split(".").reduce((r,s)=>r&&r[s]!==void 0?r[s]:void 0,e)}async getDocs(e,n={}){try{const r=n.timeoutMs||8e3;console.log("🔍 FirestoreService.getDocs called with:",{collectionPath:e,queryOptions:n,timeoutMs:r,isNative:this.isNative,initialized:this.initialized,hasCapacitorFirestore:!!this.capacitorFirestore}),console.log("🚀 FirestoreService: Getting collection docs for:",e);const s=n?JSON.stringify(n):"no-params",o=`collection:${e}:${s}`,i=We.get(o);if(i)return console.log("FirestoreService: Using cached collection data for:",e),{docs:i.docs||[],empty:i.empty||!1,size:i.size||0};if(await this.isIOSNative()){await this.initialize();const c=await this.ensureAuthContext();if(console.log("🔐 FirestoreService: Auth context valid:",c),c||console.warn("⚠️ FirestoreService: Authentication context invalid, but proceeding with query"),e.includes("/fines")||e.includes("/complaints")||e==="users"||n?.filters&&n.filters.length>0){const p=e.includes("/fines")?"fines":e.includes("/complaints")?"complaints":e==="users"?"users":"filtered collection";console.log("🔄 FirestoreService: Using Web SDK directly for",p,"collection (iOS compatibility & server-side filtering)");try{const{collection:g,query:C,getDocs:T,where:v,orderBy:_,limit:S}=await Se(async()=>{const{collection:k,query:$,getDocs:U,where:Z,orderBy:ee,limit:N}=await Promise.resolve().then(()=>ri);return{collection:k,query:$,getDocs:U,where:Z,orderBy:ee,limit:N}},void 0),{db:x}=await Se(async()=>{const{db:k}=await Promise.resolve().then(()=>of);return{db:k}},void 0);console.log("🔍 FirestoreService: Web SDK imports successful, db instance:",!!x),console.log("🔍 FirestoreService: Web SDK db type:",typeof x),console.log("🔍 FirestoreService: Web SDK db app:",x?.app?.name);const R=g(x,e);let D=[];n&&n.filters&&n.filters.forEach(k=>{D.push(v(k.field,k.operator,k.value))}),n&&n.orderBy&&(Array.isArray(n.orderBy)?n.orderBy.forEach(k=>{D.push(_(k.field,k.direction))}):D.push(_(n.orderBy.field,n.orderBy.direction))),n&&n.limit&&D.push(S(n.limit));const L=C(R,...D);console.log("🔍 FirestoreService: Executing Web SDK query with constraints:",D.length),console.log("🔍 FirestoreService: Query constraints details:",D.map(k=>({field:k.field,operator:k.operator,value:k.value})));const b=new Promise((k,$)=>{setTimeout(()=>$(new Error("Web SDK query timeout")),Math.min(r,15e3))});console.log("🔍 FirestoreService: Starting Web SDK query execution...");const A=Date.now(),y=await Promise.race([T(L),b]),P=Date.now()-A;console.log("🔍 FirestoreService: Web SDK query completed, snapshot size:",y.size,"execution time:",P+"ms");const E=y.docs.map(k=>({id:k.id,data:()=>k.data()})),w={docs:E,empty:E.length===0,size:E.length};return console.log("✅ FirestoreService: Web SDK query successful for",p,":",{empty:w.empty,size:w.size}),We.set(o,w,120*1e3),w}catch(g){console.warn("⚠️ FirestoreService: Web SDK query failed for",p,":",g.message),console.log("🔄 FirestoreService: Falling back to Capacitor Firebase for",p);try{const{FirebaseFirestore:C}=await Se(async()=>{const{FirebaseFirestore:S}=await import("./index-BO5nUoOC.js");return{FirebaseFirestore:S}},[]);console.log("🔍 FirestoreService: Using Capacitor Firebase fallback for",e);const T=await C.getCollection({reference:e});console.log("✅ FirestoreService: Capacitor Firebase fallback retrieved:",T.snapshots.length,"documents");let v=T.snapshots||[];n?.filters&&Array.isArray(n.filters)&&(console.log("🔍 Applying client-side filters:",n.filters),v=v.filter(S=>n.filters.every(x=>{const R=S.data||S,D=this.getNestedValue(R,x.field);if(D==null)return!1;switch(x.operator){case"==":return D===x.value;case"!=":return D!==x.value;case">":return D>x.value;case">=":return D>=x.value;case"<":return D<x.value;case"<=":return D<=x.value;case"in":return Array.isArray(x.value)&&x.value.includes(D);case"not-in":return Array.isArray(x.value)&&!x.value.includes(D);case"array-contains":return Array.isArray(D)&&D.includes(x.value);case"array-contains-any":return Array.isArray(D)&&x.value.some(L=>D.includes(L));default:return!0}})),console.log("✅ After filtering:",v.length,"documents match")),n?.orderBy&&Array.isArray(n.orderBy)&&v.sort((S,x)=>{for(const R of n.orderBy){const D=this.getNestedValue(S.data,R.field),L=this.getNestedValue(x.data,R.field);if(D<L)return R.direction==="asc"?-1:1;if(D>L)return R.direction==="asc"?1:-1}return 0}),n?.limit&&(v=v.slice(0,n.limit));const _={docs:v.map(S=>({id:S.id,data:()=>S.data||{}})),empty:v.length===0,size:v.length};return console.log("✅ FirestoreService: Capacitor Firebase fallback successful:",{empty:_.empty,size:_.size}),We.set(o,_,120*1e3),_}catch(C){console.error("❌ FirestoreService: Both Web SDK and Capacitor Firebase failed for",p,":",C.message);const T={docs:[],empty:!0,size:0};return We.set(o,T,30*1e3),T}}}const h=new Promise((p,g)=>{setTimeout(()=>g(new Error("Query timeout")),r)}),f=this.capacitorFirestore.getCollection({reference:e});try{const p=await Promise.race([f,h]);console.log("FirestoreService: Collection query successful for:",e),console.log("FirestoreService: Raw result:",p);const g=p.snapshots||[];console.log("FirestoreService: Raw docs count:",g.length),console.log("FirestoreService: First doc sample:",g[0]);let C=g;n.filters&&Array.isArray(n.filters)?(console.log("FirestoreService: Applying filters:",n.filters),C=g.filter(v=>n.filters.every(_=>{const S=v.data||v,x=this.getNestedValue(S,_.field);if(console.log("FirestoreService: Filter check:",{field:_.field,value:x,expected:_.value,operator:_.operator}),x==null)return console.log("FirestoreService: Field not found or null, filter fails:",_.field),!1;switch(_.operator){case"==":return x===_.value;case"!=":return x!==_.value;case">":return x>_.value;case">=":return x>=_.value;case"<":return x<_.value;case"<=":return x<=_.value;case"in":return Array.isArray(_.value)&&_.value.includes(x);case"not-in":return Array.isArray(_.value)&&!_.value.includes(x);case"array-contains":return Array.isArray(x)&&x.includes(_.value);case"array-contains-any":return Array.isArray(x)&&_.value.some(R=>x.includes(R));default:return!0}}))):console.log("FirestoreService: No filters applied, returning all docs"),n.orderBy&&Array.isArray(n.orderBy)&&C.sort((v,_)=>{for(const S of n.orderBy){const x=this.getNestedValue(v.data,S.field),R=this.getNestedValue(_.data,S.field);if(x<R)return S.direction==="asc"?-1:1;if(x>R)return S.direction==="asc"?1:-1}return 0}),n.limit&&(C=C.slice(0,n.limit)),console.log("FirestoreService: After filtering, docs count:",C.length);const T={docs:C.map(v=>{const _=v.data||v;return{id:v.id,data:()=>_||{}}}),empty:C.length===0,size:C.length};return console.log("FirestoreService: Final collection data:",{empty:T.empty,size:T.size}),We.set(o,T,120*1e3),T}catch(p){if(console.error("FirestoreService: Collection query failed for:",e),console.error("FirestoreService: Error details:",{code:p.code,message:p.message,errorMessage:p.errorMessage,fullError:p}),p.code==="firestore/permission-denied"||p.message?.includes("permission")||p.errorMessage?.includes("permission")){console.error("🚨 PERMISSION ERROR: This suggests the Firestore rules are not working properly");try{const{default:C}=await Se(async()=>{const{default:v}=await Promise.resolve().then(()=>ka);return{default:v}},void 0),T=await C.getCurrentUser();console.error("🚨 Current user auth state:",T?.uid||"undefined")}catch(C){console.error("🚨 Could not get current user:",C.message)}console.error("🚨 Collection path:",e)}const g={docs:[],empty:!0,size:0};return We.set(o,g,30*1e3),g}}else{const{getDocs:c,collection:u}=await Se(async()=>{const{getDocs:g,collection:C}=await Promise.resolve().then(()=>ri);return{getDocs:g,collection:C}},void 0),h=u(this.db,e),f=await c(h),p={docs:f.docs,empty:f.empty,size:f.size};return We.set(o,p,120*1e3),p}}catch(r){return console.error("Get documents error:",r),Ke.handleFirestoreError(r,`getDocs(${e})`),{docs:[],empty:!0,size:0}}}async where(e,n,r){const{where:s}=await Se(async()=>{const{where:o}=await Promise.resolve().then(()=>ri);return{where:o}},void 0);return s(e,n,r)}async orderBy(e,n="asc"){const{orderBy:r}=await Se(async()=>{const{orderBy:s}=await Promise.resolve().then(()=>ri);return{orderBy:s}},void 0);return r(e,n)}async limitToFirst(e){const{limit:n}=await Se(async()=>{const{limit:r}=await Promise.resolve().then(()=>ri);return{limit:r}},void 0);return n(e)}serverTimestamp(){return Bo()}async onSnapshot(e,n){try{if(console.log("🔍 onSnapshot called for path:",e),await this.isIOSNative()){const{onSnapshot:s}=await Se(async()=>{const{onSnapshot:c}=await import("./index-BO5nUoOC.js");return{onSnapshot:c}},[]),{getApp:o}=await Se(async()=>{const{getApp:c}=await Promise.resolve().then(()=>j6);return{getApp:c}},void 0),i=o(),a=await s({app:i,path:e,callback:n});return console.log("✅ Native onSnapshot listener setup successfully"),a}else{const{onSnapshot:s,doc:o}=await Se(async()=>{const{onSnapshot:h,doc:f}=await Promise.resolve().then(()=>ri);return{onSnapshot:h,doc:f}},void 0),{getFirestore:i}=await Se(async()=>{const{getFirestore:h}=await Promise.resolve().then(()=>ri);return{getFirestore:h}},void 0),a=i(),c=o(a,e),u=s(c,h=>{h.exists()?n({id:h.id,data:()=>h.data(),exists:()=>!0}):n(null)},h=>{console.error("❌ onSnapshot error:",h),n(null)});return console.log("✅ Web onSnapshot listener setup successfully"),u}}catch(r){return console.error("❌ Error setting up onSnapshot listener:",r),()=>{console.log("Unsubscribed from listener (no-op due to error)")}}}}const Ee=new H8,z8=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),Ct=Yr("project",()=>{const t=K([]),e=K(null),n=K([]),r=K(!1),s=K(null),o=K(0),i=300*1e3,a=G(()=>t.value.length>1),c=G(()=>e.value!==null),u=G(()=>e.value?e.value.services||[]:[]),h=async R=>{const D=Date.now();if(t.value.length>0&&D-o.value<i){console.log("Using cached projects data");return}try{r.value=!0,s.value=null,console.log("ProjectStore: Fetching user document from Firestore...");const L=await Ee.getDoc(`users/${R}`);if(!L.exists())throw new Error("User not found");const b=L.data();console.log("ProjectStore: User document data:",b);const A=b.projects||[];if(A.length===0){t.value=[];return}const y=[];if(A.length>0)try{const P=A.map(E=>E.projectId||E.id).filter(Boolean);if(P.length>0){console.log("ProjectStore: Fetching projects using REST API...");const E=P.map(async k=>{try{const $=await Ee.getDoc(`projects/${k}`);if($.exists()){const U=$.data(),Z=A.find(ee=>(ee.projectId||ee.id)===k);return{id:k,name:U.name||"Unnamed Project",description:U.description||"No description available",location:U.location||"Location not set",status:U.status||"active",type:U.type||"residential",userRole:Z?.role||"member",userUnit:Z?.unit||"N/A",registrationStatus:Z?.registrationStatus||"unknown",registrationStep:Z?.registrationStep||"unknown",updatedAt:Z?.updatedAt||null}}return null}catch($){console.error(`Failed to fetch project ${k}:`,$);const U=A.find(Z=>(Z.projectId||Z.id)===k);return{id:k,name:`Project ${k.slice(-6)}`,description:"Project details not available",location:"Location not set",status:"unknown",type:"unknown",userRole:U?.role||"member",userUnit:U?.unit||"N/A",registrationStatus:U?.registrationStatus||"unknown",registrationStep:U?.registrationStep||"unknown",updatedAt:U?.updatedAt||null}}}),w=await Promise.all(E);y.push(...w.filter(Boolean))}}catch(P){console.error("Error fetching projects in batch:",P)}t.value=y,o.value=Date.now(),console.log("ProjectStore: Successfully set projects in store:",y.length,"projects"),y.length===1&&(e.value=y[0],console.log("ProjectStore: Auto-selected single project:",y[0].name))}catch(L){console.error("Error fetching user projects:",L),s.value=L.message}finally{r.value=!1}},f=async()=>{try{r.value=!0,s.value=null;const R=await Ee.getDocs("projects");n.value=R.docs.map(D=>({id:D.id,...D.data()}))}catch(R){console.error("Error fetching available projects:",R),s.value=R.message}finally{r.value=!1}},p=R=>{e.value=R,localStorage.setItem("selectedProjectId",R.id),localStorage.setItem("selectedProjectTimestamp",Date.now().toString()),console.log("Project selected and saved to localStorage:",R.name),console.log("Project changed, triggering data refresh...")},g=R=>!R||t.value.length===0?!1:t.value.some(L=>L.id===R)?!0:(console.log("User no longer has access to saved project, clearing..."),v(),!1),C=()=>{const R=localStorage.getItem("selectedProjectId"),D=localStorage.getItem("selectedProjectTimestamp");if(console.log("ProjectStore: Attempting to load saved project:",{savedProjectId:R,savedTimestamp:D,availableProjects:t.value.map(L=>L.id),availableProjectNames:t.value.map(L=>L.name)}),R&&t.value.length>0){const L=Date.now(),b=parseInt(D||"0"),A=1440*60*1e3;if(L-b>A)return console.log("Saved project selection is too old, clearing..."),v(),!1;if(!g(R))return console.log("ProjectStore: User no longer has access to saved project:",R),!1;const y=t.value.find(P=>P.id===R);if(y)return e.value=y,console.log("ProjectStore: Restored selected project from localStorage:",y.name),!0;console.log("ProjectStore: Saved project not found in available projects:",R)}else console.log("ProjectStore: No saved project ID or no projects available");return!1},T=async R=>{try{console.log("ProjectStore: Starting rehydration for user:",R);const D=Date.now();return t.value.length>0&&D-o.value<i&&(console.log("ProjectStore: Using cached projects, attempting to restore selection"),C())?(console.log("ProjectStore: Successfully restored from cache"),!0):(console.log("ProjectStore: No cached projects, fetching from Firestore..."),await h(R),C()?(console.log("ProjectStore: Successfully restored after fetch"),!0):t.value.length===1?(p(t.value[0]),console.log("ProjectStore: Auto-selected single project:",t.value[0].name),!0):t.value.length>1?(p(t.value[0]),console.log("ProjectStore: Auto-selected first project for user with multiple projects:",t.value[0].name),!0):(console.log("ProjectStore: Rehydration completed, projects available:",t.value.length),!1))}catch(D){return console.error("Error rehydrating project store:",D),!1}},v=()=>{e.value=null,localStorage.removeItem("selectedProjectId"),localStorage.removeItem("selectedProjectTimestamp")};return{userProjects:t,selectedProject:e,availableProjects:n,loading:r,error:s,hasMultipleProjects:a,hasSelectedProject:c,currentProjectServices:u,fetchUserProjects:h,fetchAvailableProjects:f,selectProject:p,loadSelectedProject:C,rehydrateStore:T,validateSavedProject:g,clearSelectedProject:v,resetStore:()=>{t.value=[],e.value=null,n.value=[],r.value=!1,s.value=null,localStorage.removeItem("selectedProjectId"),localStorage.removeItem("selectedProjectTimestamp")},setLoading:R=>{r.value=R},debugState:()=>{console.log("=== PROJECT STORE DEBUG ==="),console.log("User Projects Count:",t.value.length),console.log("Selected Project:",e.value?.name||"None"),console.log("LocalStorage Project ID:",localStorage.getItem("selectedProjectId")),console.log("LocalStorage Timestamp:",localStorage.getItem("selectedProjectTimestamp")),console.log("Has Selected Project:",c.value),console.log("Loading:",r.value),console.log("Error:",s.value)}}}),af=Yr("smartMirror",()=>{const t=K(!1),e=K(!1),n=K(null),r=K(null),s=K([]),o=K([]),i=K(null),a=K(null),c=K(new Map),u=G(()=>({isConnected:t.value,isConnecting:e.value,hasError:!!n.value,error:n.value,hasUser:!!r.value,roomsCount:s.value.length,devicesCount:o.value.length})),h=G(()=>o.value.filter(N=>N.type==="light")),f=G(()=>o.value.filter(N=>N.type==="thermostat"||N.type==="climate")),p=G(()=>o.value.filter(N=>N.type==="plug"||N.type==="outlet")),g=G(()=>{const N={};return s.value.forEach(H=>{N[H.id]=H.devices||[]}),N}),C=K({}),T=async(N,H,Y)=>{try{if(e.value=!0,n.value=null,(await Je.login(N,H,Y)).success)return t.value=!0,r.value=Je.userProfile,s.value=Je.rooms,o.value=Je.devices,a.value=Y,c.value.set(Y,{isConnected:!0,userProfile:Je.userProfile,rooms:Je.rooms,devices:Je.devices}),Je.setDevicesUpdateCallback((Q,we,Ye)=>{Ye===Y&&(s.value=Q,o.value=we)}),Z(Y),{success:!0}}catch(ne){return console.error("Smart Mirror connection error:",ne),n.value=ne.message,{success:!1,error:ne.message}}finally{e.value=!1}},v=async()=>{try{return await Je.initializeApp(),t.value=Je.isConnected,r.value=Je.userProfile,s.value=Je.rooms,o.value=Je.devices,a.value=Je.currentProjectId,c.value=new Map(Je.projectConnections),a.value&&o.value.length>0?Z(a.value):a.value&&(C.value={lights:[],climate:[],plugs:[]}),Je.setDevicesUpdateCallback((N,H,Y)=>{Y===a.value&&(s.value=N,o.value=H)}),Je.setupAuthListener(),{success:!0}}catch(N){return console.error("Error initializing Smart Mirror app:",N),{success:!1,error:N.message}}},_=async(N=null)=>{try{if((await Je.logout(N)).success)return N?(c.value.delete(N),a.value===N&&(t.value=!1,r.value=null,s.value=[],o.value=[],i.value=null,a.value=null)):(t.value=!1,r.value=null,s.value=[],o.value=[],i.value=null,a.value=null,c.value.clear()),n.value=null,{success:!0}}catch(H){return console.error("Smart Mirror disconnection error:",H),n.value=H.message,{success:!1,error:H.message}}},S=async N=>{try{const H=await Je.switchToProject(N);return H.success?(t.value=Je.isConnected,r.value=Je.userProfile,s.value=Je.rooms,o.value=Je.devices,a.value=Je.currentProjectId,Je.setDevicesUpdateCallback((Y,ne,Q)=>{Q===a.value&&(s.value=Y,o.value=ne)}),Z(N),{success:!0}):{success:!1,error:H.error}}catch(H){return console.error("Error switching to project:",H),{success:!1,error:H.message}}},x=N=>{const H=c.value.has(N),Y=H&&o.value.length>0&&a.value===N;return H&&Y},R=N=>Je.getProjectConnectionStatus(N),D=N=>Je.getProjectDevices(N),L=async()=>{if(t.value)try{const N=await Je.fetchDevices();N&&(s.value=N.rooms,o.value=N.devices)}catch(N){console.error("Error refreshing devices:",N),n.value=N.message}},b=N=>{i.value=N},A=N=>{const H=s.value.find(Y=>Y.id===N);return H?H.devices:[]},y=async(N,H,Y)=>{try{if((await Je.toggleLight(N,H,Y)).success)return L(),{success:!0}}catch(ne){return console.error("Error toggling light:",ne),{success:!1,error:ne.message}}},P=async(N,H,Y)=>{try{if((await Je.setLightBrightness(N,H,Y)).success)return L(),{success:!0}}catch(ne){return console.error("Error setting light brightness:",ne),{success:!1,error:ne.message}}},E=async(N,H,Y)=>{try{if((await Je.setClimateState(N,H,Y)).success)return L(),{success:!0}}catch(ne){return console.error("Error setting climate state:",ne),{success:!1,error:ne.message}}},w=async(N,H,Y)=>{try{if((await Je.setClimateTemperature(N,H,Y)).success)return L(),{success:!0}}catch(ne){return console.error("Error setting climate temperature:",ne),{success:!1,error:ne.message}}},k=async(N,H,Y)=>{try{if((await Je.setClimateMode(N,H,Y)).success)return L(),{success:!0}}catch(ne){return console.error("Error setting climate mode:",ne),{success:!1,error:ne.message}}},$=()=>{n.value=null},U=N=>{C.value=N},Z=N=>{try{const H=localStorage.getItem(`deviceSettings_${N}`);if(H)C.value=JSON.parse(H);else{const Y=o.value||[],ne={lights:[],climate:[],plugs:[]};Y.forEach(Q=>{Q.type==="light"?ne.lights.push(Q.id):Q.type==="thermostat"||Q.type==="climate"||Q.type==="fan"||Q.type==="heater"||Q.type==="ac"||Q.type==="air_conditioner"||Q.type==="air-conditioner"?ne.climate.push(Q.id):(Q.type==="plug"||Q.type==="outlet"||Q.type==="switch"||Q.type==="sensor"||Q.type==="camera"||Q.type==="door"||Q.type==="window")&&ne.plugs.push(Q.id)}),C.value=ne,localStorage.setItem(`deviceSettings_${N}`,JSON.stringify(ne))}}catch(H){console.error("Error loading device settings for project:",H),C.value={lights:[],climate:[],plugs:[]}}};return{isConnected:t,isConnecting:e,connectionError:n,userProfile:r,rooms:s,devices:o,selectedRoom:i,currentProjectId:a,projectConnections:c,connectionStatus:u,lights:h,climateDevices:f,plugs:p,devicesByRoom:g,selectedHomepageDevices:C,connect:T,initializeApp:v,disconnect:_,switchToProject:S,isProjectConnected:x,getProjectConnectionStatus:R,getProjectDevices:D,refreshDevices:L,selectRoom:b,getRoomDevices:A,toggleLight:y,setLightBrightness:P,setClimateState:E,setClimateTemperature:w,setClimateMode:k,setSelectedDevices:U,loadDeviceSettingsForProject:Z,clearError:$,reset:()=>{t.value=!1,e.value=!1,n.value=null,r.value=null,s.value=[],o.value=[],i.value=null,C.value={}}}});function W8(){const t=an(),e=za(),n=K({x:0,y:0,time:0}),r=K({x:0,y:0,time:0}),s=K(!1),o=K(0),i={minDistance:50,maxTime:400,minVelocity:.2,verticalThreshold:60,deadZones:[]},a=[{path:"/home",name:"Home"},{path:"/services",name:"Services"},{path:"/facilities",name:"Requests"},{path:"/profile",name:"Profile"}],c=()=>{const y=e.path;return a.findIndex(P=>{if(P.path===y)return!0;switch(P.path){case"/services":return y.startsWith("/service-category")||y==="/my-bookings"||y==="/calendar"||y==="/analytics"||y==="/news"||y==="/smart-devices";case"/facilities":return y==="/court-booking"||y==="/academy-programs"||y==="/academy-details"||y==="/academy-registration"||y==="/academy-booking"||y==="/stores-shopping"||y.startsWith("/store")||y==="/shopping-cart";case"/complaints":return y.startsWith("/complaints/");default:return!1}})},u=y=>{if(y>=0&&y<a.length){const P=a[y];navigator.vibrate&&navigator.vibrate(10),t.push(P.path)}},h=()=>{const y=c();return y!==-1&&y<a.length-1?(u(y+1),!0):!1},f=()=>{const y=c();return y!==-1&&y>0?(u(y-1),!0):!1},p=(y,P)=>i.deadZones.some(w=>{const k=y>=w.x&&y<=w.x+w.width&&P>=w.y&&P<=w.y+w.height;return k&&console.log("🚫 Touch in dead zone:",{x:y,y:P,zone:w}),k}),g=y=>{const P=y.touches[0],E=P.clientX,w=P.clientY;p(E,w)||(n.value={x:E,y:w,time:Date.now()},s.value=!0,o.value=0)},C=y=>{if(!s.value)return;const P=y.touches[0],E=P.clientX,w=P.clientY,k=E-n.value.x,$=Math.abs(w-n.value.y);if($>i.verticalThreshold){s.value=!1,o.value=0;return}const U=Math.min(Math.abs(k)/i.minDistance,1);o.value=U,Math.abs(k)>Math.abs($)&&Math.abs(k)>10&&y&&typeof y.preventDefault=="function"&&y.preventDefault()},T=y=>{if(!s.value)return;const P=y.changedTouches[0];r.value={x:P.clientX,y:P.clientY,time:Date.now()};const E=r.value.x-n.value.x,w=Math.abs(r.value.y-n.value.y),k=r.value.time-n.value.time,$=Math.abs(E),U=$/k;s.value=!1,o.value=0,$>=i.minDistance&&k<=i.maxTime&&U>=i.minVelocity&&w<=i.verticalThreshold&&(E>0?f()||navigator.vibrate&&navigator.vibrate([30,10,30]):h()||navigator.vibrate&&navigator.vibrate([30,10,30]))},v=(y,P,E,w)=>{const k=Date.now()+Math.random();return i.deadZones.push({id:k,x:y,y:P,width:E,height:w}),k},_=y=>{const P=i.deadZones.findIndex(E=>E.id===y);P!==-1&&i.deadZones.splice(P,1)},S=()=>{i.deadZones=[]};let x=!1;const R=y=>{x=!0;const P={touches:[{clientX:y.clientX,clientY:y.clientY}]};g(P)},D=y=>{if(!x)return;const P={touches:[{clientX:y.clientX,clientY:y.clientY}],preventDefault:()=>y.preventDefault()};C(P)},L=y=>{if(!x)return;x=!1;const P={changedTouches:[{clientX:y.clientX,clientY:y.clientY}]};T(P)},b=()=>{document.addEventListener("touchstart",g,{passive:!1}),document.addEventListener("touchmove",C,{passive:!1}),document.addEventListener("touchend",T,{passive:!0}),document.addEventListener("mousedown",R,{passive:!1}),document.addEventListener("mousemove",D,{passive:!1}),document.addEventListener("mouseup",L,{passive:!0})},A=()=>{document.removeEventListener("touchstart",g),document.removeEventListener("touchmove",C),document.removeEventListener("touchend",T),document.removeEventListener("mousedown",R),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",L)};return ft(()=>{b()}),rr(()=>{A()}),{isSwipeActive:s,swipeProgress:o,navigateNext:h,navigatePrevious:f,navigateToTab:u,getCurrentTabIndex:c,addDeadZone:v,removeDeadZone:_,clearDeadZones:S,config:i,mainTabs:a}}const G8={class:"notification-content"},K8={class:"notification-text"},Q8={class:"notification-title"},Y8={class:"title-highlight"},Z8={class:"title-subtitle"},J8={class:"notification-message"},X8={class:"notification-details"},eN={class:"detail-item"},tN={class:"notification-actions"},nN=Object.assign({name:"ViolationNotificationPopup"},{__name:"ViolationNotificationPopup",props:{violationCount:{type:Number,required:!0},isVisible:{type:Boolean,required:!0}},emits:["close","view-violations"],setup(t,{emit:e}){const n=t,r=e,s=()=>{r("close")},o=()=>{r("view-violations"),s()};return ft(()=>{n.isVisible&&setTimeout(()=>{s()},15e3)}),(i,a)=>t.isVisible?(M(),O("div",{key:0,class:"notification-overlay",onClick:s},[l("div",{class:"notification-popup",onClick:a[0]||(a[0]=ht(()=>{},["stop"]))},[a[5]||(a[5]=l("div",{class:"notification-bg"},[l("div",{class:"pulse-ring"}),l("div",{class:"pulse-ring delay-1"}),l("div",{class:"pulse-ring delay-2"})],-1)),l("div",G8,[a[4]||(a[4]=et('<div class="notification-icon" data-v-4e6dfbeb><div class="icon-container" data-v-4e6dfbeb><svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-4e6dfbeb><path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-4e6dfbeb></path></svg></div><div class="icon-glow" data-v-4e6dfbeb></div></div>',1)),l("div",K8,[l("h3",Q8,[l("span",Y8,B(i.$t("violationNotice")),1),l("span",Z8,B(i.$t("actionRequired")),1)]),l("p",J8,[xe(B(i.$t("outstandingViolation"))+" ",1),l("strong",null,B(t.violationCount),1),xe(" "+B(t.violationCount>1?i.$t("outstandingViolationsPlural"):i.$t("outstandingViolations"))+" "+B(t.violationCount===1?i.$t("requiresAttention"):i.$t("requireAttention"))+". ",1)]),l("div",X8,[l("div",eN,[a[1]||(a[1]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(i.$t("pleaseReviewAction")),1)])])]),l("div",tN,[l("button",{onClick:o,class:"action-btn primary"},[a[2]||(a[2]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(i.$t("reviewViolations")),1)]),l("button",{onClick:s,class:"action-btn secondary"},[a[3]||(a[3]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(i.$t("close")),1)])])])])])):fe("",!0)}}),rN=pt(nN,[["__scopeId","data-v-4e6dfbeb"]]),sN={name:"SuspensionMessage",props:{show:{type:Boolean,default:!1},message:{type:Object,default:()=>({title:"Account Suspended",message:"Your account has been suspended.",type:"temporary",endDate:null})}},emits:["dismiss","contactSupport"],setup(t,{emit:e}){return{handleDismiss:()=>{e("dismiss")},handleContactSupport:()=>{e("contactSupport")},formatEndDate:o=>o?(o.toDate?o.toDate():new Date(o)).toLocaleString():"N/A"}}},oN={key:0,class:"suspension-overlay"},iN={class:"suspension-modal"},aN={class:"suspension-header"},lN={class:"suspension-title"},cN={class:"suspension-subtitle"},uN={class:"suspension-content"},dN={class:"suspension-message-box"},hN={class:"suspension-text"},fN={key:0,class:"suspension-details"},pN={class:"detail-card"},gN={class:"detail-content"},mN={class:"detail-label"},vN={class:"detail-value"},wN={class:"detail-card"},yN={class:"detail-content"},_N={class:"detail-label"},kN={class:"detail-value"},bN={class:"detail-card"},CN={class:"info-text"},EN={key:1,class:"suspension-details"},SN={class:"detail-card"},AN={class:"detail-content"},TN={class:"detail-label"},PN={class:"detail-value"},IN={class:"detail-card"},RN={class:"info-text"},DN={class:"suspension-footer"},xN={class:"button-group"};function LN(t,e,n,r,s,o){return n.show?(M(),O("div",oN,[l("div",iN,[l("div",aN,[e[2]||(e[2]=l("div",{class:"suspension-icon"},[l("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 19.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),l("h2",lN,B(n.message.title),1),l("p",cN,B(t.$t("accountAccessRestricted")),1)]),l("div",uN,[l("div",dN,[l("p",hN,B(n.message.message),1)]),n.message.type==="temporary"&&n.message.endDate?(M(),O("div",fN,[l("div",pN,[l("div",gN,[l("span",mN,B(t.$t("suspensionType")),1),l("span",vN,B(t.$t("temporary")),1)])]),l("div",wN,[l("div",yN,[l("span",_N,B(t.$t("endsOn")),1),l("span",kN,B(r.formatEndDate(n.message.endDate)),1)])]),l("div",bN,[e[3]||(e[3]=l("div",{class:"info-icon"},[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("p",CN,B(t.$t("canAccessProfileGate")),1)])])):n.message.type==="permanent"?(M(),O("div",EN,[l("div",SN,[l("div",AN,[l("span",TN,B(t.$t("suspensionType")),1),l("span",PN,B(t.$t("permanent")),1)])]),l("div",IN,[e[4]||(e[4]=l("div",{class:"info-icon"},[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("p",RN,B(t.$t("canAccessProfileGate")),1)])])):fe("",!0)]),l("div",DN,[l("div",xN,[l("button",{onClick:e[0]||(e[0]=(...i)=>r.handleContactSupport&&r.handleContactSupport(...i)),class:"support-button"},[e[5]||(e[5]=l("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})],-1)),xe(" "+B(t.$t("contactSupport")),1)]),l("button",{onClick:e[1]||(e[1]=(...i)=>r.handleDismiss&&r.handleDismiss(...i)),class:"dismiss-button"},[e[6]||(e[6]=l("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),xe(" "+B(t.$t("iUnderstand")),1)])])])])])):fe("",!0)}const MN=pt(sN,[["render",LN],["__scopeId","data-v-56455c55"]]);var yg;(function(t){t[t.Min=1]="Min",t[t.Low=2]="Low",t[t.Default=3]="Default",t[t.High=4]="High",t[t.Max=5]="Max"})(yg||(yg={}));var _g;(function(t){t[t.Secret=-1]="Secret",t[t.Private=0]="Private",t[t.Public=1]="Public"})(_g||(_g={}));const sa=Wa("FirebaseMessaging",{web:()=>Se(()=>import("./web-DNHb57GS.js"),__vite__mapDeps([0,1])).then(t=>new t.FirebaseMessagingWeb)}),ute=Object.freeze(Object.defineProperty({__proto__:null,FirebaseMessaging:sa,get Importance(){return yg},get Visibility(){return _g}},Symbol.toStringTag,{value:"Module"}));class NN{constructor(){this.initialized=!1,this.currentToken=null}async initializeNotifications(e){try{if(!e)return console.log("NotificationService: No user ID provided, skipping initialization"),null;if(console.log("NotificationService: Requesting notification permissions..."),(await sa.requestPermissions()).receive!=="granted")return console.log("NotificationService: Notification permission not granted"),null;console.log("NotificationService: Permission granted, getting FCM token...");const{token:r}=await sa.getToken();if(!r)return console.warn("NotificationService: No FCM token received"),null;console.log("NotificationService: FCM token received, saving to Firestore..."),this.currentToken=r;const s=Lt(rn,"Users",e);return await Cr(s,{fcmToken:r}),console.log("NotificationService: FCM token saved successfully"),this.initialized=!0,r}catch(n){return console.error("NotificationService: Error initializing notifications:",n),null}}addNotificationListeners(){try{sa.addListener("notificationReceived",e=>{console.log("NotificationService: Notification received:",e)}),sa.addListener("notificationActionPerformed",e=>{console.log("NotificationService: Notification action performed:",e)}),console.log("NotificationService: Notification listeners added")}catch(e){console.error("NotificationService: Error adding notification listeners:",e)}}removeNotificationListeners(){try{sa.removeAllListeners(),console.log("NotificationService: All notification listeners removed")}catch(e){console.error("NotificationService: Error removing notification listeners:",e)}}async clearToken(e){try{if(!e){console.log("NotificationService: No user ID provided, skipping token clear");return}console.log("NotificationService: Clearing FCM token from Firestore...");const n=Lt(rn,"Users",e);await Cr(n,{fcmToken:null}),this.currentToken=null,this.initialized=!1,console.log("NotificationService: FCM token cleared successfully")}catch(n){console.error("NotificationService: Error clearing FCM token:",n)}}getCurrentToken(){return this.currentToken}isInitialized(){return this.initialized}}const oa=new NN;class ON{constructor(){this.isNative=is,this.auth=Le,this.capacitorAuth=null,this.initialized=!1,this.currentUser=null,this.userCache=new Map,this.authListeners=new Set}async initialize(){if(this.initialized){console.log("OptimizedAuthService: Already initialized, skipping");return}try{console.log("OptimizedAuthService: Using Web SDK for all platforms");const{Capacitor:e}=await Se(async()=>{const{Capacitor:n}=await Promise.resolve().then(()=>Ls);return{Capacitor:n}},void 0);e.getPlatform()==="ios"&&(console.log("OptimizedAuthService: iOS detected, waiting for Firebase to stabilize..."),await new Promise(n=>setTimeout(n,500))),this.initialized=!0,console.log("OptimizedAuthService: Initialization complete")}catch(e){console.error("OptimizedAuthService: Initialization error:",e),this.initialized=!0}}clearCachedUser(){this.currentUser=null,console.log("🚀 OptimizedAuthService: Cleared cached user")}async getCurrentUser(){if(this.currentUser)return console.log("🚀 OptimizedAuthService: Using cached current user"),this.currentUser;try{const{Capacitor:e}=await Se(async()=>{const{Capacitor:r}=await Promise.resolve().then(()=>Ls);return{Capacitor:r}},void 0);if(e.getPlatform()==="ios"&&e.isNativePlatform())try{this.initialized||(console.log("🚀 OptimizedAuthService: Waiting for initialization before getting current user..."),await this.initialize());const{FirebaseAuthentication:r}=await Se(async()=>{const{FirebaseAuthentication:a}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:a}},[]),s=r.getCurrentUser(),o=new Promise((a,c)=>setTimeout(()=>c(new Error("getCurrentUser timeout")),3e3)),i=await Promise.race([s,o]);if(i&&i.user)return console.log("🚀 OptimizedAuthService: Current user from Capacitor plugin:",i.user.uid),this.currentUser=i.user,this.currentUser}catch(r){console.warn("Capacitor getCurrentUser failed, trying Web SDK:",r?.message)}return this.currentUser=this.auth.currentUser,console.log("🚀 OptimizedAuthService: Current user from Web SDK:",this.currentUser?"authenticated":"not authenticated"),this.currentUser}catch(e){return console.error("❌ Get current user error:",e),this.currentUser=null,null}}async signInWithEmailAndPassword(e,n){try{console.log("🔐 OptimizedAuthService: Starting sign in..."),this.initialized||(console.log("🔐 OptimizedAuthService: Initializing before sign in..."),await this.initialize());const{Capacitor:r}=await Se(async()=>{const{Capacitor:a}=await Promise.resolve().then(()=>Ls);return{Capacitor:a}},void 0);if(r.getPlatform()==="ios"&&r.isNativePlatform()){console.log("📱 iOS: Using Capacitor plugin for email/password sign in");try{const{FirebaseAuthentication:a}=await Se(async()=>{const{FirebaseAuthentication:f}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:f}},[]),c=a.signInWithEmailAndPassword({email:e,password:n}),u=new Promise((f,p)=>setTimeout(()=>p(new Error("Sign in timeout after 15 seconds")),15e3)),h=await Promise.race([c,u]);return console.log("📱 iOS: Capacitor sign in successful:",h.user?.uid),await new Promise(f=>setTimeout(f,500)),this.currentUser=this.auth.currentUser||h.user,console.log("📱 iOS: Final user:",this.currentUser?.uid),{user:this.currentUser,credential:h.credential}}catch(a){console.warn("📱 iOS: Capacitor sign in failed, falling back to Web SDK:",a.message)}}console.log("🌐 Using Web SDK for sign in");const i=await ym(this.auth,e,n);return this.currentUser=i.user,console.log("🌐 Web SDK sign in successful:",i.user.uid),{user:i.user,credential:i.credential}}catch(r){throw console.error("❌ Sign in error:",r),console.error("❌ Error details:",{code:r.code,message:r.message,name:r.name}),r}}async createUserWithEmailAndPassword(e,n){try{const r=await Mb(this.auth,e,n);return this.currentUser=r.user,{user:r.user,credential:r.credential}}catch(r){throw console.error("Create user error:",r),r}}async signOut(){try{this.currentUser&&this.currentUser.uid&&(console.log("🔔 OptimizedAuthService: Clearing FCM token..."),await oa.clearToken(this.currentUser.uid));const{Capacitor:e}=await Se(async()=>{const{Capacitor:r}=await Promise.resolve().then(()=>Ls);return{Capacitor:r}},void 0);if(e.getPlatform()==="ios"&&e.isNativePlatform()){console.log("🚀 OptimizedAuthService: Signing out via Capacitor plugin...");const{FirebaseAuthentication:r}=await Se(async()=>{const{FirebaseAuthentication:s}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:s}},[]);await r.signOut(),console.log("🚀 OptimizedAuthService: Capacitor sign out complete")}else await Qc(this.auth);this.currentUser=null,We.clear(),oa.removeNotificationListeners(),console.log("🚀 OptimizedAuthService: User signed out, cache cleared, notifications removed")}catch(e){throw console.error("Sign out error:",e),e}}async initializeNotifications(e){try{console.log("🔔 OptimizedAuthService: Initializing notifications for user:",e),await oa.initializeNotifications(e),oa.addNotificationListeners(),console.log("🔔 OptimizedAuthService: Notifications initialized successfully")}catch(n){console.error("🔔 OptimizedAuthService: Error initializing notifications:",n)}}onAuthStateChanged(e){return Kc(this.auth,async n=>{console.log("🚀 OptimizedAuthService: Auth state changed, user:",n?"authenticated":"not authenticated"),this.currentUser=n,n?setTimeout(async()=>{try{await this.initializeNotifications(n.uid)}catch(r){console.error("🔔 Failed to initialize notifications (non-blocking):",r)}},1e3):(We.clear(),oa.removeNotificationListeners()),e(n)})}async sendEmailVerification(e){try{const{sendEmailVerification:n}=await Se(async()=>{const{sendEmailVerification:r}=await Promise.resolve().then(()=>yi);return{sendEmailVerification:r}},void 0);await n(e)}catch(n){throw console.error("Send email verification error:",n),n}}async updateProfile(e,n){try{const{updateProfile:r}=await Se(async()=>{const{updateProfile:s}=await Promise.resolve().then(()=>yi);return{updateProfile:s}},void 0);await r(e,n),e&&e.uid&&We.invalidateUser(e.uid)}catch(r){throw console.error("Update profile error:",r),r}}async signInWithGoogle(){try{const{Capacitor:e}=await Se(async()=>{const{Capacitor:s}=await Promise.resolve().then(()=>Ls);return{Capacitor:s}},void 0),n=e.getPlatform();if(n==="ios"&&e.isNativePlatform()){console.log("[OptimizedAuth] Using Capacitor Google Sign-In for iOS");const{FirebaseAuthentication:s}=await Se(async()=>{const{FirebaseAuthentication:a}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:a}},[]),o=await s.signInWithGoogle();return this.auth.currentUser||await new Promise(a=>setTimeout(a,500)),this.currentUser=this.auth.currentUser,{user:this.currentUser,credential:o.credential||null}}else{console.log(`[OptimizedAuth] Using Web SDK for ${n}`);const{signInWithPopup:s,GoogleAuthProvider:o}=await Se(async()=>{const{signInWithPopup:c,GoogleAuthProvider:u}=await Promise.resolve().then(()=>yi);return{signInWithPopup:c,GoogleAuthProvider:u}},void 0),i=new o,a=await s(this.auth,i);return this.currentUser=a.user,{user:a.user,credential:a.credential}}}catch(e){throw console.error("Google sign in error:",e),e}}clearUserCache(){this.currentUser=null,this.userCache.clear(),console.log("🚀 OptimizedAuthService: User cache cleared")}getCachedUser(){return this.currentUser}setCachedUser(e){this.currentUser=e}}const yt=new ON,ka=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"})),vv=async(t,e)=>Xe.timeOperation("getUserFines",async()=>{try{console.log("🔍 Getting user fines:",{projectId:t,userId:e}),console.log("🔍 User ID being searched for:",e),console.log("🔍 User ID length:",e.length);const n=await yt.getCurrentUser();if(console.log("🔍 Current user:",n?n.uid:"Not authenticated"),console.log("🔍 Current user object:",n),!n)throw console.error("❌ Authentication failed - no current user found"),new Error("User not authenticated");n.uid!==e&&console.warn("⚠️ User ID mismatch:",{currentUserUid:n.uid,requestedUserId:e}),console.log("🔍 Auth token:",n.accessToken?"Present":"Missing"),console.log("🔍 Auth provider:",n.providerData?.[0]?.providerId||"Unknown"),console.log("✅ Authentication verified, proceeding with query");const r=`projects/${t}/fines`;console.log("🔍 Collection path:",r);const s={filters:[{field:"userId",operator:"==",value:e}],orderBy:{field:"createdAt",direction:"desc"},timeoutMs:8e3};console.log("🔍 Query options (with server-side filtering):",s);const o=await Ee.getDocs(r,s);console.log("✅ Query with server-side filtering succeeded");const i=o.docs.map(c=>({id:c.id,...c.data()}));console.log("✅ User fines retrieved (before client filter):",{count:i.length,userId:e}),console.log("🔍 User fines data (before client filter):",i);const a=i.filter(c=>(console.log("🔍 Checking fine:",{fineId:c.id,fineUserId:c.userId,currentUserId:e}),c.userId===e));return console.log("✅ User fines after client-side filter:",a.length),a}catch(n){if(console.error("❌ Error fetching user fines:",n),console.error("❌ Error details:",{code:n.code,message:n.message,projectId:t,userId:e}),n.code==="permission-denied"||n.message?.includes("timeout"))return console.warn("⚠️ Permission denied or timeout for fines collection, returning empty array"),[];throw Ke.handleFirestoreError(n,"getUserFines"),n}}),_4=async(t,e)=>{try{const n=`projects/${t}/fines/${e}`,r=await Ee.getDoc(n);if(r.exists)return{id:r.id,...r.data};throw new Error("Fine not found")}catch(n){throw console.error("Error fetching fine:",n),n}},dte=async(t,e,n)=>{try{const r=Lt(rn,"projects",t,"fines",e),s=await _4(t,e),o={id:Date.now().toString(),...n,timestamp:new Date},i=[...s.messages||[],o];return await Cr(r,{messages:i,lastMessageAt:new Date,updatedAt:new Date}),o}catch(r){throw console.error("Error adding message:",r),r}},hte=async(t,e,n)=>{try{const r=Lt(rn,"projects",t,"fines",e),s=await _4(t,e);if(!s.messages||!Array.isArray(s.messages))return{success:!0};const o=s.messages.map(i=>(i.sender==="admin"||i.sender==="system")&&!i.readBy?.includes(n)?{...i,readBy:[...i.readBy||[],n]}:i);return await Cr(r,{messages:o,updatedAt:new Date}),{success:!0}}catch(r){throw console.error("Error marking messages as read:",r),r}},fte=(t,e,n)=>{const r=Lt(rn,"projects",t,"fines",e);return la(r,s=>{s.exists()?n({id:s.id,...s.data()}):n(null)})},pte=async(t,e,n)=>{try{const s=`${Date.now()}_${n.name}`,o=`projects/${t}/fines/${e}/`,a=await(await Se(async()=>{const{default:c}=await Promise.resolve().then(()=>BU);return{default:c}},void 0)).default.uploadFile(n,o,s);return console.log("✅ Fine image uploaded successfully:",a),a}catch(r){throw console.error("Error uploading fine image:",r),r}},$N=t=>{try{const n=[...JSON.parse(localStorage.getItem("shownViolationNotifications")||"[]"),...t];return localStorage.setItem("shownViolationNotifications",JSON.stringify(n)),!0}catch(e){return console.error("Error marking violations as shown:",e),!1}},VN=async(t,e)=>{try{console.log("🔍 hasActiveViolations called:",{projectId:t,userId:e});const n=await vv(t,e);console.log("🔍 Total violations from getUserFines:",n.length),console.log("🔍 All violations:",n);const r=n.filter(s=>s.status==="issued"||s.status==="disputed");return console.log("🔍 Active violations (issued/disputed):",r.length),console.log("🔍 Active violations details:",r),{hasActiveViolations:r.length>0,violationCount:r.length,violations:r}}catch(n){return console.error("❌ Error checking for active violations:",n),{hasActiveViolations:!1,violationCount:0,violations:[]}}},jN=()=>{try{return localStorage.setItem("shownViolationNotifications",JSON.stringify([])),!0}catch(t){return console.error("Error clearing old notification history:",t),!1}},wv=async t=>{try{const e=await Ee.getDoc(`users/${t}`);if(!e.exists())return{isSuspended:!1,suspensionDetails:null};const n=e.data();if(!n.isSuspended)return{isSuspended:!1,suspensionDetails:null};if(n.suspensionType==="temporary"&&n.suspensionEndDate){const r=n.suspensionEndDate.toDate?n.suspensionEndDate.toDate():new Date(n.suspensionEndDate);if(new Date>r)return await UN(t),{isSuspended:!1,suspensionDetails:null}}return{isSuspended:!0,suspensionDetails:{reason:n.suspensionReason,type:n.suspensionType,suspendedAt:n.suspendedAt,suspendedBy:n.suspendedBy,suspensionEndDate:n.suspensionEndDate}}}catch(e){return console.error("Error checking user suspension:",e),{isSuspended:!1,suspensionDetails:null}}},UN=async t=>{try{await Ee.updateDoc(`users/${t}`,{isSuspended:!1,suspensionReason:null,suspensionType:null,suspendedAt:null,suspendedBy:null,suspensionEndDate:null,unsuspendedAt:new Date,unsuspendedBy:"system"})}catch(e){console.error("Error auto-unsuspending user:",e)}},FN=async(t,e)=>(await wv(t)).isSuspended?["/","/home","/profile","/access","/gate-access","/gate","/support","/support-chat"].includes(e):!0,A2=t=>{if(!t)return null;const{reason:e,type:n,suspensionEndDate:r}=t;let s=`Your account has been suspended. Reason: ${e}`;if(n==="temporary"&&r){const o=r.toDate?r.toDate():new Date(r);s+=`

Suspension will end on: ${o.toLocaleString()}`}else n==="permanent"&&(s+=`

This is a permanent suspension.`);return s+=`

You can still access your profile and gate functionality.`,{title:"Account Suspended",message:s,type:n,endDate:r}},BN={class:"main-layout"},qN={class:"app-header",style:{padding:"20px"}},HN={class:"header-content"},zN={class:"header-left"},WN={key:0,class:"loading-projects"},GN={key:1,class:"restoring-project"},KN={key:2,class:"current-project"},QN={class:"project-name"},YN={class:"header-right"},ZN={class:"modal-header"},JN={class:"modal-body"},XN={class:"projects-list"},eO={class:"project-info"},tO={class:"project-role"},nO={class:"project-actions"},rO={key:0,class:"current-badge"},sO=["onClick","disabled"],oO={key:0,class:"loading-spinner"},iO={key:1},aO=Object.assign({name:"MainLayout"},{__name:"MainLayout",setup(t){const e=an(),n=za(),r=Ct(),s=af(),{addDeadZone:o}=W8(),i=K(!1),a=K(!1),c=K(!1),u=K(0),h=K(!1),f=K(null),p=K(!1),g=K(!1),C=K(!1),T=G(()=>r.selectedProject),v=G(()=>r.userProjects),_=G(()=>T.value?.id),S=G(()=>!1),x=()=>{const ee=window.innerHeight;let N=null;const H=()=>{N&&clearTimeout(N),N=setTimeout(()=>{const Q=window.innerHeight,we=ee-Q,Ye=we>150;g.value!==Ye&&(g.value=Ye,console.log("Keyboard visibility changed:",Ye,"Height difference:",we))},100)};window.addEventListener("resize",H);const Y=Q=>{(Q.target.tagName==="INPUT"||Q.target.tagName==="TEXTAREA")&&C.value&&setTimeout(()=>{g.value=!0},300)},ne=Q=>{(Q.target.tagName==="INPUT"||Q.target.tagName==="TEXTAREA")&&C.value&&setTimeout(()=>{g.value=!1},300)};return document.addEventListener("focusin",Y),document.addEventListener("focusout",ne),()=>{window.removeEventListener("resize",H),document.removeEventListener("focusin",Y),document.removeEventListener("focusout",ne),N&&clearTimeout(N)}},R=()=>{const ee=["/complaint-chat/","/violation-chat/","/support-chat/","/service-booking-chat/","/request-chat/"];C.value=ee.some(N=>n.path.includes(N))},D=async ee=>{try{r.setLoading(!0),r.selectProject(ee),await s.switchToProject(ee.id),i.value=!1,r.setLoading(!1),console.log("Project switched successfully to:",ee.name)}catch(N){console.error("Error switching project:",N),r.setLoading(!1)}},L=()=>{i.value=!1,e.push("/profile")},b=async()=>{console.log("🔍 checkForViolations called"),console.log("🔍 Current project:",T.value);try{const ee=await yt.getCurrentUser();if(console.log("🔍 Current user:",ee?.uid),console.log("🔍 Auth object:",ee?"initialized":"not initialized"),!T.value||!ee){console.warn("⚠️ Cannot check violations: missing project or user");return}console.log("🔍 Checking for active violations...");const N=await VN(T.value.id,ee.uid);if(console.log("✅ Violation check result:",N),N.hasActiveViolations){console.log("⚠️ Active violations found:",N.violationCount),u.value=N.violationCount,c.value=!0;const H=N.violations.map(Y=>Y.id);$N(H),console.log("✅ Violation notification shown")}else console.log("✅ No active violations found"),c.value=!1,u.value=0}catch(ee){console.error("❌ Error checking for violations:",ee),c.value=!1,u.value=0}},A=()=>{c.value=!1,u.value=0},y=()=>{e.push("/profile")},P=async()=>{try{const ee=await yt.getCurrentUser();if(!ee)return;const N=await wv(ee.uid);N.isSuspended?(p.value=!0,f.value=A2(N.suspensionDetails),h.value=!0):(p.value=!1,h.value=!1,f.value=null)}catch(ee){console.error("Error checking user suspension:",ee)}},E=()=>{h.value=!1},w=()=>{e.push("/support"),h.value=!1},k=()=>{jN(),c.value=!1,u.value=0},$=ee=>{const N=n.path;switch(ee){case"home":return N==="/home";case"profile":return N==="/profile"||N==="/complaints"||N.startsWith("/complaints/")||N==="/violations"||N.startsWith("/violation-chat/")||N==="/support"||N.startsWith("/support-chat/");case"services":return N==="/services"||N==="/smart-devices"||N==="/service-category"||N==="/my-bookings"||N==="/calendar"||N==="/analytics"||N==="/news"||N.startsWith("/service-category/")||N.startsWith("/service-booking-chat/")||N==="/court-booking"||N==="/academy-programs"||N==="/academy-details"||N==="/academy-registration"||N==="/academy-booking"||N==="/stores-shopping"||N==="/store"||N==="/shopping-cart"||N.startsWith("/store/")||N.startsWith("/academy-details/");case"facilities":return N==="/facilities"||N.startsWith("/request-chat/")||N.startsWith("/request-category/")||N.startsWith("//request-category/:id/");default:return!1}};Ve(()=>r.selectedProject,async(ee,N)=>{ee&&ee.id!==N?.id&&(console.log("Project changed, triggering data refresh..."),k(),setTimeout(async()=>{try{await b()}catch(H){console.error("❌ Error checking violations after project change:",H)}},800),window.dispatchEvent(new CustomEvent("projectChanged",{detail:{newProject:ee,oldProject:N}})),setTimeout(()=>{P()},1e3))},{deep:!0}),Ve(()=>n.path,ee=>{R(),["/home","/profile"].includes(ee)&&r.hasSelectedProject&&(console.log("📍 Navigated to main page, checking violations..."),setTimeout(async()=>{try{await b()}catch(H){console.error("❌ Error checking violations on navigation:",H)}},500))},{immediate:!0});const U=ee=>{const{suspensionDetails:N,attemptedRoute:H}=ee.detail;console.log("Suspension message triggered for route:",H),N&&(p.value=!0,f.value=A2(N),h.value=!0)},Z=async()=>{console.log("📦 Project store ready - checking for violations..."),setTimeout(async()=>{try{await b()}catch(ee){console.error("❌ Error in handleProjectStoreReady:",ee)}},500)};return ft(async()=>{k(),window.addEventListener("projectStoreReady",Z),r.hasSelectedProject&&setTimeout(async()=>{try{await b()}catch(Y){console.error("❌ Error in checkForViolations during mount:",Y)}},1e3),setTimeout(()=>{P()},1500),window.addEventListener("showSuspensionMessage",U);const ee=x(),N=80;return o(0,window.innerHeight-N,window.innerWidth,N),localStorage.getItem("hasSeenSwipeHint")||setTimeout(()=>{a.value=!0,setTimeout(()=>{a.value=!1,localStorage.setItem("hasSeenSwipeHint","true")},4e3)},2e3),()=>{ee()}}),rr(()=>{window.removeEventListener("showSuspensionMessage",U),window.removeEventListener("projectStoreReady",Z)}),(ee,N)=>{const H=wh("router-link");return M(),O("div",BN,[l("header",qN,[l("div",HN,[l("div",zN,[tt(r).loading&&!T.value?(M(),O("div",WN,[...N[4]||(N[4]=[l("div",{class:"loading-dots"},[l("div",{class:"dot"}),l("div",{class:"dot"}),l("div",{class:"dot"})],-1),l("span",null,"Loading projects...",-1)])])):!tt(r).loading&&!T.value&&tt(r).userProjects.length>0?(M(),O("div",GN,[...N[5]||(N[5]=[l("div",{class:"loading-dots"},[l("div",{class:"dot"}),l("div",{class:"dot"}),l("div",{class:"dot"})],-1),l("span",null,"Restoring project...",-1)])])):T.value?(M(),O("div",KN,[l("span",QN,B(T.value.name),1),l("button",{onClick:N[0]||(N[0]=Y=>i.value=!0),class:"change-project-btn",title:"Switch Project"},[...N[6]||(N[6]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])):fe("",!0)]),N[8]||(N[8]=l("div",{class:"header-center"},[l("div",{class:"logo"},[l("img",{src:Vk,alt:"PRE Logo",class:"logo-image"})])],-1)),l("div",YN,[ze(H,{to:"/access",class:"gate-access-btn",title:"Gate Access"},{default:br(()=>[...N[7]||(N[7]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("rect",{x:"3",y:"3",width:"18",height:"18",stroke:"currentColor","stroke-width":"1.5",fill:"none"}),l("rect",{x:"4",y:"4",width:"6",height:"6",stroke:"currentColor","stroke-width":"1",fill:"none"}),l("rect",{x:"5",y:"5",width:"4",height:"4",fill:"currentColor"}),l("rect",{x:"6",y:"6",width:"2",height:"2",fill:"white"}),l("rect",{x:"14",y:"4",width:"6",height:"6",stroke:"currentColor","stroke-width":"1",fill:"none"}),l("rect",{x:"15",y:"5",width:"4",height:"4",fill:"currentColor"}),l("rect",{x:"16",y:"6",width:"2",height:"2",fill:"white"}),l("rect",{x:"4",y:"14",width:"6",height:"6",stroke:"currentColor","stroke-width":"1",fill:"none"}),l("rect",{x:"5",y:"15",width:"4",height:"4",fill:"currentColor"}),l("rect",{x:"6",y:"16",width:"2",height:"2",fill:"white"}),l("rect",{x:"11",y:"5",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"12",y:"6",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"11",y:"7",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"13",y:"7",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"5",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"7",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"9",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"6",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"8",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"11",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"13",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"15",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"17",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"19",y:"11",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"16",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"18",y:"12",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"11",y:"15",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"13",y:"15",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"15",y:"15",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"17",y:"15",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"19",y:"15",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"12",y:"16",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"14",y:"16",width:"1",height:"1",fill:"currentColor"}),l("rect",{x:"18",y:"16",width:"1",height:"1",fill:"currentColor"})],-1),l("span",{class:"gate-access-text"},"Access",-1)])]),_:1})])])]),i.value?(M(),O("div",{key:0,class:"modal-overlay",onClick:N[3]||(N[3]=Y=>i.value=!1)},[l("div",{class:"modal-content project-switcher-modal",onClick:N[2]||(N[2]=ht(()=>{},["stop"]))},[l("div",ZN,[N[10]||(N[10]=l("h3",null,"Switch Project",-1)),l("button",{onClick:N[1]||(N[1]=Y=>i.value=!1),class:"close-btn"},[...N[9]||(N[9]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 18L18 6M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",JN,[l("div",XN,[(M(!0),O(Oe,null,ot(v.value,Y=>(M(),O("div",{key:Y.id,class:be(["project-option",{current:Y.id===_.value}])},[l("div",eO,[l("h4",null,B(Y.name),1),l("span",tO,B(Y.location)+" • Unit "+B(Y.userUnit),1)]),l("div",nO,[Y.id===_.value?(M(),O("span",rO,"Current")):(M(),O("button",{key:1,onClick:ne=>D(Y),class:"switch-btn",disabled:tt(r).loading},[tt(r).loading?(M(),O("div",oO)):(M(),O("span",iO,"Switch"))],8,sO))])],2))),128))])]),l("div",{class:"modal-footer"},[l("button",{onClick:L,class:"secondary-btn"},[...N[11]||(N[11]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Add New Project ",-1)])])])])])):fe("",!0),l("main",{class:be(["main-content",{"keyboard-visible":g.value&&C.value}])},[b_(ee.$slots,"default",{},void 0)],2),l("nav",{class:be(["bottom-navigation",{hidden:S.value}])},[ze(H,{to:"/home",class:be(["nav-item",{active:$("home")}])},{default:br(()=>[...N[12]||(N[12]=[l("div",{class:"nav-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",{class:"nav-label"},"Home",-1)])]),_:1},8,["class"]),ze(H,{to:"/services",class:be(["nav-item",{active:$("services")}])},{default:br(()=>[...N[13]||(N[13]=[l("div",{class:"nav-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",{class:"nav-label"},"Services",-1)])]),_:1},8,["class"]),ze(H,{to:"/facilities",class:be(["nav-item",{active:$("facilities")}])},{default:br(()=>[...N[14]||(N[14]=[l("div",{class:"nav-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14.7 6.3A1 1 0 0 0 14 7H9.5L8.5 8L9.5 9H14A1 1 0 0 0 14.7 9.7L18.3 13.3A1 1 0 0 0 19.7 11.7L16.1 8.1L14.7 6.3Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M9.3 17.7A1 1 0 0 0 10 17H14.5L15.5 16L14.5 15H10A1 1 0 0 0 9.3 14.3L5.7 10.7A1 1 0 0 0 4.3 12.3L7.9 15.9L9.3 17.7Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",{class:"nav-label"},"Requests",-1)])]),_:1},8,["class"]),ze(H,{to:"/profile",class:be(["nav-item",{active:$("profile")}])},{default:br(()=>[...N[15]||(N[15]=[l("div",{class:"nav-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",{class:"nav-label"},"Profile",-1)])]),_:1},8,["class"])],2),c.value?(M(),$n(rN,{key:1,"is-visible":c.value,"violation-count":u.value,onClose:A,onViewViolations:y},null,8,["is-visible","violation-count"])):fe("",!0),h.value?(M(),$n(MN,{key:2,show:h.value,message:f.value,onDismiss:E,onContactSupport:w},null,8,["show","message"])):fe("",!0)])}}}),lO=pt(aO,[["__scopeId","data-v-600469b7"]]),cO={key:1,class:"auth-layout"},uO=Object.assign({name:"App"},{__name:"App",setup(t){console.log("🚀🚀🚀 JavaScript is executing! App.vue script setup started!");const e=za(),n=K(!0),{initNetworkMonitoring:r,stopNetworkMonitoring:s}=$k();window.addEventListener("error",a=>(console.error("❌ Global JavaScript error:",a.error),console.error("❌ Error details:",{message:a.message,filename:a.filename,lineno:a.lineno,colno:a.colno}),a.preventDefault(),!0)),window.addEventListener("unhandledrejection",a=>{console.error("❌ Unhandled promise rejection:",a.reason),a.preventDefault()});try{console.log("🚀 App.vue: Setting up error handlers")}catch(a){console.error("❌ Error setting up error handlers:",a)}ft(async()=>{try{console.log("🚀 App.vue: Starting app initialization..."),console.log("🌐 App.vue: Initializing network monitoring..."),await r(),console.log("✅ Network monitoring initialized"),await fn(),console.log("🚀 App.vue: Vue app mounted"),console.log("🔍 App.vue: Checking services availability...");let a=!1,c=!1;try{a=!!window.optimizedAuthService,console.log("🔍 optimizedAuthService available:",a)}catch(u){console.warn("⚠️ Error checking auth service:",u)}try{c=!!window.firestoreService,console.log("🔍 firestoreService available:",c)}catch(u){console.warn("⚠️ Error checking firestore service:",u)}if(a)try{console.log("🔍 App.vue: Initializing auth service..."),await window.optimizedAuthService.initialize(),console.log("✅ Auth service initialized")}catch(u){console.error("❌ Auth service initialization failed:",u)}if(c)try{console.log("🔍 App.vue: Initializing firestore service..."),await window.firestoreService.initialize(),console.log("✅ Firestore service initialized")}catch(u){console.error("❌ Firestore service initialization failed:",u)}console.log("🚀 App.vue: Services initialization completed"),await new Promise(u=>setTimeout(u,500)),console.log("🔍 App.vue: Setting isRouterLoading to false..."),n.value=!1,window.dispatchEvent(new CustomEvent("appReady")),console.log("🚀 App.vue: App ready, splash hidden")}catch(a){console.error("❌ App.vue: Critical error during initialization:",a),console.error("❌ Error stack:",a.stack),setTimeout(()=>{console.log("🔍 App.vue: Force hiding splash due to critical error..."),n.value=!1,window.dispatchEvent(new CustomEvent("appReady"))},1e3)}}),rr(async()=>{console.log("🛑 App.vue: Cleaning up..."),await s()});const o=["/home","/access","/services","/stores-shopping","/shopping-cart","/court-booking","/academy-booking","/academy-programs","/academy-details","/academy-registration","/my-bookings","/calendar","/analytics","/profile","/smart-devices","/news","/complaints","/complaints/:id","/facilities","/service-booking-chat/:id","/violations","/violation-chat/:id","/support","/support-chat","/support-chat/:id","/request-category","/request-chat/:id","/request-category/:id"],i=G(()=>(console.log("🔍 App.vue: Checking route:",{currentPath:e.path,isRouterLoading:n.value}),o.includes(e.path)?(console.log("🔍 App.vue: Exact match found, showing main layout"),!0):e.path.startsWith("/academy-details/")?(console.log("🔍 App.vue: Academy details route, showing main layout"),!0):e.path.startsWith("/academy-registration/")?(console.log("🔍 App.vue: Academy registration route, showing main layout"),!0):!!(e.path.startsWith("/store/")||e.path.startsWith("/complaints/")||e.path.startsWith("/service-category/")||e.path.startsWith("/service-booking-chat/")||e.path.startsWith("/violations/")||e.path.startsWith("/violation-chat/")||e.path.startsWith("/support/")||e.path.startsWith("/support-chat/")||e.path.startsWith("/request-chat/")||e.path.startsWith("/request-category/"))));return(a,c)=>{const u=wh("router-view");return M(),O("div",null,[ze(e3),ze(r9),i.value&&!n.value?(M(),$n(lO,{key:0},{default:br(()=>[ze(u)]),_:1})):n.value?fe("",!0):(M(),O("div",cO,[ze(u)])),ze(m3)])}}}),op=s9(()=>FI()),dO={class:"onboarding"},hO=Object.assign({name:"OnboardingPage"},{__name:"Onboarding",setup(t){const e=an(),n=()=>{e.push("/register")},r=()=>{e.push("/signin")},s=()=>{e.push("/support")};return(o,i)=>(M(),O("div",dO,[i[2]||(i[2]=l("div",{class:"background-image"},null,-1)),i[3]||(i[3]=l("div",{class:"overlay"},null,-1)),l("div",{class:"content"},[i[1]||(i[1]=et('<div class="main-title" data-v-9189019a><h1 data-v-9189019a>DISCOVER.</h1><h1 data-v-9189019a>MANAGE.</h1><h1 data-v-9189019a>RELIVE.</h1></div><div class="description-section" data-v-9189019a><div class="description-line" data-v-9189019a></div><p class="company-description" data-v-9189019a> Pioneers for Real Estate Development &quot;PRE&quot; is a real estate investor, developer and operator of integrated mixed-use projects based in Egypt. With expertise in planning and developing projects, PRE offers its clients tailored and crafted spaces that suit their every need. </p><p class="company-description" data-v-9189019a> Established in 2017, PRE quickly and adaptively managed to bring a new concept to the market in which luxury and practicality are fused together to offer its clients the best of all worlds. Through exclusive and contemporary residential and commercial projects, PRE continuously and skillfully tailor nature and the latest technological tools to create sustainable thriving communities that add elegance to our modern world. </p><p class="company-description" data-v-9189019a> Our developments are a true testimony to the expertise, knowledge and dedication brought daily to establish a brighter future. </p></div>',2)),l("div",{class:"actions"},[l("button",{onClick:n,class:"register-btn"}," Register "),l("div",{class:"signin-section"},[i[0]||(i[0]=l("span",{class:"signin-text"},"Already have an account?",-1)),l("button",{onClick:r,class:"signin-btn"},"Sign in")]),l("div",{class:"support-link"},[l("button",{onClick:s,class:"support-btn"},"Need Help?")])])])]))}}),fO=pt(hO,[["__scopeId","data-v-9189019a"]]);var T2;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(T2||(T2={}));var P2;(function(t){t.Body="body",t.Ionic="ionic",t.Native="native",t.None="none"})(P2||(P2={}));const di=Wa("Keyboard"),Va=Yr("registration",()=>{const t=K("personal"),e=K(!1),n=K(null),r=K(""),s=Sn({email:""}),o=Sn({compound:"",unit:"",role:"",projects:[]}),i=Sn({firstName:"",lastName:"",mobile:"",dateOfBirth:"",gender:"male",nationalId:"",password:"",confirmPassword:""});return{currentStep:t,isEmailVerified:e,tempUserId:n,verificationCode:r,personalData:s,propertyData:o,userDetails:i,setPersonalData:v=>{Object.assign(s,v)},setPropertyData:v=>{Object.assign(o,v)},setUserDetails:v=>{Object.assign(i,v)},setEmailVerified:v=>{e.value=v},setTempUserId:v=>{n.value=v},setVerificationCode:v=>{r.value=v},setCurrentStep:v=>{t.value=v},resetRegistration:()=>{t.value="personal",e.value=!1,n.value=null,r.value="",Object.assign(s,{email:""}),Object.assign(o,{compound:"",unit:"",role:"",projects:[]}),Object.assign(i,{firstName:"",lastName:"",mobile:"",dateOfBirth:"",gender:"male",nationalId:"",password:"",confirmPassword:""})},getRegistrationData:()=>({personal:{...s},property:{...o},userDetails:{...i}})}}),k4=t=>{if(!t)return{isComplete:!1,missingFields:["all"],message:"No user data found"};if(t.email&&t.emailVerified&&t.projects&&t.projects.length>0)return{isComplete:!0,missingFields:[],hasPersonalDetails:!0,hasPropertyDetails:!0,hasSystemDetails:!0,message:"Profile is complete (basic validation)"};const e={personal:["firstName","lastName","mobile","dateOfBirth","nationalId"],property:["projects"],system:["email","emailVerified"]},n=[];let r=!0,s=!0,o=!0;e.personal.forEach(c=>{(!t[c]||t[c].toString().trim()==="")&&(n.push(c),r=!1)}),e.property.forEach(c=>{c==="projects"?(!t[c]||!Array.isArray(t[c])||t[c].length===0)&&(n.push(c),s=!1):(!t[c]||t[c].toString().trim()==="")&&(n.push(c),s=!1)}),e.system.forEach(c=>{(!t[c]||t[c].toString().trim()==="")&&(n.push(c),o=!1)}),t.emailVerified||(n.push("emailVerification"),o=!1);const i=r&&s&&o;let a="";if(i)a="Profile is complete";else{const c=[];r||c.push("personal details"),s||c.push("property details"),o||c.push("system details"),a=`Profile incomplete. Missing: ${c.join(", ")}`}return{isComplete:i,missingFields:n,hasPersonalDetails:r,hasPropertyDetails:s,hasSystemDetails:o,message:a}},pO=t=>{const e=k4(t);return e.isComplete?"complete":!e.hasSystemDetails||!t.emailVerified?"email_verification":e.hasPropertyDetails?e.hasPersonalDetails?"unknown":"personal_details":"property_details"},gO=async t=>{try{if(!t)return{exists:!1,userData:null,message:"No email provided"};const e=yr(rn,"users"),n=_o(e,UE("email","==",t)),r=await Is(n);if(r.empty)return{exists:!1,userData:null,message:"User not found"};const s=r.docs[0];return{exists:!0,userData:{...s.data(),uid:s.id},message:"User found"}}catch(e){return console.error("Error checking user existence:",e),{exists:!1,userData:null,message:"Error checking user existence",error:e.message}}},mO=async t=>{try{const e=await gO(t);if(!e.exists)return{allowed:!1,reason:"User account does not exist. Please use our custom registration process.",userData:null};const n=e.userData;return n.firstName&&n.lastName&&n.mobile&&n.dateOfBirth&&n.nationalId&&n.compound&&n.unit&&n.role?{allowed:!0,reason:"User can use Google sign-in",userData:n}:{allowed:!1,reason:"Profile incomplete. Please complete your profile before using Google sign-in.",userData:n,missingFields:vO(n)}}catch(e){return console.error("Error checking Google sign-in eligibility:",e),{allowed:!1,reason:"Error checking eligibility. Please try again.",error:e.message}}},vO=t=>["firstName","lastName","mobile","dateOfBirth","nationalId","compound","unit","role"].filter(n=>!t[n]||t[n].toString().trim()===""),wO=async()=>{try{const t=Ht.getPlatform(),e=t==="ios"&&Ht.isNativePlatform();let n,r;if(e){console.log("[GoogleAuth] Using Capacitor plugin for iOS");const{FirebaseAuthentication:o}=await Se(async()=>{const{FirebaseAuthentication:i}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:i}},[]);if(await o.signInWithGoogle(),r=Le.currentUser,r||(await new Promise(i=>setTimeout(i,500)),r=Le.currentUser),!r)throw new Error("Failed to get user after Google sign-in");console.log("[GoogleAuth] iOS Google sign-in successful:",r.uid)}else console.log(`[GoogleAuth] Using Web SDK popup for ${t}`),n=await Yb(Le,cu),r=n.user;const s=await mO(r.email);return s.allowed?{success:!0,userData:s.userData,firebaseUser:r,user:r}:(await yO(r,s.reason),{success:!1,reason:s.reason,userData:null})}catch(t){return console.error("Google sign-in error:",t),{success:!1,reason:_O(t),error:t}}},yO=async(t,e)=>{try{await Qc(Le);const n=Lt(rn,"rejectedSignUps",t.uid);await xi(n,{email:t.email,attemptedAt:Bo(),rejectionReason:e,authProvider:"google",userAgent:navigator.userAgent,timestamp:Bo(),cleanedUp:!0}),console.log("Rejected sign-in cleaned up successfully")}catch(n){console.error("Error during cleanup:",n)}},_O=t=>{switch(t.code){case"auth/popup-closed-by-user":return"Sign in was cancelled";case"auth/popup-blocked":return"Pop-up was blocked. Please allow pop-ups for this site.";case"auth/network-request-failed":return"Network error. Please check your internet connection.";case"auth/too-many-requests":return"Too many sign-in attempts. Please try again later.";case"auth/user-disabled":return"This account has been disabled.";case"auth/operation-not-allowed":return"Google sign-in is not enabled for this app.";default:return"Google sign in failed. Please try again."}};/*!
  * shared v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function kO(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const bO=(t,e,n)=>CO({l:t,k:e,s:n}),CO=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Hn=t=>typeof t=="number"&&isFinite(t),EO=t=>_v(t)==="[object Date]",I2=t=>_v(t)==="[object RegExp]",yv=t=>xt(t)&&Object.keys(t).length===0,Vi=Object.assign,SO=Object.create,or=(t=null)=>SO(t);function R2(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function D2(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function AO(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,s,o)=>`${s}="${D2(o)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,s,o)=>`${s}='${D2(o)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const TO=Object.prototype.hasOwnProperty;function pi(t,e){return TO.call(t,e)}const us=Array.isArray,en=t=>typeof t=="function",Qe=t=>typeof t=="string",Zn=t=>typeof t=="boolean",En=t=>t!==null&&typeof t=="object",PO=t=>En(t)&&en(t.then)&&en(t.catch),b4=Object.prototype.toString,_v=t=>b4.call(t),xt=t=>_v(t)==="[object Object]",IO=t=>t==null?"":us(t)||xt(t)&&t.toString===b4?JSON.stringify(t,null,2):String(t);function kv(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}/*!
  * message-compiler v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function RO(t,e,n){return{line:t,column:e,offset:n}}function kg(t,e,n){return{start:t,end:e}}const wt={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14},DO=17;function lf(t,e,n={}){const{domain:r,messages:s,args:o}=n,i=t,a=new SyntaxError(String(i));return a.code=t,e&&(a.location=e),a.domain=r,a}function xO(t){throw t}const Cs=" ",LO="\r",Fn=`
`,MO="\u2028",NO="\u2029";function OO(t){const e=t;let n=0,r=1,s=1,o=0;const i=b=>e[b]===LO&&e[b+1]===Fn,a=b=>e[b]===Fn,c=b=>e[b]===NO,u=b=>e[b]===MO,h=b=>i(b)||a(b)||c(b)||u(b),f=()=>n,p=()=>r,g=()=>s,C=()=>o,T=b=>i(b)||c(b)||u(b)?Fn:e[b],v=()=>T(n),_=()=>T(n+o);function S(){return o=0,h(n)&&(r++,s=0),i(n)&&n++,n++,s++,e[n]}function x(){return i(n+o)&&o++,o++,e[n+o]}function R(){n=0,r=1,s=1,o=0}function D(b=0){o=b}function L(){const b=n+o;for(;b!==n;)S();o=0}return{index:f,line:p,column:g,peekOffset:C,charAt:T,currentChar:v,currentPeek:_,next:S,peek:x,reset:R,resetPeek:D,skipToPeek:L}}const fo=void 0,$O=".",x2="'",VO="tokenizer";function jO(t,e={}){const n=e.location!==!1,r=OO(t),s=()=>r.index(),o=()=>RO(r.line(),r.column(),r.index()),i=o(),a=s(),c={currentType:13,offset:a,startLoc:i,endLoc:i,lastType:13,lastOffset:a,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},u=()=>c,{onError:h}=e;function f(F,q,J,...oe){const Re=u();if(q.column+=J,q.offset+=J,h){const ve=n?kg(Re.startLoc,q):null,X=lf(F,ve,{domain:VO,args:oe});h(X)}}function p(F,q,J){F.endLoc=o(),F.currentType=q;const oe={type:q};return n&&(oe.loc=kg(F.startLoc,F.endLoc)),J!=null&&(oe.value=J),oe}const g=F=>p(F,13);function C(F,q){return F.currentChar()===q?(F.next(),q):(f(wt.EXPECTED_TOKEN,o(),0,q),"")}function T(F){let q="";for(;F.currentPeek()===Cs||F.currentPeek()===Fn;)q+=F.currentPeek(),F.peek();return q}function v(F){const q=T(F);return F.skipToPeek(),q}function _(F){if(F===fo)return!1;const q=F.charCodeAt(0);return q>=97&&q<=122||q>=65&&q<=90||q===95}function S(F){if(F===fo)return!1;const q=F.charCodeAt(0);return q>=48&&q<=57}function x(F,q){const{currentType:J}=q;if(J!==2)return!1;T(F);const oe=_(F.currentPeek());return F.resetPeek(),oe}function R(F,q){const{currentType:J}=q;if(J!==2)return!1;T(F);const oe=F.currentPeek()==="-"?F.peek():F.currentPeek(),Re=S(oe);return F.resetPeek(),Re}function D(F,q){const{currentType:J}=q;if(J!==2)return!1;T(F);const oe=F.currentPeek()===x2;return F.resetPeek(),oe}function L(F,q){const{currentType:J}=q;if(J!==7)return!1;T(F);const oe=F.currentPeek()===".";return F.resetPeek(),oe}function b(F,q){const{currentType:J}=q;if(J!==8)return!1;T(F);const oe=_(F.currentPeek());return F.resetPeek(),oe}function A(F,q){const{currentType:J}=q;if(!(J===7||J===11))return!1;T(F);const oe=F.currentPeek()===":";return F.resetPeek(),oe}function y(F,q){const{currentType:J}=q;if(J!==9)return!1;const oe=()=>{const ve=F.currentPeek();return ve==="{"?_(F.peek()):ve==="@"||ve==="|"||ve===":"||ve==="."||ve===Cs||!ve?!1:ve===Fn?(F.peek(),oe()):E(F,!1)},Re=oe();return F.resetPeek(),Re}function P(F){T(F);const q=F.currentPeek()==="|";return F.resetPeek(),q}function E(F,q=!0){const J=(Re=!1,ve="")=>{const X=F.currentPeek();return X==="{"||X==="@"||!X?Re:X==="|"?!(ve===Cs||ve===Fn):X===Cs?(F.peek(),J(!0,Cs)):X===Fn?(F.peek(),J(!0,Fn)):!0},oe=J();return q&&F.resetPeek(),oe}function w(F,q){const J=F.currentChar();return J===fo?fo:q(J)?(F.next(),J):null}function k(F){const q=F.charCodeAt(0);return q>=97&&q<=122||q>=65&&q<=90||q>=48&&q<=57||q===95||q===36}function $(F){return w(F,k)}function U(F){const q=F.charCodeAt(0);return q>=97&&q<=122||q>=65&&q<=90||q>=48&&q<=57||q===95||q===36||q===45}function Z(F){return w(F,U)}function ee(F){const q=F.charCodeAt(0);return q>=48&&q<=57}function N(F){return w(F,ee)}function H(F){const q=F.charCodeAt(0);return q>=48&&q<=57||q>=65&&q<=70||q>=97&&q<=102}function Y(F){return w(F,H)}function ne(F){let q="",J="";for(;q=N(F);)J+=q;return J}function Q(F){let q="";for(;;){const J=F.currentChar();if(J==="{"||J==="}"||J==="@"||J==="|"||!J)break;if(J===Cs||J===Fn)if(E(F))q+=J,F.next();else{if(P(F))break;q+=J,F.next()}else q+=J,F.next()}return q}function we(F){v(F);let q="",J="";for(;q=Z(F);)J+=q;return F.currentChar()===fo&&f(wt.UNTERMINATED_CLOSING_BRACE,o(),0),J}function Ye(F){v(F);let q="";return F.currentChar()==="-"?(F.next(),q+=`-${ne(F)}`):q+=ne(F),F.currentChar()===fo&&f(wt.UNTERMINATED_CLOSING_BRACE,o(),0),q}function lt(F){return F!==x2&&F!==Fn}function De(F){v(F),C(F,"'");let q="",J="";for(;q=w(F,lt);)q==="\\"?J+=se(F):J+=q;const oe=F.currentChar();return oe===Fn||oe===fo?(f(wt.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,o(),0),oe===Fn&&(F.next(),C(F,"'")),J):(C(F,"'"),J)}function se(F){const q=F.currentChar();switch(q){case"\\":case"'":return F.next(),`\\${q}`;case"u":return ke(F,q,4);case"U":return ke(F,q,6);default:return f(wt.UNKNOWN_ESCAPE_SEQUENCE,o(),0,q),""}}function ke(F,q,J){C(F,q);let oe="";for(let Re=0;Re<J;Re++){const ve=Y(F);if(!ve){f(wt.INVALID_UNICODE_ESCAPE_SEQUENCE,o(),0,`\\${q}${oe}${F.currentChar()}`);break}oe+=ve}return`\\${q}${oe}`}function Ce(F){return F!=="{"&&F!=="}"&&F!==Cs&&F!==Fn}function ye(F){v(F);let q="",J="";for(;q=w(F,Ce);)J+=q;return J}function Ze(F){let q="",J="";for(;q=$(F);)J+=q;return J}function z(F){const q=J=>{const oe=F.currentChar();return oe==="{"||oe==="@"||oe==="|"||oe==="("||oe===")"||!oe||oe===Cs?J:(J+=oe,F.next(),q(J))};return q("")}function W(F){v(F);const q=C(F,"|");return v(F),q}function te(F,q){let J=null;switch(F.currentChar()){case"{":return q.braceNest>=1&&f(wt.NOT_ALLOW_NEST_PLACEHOLDER,o(),0),F.next(),J=p(q,2,"{"),v(F),q.braceNest++,J;case"}":return q.braceNest>0&&q.currentType===2&&f(wt.EMPTY_PLACEHOLDER,o(),0),F.next(),J=p(q,3,"}"),q.braceNest--,q.braceNest>0&&v(F),q.inLinked&&q.braceNest===0&&(q.inLinked=!1),J;case"@":return q.braceNest>0&&f(wt.UNTERMINATED_CLOSING_BRACE,o(),0),J=de(F,q)||g(q),q.braceNest=0,J;default:{let Re=!0,ve=!0,X=!0;if(P(F))return q.braceNest>0&&f(wt.UNTERMINATED_CLOSING_BRACE,o(),0),J=p(q,1,W(F)),q.braceNest=0,q.inLinked=!1,J;if(q.braceNest>0&&(q.currentType===4||q.currentType===5||q.currentType===6))return f(wt.UNTERMINATED_CLOSING_BRACE,o(),0),q.braceNest=0,ge(F,q);if(Re=x(F,q))return J=p(q,4,we(F)),v(F),J;if(ve=R(F,q))return J=p(q,5,Ye(F)),v(F),J;if(X=D(F,q))return J=p(q,6,De(F)),v(F),J;if(!Re&&!ve&&!X)return J=p(q,12,ye(F)),f(wt.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,J.value),v(F),J;break}}return J}function de(F,q){const{currentType:J}=q;let oe=null;const Re=F.currentChar();switch((J===7||J===8||J===11||J===9)&&(Re===Fn||Re===Cs)&&f(wt.INVALID_LINKED_FORMAT,o(),0),Re){case"@":return F.next(),oe=p(q,7,"@"),q.inLinked=!0,oe;case".":return v(F),F.next(),p(q,8,".");case":":return v(F),F.next(),p(q,9,":");default:return P(F)?(oe=p(q,1,W(F)),q.braceNest=0,q.inLinked=!1,oe):L(F,q)||A(F,q)?(v(F),de(F,q)):b(F,q)?(v(F),p(q,11,Ze(F))):y(F,q)?(v(F),Re==="{"?te(F,q)||oe:p(q,10,z(F))):(J===7&&f(wt.INVALID_LINKED_FORMAT,o(),0),q.braceNest=0,q.inLinked=!1,ge(F,q))}}function ge(F,q){let J={type:13};if(q.braceNest>0)return te(F,q)||g(q);if(q.inLinked)return de(F,q)||g(q);switch(F.currentChar()){case"{":return te(F,q)||g(q);case"}":return f(wt.UNBALANCED_CLOSING_BRACE,o(),0),F.next(),p(q,3,"}");case"@":return de(F,q)||g(q);default:{if(P(F))return J=p(q,1,W(F)),q.braceNest=0,q.inLinked=!1,J;if(E(F))return p(q,0,Q(F));break}}return J}function he(){const{currentType:F,offset:q,startLoc:J,endLoc:oe}=c;return c.lastType=F,c.lastOffset=q,c.lastStartLoc=J,c.lastEndLoc=oe,c.offset=s(),c.startLoc=o(),r.currentChar()===fo?p(c,13):ge(r,c)}return{nextToken:he,currentOffset:s,currentPosition:o,context:u}}const UO="parser",FO=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function BO(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):"�"}}}function qO(t={}){const e=t.location!==!1,{onError:n}=t;function r(_,S,x,R,...D){const L=_.currentPosition();if(L.offset+=R,L.column+=R,n){const b=e?kg(x,L):null,A=lf(S,b,{domain:UO,args:D});n(A)}}function s(_,S,x){const R={type:_};return e&&(R.start=S,R.end=S,R.loc={start:x,end:x}),R}function o(_,S,x,R){e&&(_.end=S,_.loc&&(_.loc.end=x))}function i(_,S){const x=_.context(),R=s(3,x.offset,x.startLoc);return R.value=S,o(R,_.currentOffset(),_.currentPosition()),R}function a(_,S){const x=_.context(),{lastOffset:R,lastStartLoc:D}=x,L=s(5,R,D);return L.index=parseInt(S,10),_.nextToken(),o(L,_.currentOffset(),_.currentPosition()),L}function c(_,S){const x=_.context(),{lastOffset:R,lastStartLoc:D}=x,L=s(4,R,D);return L.key=S,_.nextToken(),o(L,_.currentOffset(),_.currentPosition()),L}function u(_,S){const x=_.context(),{lastOffset:R,lastStartLoc:D}=x,L=s(9,R,D);return L.value=S.replace(FO,BO),_.nextToken(),o(L,_.currentOffset(),_.currentPosition()),L}function h(_){const S=_.nextToken(),x=_.context(),{lastOffset:R,lastStartLoc:D}=x,L=s(8,R,D);return S.type!==11?(r(_,wt.UNEXPECTED_EMPTY_LINKED_MODIFIER,x.lastStartLoc,0),L.value="",o(L,R,D),{nextConsumeToken:S,node:L}):(S.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,es(S)),L.value=S.value||"",o(L,_.currentOffset(),_.currentPosition()),{node:L})}function f(_,S){const x=_.context(),R=s(7,x.offset,x.startLoc);return R.value=S,o(R,_.currentOffset(),_.currentPosition()),R}function p(_){const S=_.context(),x=s(6,S.offset,S.startLoc);let R=_.nextToken();if(R.type===8){const D=h(_);x.modifier=D.node,R=D.nextConsumeToken||_.nextToken()}switch(R.type!==9&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(R)),R=_.nextToken(),R.type===2&&(R=_.nextToken()),R.type){case 10:R.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(R)),x.key=f(_,R.value||"");break;case 4:R.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(R)),x.key=c(_,R.value||"");break;case 5:R.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(R)),x.key=a(_,R.value||"");break;case 6:R.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(R)),x.key=u(_,R.value||"");break;default:{r(_,wt.UNEXPECTED_EMPTY_LINKED_KEY,S.lastStartLoc,0);const D=_.context(),L=s(7,D.offset,D.startLoc);return L.value="",o(L,D.offset,D.startLoc),x.key=L,o(x,D.offset,D.startLoc),{nextConsumeToken:R,node:x}}}return o(x,_.currentOffset(),_.currentPosition()),{node:x}}function g(_){const S=_.context(),x=S.currentType===1?_.currentOffset():S.offset,R=S.currentType===1?S.endLoc:S.startLoc,D=s(2,x,R);D.items=[];let L=null;do{const y=L||_.nextToken();switch(L=null,y.type){case 0:y.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(y)),D.items.push(i(_,y.value||""));break;case 5:y.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(y)),D.items.push(a(_,y.value||""));break;case 4:y.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(y)),D.items.push(c(_,y.value||""));break;case 6:y.value==null&&r(_,wt.UNEXPECTED_LEXICAL_ANALYSIS,S.lastStartLoc,0,es(y)),D.items.push(u(_,y.value||""));break;case 7:{const P=p(_);D.items.push(P.node),L=P.nextConsumeToken||null;break}}}while(S.currentType!==13&&S.currentType!==1);const b=S.currentType===1?S.lastOffset:_.currentOffset(),A=S.currentType===1?S.lastEndLoc:_.currentPosition();return o(D,b,A),D}function C(_,S,x,R){const D=_.context();let L=R.items.length===0;const b=s(1,S,x);b.cases=[],b.cases.push(R);do{const A=g(_);L||(L=A.items.length===0),b.cases.push(A)}while(D.currentType!==13);return L&&r(_,wt.MUST_HAVE_MESSAGES_IN_PLURAL,x,0),o(b,_.currentOffset(),_.currentPosition()),b}function T(_){const S=_.context(),{offset:x,startLoc:R}=S,D=g(_);return S.currentType===13?D:C(_,x,R,D)}function v(_){const S=jO(_,Vi({},t)),x=S.context(),R=s(0,x.offset,x.startLoc);return e&&R.loc&&(R.loc.source=_),R.body=T(S),t.onCacheKey&&(R.cacheKey=t.onCacheKey(_)),x.currentType!==13&&r(S,wt.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,_[x.offset]||""),o(R,S.currentOffset(),S.currentPosition()),R}return{parse:v}}function es(t){if(t.type===13)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function HO(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:o=>(n.helpers.add(o),o)}}function L2(t,e){for(let n=0;n<t.length;n++)bv(t[n],e)}function bv(t,e){switch(t.type){case 1:L2(t.cases,e),e.helper("plural");break;case 2:L2(t.items,e);break;case 6:{bv(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function zO(t,e={}){const n=HO(t);n.helper("normalize"),t.body&&bv(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function WO(t){const e=t.body;return e.type===2?M2(e):e.cases.forEach(n=>M2(n)),t}function M2(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=kv(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}function ia(t){switch(t.t=t.type,t.type){case 0:{const e=t;ia(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)ia(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)ia(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;ia(e.key),e.k=e.key,delete e.key,e.modifier&&(ia(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}}delete t.type}function GO(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,o=e.location!==!1,i={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};o&&t.loc&&(i.source=t.loc.source);const a=()=>i;function c(T,v){i.code+=T}function u(T,v=!0){const _=v?r:"";c(s?_+"  ".repeat(T):_)}function h(T=!0){const v=++i.indentLevel;T&&u(v)}function f(T=!0){const v=--i.indentLevel;T&&u(v)}function p(){u(i.indentLevel)}return{context:a,push:c,indent:h,deindent:f,newline:p,helper:T=>`_${T}`,needIndent:()=>i.needIndent}}function KO(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),ja(t,e.key),e.modifier?(t.push(", "),ja(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function QO(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let o=0;o<s&&(ja(t,e.items[o]),o!==s-1);o++)t.push(", ");t.deindent(r()),t.push("])")}function YO(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let o=0;o<s&&(ja(t,e.cases[o]),o!==s-1);o++)t.push(", ");t.deindent(r()),t.push("])")}}function ZO(t,e){e.body?ja(t,e.body):t.push("null")}function ja(t,e){const{helper:n}=t;switch(e.type){case 0:ZO(t,e);break;case 1:YO(t,e);break;case 2:QO(t,e);break;case 6:KO(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const JO=(t,e={})=>{const n=Qe(e.mode)?e.mode:"normal",r=Qe(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",i=t.helpers||[],a=GO(t,{filename:r,breakLineCode:s,needIndent:o});a.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),a.indent(o),i.length>0&&(a.push(`const { ${kv(i.map(h=>`${h}: _${h}`),", ")} } = ctx`),a.newline()),a.push("return "),ja(a,t),a.deindent(o),a.push("}"),delete t.helpers;const{code:c,map:u}=a.context();return{ast:t,code:c,map:u?u.toJSON():void 0}};function XO(t,e={}){const n=Vi({},e),r=!!n.jit,s=!!n.minify,o=n.optimize==null?!0:n.optimize,a=qO(n).parse(t);return r?(o&&WO(a),s&&ia(a),{ast:a,code:""}):(zO(a,n),JO(a,n))}/*!
  * core-base v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */function ds(t){return En(t)&&Cv(t)===0&&(pi(t,"b")||pi(t,"body"))}const C4=["b","body"];function e$(t){return Ko(t,C4)}const E4=["c","cases"];function t$(t){return Ko(t,E4,[])}const S4=["s","static"];function n$(t){return Ko(t,S4)}const A4=["i","items"];function r$(t){return Ko(t,A4,[])}const T4=["t","type"];function Cv(t){return Ko(t,T4)}const P4=["v","value"];function Bu(t,e){const n=Ko(t,P4);if(n!=null)return n;throw Dc(e)}const I4=["m","modifier"];function s$(t){return Ko(t,I4)}const R4=["k","key"];function o$(t){const e=Ko(t,R4);if(e)return e;throw Dc(6)}function Ko(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(pi(t,s)&&t[s]!=null)return t[s]}return n}const D4=[...C4,...E4,...S4,...A4,...R4,...I4,...P4,...T4];function Dc(t){return new Error(`unhandled node type: ${t}`)}function ip(t){return n=>i$(n,t)}function i$(t,e){const n=e$(e);if(n==null)throw Dc(0);if(Cv(n)===1){const o=t$(n);return t.plural(o.reduce((i,a)=>[...i,N2(t,a)],[]))}else return N2(t,n)}function N2(t,e){const n=n$(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=r$(e).reduce((s,o)=>[...s,bg(t,o)],[]);return t.normalize(r)}}function bg(t,e){const n=Cv(e);switch(n){case 3:return Bu(e,n);case 9:return Bu(e,n);case 4:{const r=e;if(pi(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(pi(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw Dc(n)}case 5:{const r=e;if(pi(r,"i")&&Hn(r.i))return t.interpolate(t.list(r.i));if(pi(r,"index")&&Hn(r.index))return t.interpolate(t.list(r.index));throw Dc(n)}case 6:{const r=e,s=s$(r),o=o$(r);return t.linked(bg(t,o),s?bg(t,s):void 0,t.type)}case 7:return Bu(e,n);case 8:return Bu(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const a$=t=>t;let qu=or();function l$(t,e={}){let n=!1;const r=e.onError||xO;return e.onError=s=>{n=!0,r(s)},{...XO(t,e),detectError:n}}function c$(t,e){if(Qe(t)){Zn(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||a$)(t),s=qu[r];if(s)return s;const{ast:o,detectError:i}=l$(t,{...e,location:!1,jit:!0}),a=ip(o);return i?a:qu[r]=a}else{const n=t.cacheKey;if(n){const r=qu[n];return r||(qu[n]=ip(t))}else return ip(t)}}const Us={INVALID_ARGUMENT:DO,INVALID_DATE_ARGUMENT:18,INVALID_ISO_DATE_ARGUMENT:19,NOT_SUPPORT_LOCALE_PROMISE_VALUE:21,NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:22,NOT_SUPPORT_LOCALE_TYPE:23},u$=24;function Fs(t){return lf(t,null,void 0)}function Ev(t,e){return e.locale!=null?O2(e.locale):O2(t.locale)}let ap;function O2(t){if(Qe(t))return t;if(en(t)){if(t.resolvedOnce&&ap!=null)return ap;if(t.constructor.name==="Function"){const e=t();if(PO(e))throw Fs(Us.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return ap=e}else throw Fs(Us.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw Fs(Us.NOT_SUPPORT_LOCALE_TYPE)}function d$(t,e,n){return[...new Set([n,...us(e)?e:En(e)?Object.keys(e):Qe(e)?[e]:[n]])]}function x4(t,e,n){const r=Qe(n)?n:oh,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let o=s.__localeChainCache.get(r);if(!o){o=[];let i=[n];for(;us(i);)i=$2(o,i,e);const a=us(e)||!xt(e)?e:e.default?e.default:null;i=Qe(a)?[a]:a,us(i)&&$2(o,i,!1),s.__localeChainCache.set(r,o)}return o}function $2(t,e,n){let r=!0;for(let s=0;s<e.length&&Zn(r);s++){const o=e[s];Qe(o)&&(r=h$(t,e[s],n))}return r}function h$(t,e,n){let r;const s=e.split("-");do{const o=s.join("-");r=f$(t,o,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function f$(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(us(n)||xt(n))&&n[s]&&(r=n[s])}return r}const Qo=[];Qo[0]={w:[0],i:[3,0],"[":[4],o:[7]};Qo[1]={w:[1],".":[2],"[":[4],o:[7]};Qo[2]={w:[2],i:[3,0],0:[3,0]};Qo[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Qo[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Qo[5]={"'":[4,0],o:8,l:[5,0]};Qo[6]={'"':[4,0],o:8,l:[6,0]};const p$=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function g$(t){return p$.test(t)}function m$(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function v$(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function w$(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:g$(e)?m$(e):"*"+e}function y$(t){const e=[];let n=-1,r=0,s=0,o,i,a,c,u,h,f;const p=[];p[0]=()=>{i===void 0?i=a:i+=a},p[1]=()=>{i!==void 0&&(e.push(i),i=void 0)},p[2]=()=>{p[0](),s++},p[3]=()=>{if(s>0)s--,r=4,p[0]();else{if(s=0,i===void 0||(i=w$(i),i===!1))return!1;p[1]()}};function g(){const C=t[n+1];if(r===5&&C==="'"||r===6&&C==='"')return n++,a="\\"+C,p[0](),!0}for(;r!==null;)if(n++,o=t[n],!(o==="\\"&&g())){if(c=v$(o),f=Qo[r],u=f[c]||f.l||8,u===8||(r=u[0],u[1]!==void 0&&(h=p[u[1]],h&&(a=o,h()===!1))))return;if(r===7)return e}}const V2=new Map;function _$(t,e){return En(t)?t[e]:null}function k$(t,e){if(!En(t))return null;let n=V2.get(e);if(n||(n=y$(e),n&&V2.set(e,n)),!n)return null;const r=n.length;let s=t,o=0;for(;o<r;){const i=n[o];if(D4.includes(i)&&ds(s))return null;const a=s[i];if(a===void 0||en(s))return null;s=a,o++}return s}const b$="11.1.11",cf=-1,oh="en-US",j2="",U2=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function C$(){return{upper:(t,e)=>e==="text"&&Qe(t)?t.toUpperCase():e==="vnode"&&En(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&Qe(t)?t.toLowerCase():e==="vnode"&&En(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&Qe(t)?U2(t):e==="vnode"&&En(t)&&"__v_isVNode"in t?U2(t.children):t}}let L4;function E$(t){L4=t}let M4;function S$(t){M4=t}let N4;function A$(t){N4=t}let O4=null;const F2=t=>{O4=t},T$=()=>O4;let B2=0;function P$(t={}){const e=en(t.onWarn)?t.onWarn:kO,n=Qe(t.version)?t.version:b$,r=Qe(t.locale)||en(t.locale)?t.locale:oh,s=en(r)?oh:r,o=us(t.fallbackLocale)||xt(t.fallbackLocale)||Qe(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,i=xt(t.messages)?t.messages:lp(s),a=xt(t.datetimeFormats)?t.datetimeFormats:lp(s),c=xt(t.numberFormats)?t.numberFormats:lp(s),u=Vi(or(),t.modifiers,C$()),h=t.pluralRules||or(),f=en(t.missing)?t.missing:null,p=Zn(t.missingWarn)||I2(t.missingWarn)?t.missingWarn:!0,g=Zn(t.fallbackWarn)||I2(t.fallbackWarn)?t.fallbackWarn:!0,C=!!t.fallbackFormat,T=!!t.unresolving,v=en(t.postTranslation)?t.postTranslation:null,_=xt(t.processor)?t.processor:null,S=Zn(t.warnHtmlMessage)?t.warnHtmlMessage:!0,x=!!t.escapeParameter,R=en(t.messageCompiler)?t.messageCompiler:L4,D=en(t.messageResolver)?t.messageResolver:M4||_$,L=en(t.localeFallbacker)?t.localeFallbacker:N4||d$,b=En(t.fallbackContext)?t.fallbackContext:void 0,A=t,y=En(A.__datetimeFormatters)?A.__datetimeFormatters:new Map,P=En(A.__numberFormatters)?A.__numberFormatters:new Map,E=En(A.__meta)?A.__meta:{};B2++;const w={version:n,cid:B2,locale:r,fallbackLocale:o,messages:i,modifiers:u,pluralRules:h,missing:f,missingWarn:p,fallbackWarn:g,fallbackFormat:C,unresolving:T,postTranslation:v,processor:_,warnHtmlMessage:S,escapeParameter:x,messageCompiler:R,messageResolver:D,localeFallbacker:L,fallbackContext:b,onWarn:e,__meta:E};return w.datetimeFormats=a,w.numberFormats=c,w.__datetimeFormatters=y,w.__numberFormatters=P,w}const lp=t=>({[t]:or()});function Sv(t,e,n,r,s){const{missing:o,onWarn:i}=t;if(o!==null){const a=o(t,n,e,s);return Qe(a)?a:e}else return e}function Tl(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function I$(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function R$(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(I$(t,e[r]))return!0;return!1}function q2(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:o,localeFallbacker:i}=t,{__datetimeFormatters:a}=t,[c,u,h,f]=Cg(...e),p=Zn(h.missingWarn)?h.missingWarn:t.missingWarn;Zn(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,C=Ev(t,h),T=i(t,s,C);if(!Qe(c)||c==="")return new Intl.DateTimeFormat(C,f).format(u);let v={},_,S=null;const x="datetime format";for(let L=0;L<T.length&&(_=T[L],v=n[_]||{},S=v[c],!xt(S));L++)Sv(t,c,_,p,x);if(!xt(S)||!Qe(_))return r?cf:c;let R=`${_}__${c}`;yv(f)||(R=`${R}__${JSON.stringify(f)}`);let D=a.get(R);return D||(D=new Intl.DateTimeFormat(_,Vi({},S,f)),a.set(R,D)),g?D.formatToParts(u):D.format(u)}const $4=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function Cg(...t){const[e,n,r,s]=t,o=or();let i=or(),a;if(Qe(e)){const c=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!c)throw Fs(Us.INVALID_ISO_DATE_ARGUMENT);const u=c[3]?c[3].trim().startsWith("T")?`${c[1].trim()}${c[3].trim()}`:`${c[1].trim()}T${c[3].trim()}`:c[1].trim();a=new Date(u);try{a.toISOString()}catch{throw Fs(Us.INVALID_ISO_DATE_ARGUMENT)}}else if(EO(e)){if(isNaN(e.getTime()))throw Fs(Us.INVALID_DATE_ARGUMENT);a=e}else if(Hn(e))a=e;else throw Fs(Us.INVALID_ARGUMENT);return Qe(n)?o.key=n:xt(n)&&Object.keys(n).forEach(c=>{$4.includes(c)?i[c]=n[c]:o[c]=n[c]}),Qe(r)?o.locale=r:xt(r)&&(i=r),xt(s)&&(i=s),[o.key||"",a,o,i]}function H2(t,e,n){const r=t;for(const s in n){const o=`${e}__${s}`;r.__datetimeFormatters.has(o)&&r.__datetimeFormatters.delete(o)}}function z2(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:o,localeFallbacker:i}=t,{__numberFormatters:a}=t,[c,u,h,f]=Eg(...e),p=Zn(h.missingWarn)?h.missingWarn:t.missingWarn;Zn(h.fallbackWarn)?h.fallbackWarn:t.fallbackWarn;const g=!!h.part,C=Ev(t,h),T=i(t,s,C);if(!Qe(c)||c==="")return new Intl.NumberFormat(C,f).format(u);let v={},_,S=null;const x="number format";for(let L=0;L<T.length&&(_=T[L],v=n[_]||{},S=v[c],!xt(S));L++)Sv(t,c,_,p,x);if(!xt(S)||!Qe(_))return r?cf:c;let R=`${_}__${c}`;yv(f)||(R=`${R}__${JSON.stringify(f)}`);let D=a.get(R);return D||(D=new Intl.NumberFormat(_,Vi({},S,f)),a.set(R,D)),g?D.formatToParts(u):D.format(u)}const V4=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function Eg(...t){const[e,n,r,s]=t,o=or();let i=or();if(!Hn(e))throw Fs(Us.INVALID_ARGUMENT);const a=e;return Qe(n)?o.key=n:xt(n)&&Object.keys(n).forEach(c=>{V4.includes(c)?i[c]=n[c]:o[c]=n[c]}),Qe(r)?o.locale=r:xt(r)&&(i=r),xt(s)&&(i=s),[o.key||"",a,o,i]}function W2(t,e,n){const r=t;for(const s in n){const o=`${e}__${s}`;r.__numberFormatters.has(o)&&r.__numberFormatters.delete(o)}}const D$=t=>t,x$=t=>"",L$="text",M$=t=>t.length===0?"":kv(t),N$=IO;function G2(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function O$(t){const e=Hn(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(Hn(t.named.count)||Hn(t.named.n))?Hn(t.named.count)?t.named.count:Hn(t.named.n)?t.named.n:e:e}function $$(t,e){e.count||(e.count=t),e.n||(e.n=t)}function V$(t={}){const e=t.locale,n=O$(t),r=En(t.pluralRules)&&Qe(e)&&en(t.pluralRules[e])?t.pluralRules[e]:G2,s=En(t.pluralRules)&&Qe(e)&&en(t.pluralRules[e])?G2:void 0,o=_=>_[r(n,_.length,s)],i=t.list||[],a=_=>i[_],c=t.named||or();Hn(t.pluralIndex)&&$$(n,c);const u=_=>c[_];function h(_,S){const x=en(t.messages)?t.messages(_,!!S):En(t.messages)?t.messages[_]:!1;return x||(t.parent?t.parent.message(_):x$)}const f=_=>t.modifiers?t.modifiers[_]:D$,p=xt(t.processor)&&en(t.processor.normalize)?t.processor.normalize:M$,g=xt(t.processor)&&en(t.processor.interpolate)?t.processor.interpolate:N$,C=xt(t.processor)&&Qe(t.processor.type)?t.processor.type:L$,v={list:a,named:u,plural:o,linked:(_,...S)=>{const[x,R]=S;let D="text",L="";S.length===1?En(x)?(L=x.modifier||L,D=x.type||D):Qe(x)&&(L=x||L):S.length===2&&(Qe(x)&&(L=x||L),Qe(R)&&(D=R||D));const b=h(_,!0)(v),A=D==="vnode"&&us(b)&&L?b[0]:b;return L?f(L)(A,D):A},message:h,type:C,interpolate:g,normalize:p,values:Vi(or(),i,c)};return v}const K2=()=>"",zs=t=>en(t);function Q2(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:o,fallbackLocale:i,messages:a}=t,[c,u]=Sg(...e),h=Zn(u.missingWarn)?u.missingWarn:t.missingWarn,f=Zn(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,p=Zn(u.escapeParameter)?u.escapeParameter:t.escapeParameter,g=!!u.resolvedMessage,C=Qe(u.default)||Zn(u.default)?Zn(u.default)?o?c:()=>c:u.default:n?o?c:()=>c:null,T=n||C!=null&&(Qe(C)||en(C)),v=Ev(t,u);p&&j$(u);let[_,S,x]=g?[c,v,a[v]||or()]:j4(t,c,v,i,f,h),R=_,D=c;if(!g&&!(Qe(R)||ds(R)||zs(R))&&T&&(R=C,D=R),!g&&(!(Qe(R)||ds(R)||zs(R))||!Qe(S)))return s?cf:c;let L=!1;const b=()=>{L=!0},A=zs(R)?R:U4(t,c,S,R,D,b);if(L)return R;const y=B$(t,S,x,u),P=V$(y),E=U$(t,A,P);let w=r?r(E,c):E;return p&&Qe(w)&&(w=AO(w)),w}function j$(t){us(t.list)?t.list=t.list.map(e=>Qe(e)?R2(e):e):En(t.named)&&Object.keys(t.named).forEach(e=>{Qe(t.named[e])&&(t.named[e]=R2(t.named[e]))})}function j4(t,e,n,r,s,o){const{messages:i,onWarn:a,messageResolver:c,localeFallbacker:u}=t,h=u(t,r,n);let f=or(),p,g=null;const C="translate";for(let T=0;T<h.length&&(p=h[T],f=i[p]||or(),(g=c(f,e))===null&&(g=f[e]),!(Qe(g)||ds(g)||zs(g)));T++)if(!R$(p,h)){const v=Sv(t,e,p,o,C);v!==e&&(g=v)}return[g,p,f]}function U4(t,e,n,r,s,o){const{messageCompiler:i,warnHtmlMessage:a}=t;if(zs(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(i==null){const u=(()=>r);return u.locale=n,u.key=e,u}const c=i(r,F$(t,n,s,r,a,o));return c.locale=n,c.key=e,c.source=r,c}function U$(t,e,n){return e(n)}function Sg(...t){const[e,n,r]=t,s=or();if(!Qe(e)&&!Hn(e)&&!zs(e)&&!ds(e))throw Fs(Us.INVALID_ARGUMENT);const o=Hn(e)?String(e):(zs(e),e);return Hn(n)?s.plural=n:Qe(n)?s.default=n:xt(n)&&!yv(n)?s.named=n:us(n)&&(s.list=n),Hn(r)?s.plural=r:Qe(r)?s.default=r:xt(r)&&Vi(s,r),[o,s]}function F$(t,e,n,r,s,o){return{locale:e,key:n,warnHtmlMessage:s,onError:i=>{throw o&&o(i),i},onCacheKey:i=>bO(e,n,i)}}function B$(t,e,n,r){const{modifiers:s,pluralRules:o,messageResolver:i,fallbackLocale:a,fallbackWarn:c,missingWarn:u,fallbackContext:h}=t,p={locale:e,modifiers:s,pluralRules:o,messages:(g,C)=>{let T=i(n,g);if(T==null&&(h||C)){const[,,v]=j4(h||t,g,e,a,c,u);T=i(v,g)}if(Qe(T)||ds(T)){let v=!1;const S=U4(t,g,e,T,g,()=>{v=!0});return v?K2:S}else return zs(T)?T:K2}};return t.processor&&(p.processor=t.processor),r.list&&(p.list=r.list),r.named&&(p.named=r.named),Hn(r.plural)&&(p.pluralIndex=r.plural),p}/*!
  * shared v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const ih=typeof window<"u",Yo=(t,e=!1)=>e?Symbol.for(t):Symbol(t),xc=t=>typeof t=="number"&&isFinite(t),Y2=t=>F4(t)==="[object RegExp]",q$=t=>$r(t)&&Object.keys(t).length===0,hs=Object.assign,H$=Object.create,fr=(t=null)=>H$(t),z$=Object.prototype.hasOwnProperty;function ah(t,e){return z$.call(t,e)}const Or=Array.isArray,Hu=t=>typeof t=="function",Gt=t=>typeof t=="string",Ts=t=>typeof t=="boolean",er=t=>t!==null&&typeof t=="object",W$=Object.prototype.toString,F4=t=>W$.call(t),$r=t=>F4(t)==="[object Object]",zu=t=>!er(t)||Or(t);function wd(t,e){if(zu(t)||zu(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(o=>{o!=="__proto__"&&(er(r[o])&&!er(s[o])&&(s[o]=Array.isArray(r[o])?[]:fr()),zu(s[o])||zu(r[o])?s[o]=r[o]:n.push({src:r[o],des:s[o]}))})}}/*!
  * vue-i18n v11.1.11
  * (c) 2025 kazuya kawaguchi
  * Released under the MIT License.
  */const G$="11.1.11",Rr={UNEXPECTED_RETURN_TYPE:u$,INVALID_ARGUMENT:25,MUST_BE_CALL_SETUP_TOP:26,NOT_INSTALLED:27,REQUIRED_VALUE:28,INVALID_VALUE:29,NOT_INSTALLED_WITH_PROVIDE:31,UNEXPECTED_ERROR:32};function Kr(t,...e){return lf(t,null,void 0)}const Ag=Yo("__translateVNode"),Tg=Yo("__datetimeParts"),Pg=Yo("__numberParts"),K$=Yo("__setPluralRules"),Q$=Yo("__injectWithOption"),Ig=Yo("__dispose");function Lc(t){if(!er(t)||ds(t))return t;for(const e in t)if(ah(t,e))if(!e.includes("."))er(t[e])&&Lc(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,o=!1;for(let i=0;i<r;i++){if(n[i]==="__proto__")throw new Error(`unsafe key: ${n[i]}`);if(n[i]in s||(s[n[i]]=fr()),!er(s[n[i]])){o=!0;break}s=s[n[i]]}if(o||(ds(s)?D4.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!ds(s)){const i=s[n[r]];er(i)&&Lc(i)}}return t}function B4(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:o}=e,i=$r(n)?n:Or(r)?fr():{[t]:fr()};if(Or(r)&&r.forEach(a=>{if("locale"in a&&"resource"in a){const{locale:c,resource:u}=a;c?(i[c]=i[c]||fr(),wd(u,i[c])):wd(u,i)}else Gt(a)&&wd(JSON.parse(a),i)}),s==null&&o)for(const a in i)ah(i,a)&&Lc(i[a]);return i}function Y$(t){return t.type}function Z$(t,e,n){let r=er(e.messages)?e.messages:fr();"__i18nGlobal"in n&&(r=B4(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(o=>{t.mergeLocaleMessage(o,r[o])});{if(er(e.datetimeFormats)){const o=Object.keys(e.datetimeFormats);o.length&&o.forEach(i=>{t.mergeDateTimeFormat(i,e.datetimeFormats[i])})}if(er(e.numberFormats)){const o=Object.keys(e.numberFormats);o.length&&o.forEach(i=>{t.mergeNumberFormat(i,e.numberFormats[i])})}}}function Z2(t){return ze($c,null,t,0)}const J2=()=>[],J$=()=>!1;let X2=0;function ey(t){return((e,n,r,s)=>t(n,r,It()||void 0,s))}function q4(t={}){const{__root:e,__injectWithOption:n}=t,r=e===void 0,s=t.flatJson,o=ih?K:t_;let i=Ts(t.inheritLocale)?t.inheritLocale:!0;const a=o(e&&i?e.locale.value:Gt(t.locale)?t.locale:oh),c=o(e&&i?e.fallbackLocale.value:Gt(t.fallbackLocale)||Or(t.fallbackLocale)||$r(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:a.value),u=o(B4(a.value,t)),h=o($r(t.datetimeFormats)?t.datetimeFormats:{[a.value]:{}}),f=o($r(t.numberFormats)?t.numberFormats:{[a.value]:{}});let p=e?e.missingWarn:Ts(t.missingWarn)||Y2(t.missingWarn)?t.missingWarn:!0,g=e?e.fallbackWarn:Ts(t.fallbackWarn)||Y2(t.fallbackWarn)?t.fallbackWarn:!0,C=e?e.fallbackRoot:Ts(t.fallbackRoot)?t.fallbackRoot:!0,T=!!t.fallbackFormat,v=Hu(t.missing)?t.missing:null,_=Hu(t.missing)?ey(t.missing):null,S=Hu(t.postTranslation)?t.postTranslation:null,x=e?e.warnHtmlMessage:Ts(t.warnHtmlMessage)?t.warnHtmlMessage:!0,R=!!t.escapeParameter;const D=e?e.modifiers:$r(t.modifiers)?t.modifiers:{};let L=t.pluralRules||e&&e.pluralRules,b;b=(()=>{r&&F2(null);const X={version:G$,locale:a.value,fallbackLocale:c.value,messages:u.value,modifiers:D,pluralRules:L,missing:_===null?void 0:_,missingWarn:p,fallbackWarn:g,fallbackFormat:T,unresolving:!0,postTranslation:S===null?void 0:S,warnHtmlMessage:x,escapeParameter:R,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};X.datetimeFormats=h.value,X.numberFormats=f.value,X.__datetimeFormatters=$r(b)?b.__datetimeFormatters:void 0,X.__numberFormatters=$r(b)?b.__numberFormatters:void 0;const ae=P$(X);return r&&F2(ae),ae})(),Tl(b,a.value,c.value);function y(){return[a.value,c.value,u.value,h.value,f.value]}const P=G({get:()=>a.value,set:X=>{b.locale=X,a.value=X}}),E=G({get:()=>c.value,set:X=>{b.fallbackLocale=X,c.value=X,Tl(b,a.value,X)}}),w=G(()=>u.value),k=G(()=>h.value),$=G(()=>f.value);function U(){return Hu(S)?S:null}function Z(X){S=X,b.postTranslation=X}function ee(){return v}function N(X){X!==null&&(_=ey(X)),v=X,b.missing=_}const H=(X,ae,Ae,Me,Be,Rt)=>{y();let _t;try{r||(b.fallbackContext=e?T$():void 0),_t=X(b)}finally{r||(b.fallbackContext=void 0)}if(Ae!=="translate exists"&&xc(_t)&&_t===cf||Ae==="translate exists"&&!_t){const[vn,Jt]=ae();return e&&C?Me(e):Be(vn)}else{if(Rt(_t))return _t;throw Kr(Rr.UNEXPECTED_RETURN_TYPE)}};function Y(...X){return H(ae=>Reflect.apply(Q2,null,[ae,...X]),()=>Sg(...X),"translate",ae=>Reflect.apply(ae.t,ae,[...X]),ae=>ae,ae=>Gt(ae))}function ne(...X){const[ae,Ae,Me]=X;if(Me&&!er(Me))throw Kr(Rr.INVALID_ARGUMENT);return Y(ae,Ae,hs({resolvedMessage:!0},Me||{}))}function Q(...X){return H(ae=>Reflect.apply(q2,null,[ae,...X]),()=>Cg(...X),"datetime format",ae=>Reflect.apply(ae.d,ae,[...X]),()=>j2,ae=>Gt(ae)||Or(ae))}function we(...X){return H(ae=>Reflect.apply(z2,null,[ae,...X]),()=>Eg(...X),"number format",ae=>Reflect.apply(ae.n,ae,[...X]),()=>j2,ae=>Gt(ae)||Or(ae))}function Ye(X){return X.map(ae=>Gt(ae)||xc(ae)||Ts(ae)?Z2(String(ae)):ae)}const De={normalize:Ye,interpolate:X=>X,type:"vnode"};function se(...X){return H(ae=>{let Ae;const Me=ae;try{Me.processor=De,Ae=Reflect.apply(Q2,null,[Me,...X])}finally{Me.processor=null}return Ae},()=>Sg(...X),"translate",ae=>ae[Ag](...X),ae=>[Z2(ae)],ae=>Or(ae))}function ke(...X){return H(ae=>Reflect.apply(z2,null,[ae,...X]),()=>Eg(...X),"number format",ae=>ae[Pg](...X),J2,ae=>Gt(ae)||Or(ae))}function Ce(...X){return H(ae=>Reflect.apply(q2,null,[ae,...X]),()=>Cg(...X),"datetime format",ae=>ae[Tg](...X),J2,ae=>Gt(ae)||Or(ae))}function ye(X){L=X,b.pluralRules=L}function Ze(X,ae){return H(()=>{if(!X)return!1;const Ae=Gt(ae)?ae:a.value,Me=te(Ae),Be=b.messageResolver(Me,X);return ds(Be)||zs(Be)||Gt(Be)},()=>[X],"translate exists",Ae=>Reflect.apply(Ae.te,Ae,[X,ae]),J$,Ae=>Ts(Ae))}function z(X){let ae=null;const Ae=x4(b,c.value,a.value);for(let Me=0;Me<Ae.length;Me++){const Be=u.value[Ae[Me]]||{},Rt=b.messageResolver(Be,X);if(Rt!=null){ae=Rt;break}}return ae}function W(X){const ae=z(X);return ae??(e?e.tm(X)||{}:{})}function te(X){return u.value[X]||{}}function de(X,ae){if(s){const Ae={[X]:ae};for(const Me in Ae)ah(Ae,Me)&&Lc(Ae[Me]);ae=Ae[X]}u.value[X]=ae,b.messages=u.value}function ge(X,ae){u.value[X]=u.value[X]||{};const Ae={[X]:ae};if(s)for(const Me in Ae)ah(Ae,Me)&&Lc(Ae[Me]);ae=Ae[X],wd(ae,u.value[X]),b.messages=u.value}function he(X){return h.value[X]||{}}function F(X,ae){h.value[X]=ae,b.datetimeFormats=h.value,H2(b,X,ae)}function q(X,ae){h.value[X]=hs(h.value[X]||{},ae),b.datetimeFormats=h.value,H2(b,X,ae)}function J(X){return f.value[X]||{}}function oe(X,ae){f.value[X]=ae,b.numberFormats=f.value,W2(b,X,ae)}function Re(X,ae){f.value[X]=hs(f.value[X]||{},ae),b.numberFormats=f.value,W2(b,X,ae)}X2++,e&&ih&&(Ve(e.locale,X=>{i&&(a.value=X,b.locale=X,Tl(b,a.value,c.value))}),Ve(e.fallbackLocale,X=>{i&&(c.value=X,b.fallbackLocale=X,Tl(b,a.value,c.value))}));const ve={id:X2,locale:P,fallbackLocale:E,get inheritLocale(){return i},set inheritLocale(X){i=X,X&&e&&(a.value=e.locale.value,c.value=e.fallbackLocale.value,Tl(b,a.value,c.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:w,get modifiers(){return D},get pluralRules(){return L||{}},get isGlobal(){return r},get missingWarn(){return p},set missingWarn(X){p=X,b.missingWarn=p},get fallbackWarn(){return g},set fallbackWarn(X){g=X,b.fallbackWarn=g},get fallbackRoot(){return C},set fallbackRoot(X){C=X},get fallbackFormat(){return T},set fallbackFormat(X){T=X,b.fallbackFormat=T},get warnHtmlMessage(){return x},set warnHtmlMessage(X){x=X,b.warnHtmlMessage=X},get escapeParameter(){return R},set escapeParameter(X){R=X,b.escapeParameter=X},t:Y,getLocaleMessage:te,setLocaleMessage:de,mergeLocaleMessage:ge,getPostTranslationHandler:U,setPostTranslationHandler:Z,getMissingHandler:ee,setMissingHandler:N,[K$]:ye};return ve.datetimeFormats=k,ve.numberFormats=$,ve.rt=ne,ve.te=Ze,ve.tm=W,ve.d=Q,ve.n=we,ve.getDateTimeFormat=he,ve.setDateTimeFormat=F,ve.mergeDateTimeFormat=q,ve.getNumberFormat=J,ve.setNumberFormat=oe,ve.mergeNumberFormat=Re,ve[Q$]=n,ve[Ag]=se,ve[Tg]=Ce,ve[Pg]=ke,ve}const Av={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function X$({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Oe?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},fr())}function H4(){return Oe}const eV=qa({name:"i18n-t",props:hs({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>xc(t)||!isNaN(t)}},Av),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||uf({useScope:t.scope,__useComponent:!0});return()=>{const o=Object.keys(n).filter(f=>f[0]!=="_"),i=fr();t.locale&&(i.locale=t.locale),t.plural!==void 0&&(i.plural=Gt(t.plural)?+t.plural:t.plural);const a=X$(e,o),c=s[Ag](t.keypath,a,i),u=hs(fr(),r),h=Gt(t.tag)||er(t.tag)?t.tag:H4();return ue(h,u,c)}}}),ty=eV;function tV(t){return Or(t)&&!Gt(t[0])}function z4(t,e,n,r){const{slots:s,attrs:o}=e;return()=>{const i={part:!0};let a=fr();t.locale&&(i.locale=t.locale),Gt(t.format)?i.key=t.format:er(t.format)&&(Gt(t.format.key)&&(i.key=t.format.key),a=Object.keys(t.format).reduce((p,g)=>n.includes(g)?hs(fr(),p,{[g]:t.format[g]}):p,fr()));const c=r(t.value,i,a);let u=[i.key];Or(c)?u=c.map((p,g)=>{const C=s[p.type],T=C?C({[p.type]:p.value,index:g,parts:c}):[p.value];return tV(T)&&(T[0].key=`${p.type}-${g}`),T}):Gt(c)&&(u=[c]);const h=hs(fr(),o),f=Gt(t.tag)||er(t.tag)?t.tag:H4();return ue(f,h,u)}}const nV=qa({name:"i18n-n",props:hs({value:{type:Number,required:!0},format:{type:[String,Object]}},Av),setup(t,e){const n=t.i18n||uf({useScope:t.scope,__useComponent:!0});return z4(t,e,V4,(...r)=>n[Pg](...r))}}),ny=nV;function rV(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function sV(t){const e=i=>{const{instance:a,value:c}=i;if(!a||!a.$)throw Kr(Rr.UNEXPECTED_ERROR);const u=rV(t,a.$),h=ry(c);return[Reflect.apply(u.t,u,[...sy(h)]),u]};return{created:(i,a)=>{const[c,u]=e(a);ih&&t.global===u&&(i.__i18nWatcher=Ve(u.locale,()=>{a.instance&&a.instance.$forceUpdate()})),i.__composer=u,i.textContent=c},unmounted:i=>{ih&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:a})=>{if(i.__composer){const c=i.__composer,u=ry(a);i.textContent=Reflect.apply(c.t,c,[...sy(u)])}},getSSRProps:i=>{const[a]=e(i);return{textContent:a}}}}function ry(t){if(Gt(t))return{path:t};if($r(t)){if(!("path"in t))throw Kr(Rr.REQUIRED_VALUE,"path");return t}else throw Kr(Rr.INVALID_VALUE)}function sy(t){const{path:e,locale:n,args:r,choice:s,plural:o}=t,i={},a=r||{};return Gt(n)&&(i.locale=n),xc(s)&&(i.plural=s),xc(o)&&(i.plural=o),[e,a,i]}function oV(t,e,...n){const r=$r(n[0])?n[0]:{};(Ts(r.globalInstall)?r.globalInstall:!0)&&([ty.name,"I18nT"].forEach(o=>t.component(o,ty)),[ny.name,"I18nN"].forEach(o=>t.component(o,ny)),[iy.name,"I18nD"].forEach(o=>t.component(o,iy))),t.directive("t",sV(e))}const iV=Yo("global-vue-i18n");function gte(t={}){const e=Ts(t.globalInjection)?t.globalInjection:!0,n=new Map,[r,s]=aV(t),o=Yo("");function i(h){return n.get(h)||null}function a(h,f){n.set(h,f)}function c(h){n.delete(h)}const u={get mode(){return"composition"},async install(h,...f){if(h.__VUE_I18N_SYMBOL__=o,h.provide(h.__VUE_I18N_SYMBOL__,u),$r(f[0])){const C=f[0];u.__composerExtend=C.__composerExtend,u.__vueI18nExtend=C.__vueI18nExtend}let p=null;e&&(p=gV(h,u.global)),oV(h,u,...f);const g=h.unmount;h.unmount=()=>{p&&p(),u.dispose(),g()}},get global(){return s},dispose(){r.stop()},__instances:n,__getInstance:i,__setInstance:a,__deleteInstance:c};return u}function uf(t={}){const e=It();if(e==null)throw Kr(Rr.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Kr(Rr.NOT_INSTALLED);const n=lV(e),r=uV(n),s=Y$(e),o=cV(t,s);if(o==="global")return Z$(r,t,s),r;if(o==="parent"){let c=dV(n,e,t.__useComponent);return c==null&&(c=r),c}const i=n;let a=i.__getInstance(e);if(a==null){const c=hs({},t);"__i18n"in s&&(c.__i18n=s.__i18n),r&&(c.__root=r),a=q4(c),i.__composerExtend&&(a[Ig]=i.__composerExtend(a)),fV(i,e,a),i.__setInstance(e,a)}return a}function aV(t,e){const n=jg(),r=n.run(()=>q4(t));if(r==null)throw Kr(Rr.UNEXPECTED_ERROR);return[n,r]}function lV(t){const e=tr(t.isCE?iV:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Kr(t.isCE?Rr.NOT_INSTALLED_WITH_PROVIDE:Rr.UNEXPECTED_ERROR);return e}function cV(t,e){return q$(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function uV(t){return t.mode==="composition"?t.global:t.global.__composer}function dV(t,e,n=!1){let r=null;const s=e.root;let o=hV(e,n);for(;o!=null;){const i=t;if(t.mode==="composition"&&(r=i.__getInstance(o)),r!=null||s===o)break;o=o.parent}return r}function hV(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function fV(t,e,n){ft(()=>{},e),rr(()=>{const r=n;t.__deleteInstance(e);const s=r[Ig];s&&(s(),delete r[Ig])},e)}const pV=["locale","fallbackLocale","availableLocales"],oy=["t","rt","d","n","tm","te"];function gV(t,e){const n=Object.create(null);return pV.forEach(s=>{const o=Object.getOwnPropertyDescriptor(e,s);if(!o)throw Kr(Rr.UNEXPECTED_ERROR);const i=Ut(o.value)?{get(){return o.value.value},set(a){o.value.value=a}}:{get(){return o.get&&o.get()}};Object.defineProperty(n,s,i)}),t.config.globalProperties.$i18n=n,oy.forEach(s=>{const o=Object.getOwnPropertyDescriptor(e,s);if(!o||!o.value)throw Kr(Rr.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,o)}),()=>{delete t.config.globalProperties.$i18n,oy.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}const mV=qa({name:"i18n-d",props:hs({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Av),setup(t,e){const n=t.i18n||uf({useScope:t.scope,__useComponent:!0});return z4(t,e,$4,(...r)=>n[Tg](...r))}}),iy=mV;E$(c$);S$(k$);A$(x4);const vV={class:"pending-modal-overlay"},wV={class:"pending-modal-container"},yV={class:"pending-modal-header"},_V={class:"pending-modal-title"},kV={class:"pending-modal-body"},bV={class:"status-message"},CV={class:"status-title"},EV={class:"status-description"},SV={class:"progress-steps"},AV={class:"step completed"},TV={class:"step-label"},PV={class:"step active"},IV={class:"step-label"},RV={class:"step"},DV={class:"step-label"},xV={class:"support-info"},LV={class:"support-title"},MV={class:"support-item"},NV={class:"support-text"},OV={href:"mailto:support@pre-group.com",class:"support-link"},$V={class:"support-item"},VV={class:"support-text"},jV={href:"tel:+201234567890",class:"support-link"},UV={class:"support-item"},FV={class:"support-text"},BV={class:"support-link"},qV={class:"action-buttons"},HV={__name:"PendingApprovalModal",setup(t){const e=an(),n=Zr(),{t:r}=uf(),s=async()=>{try{await Qc(Le),n.showSuccess(r("signedOutSuccessfully")),e.push("/sign-in")}catch(o){console.error("Logout error:",o),n.showError(r("failedToSignOut"))}};return(o,i)=>(M(),O("div",vV,[l("div",wV,[l("div",yV,[l("h2",_V,B(o.$t("whatHappensNext")),1)]),l("div",kV,[l("div",bV,[i[0]||(i[0]=l("div",{class:"status-icon"},[l("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("h3",CV,B(o.$t("accountPendingApproval")),1),l("p",EV,B(o.$t("adminReviewMessage")),1)]),l("div",SV,[l("div",AV,[i[1]||(i[1]=l("div",{class:"step-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("span",TV,B(o.$t("registrationCompleted")),1)]),l("div",PV,[i[2]||(i[2]=l("div",{class:"step-icon"},[l("div",{class:"loading-dot"})],-1)),l("span",IV,B(o.$t("adminReviewInProgress")),1)]),l("div",RV,[i[3]||(i[3]=l("div",{class:"step-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("span",DV,B(o.$t("accountApproved")),1)])]),l("div",xV,[l("h3",LV,[i[4]||(i[4]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18.364 5.636L14.828 9.172M14.828 14.828L18.364 18.364M9.172 9.172L5.636 5.636M9.172 14.828L5.636 18.364M12 2.25C17.3848 2.25 21.75 6.61522 21.75 12C21.75 17.3848 17.3848 21.75 12 21.75C6.61522 21.75 2.25 17.3848 2.25 12C2.25 6.61522 6.61522 2.25 12 2.25Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(o.$t("needHelp")),1)]),l("div",MV,[i[5]||(i[5]=l("svg",{class:"support-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 8L7.89 12.26C8.22 12.52 8.78 12.52 9.11 12.26L21 8M5 19H19C20.1 19 21 18.1 21 17V7C21 5.9 20.1 5 19 5H5C3.9 5 3 5.9 3 7V17C3 18.1 3.9 19 5 19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",NV,[xe(B(o.$t("email"))+": ",1),l("a",OV,B(o.$t("supportEmail")),1)])]),l("div",$V,[i[6]||(i[6]=l("svg",{class:"support-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H8.27924C8.70967 3 9.09181 3.27543 9.22792 3.68377L10.7257 8.31623C10.8618 8.72457 11.2439 9 11.6744 9H16.7053C17.4218 9 17.9129 9.67412 17.6081 10.3162L16.1141 13.6838C15.8093 14.3259 16.3004 15 17.0169 15H21C22.1046 15 23 15.8954 23 17V19C23 20.1046 22.1046 21 21 21H5C3.89543 21 3 20.1046 3 19V5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",VV,[xe(B(o.$t("phone"))+": ",1),l("a",jV,B(o.$t("supportPhone")),1)])]),l("div",UV,[i[7]||(i[7]=l("svg",{class:"support-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M17.657 16.657L13.414 20.9C13.0235 21.2905 12.3903 21.2905 11.9998 20.9L7.75699 16.657C7.36646 16.2665 7.36646 15.6333 7.75699 15.2428L9.1718 13.828C9.56233 13.4375 10.1955 13.4375 10.586 13.828L12 15.242L13.414 13.828C13.8045 13.4375 14.4377 13.4375 14.8282 13.828L16.243 15.2428C16.6335 15.6333 16.6335 16.2665 16.243 16.657Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M15 11C15 12.6569 13.6569 14 12 14C10.3431 14 9 12.6569 9 11C9 9.34315 10.3431 8 12 8C13.6569 8 15 9.34315 15 11Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",FV,[xe(B(o.$t("office"))+": ",1),l("span",BV,B(o.$t("officeLocation")),1)])])]),l("div",qV,[l("button",{onClick:s,class:"action-btn primary"},B(o.$t("signOut")),1)])])])]))}},zV=pt(HV,[["__scopeId","data-v-0e3250d6"]]),WV={class:"content"},GV={class:"form-group"},KV={class:"form-group"},QV={class:"password-input-wrapper"},YV=["type"],ZV={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},JV={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},XV={class:"form-options"},ej={class:"checkbox-wrapper"},tj=["disabled"],nj={key:0},rj={key:1},sj=Object.assign({name:"SignInPage"},{__name:"SignIn",setup(t){const e=an(),n=Zr(),r=K(!1),s=K(!1),o=K(!1),i=Sn({email:"",password:"",rememberMe:!1}),a=()=>{e.go(-1)},c=async()=>{if(Ht.isNativePlatform())try{await di.hide()}catch{}},u=()=>{s.value=!s.value},h=async v=>{try{console.log("🔍 Checking for migration need for email:",v),console.log("📞 Using direct Firestore check via firestoreService");const _=v.toLowerCase().trim();console.log("🔍 Querying Firestore for user...");const S=Date.now();try{console.log("🔍 Attempting to fetch users collection...");const x=await Ee.getDocs("users",{filters:[{field:"email",operator:"==",value:_}],timeoutMs:8e3}),R=Date.now()-S;if(console.log(`✅ Firestore query completed in ${R}ms, found ${x.size} user(s)`),x&&!x.empty&&x.docs.length>0){const D=x.docs[0],L=D.data();return console.log("📋 Found user:",D.id),console.log("📋 User has oldId:",!!L.oldId),console.log("📋 User migrated status:",L.migrated),L.oldId&&L.migrated!==!0?(console.log("✅ User needs migration!"),console.log("📋 Storing user ID for migration:",D.id),{needsMigration:!0,userId:D.id,userData:L}):L.oldId&&L.migrated===!0?(console.log("ℹ️ User has oldId but already migrated"),{needsMigration:!1}):(console.log("ℹ️ User has no oldId, no migration needed"),{needsMigration:!1})}return console.log("❌ No user found with that email"),{needsMigration:!1}}catch(x){return console.error("❌ Firestore query error:",x),console.error("❌ Error details:",{message:x?.message,code:x?.code}),{needsMigration:!1}}}catch(_){return console.error("❌ Error in checkForMigration:",_),{needsMigration:!1}}},f=async v=>{try{console.log("🔍 Checking approval status for user:",v);const _=await Ee.getDoc(`users/${v}`);if(console.log("📋 User document exists:",_.exists()),_.exists()){const S=_.data();console.log("📋 User document data:",S),console.log("✅ Approval status field:",S.approvalStatus),console.log("✅ Registration status field:",S.registrationStatus);const x={approvalStatus:S.approvalStatus||"approved",registrationStatus:S.registrationStatus||"completed"};return console.log("🎯 Final approval check result:",x),x}return console.log("❌ User document does not exist"),{approvalStatus:"approved",registrationStatus:"completed"}}catch(_){return console.error("❌ Error checking user approval status:",_),console.error("❌ Error details:",JSON.stringify(_,null,2)),{approvalStatus:"approved",registrationStatus:"completed"}}},p=async()=>{if(!r.value){r.value=!0;try{console.log("[SignIn] Starting sign in..."),console.log("[SignIn] Using Web SDK for authentication...");const v=yt.signInWithEmailAndPassword(i.email,i.password),_=new Promise((D,L)=>setTimeout(()=>{console.error("[SignIn] ❌ Authentication timeout after 15 seconds"),L(new Error("Authentication timeout. Please check your internet connection and try again."))},15e3));console.log("[SignIn] Waiting for authentication (15s timeout)...");const x=(await Promise.race([v,_])).user.uid;console.log("[SignIn] ✅ Authentication successful:",x),console.log("[SignIn] 🔐 Syncing PRE user with Smart Mirror service:",x),Je.setPreUserId(x);const R=await f(x);if(console.log("🚀 Sign-in approval check result:",R),R.approvalStatus==="pending"){console.log("⏳ User is pending approval, showing modal"),o.value=!0;return}else if(R.approvalStatus==="rejected"){console.log("❌ User is rejected"),n.showError("Your account has been rejected. Please contact support for more information.");return}console.log("✅ User is approved, proceeding to home"),await new Promise(D=>setTimeout(D,500)),e.push("/home")}catch(v){if(console.error("[SignIn] ❌ Sign in error:",v),console.error("[SignIn] Error details:",{message:v.message,code:v.code,name:v.name}),v.code==="auth/user-not-found"||v.code==="auth/invalid-credential"){console.log("[SignIn] 🔍 Auth error detected, checking for migration...",v.code);const S=await h(i.email);if(S.needsMigration){console.log("[SignIn] ✅ User needs migration, redirecting to migration page"),Va().setPersonalData({email:i.email,firestoreUserId:S.userId}),console.log("[SignIn] 📋 Stored user ID for migration:",S.userId),n.showInfo("Please set a new password to complete your account migration."),e.push("/migrate-account");return}console.log("[SignIn] ℹ️ User does not need migration, showing error")}let _="Sign in failed. Please try again.";v.message.includes("timeout")?_="Connection timeout. Please check your internet connection and try again.":v.code==="auth/invalid-email"?_="Invalid email address.":v.code==="auth/user-disabled"?_="This account has been disabled.":v.code==="auth/user-not-found"?_="No account found with this email.":v.code==="auth/invalid-credential"?_="Invalid email or password. Please check your credentials and try again.":v.code==="auth/wrong-password"?_="Incorrect password.":v.code==="auth/network-request-failed"?_="Network error. Please check your internet connection.":v.code==="auth/too-many-requests"?_="Too many failed attempts. Please try again later.":v.message&&(_=v.message),n.showError(_)}finally{r.value=!1}}},g=async()=>{if(!r.value){r.value=!0;try{const v=await wO();if(!v.success){n.showError(v.reason);return}const _=v.user?.uid;_&&(console.log("[SignIn] 🔐 Syncing Google user with Smart Mirror service:",_),Je.setPreUserId(_));const S=v.userData,x=k4(S);if(!x.isComplete){const D=pO(S);n.showWarning(`Please complete your profile information before proceeding. Missing: ${x.message}`);const L=Va();switch(L.setPersonalData({email:S.email}),L.setPropertyData({compound:S.compound||"",unit:S.unit||"",role:S.role||"",projects:S.projects||[]}),L.setUserDetails({firstName:S.firstName||"",lastName:S.lastName||"",mobile:S.mobile||"",dateOfBirth:S.dateOfBirth||"",gender:S.gender||"male",nationalId:S.nationalId||""}),L.setTempUserId(S.uid),L.setEmailVerified(S.emailVerified||!1),D){case"email_verification":e.push("/register/verify-email");break;case"property_details":e.push("/register");break;case"personal_details":e.push("/register/personal-details");break;default:e.push("/register")}return}const R=await f(S.uid);if(console.log("🚀 Google sign-in approval check result:",R),R.approvalStatus==="pending"){console.log("⏳ User is pending approval, showing modal"),o.value=!0;return}else if(R.approvalStatus==="rejected"){console.log("❌ User is rejected"),n.showError("Your account has been rejected. Please contact support for more information.");return}await Ee.setDoc(`users/${S.uid}`,{lastLogin:new Date,updatedAt:new Date},{merge:!0}),n.showSuccess("Welcome back!"),e.push("/home")}catch(v){console.error("Google sign in error:",v),n.showError("Google sign in failed. Please try again.")}finally{r.value=!1}}},C=()=>{console.log("Forgot password clicked")},T=()=>{e.push("/register")};return(v,_)=>(M(),O("div",{class:"signin-page",onClick:c},[l("div",{class:"header"},[l("button",{onClick:a,class:"back-btn"},[..._[5]||(_[5]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),_[6]||(_[6]=l("h1",{class:"page-title"},"Sign In",-1)),_[7]||(_[7]=l("div",{class:"placeholder"},null,-1))]),o.value?(M(),$n(zV,{key:0,onClose:_[0]||(_[0]=S=>o.value=!1),onRefresh:f})):fe("",!0),l("div",WV,[_[16]||(_[16]=l("div",{class:"welcome-section"},[l("h2",{class:"welcome-title"},"Welcome Back!")],-1)),l("form",{onSubmit:ht(p,["prevent"]),class:"signin-form",onClick:_[4]||(_[4]=ht(()=>{},["stop"]))},[l("div",GV,[_[8]||(_[8]=l("label",{for:"email",class:"form-label"},"Email",-1)),dt(l("input",{id:"email","onUpdate:modelValue":_[1]||(_[1]=S=>i.email=S),type:"email",class:"form-input",placeholder:"Enter your email",required:""},null,512),[[Dt,i.email]])]),l("div",KV,[_[11]||(_[11]=l("label",{for:"password",class:"form-label"},"Password",-1)),l("div",QV,[dt(l("input",{id:"password","onUpdate:modelValue":_[2]||(_[2]=S=>i.password=S),type:s.value?"text":"password",class:"form-input",placeholder:"Enter your password",required:""},null,8,YV),[[Rp,i.password]]),l("button",{type:"button",onClick:u,class:"password-toggle"},[s.value?(M(),O("svg",ZV,[..._[9]||(_[9]=[l("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",JV,[..._[10]||(_[10]=[l("path",{d:"M2 12C2 12 6 4 12 4C18 4 22 12 22 12C22 12 18 20 12 20C6 20 2 12 2 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M2 2L22 22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),l("div",XV,[l("label",ej,[dt(l("input",{type:"checkbox","onUpdate:modelValue":_[3]||(_[3]=S=>i.rememberMe=S),class:"checkbox"},null,512),[[J_,i.rememberMe]]),_[12]||(_[12]=l("span",{class:"checkmark"},null,-1)),_[13]||(_[13]=xe(" Remember me ",-1))]),l("button",{type:"button",onClick:C,class:"forgot-link"}," Forgot Password? ")]),l("button",{type:"submit",class:"signin-btn",disabled:r.value},[r.value?(M(),O("span",nj,"Signing In...")):(M(),O("span",rj,"Sign In"))],8,tj)],32),_[17]||(_[17]=l("div",{class:"divider"},[l("span",null,"or")],-1)),l("div",{class:"google-signin-section"},[l("button",{onClick:g,class:"social-btn google-btn"},[..._[14]||(_[14]=[et('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-10e80420><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" data-v-10e80420></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" data-v-10e80420></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" data-v-10e80420></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" data-v-10e80420></path></svg> Continue with Google ',2)])])]),l("div",{class:"signup-prompt"},[_[15]||(_[15]=l("span",null,"Don't have an account?",-1)),l("button",{onClick:T,class:"signup-link"},"Sign up")])])]))}}),oj=pt(sj,[["__scopeId","data-v-10e80420"]]),ay="AIzaSyDpYVhP_uLDecqds0VD7g409N_AMj-OMF8";class ij{async createAccount(e,n){console.log("[RestAuth] Creating account via REST...");try{const r=await qp.post({url:`https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=${ay}`,headers:{"Content-Type":"application/json"},data:{email:e,password:n,returnSecureToken:!0}});if(console.log("[RestAuth] Create account response:",r.status),r.status===200)return console.log("[RestAuth] ✅ Account created"),{success:!0,uid:r.data.localId,idToken:r.data.idToken,refreshToken:r.data.refreshToken};{const s=r.data?.error?.message||"Unknown error";return s==="EMAIL_EXISTS"?{success:!1,alreadyExists:!0}:{success:!1,error:s}}}catch(r){throw console.error("[RestAuth] Create account failed:",r),r}}async signIn(e,n){console.log("[RestAuth] Signing in via REST...");try{const r=await qp.post({url:`https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${ay}`,headers:{"Content-Type":"application/json"},data:{email:e,password:n,returnSecureToken:!0}});if(console.log("[RestAuth] Sign in response:",r.status),r.status===200)return console.log("[RestAuth] ✅ Signed in"),{success:!0,uid:r.data.localId,idToken:r.data.idToken,refreshToken:r.data.refreshToken,email:r.data.email};{const s=r.data?.error?.message||"Sign in failed";throw new Error(s)}}catch(r){throw console.error("[RestAuth] Sign in failed:",r),r}}async registerOrSignIn(e,n){console.log("[RestAuth] Register or sign in...");const r=await this.createAccount(e,n);if(r.success)return r;if(r.alreadyExists)return console.log("[RestAuth] Account exists, signing in..."),await this.signIn(e,n);throw new Error(r.error||"Registration failed")}}const W4=new ij,aj={class:"register-page"},lj={class:"progress-indicator"},cj={class:"step-icon"},uj={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},dj={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},hj={class:"step-icon"},fj={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pj={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gj={class:"step-content"},mj={key:0,class:"step-panel"},vj={class:"form-group"},wj={class:"form-group"},yj={class:"form-group"},_j=["disabled"],kj={key:0},bj={key:1},Cj={key:1,class:"step-panel"},Ej={key:0,class:"property-section primary-property"},Sj={class:"form-group"},Aj={class:"select-wrapper"},Tj=["value"],Pj={class:"form-group"},Ij=["disabled"],Rj={class:"form-group"},Dj={class:"role-buttons"},xj={class:"form-group"},Lj=["disabled"],Mj={key:1,class:"property-section additional-properties"},Nj={class:"projects-list"},Oj={class:"project-info"},$j={class:"project-name"},Vj={class:"project-details"},jj={class:"detail-item"},Uj={class:"detail-item"},Fj=["onClick"],Bj={class:"add-another-section"},qj={key:1,class:"additional-property-form"},Hj={class:"form-group"},zj={class:"select-wrapper"},Wj=["value"],Gj={class:"form-group"},Kj=["disabled"],Qj={class:"form-group"},Yj={class:"role-buttons"},Zj={class:"additional-form-actions"},Jj=["disabled"],Xj={class:"form-actions"},eU=["disabled"],tU={key:0},nU={key:1},rU=Object.assign({name:"RegisterPage"},{__name:"Register",setup(t){const e=an(),n=Va(),r=Zr(),s=K("personal"),o=K(!1),i=Sn({email:"",password:"",confirmPassword:""}),a=Sn({selectedProject:"",unit:"",role:""}),c=K([]),u=K([]),h=K(!1),f=Sn({selectedProject:"",unit:"",role:""}),p=async()=>{try{console.log("[Register] Fetching projects...");const $=yr(rn,"projects"),U=await Is($);c.value=U.docs.map(Z=>({id:Z.id,...Z.data()})),console.log("[Register] ✅ Fetched",c.value.length,"projects")}catch($){console.error("[Register] Error fetching projects:",$),r.showError("Failed to load projects. Please try again later.")}},g=$=>{const U=c.value.find(Z=>Z.id===$);return U?`${U.name} - ${U.type}`:"N/A"},C=()=>{a.selectedProject&&a.unit?(u.value.push({projectId:a.selectedProject,unit:a.unit,role:a.role}),a.selectedProject="",a.unit="",a.role="",r.showSuccess("Project added to selection!")):r.showError("Please select a project and enter a unit number/name.")},T=$=>{u.value.splice($,1),r.showSuccess("Project removed from selection!")},v=()=>{a.unit="",a.role=""},_=()=>{f.unit="",f.role=""},S=()=>{f.selectedProject&&f.unit&&f.role?(u.value.push({projectId:f.selectedProject,unit:f.unit,role:f.role}),f.selectedProject="",f.unit="",f.role="",h.value=!1,r.showSuccess("Additional property added!")):r.showError("Please fill in all fields for the additional property.")},x=()=>{f.selectedProject="",f.unit="",f.role="",h.value=!1},R=G(()=>f.selectedProject&&f.unit&&f.role);ft(()=>{n.personalData.email&&(i.email=n.personalData.email),n.propertyData.compound&&(a.compound=n.propertyData.compound,a.unit=n.propertyData.unit,a.role=n.propertyData.role),i.password="",i.confirmPassword="",n.isEmailVerified&&(console.log("Email verified, switching to property step"),s.value="property"),b.value&&(console.log("Personal details completed, switching to property step"),s.value="property",r.showInfo("Please complete your property details to finish registration.")),p()});const D=()=>{s.value==="property"&&(s.value="personal")},L=G(()=>s.value==="personal"?i.email&&!o.value:s.value==="property"?u.value.length>0&&!o.value:!1),b=G(()=>{const $=n.userDetails;return $.firstName&&$.lastName&&$.mobile&&$.dateOfBirth&&$.nationalId}),A=G(()=>i.email&&i.password&&i.confirmPassword&&i.password===i.confirmPassword&&i.password.length>=8&&!o.value),y=G(()=>a.selectedProject&&a.unit&&a.role),P=async()=>{if(!o.value){if(!i.email){r.showError("Please enter your email address");return}if(!i.password){r.showError("Please enter a password");return}if(i.password.length<8){r.showError("Password must be at least 8 characters long");return}if(i.password!==i.confirmPassword){r.showError("Passwords do not match");return}o.value=!0;try{console.log("[Register] STEP 1: Storing credentials"),n.setPersonalData({email:i.email}),n.setUserDetails({password:i.password}),console.log("[Register] STEP 2: Creating account via REST API...");const $=await W4.registerOrSignIn(i.email,i.password);console.log("[Register] ✅ Auth successful:",$.uid),console.log("[Register] STEP 3: Storing user ID and token"),n.setTempUserId($.uid),n.setUserDetails({password:i.password,authToken:$.idToken,refreshToken:$.refreshToken}),console.log("[Register] STEP 4: Clearing password fields"),i.password="",i.confirmPassword="",console.log("[Register] STEP 5: NAVIGATING to /register/personal-details"),e.push("/register/personal-details"),console.log("[Register] ✅ NAVIGATION TRIGGERED")}catch($){console.error("[Register] ❌ CAUGHT ERROR:",$),console.error("[Register] Error type:",typeof $),console.error("[Register] Error code:",$?.code),console.error("[Register] Error message:",$?.message),console.error("[Register] Error stack:",$?.stack),console.error("[Register] Error keys:",Object.keys($||{}));let U="Registration failed";$?.code==="auth/invalid-email"?U="Invalid email address":$?.code==="auth/network-request-failed"?U="Network error. Please check your connection":$?.message&&(U=$.message),r.showError(U)}finally{o.value=!1}}},E=async()=>{if(!o.value){if(u.value.length===0){r.showError("Please select at least one project.");return}o.value=!0;try{if(console.log("[Register] Property submit - selected projects:",u.value),n.setPropertyData({compound:"",unit:"",role:"",projects:u.value}),n.tempUserId){console.log("[Register] Saving complete registration to Firestore..."),console.log("[Register] Projects to save:",u.value);const $=n.userDetails,U=new Date().toISOString(),Z={email:n.personalData.email,firstName:$.firstName,lastName:$.lastName,mobile:$.mobile,dateOfBirth:$.dateOfBirth,gender:$.gender,nationalId:$.nationalId,fullName:`${$.firstName} ${$.lastName}`,documents:$.documents||{},projects:u.value,compound:"",unit:"",role:"",registrationStep:"completed",registrationStatus:"completed",isProfileComplete:!0,approvalStatus:"pending",approvedBy:"system",approvedAt:U,authUid:n.tempUserId,emailVerified:!1,isSuspended:!1,suspendedAt:null,suspendedBy:null,suspensionReason:null,suspensionType:null,suspensionEndDate:null,unsuspendedAt:null,unsuspendedBy:null,createdAt:U,updatedAt:U,lastLoginAt:U};console.log("[Register] Using Web SDK Firestore to save user data..."),await xi(Lt(rn,"users",n.tempUserId),{...Z,createdAt:Bo(),updatedAt:Bo()},{merge:!0}),console.log("[Register] ✅ Complete data saved via Web SDK"),console.log("[Register] Clearing stored password for security"),n.setUserDetails({password:"",authToken:"",refreshToken:""})}console.log("[Register] Showing success notification"),r.showSuccess("Registration completed!"),console.log("[Register] Navigating to /signin"),setTimeout(()=>{e.push("/signin"),console.log("[Register] ✅ Navigation triggered")},500)}catch($){console.error("Property save error:",$),r.showError("Failed to save properties: "+$.message)}finally{o.value=!1}}},w=()=>{console.log("goToOnboarding called, navigating to /onboarding"),e.push("/onboarding")},k=()=>{e.push("/signin")};return($,U)=>(M(),O("div",aj,[l("div",{class:"header"},[l("button",{onClick:w,class:"back-btn"},[...U[12]||(U[12]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),U[13]||(U[13]=l("h1",{class:"page-title"},"Registration",-1)),l("div",{class:"header-actions"},[l("button",{onClick:k,class:"signin-header-btn"},"Sign In")])]),U[49]||(U[49]=l("div",{class:"separator-line"},null,-1)),l("div",lj,[U[20]||(U[20]=l("div",{class:"progress-line"},null,-1)),l("div",{class:be(["progress-step",{active:s.value==="personal"&&!b.value,completed:s.value==="property"||s.value==="details"||b.value}])},[l("div",cj,[s.value==="personal"&&!b.value?(M(),O("svg",uj,[...U[14]||(U[14]=[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"7",r:"4",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",dj,[...U[15]||(U[15]=[l("path",{d:"M20 6L9 17L4 12",stroke:"#AF1E23","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),U[16]||(U[16]=l("span",{class:"step-label"},"Personal",-1))],2),l("div",{class:be(["progress-step",{active:s.value==="property"||b.value,completed:s.value==="details"}])},[l("div",hj,[s.value==="property"||b.value?(M(),O("svg",fj,[...U[17]||(U[17]=[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",pj,[...U[18]||(U[18]=[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("polyline",{points:"9,22 9,12 15,12 15,22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),U[19]||(U[19]=l("span",{class:"step-label"},"Property",-1))],2)]),l("div",gj,[s.value==="personal"?(M(),O("div",mj,[l("form",{onSubmit:ht(P,["prevent"]),class:"form"},[l("div",vj,[U[21]||(U[21]=l("label",{for:"email",class:"form-label"},"E-mail",-1)),dt(l("input",{id:"email","onUpdate:modelValue":U[0]||(U[0]=Z=>i.email=Z),type:"email",class:"form-input",placeholder:"Example@gmail.com",required:""},null,512),[[Dt,i.email]])]),l("div",wj,[U[22]||(U[22]=l("label",{for:"password",class:"form-label"},"Password",-1)),dt(l("input",{id:"password","onUpdate:modelValue":U[1]||(U[1]=Z=>i.password=Z),type:"password",class:"form-input",placeholder:"Create a strong password",required:"",minlength:"8"},null,512),[[Dt,i.password]]),U[23]||(U[23]=l("div",{class:"password-requirements"},[l("small",null,"Password must be at least 8 characters long")],-1))]),l("div",yj,[U[24]||(U[24]=l("label",{for:"confirmPassword",class:"form-label"},"Confirm Password",-1)),dt(l("input",{id:"confirmPassword","onUpdate:modelValue":U[2]||(U[2]=Z=>i.confirmPassword=Z),type:"password",class:"form-input",placeholder:"Confirm your password",required:""},null,512),[[Dt,i.confirmPassword]])]),l("button",{type:"submit",class:"proceed-btn",disabled:o.value||!A.value},[o.value?(M(),O("span",kj,"Processing...")):(M(),O("span",bj,"Proceed"))],8,_j)],32),l("div",{class:"step-navigation"},[U[25]||(U[25]=l("div",{class:"nav-divider"},[l("span",null,"or")],-1)),l("div",{class:"nav-options"},[l("a",{onClick:k,class:"nav-link"}," Already have an account? Sign In "),l("a",{onClick:w,class:"nav-link"}," Back to Onboarding ")])])])):fe("",!0),s.value==="property"?(M(),O("div",Cj,[l("form",{onSubmit:ht(E,["prevent"]),class:"form"},[U[48]||(U[48]=l("div",{class:"step-header"},[l("h3",{class:"step-title"},"Property Selection"),l("p",{class:"step-description"},"Select your primary property and optionally add additional properties.")],-1)),u.value.length===0?(M(),O("div",Ej,[U[34]||(U[34]=et('<div class="section-header" data-v-b40c6ea5><div class="section-icon" data-v-b40c6ea5><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b40c6ea5><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b40c6ea5></path></svg></div><h4 class="section-title" data-v-b40c6ea5>Primary Property</h4></div>',1)),l("div",Sj,[U[28]||(U[28]=l("label",{for:"project",class:"form-label"},"Project *",-1)),l("div",Aj,[dt(l("select",{id:"project","onUpdate:modelValue":U[3]||(U[3]=Z=>a.selectedProject=Z),class:"form-input custom-select",required:"",onChange:v},[U[26]||(U[26]=l("option",{value:"",disabled:""},"Select Project",-1)),(M(!0),O(Oe,null,ot(c.value,Z=>(M(),O("option",{key:Z.id,value:Z.id},B(Z.name)+" - "+B(Z.type)+" ("+B(Z.location)+") ",9,Tj))),128))],544),[[Ca,a.selectedProject]]),U[27]||(U[27]=l("div",{class:"select-arrow"},null,-1))])]),l("div",Pj,[U[29]||(U[29]=l("label",{for:"unit",class:"form-label"},"Unit Number/Name *",-1)),dt(l("input",{id:"unit","onUpdate:modelValue":U[4]||(U[4]=Z=>a.unit=Z),type:"text",class:"form-input",placeholder:"e.g., A1, Villa 5, Office 12",required:"",disabled:!a.selectedProject},null,8,Ij),[[Dt,a.unit]])]),l("div",Rj,[U[32]||(U[32]=l("label",{class:"form-label"},"Role *",-1)),l("div",Dj,[l("button",{type:"button",onClick:U[5]||(U[5]=Z=>a.role="owner"),class:be(["role-btn",{active:a.role==="owner"}])},[...U[30]||(U[30]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Owner ",-1)])],2),l("button",{type:"button",onClick:U[6]||(U[6]=Z=>a.role="family"),class:be(["role-btn",{active:a.role==="family"}])},[...U[31]||(U[31]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Family Member ",-1)])],2)])]),l("div",xj,[l("button",{type:"button",onClick:C,class:"add-project-btn",disabled:!y.value},[...U[33]||(U[33]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Add This Property ",-1)])],8,Lj)])])):fe("",!0),u.value.length>0?(M(),O("div",Mj,[U[47]||(U[47]=et('<div class="section-header" data-v-b40c6ea5><div class="section-icon" data-v-b40c6ea5><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b40c6ea5><path d="M19 11H13V5C13 4.44772 12.5523 4 12 4C11.4477 4 11 4.44772 11 5V11H5C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13H11V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V13H19C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11Z" stroke="#666" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-b40c6ea5></path></svg></div><h4 class="section-title" data-v-b40c6ea5>Additional Properties (Optional)</h4><p class="section-subtitle" data-v-b40c6ea5>You can add more properties if you own or have access to multiple units</p></div>',1)),l("div",Nj,[(M(!0),O(Oe,null,ot(u.value,(Z,ee)=>(M(),O("div",{key:ee,class:"project-item"},[l("div",Oj,[l("div",$j,B(g(Z.projectId)),1),l("div",Vj,[l("span",jj,[U[35]||(U[35]=l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(Z.unit),1)]),l("span",Uj,[U[36]||(U[36]=l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(Z.role),1)])])]),l("button",{type:"button",onClick:N=>T(ee),class:"remove-project-btn",title:"Remove property"},[...U[37]||(U[37]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,Fj)]))),128))]),l("div",Bj,[h.value?fe("",!0):(M(),O("button",{key:0,type:"button",onClick:U[7]||(U[7]=Z=>h.value=!0),class:"add-another-btn"},[...U[38]||(U[38]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Add Another Property ",-1)])])),h.value?(M(),O("div",qj,[l("div",Hj,[U[41]||(U[41]=l("label",{for:"additional-project",class:"form-label"},"Project",-1)),l("div",zj,[dt(l("select",{id:"additional-project","onUpdate:modelValue":U[8]||(U[8]=Z=>f.selectedProject=Z),class:"form-input custom-select",onChange:_},[U[39]||(U[39]=l("option",{value:"",disabled:""},"Select Project",-1)),(M(!0),O(Oe,null,ot(c.value,Z=>(M(),O("option",{key:Z.id,value:Z.id},B(Z.name)+" - "+B(Z.type)+" ("+B(Z.location)+") ",9,Wj))),128))],544),[[Ca,f.selectedProject]]),U[40]||(U[40]=l("div",{class:"select-arrow"},null,-1))])]),l("div",Gj,[U[42]||(U[42]=l("label",{for:"additional-unit",class:"form-label"},"Unit Number/Name",-1)),dt(l("input",{id:"additional-unit","onUpdate:modelValue":U[9]||(U[9]=Z=>f.unit=Z),type:"text",class:"form-input",placeholder:"e.g., A2, Villa 6, Office 15",disabled:!f.selectedProject},null,8,Kj),[[Dt,f.unit]])]),l("div",Qj,[U[45]||(U[45]=l("label",{class:"form-label"},"Role",-1)),l("div",Yj,[l("button",{type:"button",onClick:U[10]||(U[10]=Z=>f.role="owner"),class:be(["role-btn",{active:f.role==="owner"}])},[...U[43]||(U[43]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Owner ",-1)])],2),l("button",{type:"button",onClick:U[11]||(U[11]=Z=>f.role="family"),class:be(["role-btn",{active:f.role==="family"}])},[...U[44]||(U[44]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Family Member ",-1)])],2)])]),l("div",Zj,[l("button",{type:"button",onClick:S,class:"add-property-btn",disabled:!R.value},[...U[46]||(U[46]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Add Property ",-1)])],8,Jj),l("button",{type:"button",onClick:x,class:"cancel-btn"}," Cancel ")])])):fe("",!0)])])):fe("",!0),l("div",Xj,[l("button",{type:"button",onClick:D,class:"back-action-btn"}," Back "),l("button",{type:"submit",class:"verify-btn",disabled:o.value||!L.value},[o.value?(M(),O("span",tU,"Saving...")):(M(),O("span",nU,"Complete Registration"))],8,eU)])],32)])):fe("",!0)])]))}}),sU=pt(rU,[["__scopeId","data-v-b40c6ea5"]]);class oU{constructor(){this.isNative=Ht.isNativePlatform(),this.platform=Ht.getPlatform(),this.isIOS=this.platform==="ios"&&this.isNative}async ensureIOSAuthentication(e,n,r){if(!this.isNative)return Le.currentUser||e.user;if(console.log(`${this.platform} Auth Helper: Ensuring proper authentication on ${this.platform}`),!Le.currentUser){console.log(`${this.platform} Auth Helper: No current user, re-authenticating...`);const{signInWithEmailAndPassword:s}=await Se(async()=>{const{signInWithEmailAndPassword:o}=await Promise.resolve().then(()=>yi);return{signInWithEmailAndPassword:o}},void 0);await s(Le,n,r),console.log(`${this.platform} Auth Helper: User re-authenticated successfully`)}return await this.waitForIOSAuthStabilization(),await this.refreshUserToken(e.user),Le.currentUser||e.user}async waitForIOSAuthStabilization(){this.isNative&&(console.log(`${this.platform} Auth Helper: Waiting for auth state to stabilize...`),await new Promise(e=>setTimeout(e,1500)),await new Promise(e=>setTimeout(e,500)),console.log(`${this.platform} Auth Helper: Auth state stabilized`))}async refreshUserToken(e){if(this.isNative)try{console.log(`${this.platform} Auth Helper: Refreshing user token...`),await e.getIdToken(!0),console.log(`${this.platform} Auth Helper: User token refreshed successfully`)}catch(n){console.warn("iOS Auth Helper: Token refresh failed:",n)}}async sendEmailVerificationWithRetry(e){const{sendEmailVerification:n}=await Se(async()=>{const{sendEmailVerification:a}=await Promise.resolve().then(()=>yi);return{sendEmailVerification:a}},void 0);let r=!1,s=0;const o=this.isIOS?5:3,i=this.isIOS?2e3:1e3;for(;!r&&s<o;)try{console.log(`iOS Auth Helper: Sending email verification attempt ${s+1}/${o}`),await n(e),console.log(`${this.platform} Auth Helper: Email verification sent successfully`),r=!0}catch(a){if(s++,console.warn(`iOS Auth Helper: Email verification attempt ${s} failed:`,a),s<o)console.log(`iOS Auth Helper: Retrying in ${i}ms... (${s}/${o})`),await new Promise(c=>setTimeout(c,i));else throw console.error("iOS Auth Helper: All email verification attempts failed"),a}}getPlatformErrorMessage(e){const n="Account created but verification email failed to send. Please try signing in and request a new verification email.";return e.code==="auth/too-many-requests"?"Account created but too many verification emails sent. Please wait before requesting another email.":e.code==="auth/network-request-failed"?"Account created but network error prevented email sending. Please check your connection and try signing in to request a new verification email.":e.code==="auth/user-not-found"?"Account created but user authentication failed. Please try signing in and request a new verification email.":e.code==="auth/invalid-user-token"?"Account created but authentication token expired. Please try signing in and request a new verification email.":this.isIOS&&e.code==="auth/operation-not-allowed"?"Account created but email verification is not enabled for this app. Please contact support.":n}isIOSNative(){return this.isNative}}const Pl=new oU,iU={class:"verify-email-page"},aU={class:"progress-indicator"},lU={class:"step-icon"},cU={key:0,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},uU={key:1,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},dU={class:"step-content"},hU={key:0,class:"step-panel"},fU={class:"verification-instructions"},pU={class:"email-display"},gU={key:0,class:"debug-info"},mU={class:"verification-actions"},vU={class:"action-section"},wU={class:"countdown-info"},yU={class:"countdown-text"},_U={class:"action-section"},kU=["disabled"],bU={key:0},CU={key:1},EU={key:0,class:"action-section"},SU={key:1,class:"step-panel"},AU={class:"verification-instructions"},TU={key:0},PU={key:1},IU={key:2},RU={class:"verification-tips"},DU={key:0},xU={key:1},LU={key:2},MU={class:"verification-actions"},NU={class:"action-section"},OU={key:0},$U={key:1},VU={key:2},jU=Object.assign({name:"VerifyEmailPage"},{__name:"VerifyEmail",setup(t){const e=an(),n=Va(),r=Zr(),s=K(0),o=K(3),i=K("personal"),a=K(!1);let c=null;const u=Sn({email:"",verificationCode:""}),h=async L=>{try{const b=Lt(rn,"users",L),A={emailVerified:!0,registrationStep:"email_verified",updatedAt:Bo()};return await xi(b,A,{merge:!0}),console.log("Email verification status updated in Firestore successfully"),!0}catch(b){throw console.error("Error updating email verification in Firestore:",b),b}};ft(()=>{let L="";if(n.personalData.email?L=n.personalData.email:Le.currentUser&&Le.currentUser.email?(L=Le.currentUser.email,n.setPersonalData({email:L})):L="Example@gmail.com",u.email=L,console.log("Email loaded:",L,"from store:",n.personalData.email),f(),n.tempUserId||Le.currentUser){if(Le.currentUser&&Le.currentUser.emailVerified){console.log("User already verified on mount, proceeding to next step"),T(Le.currentUser.uid);return}C(),console.log("Setting up periodic email verification check every 3 seconds");const b=setInterval(async()=>{try{Le.currentUser&&(await Le.currentUser.reload(),Le.currentUser.emailVerified&&(console.log("Periodic check: Email verified, proceeding to next step"),clearInterval(b),T(Le.currentUser.uid)))}catch(y){console.error("Error in periodic check:",y)}},3e3),A=setInterval(()=>{o.value=o.value>1?o.value-1:3},1e3);rr(()=>{b&&clearInterval(b),clearInterval(A)})}}),rr(()=>{c&&clearInterval(c)});const f=()=>{s.value=60,c=setInterval(()=>{s.value--,s.value<=0&&clearInterval(c)},1e3)},p=()=>{console.log("goToOnboarding called from VerifyEmail, navigating to /onboarding"),e.push("/onboarding")},g=()=>{e.push("/signin")},C=()=>{if(console.log("checkEmailVerification called, current user:",Le.currentUser?.email,"verified:",Le.currentUser?.emailVerified),Le.currentUser&&Le.currentUser.emailVerified){console.log("Current user already verified, proceeding to next step"),T(Le.currentUser.uid);return}console.log("Setting up auth state change listener for email verification");const L=Kc(Le,async b=>{b&&b.emailVerified&&(console.log("Auth state change: Email verified, proceeding to next step"),T(b.uid),L())})},T=async L=>{try{await h(L)}catch(b){console.warn("Failed to update Firestore, but continuing with registration:",b)}n.setEmailVerified(!0),a.value=!0,r.showSuccess("Email verified! Redirecting to personal details..."),setTimeout(()=>{e.push("/register/personal-details")},1500)},v=async()=>{try{await Le.currentUser?.reload();const L=Le.currentUser;L&&L.emailVerified?(console.log("Manual check: Email verified, proceeding to next step"),T(L.uid)):r.showInfo("Email not yet verified. Please check your inbox and click the verification link.")}catch(L){console.error("Error checking verification status:",L),r.showError("Error checking verification status. Please try again.")}},_=()=>{e.push("/register")},S=()=>{const L=n.userDetails;return L.firstName&&L.lastName&&L.mobile&&L.dateOfBirth&&L.nationalId},x=async()=>{console.log("Manual verification check triggered"),await v()},R=()=>{if(!a.value){r.showInfo("Please verify your email first before accessing the Property tab.");const L=document.querySelector(".progress-step.disabled");L&&(L.classList.add("shake"),setTimeout(()=>{L.classList.remove("shake")},300));return}if(!S()){r.showInfo("Please complete your personal information first before accessing the Property tab."),i.value="personal";return}i.value="property"},D=async()=>{if(!(s.value>0))try{if(Le.currentUser)console.log("Attempting to resend verification email to:",Le.currentUser.email),console.log("User email verified status:",Le.currentUser.emailVerified),console.log("User UID:",Le.currentUser.uid),console.log("Platform:",Ht.getPlatform(),"Native:",Ht.isNativePlatform()),Pl.isIOSNative()&&(console.log("iOS native detected - using enhanced resend approach"),await Pl.waitForIOSAuthStabilization(),await Pl.refreshUserToken(Le.currentUser)),await Pl.sendEmailVerificationWithRetry(Le.currentUser),console.log("Verification email resent successfully to:",u.email),f(),r.showSuccess("Verification email resent successfully!");else throw console.error("No authenticated user found for resend"),new Error("No user found. Please try again.")}catch(L){console.error("Resend error details:",{code:L.code,message:L.message,stack:L.stack});const b=Pl.getPlatformErrorMessage(L)||`Failed to resend email: ${L.message}`;r.showError(b)}};return(L,b)=>(M(),O("div",iU,[l("div",{class:"header"},[l("button",{onClick:p,class:"back-btn"},[...b[2]||(b[2]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),b[3]||(b[3]=l("h1",{class:"page-title"},"Registration",-1)),l("div",{class:"header-actions"},[l("button",{onClick:g,class:"signin-header-btn"},"Sign In")])]),b[27]||(b[27]=l("div",{class:"separator-line"},null,-1)),l("div",aU,[b[8]||(b[8]=l("div",{class:"progress-line"},null,-1)),l("div",{class:be(["progress-step",{active:i.value==="personal",completed:a.value}]),onClick:b[0]||(b[0]=A=>i.value="personal")},[l("div",lU,[i.value==="personal"?(M(),O("svg",cU,[...b[4]||(b[4]=[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"7",r:"4",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",uU,[...b[5]||(b[5]=[l("path",{d:"M20 6L9 17L4 12",stroke:"#2196F3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))]),b[6]||(b[6]=l("span",{class:"step-label"},"Personal",-1))],2),l("div",{class:be(["progress-step",{active:i.value==="property",completed:a.value&&S(),disabled:!a.value||!S()}]),onClick:R},[...b[7]||(b[7]=[et('<div class="step-icon" data-v-d4fb10e8><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d4fb10e8><path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></path><polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></polyline></svg></div><span class="step-label" data-v-d4fb10e8>Property</span>',2)])],2)]),l("div",dU,[i.value==="personal"?(M(),O("div",hU,[b[22]||(b[22]=et('<div class="icon-section" data-v-d4fb10e8><div class="icon-wrapper" data-v-d4fb10e8><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d4fb10e8><path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></path><circle cx="12" cy="7" r="4" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></circle></svg></div></div>',1)),l("div",fU,[b[9]||(b[9]=l("p",null,"We've sent a verification email to:",-1)),l("p",pU,B(u.email),1),u.email==="Example@gmail.com"?(M(),O("p",gU,[l("small",null,"Debug: Using fallback email. Store email: "+B(tt(n).personalData.email||"Not set"),1)])):fe("",!0),b[10]||(b[10]=l("p",null,"Please check your inbox and click the verification link in the email.",-1)),b[11]||(b[11]=l("p",{class:"note"},"If you don't see the email, check your spam folder.",-1)),b[12]||(b[12]=l("div",{class:"verification-tips"},[l("p",null,[l("strong",null,"After clicking the verification link:")]),l("ul",null,[l("li",null,"Click the verification link in your email"),l("li",null,"Return to this app (keep this tab open)"),l("li",null,"Wait a few seconds for automatic detection"),l("li",null,'Or click "Check Verification Status" below')])],-1))]),l("div",mU,[l("div",{class:"action-section"},[b[13]||(b[13]=l("div",{class:"section-header"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#4CAF50","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("h3",null,"Ready to Continue?")],-1)),b[14]||(b[14]=l("p",null,"If you've already clicked the verification link in your email:",-1)),l("button",{onClick:x,class:"action-btn primary"}," Check Verification Status ")]),l("div",vU,[b[16]||(b[16]=l("div",{class:"section-header"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2V6M12 18V22M4.93 4.93L7.76 7.76M16.24 16.24L19.07 19.07M2 12H6M18 12H22M7.76 7.76L4.93 4.93M19.07 19.07L16.24 16.24",stroke:"#2196F3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("h3",null,"Automatic Detection")],-1)),b[17]||(b[17]=l("p",null,"We'll automatically check your verification status every 3 seconds",-1)),l("div",wU,[l("span",yU,[b[15]||(b[15]=xe("Next check in ",-1)),l("strong",null,B(o.value)+"s",1)])])]),l("div",_U,[b[18]||(b[18]=l("div",{class:"section-header"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z",stroke:"#FF9800","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("h3",null,"Didn't Receive Email?")],-1)),b[19]||(b[19]=l("p",null,"Check your spam folder or request a new verification email",-1)),l("button",{onClick:D,class:"action-btn secondary",disabled:s.value>0},[s.value>0?(M(),O("span",bU," Resend in "+B(s.value)+"s ",1)):(M(),O("span",CU," Resend Verification Email "))],8,kU)]),a.value?(M(),O("div",EU,[b[20]||(b[20]=l("div",{class:"section-header"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#4CAF50","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("h3",null,"Email Verified!")],-1)),b[21]||(b[21]=l("p",null,"Great! Your email has been verified. You can now complete your personal information.",-1)),l("button",{onClick:_,class:"action-btn primary"}," Complete Personal Info ")])):fe("",!0)])])):fe("",!0),i.value==="property"?(M(),O("div",SU,[b[26]||(b[26]=et('<div class="icon-section" data-v-d4fb10e8><div class="icon-wrapper" data-v-d4fb10e8><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d4fb10e8><path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></path><polyline points="9,22 9,12 15,12 15,22" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d4fb10e8></polyline></svg></div></div>',1)),l("div",AU,[b[24]||(b[24]=l("h3",null,"Property Information",-1)),a.value?S()?(M(),O("p",IU,"Great! You can now add your properties.")):(M(),O("p",PU,"You need to complete your personal information before you can add properties.")):(M(),O("p",TU,"You need to verify your email address first before you can add properties.")),l("div",RU,[b[23]||(b[23]=l("p",null,[l("strong",null,"Next steps:")],-1)),l("ul",null,[a.value?S()?(M(),O("li",LU,"Add your properties below")):(M(),O("li",xU,"Complete your personal details (Personal tab)")):(M(),O("li",DU,"Verify your email address (Personal tab)"))])])]),l("div",MU,[l("div",NU,[b[25]||(b[25]=l("div",{class:"section-header"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#4CAF50","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("h3",null,"Ready to Add Properties?")],-1)),a.value?S()?(M(),O("p",VU,"You're all set! Add your properties below.")):(M(),O("p",$U,"Switch to the Personal tab to complete your personal information first.")):(M(),O("p",OU,"Switch to the Personal tab to verify your email first.")),!a.value||!S()?(M(),O("button",{key:3,onClick:b[1]||(b[1]=A=>i.value="personal"),class:"action-btn primary"}," Go to Personal Tab ")):fe("",!0)])])])):fe("",!0)])]))}}),UU=pt(jU,[["__scopeId","data-v-d4fb10e8"]]);class FU{async uploadFile(e,n,r){try{if(console.log("🚀 Uploading file:",{path:n,fileName:r,fileSize:e?.size}),!e)throw new Error("No file provided");if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(e.type))throw new Error("Only JPEG, PNG, and WebP images are allowed");const o=10*1024*1024;if(e.size>o)throw new Error("File size must be less than 10MB");const i=Ht.isNativePlatform(),a=Ht.getPlatform();if(i&&(a==="ios"||a==="android")){console.log(`📱 ${a} detected, using Storage REST API...`);const c=await e.arrayBuffer(),u=new Uint8Array(c);let h="";const f=u.byteLength;for(let S=0;S<f;S++)h+=String.fromCharCode(u[S]);const p=btoa(h);console.log(`📱 ${a}: File converted to base64`);const{Http:g}=await Se(async()=>{const{Http:S}=await import("./index-DuDlEtNl.js").then(x=>x.i);return{Http:S}},[]),C=`${n}${r}`,T="pre-group.firebasestorage.app";console.log(`📱 ${a}: Uploading via REST API to:`,C);const v=`https://firebasestorage.googleapis.com/v0/b/${T}/o?uploadType=media&name=${encodeURIComponent(C)}`,_=await g.request({url:v,method:"POST",headers:{"Content-Type":e.type},data:p,connectTimeout:6e4,readTimeout:6e4});if(console.log(`📱 ${a}: Upload response:`,_.status),_.status>=200&&_.status<300){console.log(`📱 ${a}: ✅ File uploaded successfully`);let S;try{const x=typeof _.data=="string"?JSON.parse(_.data):_.data;console.log(`📱 ${a}: Upload response data:`,x),x.downloadTokens?(S=`https://firebasestorage.googleapis.com/v0/b/${T}/o/${encodeURIComponent(C)}?alt=media&token=${x.downloadTokens}`,console.log(`📱 ${a}: Using tokenized download URL`)):(S=`https://firebasestorage.googleapis.com/v0/b/${T}/o/${encodeURIComponent(C)}?alt=media`,console.log(`📱 ${a}: Using public download URL (no token)`))}catch(x){S=`https://firebasestorage.googleapis.com/v0/b/${T}/o/${encodeURIComponent(C)}?alt=media`,console.log(`📱 ${a}: Using public download URL (parse failed):`,x.message)}return console.log(`📱 ${a}: Download URL:`,S),S}else throw new Error(`Upload failed with status ${_.status}`)}else{console.log("🌐 Using Firebase Web SDK for upload (web)...");const c=`${n}${r}`,u=th(Hs,c),h=await g4(u,e);return await gv(h.ref)}}catch(s){throw console.error("❌ Error uploading file:",s),console.error("❌ Error type:",typeof s),console.error("❌ Error constructor:",s?.constructor?.name),console.error("❌ Error message:",s?.message),console.error("❌ Error code:",s?.code),console.error("❌ Error stack:",s?.stack),console.error("❌ Full error object:",JSON.stringify({code:s?.code,errorMessage:s?.message})),console.error("❌ Error keys:",Object.keys(s||{})),s}}async uploadMultipleFiles(e){try{const n=e.map(({file:s,path:o,fileName:i})=>this.uploadFile(s,o,i));return await Promise.all(n)}catch(n){throw console.error("Error uploading multiple files:",n),n}}async deleteFile(e){try{const n=th(Hs,e);await m4(n),console.log("File deleted successfully:",e)}catch(n){throw console.error("Error deleting file:",n),n}}generateUniqueFileName(e,n){const r=Date.now(),s=e.split(".").pop(),i=e.replace(/\.[^/.]+$/,"").replace(/[^a-zA-Z0-9]/g,"_");return`${n}_${i}_${r}.${s}`}async uploadUserDocuments(e,n,r,s=null){try{console.log("[FileUpload] Starting upload for user:",e);const o=[];if(n){const c=this.generateUniqueFileName(n.name,e);console.log("[FileUpload] Adding front ID:",c),o.push({file:n,path:`users/${e}/documents/`,fileName:c,type:"frontId"})}if(r){const c=this.generateUniqueFileName(r.name,e);console.log("[FileUpload] Adding back ID:",c),o.push({file:r,path:`users/${e}/documents/`,fileName:c,type:"backId"})}if(s){const c=this.generateUniqueFileName(s.name,e);console.log("[FileUpload] Adding profile picture:",c),o.push({file:s,path:`users/${e}/profile/`,fileName:c,type:"profilePicture"})}console.log("[FileUpload] Uploading",o.length,"files...");const i=await this.uploadMultipleFiles(o);console.log("[FileUpload] All files uploaded, URLs received");const a={};return o.forEach((c,u)=>{a[c.type]=i[u],console.log("[FileUpload]",c.type,"→",i[u])}),console.log("[FileUpload] ✅ Upload complete"),a}catch(o){throw console.error("[FileUpload] ❌ Upload failed:",o),console.error("[FileUpload] Error code:",o?.code),console.error("[FileUpload] Error message:",o?.message),o}}}const Ua=new FU,BU=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),qU={class:"personal-details-page"},HU={class:"progress-indicator"},zU={class:"content"},WU={class:"form-group"},GU={class:"form-row"},KU={class:"form-group"},QU={class:"form-group"},YU={class:"form-group"},ZU={class:"form-group"},JU={class:"date-input-wrapper"},XU={class:"form-group"},eF={class:"gender-buttons"},tF={class:"form-group"},nF={class:"form-group"},rF={class:"file-upload"},sF={for:"profilePicture",class:"file-label"},oF={class:"form-row"},iF={class:"form-group"},aF={for:"frontId",class:"file-label"},lF={key:0,class:"file-preview"},cF=["src"],uF={class:"form-group"},dF={for:"backId",class:"file-label"},hF={key:0,class:"file-preview"},fF=["src"],pF=["disabled"],gF={key:0},mF={key:1},vF=Object.assign({name:"PersonalDetailsPage"},{__name:"PersonalDetails",setup(t){const e=an(),n=Va(),r=Zr(),s=K(!1),o=K(null),i=K(null),a=K(null),c=K(null),u=K(null),h=Sn({email:"",firstName:"",lastName:"",mobile:"",dateOfBirth:"",gender:"male",nationalId:""});ft(()=>{const R=n.personalData.email||"Example@gmail.com";h.email=R,n.userDetails.firstName&&(h.firstName=n.userDetails.firstName,h.lastName=n.userDetails.lastName,h.mobile=n.userDetails.mobile,h.dateOfBirth=n.userDetails.dateOfBirth,h.gender=n.userDetails.gender,h.nationalId=n.userDetails.nationalId)});const f=()=>{console.log("goToOnboarding called from PersonalDetails, navigating to /onboarding"),e.push("/onboarding")},p=()=>{e.push("/signin")},g=()=>{n.setUserDetails({firstName:h.firstName,lastName:h.lastName,mobile:h.mobile,dateOfBirth:h.dateOfBirth,gender:h.gender,nationalId:h.nationalId})},C=R=>{const D=R.target.files[0];if(D){o.value=D;const L=new FileReader;L.onload=b=>{c.value=b.target.result},L.readAsDataURL(D)}},T=R=>{const D=R.target.files[0];if(D){i.value=D;const L=new FileReader;L.onload=b=>{u.value=b.target.result},L.readAsDataURL(D)}},v=R=>{const D=R.target.files[0];D&&(a.value=D)},_=()=>{o.value=null,c.value=null},S=()=>{i.value=null,u.value=null},x=async()=>{if(!s.value){if(!h.firstName||!h.lastName||!h.mobile||!h.dateOfBirth||!h.nationalId){r.showError("Please fill in all required fields");return}if(!o.value||!i.value){r.showError("Please upload both front and back National ID pictures");return}s.value=!0;try{console.log("[PersonalDetails] Getting user ID...");let R=n.tempUserId;const D=n.personalData.email,L=n.userDetails.password;if(!D||!L)throw new Error("Missing credentials. Please start registration over.");console.log("[PersonalDetails] Signing in to Web SDK (non-blocking)...");const{signInWithEmailAndPassword:b}=await Se(async()=>{const{signInWithEmailAndPassword:y}=await Promise.resolve().then(()=>yi);return{signInWithEmailAndPassword:y}},void 0);b(Le,D,L).then(y=>{console.log("[PersonalDetails] ✅ Web SDK signed in:",y.user.uid)}).catch(y=>{console.warn("[PersonalDetails] Web SDK sign in hung/failed (OK):",y?.code)}),console.log("[PersonalDetails] Waiting 1.5s for auth to propagate..."),await new Promise(y=>setTimeout(y,1500)),R||(console.log("[PersonalDetails] Getting userId via REST..."),R=(await W4.signIn(D,L)).uid,n.setTempUserId(R)),console.log("[PersonalDetails] Using userId:",R),console.log("[PersonalDetails] Starting file upload...",{userId:R,hasFrontId:!!o.value,hasBackId:!!i.value,hasProfile:!!a.value});const A=await Ua.uploadUserDocuments(R,o.value,i.value,a.value);console.log("[PersonalDetails] ✅ Documents uploaded:",A),n.setUserDetails({firstName:h.firstName,lastName:h.lastName,mobile:h.mobile,dateOfBirth:h.dateOfBirth,gender:h.gender,nationalId:h.nationalId}),console.log("[PersonalDetails] Saving user data to Firestore (non-blocking)..."),n.setUserDetails({...n.userDetails,firstName:h.firstName,lastName:h.lastName,mobile:h.mobile,dateOfBirth:h.dateOfBirth,gender:h.gender,nationalId:h.nationalId,documents:{frontIdUrl:A.frontId,backIdUrl:A.backId,profilePictureUrl:A.profilePicture||null}}),console.log("[PersonalDetails] Saving via Web SDK (background)..."),xi(Lt(rn,"users",R),{firstName:h.firstName,lastName:h.lastName,mobile:h.mobile,dateOfBirth:h.dateOfBirth,gender:h.gender,nationalId:h.nationalId,email:h.email,fullName:`${h.firstName} ${h.lastName}`,documents:{frontIdUrl:A.frontId,backIdUrl:A.backId,profilePictureUrl:A.profilePicture||null},registrationStep:"personal_complete",registrationStatus:"in_progress",isProfileComplete:!0,updatedAt:Bo()},{merge:!0}).catch(y=>console.warn("Background save failed:",y)),console.log("[PersonalDetails] Firestore save initiated in background"),console.log("[PersonalDetails] Showing success notification"),r.showSuccess("Details saved! Continue to property selection."),console.log("[PersonalDetails] NAVIGATING to /register"),e.push("/register"),console.log("[PersonalDetails] ✅ Navigation triggered")}catch(R){console.error("[PersonalDetails] ❌ Save error:",R),console.error("[PersonalDetails] Error type:",typeof R),console.error("[PersonalDetails] Error code:",R?.code),console.error("[PersonalDetails] Error message:",R?.message),console.error("[PersonalDetails] Error stack:",R?.stack),r.showError("Failed to save: "+(R?.message||"Unknown error"))}finally{s.value=!1}}};return(R,D)=>(M(),O("div",qU,[l("div",{class:"header"},[l("button",{onClick:f,class:"back-btn"},[...D[8]||(D[8]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),D[9]||(D[9]=l("h1",{class:"page-title"},"Registration",-1)),l("div",{class:"header-actions"},[l("button",{onClick:p,class:"signin-header-btn"},"Sign In")])]),D[28]||(D[28]=l("div",{class:"separator-line"},null,-1)),l("div",HU,[D[12]||(D[12]=l("div",{class:"progress-line"},null,-1)),l("div",{class:be(["progress-step",{active:!0}])},[...D[10]||(D[10]=[l("div",{class:"step-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",{class:"step-label"},"Personal",-1)])]),l("div",{class:be(["progress-step",{active:!1,completed:!1}])},[...D[11]||(D[11]=[et('<div class="step-icon" data-v-ffd748ca><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ffd748ca><path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ffd748ca></path><polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ffd748ca></polyline></svg></div><span class="step-label" data-v-ffd748ca>Property</span>',2)])])]),l("div",zU,[D[27]||(D[27]=et('<div class="icon-section" data-v-ffd748ca><div class="icon-wrapper" data-v-ffd748ca><svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-ffd748ca><path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ffd748ca></path><circle cx="12" cy="7" r="4" stroke="#AF1E23" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-ffd748ca></circle></svg></div></div>',1)),l("form",{onSubmit:ht(x,["prevent"]),class:"personal-form"},[l("div",WU,[D[13]||(D[13]=l("label",{for:"email",class:"form-label"},"E-mail",-1)),dt(l("input",{id:"email","onUpdate:modelValue":D[0]||(D[0]=L=>h.email=L),type:"email",class:"form-input",placeholder:"Example@gmail.com",readonly:""},null,512),[[Dt,h.email]])]),l("div",GU,[l("div",KU,[D[14]||(D[14]=l("label",{for:"firstName",class:"form-label"},"First Name",-1)),dt(l("input",{id:"firstName","onUpdate:modelValue":D[1]||(D[1]=L=>h.firstName=L),type:"text",class:"form-input",placeholder:"First Name",required:"",onInput:g},null,544),[[Dt,h.firstName]])]),l("div",QU,[D[15]||(D[15]=l("label",{for:"lastName",class:"form-label"},"Last Name",-1)),dt(l("input",{id:"lastName","onUpdate:modelValue":D[2]||(D[2]=L=>h.lastName=L),type:"text",class:"form-input",placeholder:"Last Name",required:"",onInput:g},null,544),[[Dt,h.lastName]])])]),l("div",YU,[D[16]||(D[16]=l("label",{for:"mobile",class:"form-label"},"Mobile Number",-1)),dt(l("input",{id:"mobile","onUpdate:modelValue":D[3]||(D[3]=L=>h.mobile=L),type:"tel",class:"form-input",placeholder:"Mobile Number",required:"",onInput:g},null,544),[[Dt,h.mobile]])]),l("div",ZU,[D[18]||(D[18]=l("label",{for:"dateOfBirth",class:"form-label"},"Date of Birth",-1)),l("div",JU,[dt(l("input",{id:"dateOfBirth","onUpdate:modelValue":D[4]||(D[4]=L=>h.dateOfBirth=L),type:"date",class:"form-input",required:"",onChange:g},null,544),[[Dt,h.dateOfBirth]]),D[17]||(D[17]=et('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="calendar-icon" data-v-ffd748ca><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-ffd748ca></rect><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" data-v-ffd748ca></line><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" data-v-ffd748ca></line><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" data-v-ffd748ca></line></svg>',1))])]),l("div",XU,[D[19]||(D[19]=l("label",{class:"form-label"},"Gender",-1)),l("div",eF,[l("button",{type:"button",onClick:D[5]||(D[5]=()=>{h.gender="male",g()}),class:be(["gender-btn",{active:h.gender==="male"}])}," Male ",2),l("button",{type:"button",onClick:D[6]||(D[6]=()=>{h.gender="female",g()}),class:be(["gender-btn",{active:h.gender==="female"}])}," Female ",2)])]),l("div",tF,[D[20]||(D[20]=l("label",{for:"nationalId",class:"form-label"},"National ID",-1)),dt(l("input",{id:"nationalId","onUpdate:modelValue":D[7]||(D[7]=L=>h.nationalId=L),type:"text",class:"form-input",placeholder:"National ID",required:"",onInput:g},null,544),[[Dt,h.nationalId]])]),l("div",nF,[D[22]||(D[22]=l("label",{for:"profilePicture",class:"form-label"},"Profile Picture (Optional)",-1)),l("div",rF,[l("input",{id:"profilePicture",type:"file",accept:"image/*",onChange:v,class:"file-input"},null,32),l("label",sF,[D[21]||(D[21]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(a.value?a.value.name:"Upload Profile Picture"),1)])])]),l("div",oF,[l("div",iF,[D[24]||(D[24]=l("label",{for:"frontId",class:"form-label"},[xe("Front National ID Picture "),l("span",{class:"required"},"*")],-1)),l("div",{class:be(["file-upload",{"has-file":o.value,required:!0}])},[l("input",{id:"frontId",type:"file",accept:"image/*",onChange:C,class:"file-input",required:""},null,32),l("label",aF,[D[23]||(D[23]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(o.value?o.value.name:"Upload Front ID"),1)])],2),o.value?(M(),O("div",lF,[l("img",{src:c.value,alt:"Front ID Preview",class:"preview-image"},null,8,cF),l("button",{type:"button",onClick:_,class:"remove-file-btn"},"Remove")])):fe("",!0)]),l("div",uF,[D[26]||(D[26]=l("label",{for:"backId",class:"form-label"},[xe("Back National ID Picture "),l("span",{class:"required"},"*")],-1)),l("div",{class:be(["file-upload",{"has-file":i.value,required:!0}])},[l("input",{id:"backId",type:"file",accept:"image/*",onChange:T,class:"file-input",required:""},null,32),l("label",dF,[D[25]||(D[25]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(i.value?i.value.name:"Upload Back ID"),1)])],2),i.value?(M(),O("div",hF,[l("img",{src:u.value,alt:"Back ID Preview",class:"preview-image"},null,8,fF),l("button",{type:"button",onClick:S,class:"remove-file-btn"},"Remove")])):fe("",!0)])]),l("button",{type:"submit",class:"continue-btn",disabled:s.value},[s.value?(M(),O("span",gF,"Creating Account...")):(M(),O("span",mF,"Continue"))],8,pF)],32)])]))}}),wF=pt(vF,[["__scopeId","data-v-ffd748ca"]]),yF={class:"content"},_F={class:"form-group"},kF={class:"form-group"},bF={class:"password-input-wrapper"},CF=["type"],EF={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},SF={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},AF={class:"form-group"},TF={class:"password-input-wrapper"},PF=["type"],IF={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},RF={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},DF={key:0,class:"validation-feedback"},xF={key:0,class:"error-feedback"},LF={key:1,class:"success-feedback"},MF=["disabled"],NF={key:0},OF={key:1},$F=Object.assign({name:"MigrateAccountPage"},{__name:"MigrateAccount",setup(t){const e=an(),n=Zr(),r=Va(),s=K(!1),o=K(!1),i=K(!1),a=Sn({email:"",password:"",confirmPassword:""});ft(()=>{const T=r.personalData.email;if(!T){n.showError("No email found. Please try signing in again."),e.push("/signin");return}a.email=T});const c=()=>{e.push("/signin")},u=async()=>{if(Ht.isNativePlatform())try{await di.hide()}catch{}},h=()=>{o.value=!o.value},f=()=>{i.value=!i.value},p=G(()=>a.email&&a.password&&a.confirmPassword&&a.password===a.confirmPassword&&a.password.length>=6&&!s.value),g=async()=>{if(!s.value){if(!a.password||a.password.length<6){n.showError("Password must be at least 6 characters long");return}if(a.password!==a.confirmPassword){n.showError("Passwords do not match");return}s.value=!0;try{if(console.log("[MigrateAccount] Starting migration for:",a.email),Ht.getPlatform()==="ios"){console.log("[MigrateAccount] 📱 iOS detected - using direct migration (Cloud Functions not reliable on iOS)"),await C();return}console.log("[MigrateAccount] Calling Cloud Function with 30s timeout...");const v=D8(Rc,"migrateOldUser",{timeout:3e4}),_=new Promise((R,D)=>{setTimeout(()=>{D(new Error("Migration request timed out after 30 seconds. Please check your network connection and try again."))},3e4)}),S=v({email:a.email,password:a.password}),x=await Promise.race([S,_]);console.log("[MigrateAccount] ✅ Migration successful:",x.data),r.setPersonalData({email:""}),n.showSuccess("Account migrated successfully! Please sign in with your new password."),setTimeout(()=>{e.push("/signin")},1e3)}catch(T){console.error("[MigrateAccount] ❌ Migration error:",T),console.error("[MigrateAccount] Error details:",{code:T.code,message:T.message,name:T.name});const v=T.message?.includes("timeout")||T.message?.includes("timed out")||T.code==="functions/unavailable"||T.code==="functions/deadline-exceeded";if(console.log("[MigrateAccount] Should use fallback?",v),v){console.warn("[MigrateAccount] ⚠️ Cloud Function failed, trying direct migration...");try{await C();return}catch(S){console.error("[MigrateAccount] ❌ Direct migration also failed:",S),n.showError("Migration failed. Please check your network connection and try again."),s.value=!1;return}}let _="Migration failed. Please try again.";T.code==="functions/invalid-argument"?_="Invalid email or password format.":T.code==="functions/not-found"?_="Account not found or already migrated.":T.code==="functions/already-exists"?_="An account with this email already exists. Please try signing in.":T.code==="functions/unauthenticated"?_="Authentication failed. Please try again.":T.code==="functions/unavailable"?_="Service temporarily unavailable. Please try again later.":T.message&&(_=T.message),n.showError(_)}finally{s.value=!1}}},C=async()=>{console.log("[MigrateAccount] 🔄 Starting direct migration (fallback)...");try{const{default:T}=await Se(async()=>{const{default:y}=await Promise.resolve().then(()=>z8);return{default:y}},void 0);let v;const _=Ht.getPlatform()==="ios";if(console.log("[MigrateAccount] Platform:",Ht.getPlatform(),"Using Capacitor:",_),_){console.log("[MigrateAccount] 📱 Using Capacitor Firebase Auth for iOS...");const{FirebaseAuthentication:y}=await Se(async()=>{const{FirebaseAuthentication:P}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:P}},[]);try{console.log("[MigrateAccount] Creating user with Capacitor plugin..."),v=(await y.createUserWithEmailAndPassword({email:a.email,password:a.password})).user.uid,console.log("[MigrateAccount] ✅ Auth user created (Capacitor):",v)}catch(P){if(console.log("[MigrateAccount] Capacitor auth error:",P),P.message?.includes("already")||P.message?.includes("exists"))console.log("[MigrateAccount] ℹ️ User already exists, signing in with Capacitor..."),v=(await y.signInWithEmailAndPassword({email:a.email,password:a.password})).user.uid,console.log("[MigrateAccount] ✅ Got existing user UID (Capacitor):",v);else throw P}}else{console.log("[MigrateAccount] 🌐 Using Web SDK for authentication...");const{createUserWithEmailAndPassword:y,signInWithEmailAndPassword:P}=await Se(async()=>{const{createUserWithEmailAndPassword:$,signInWithEmailAndPassword:U}=await Promise.resolve().then(()=>yi);return{createUserWithEmailAndPassword:$,signInWithEmailAndPassword:U}},void 0),{auth:E}=await Se(async()=>{const{auth:$}=await Promise.resolve().then(()=>of);return{auth:$}},void 0);console.log("[MigrateAccount] Creating Firebase Auth user with 20s timeout...");const w=new Promise(($,U)=>{setTimeout(()=>U(new Error("Auth user creation timed out")),2e4)});let k;try{k=await Promise.race([y(E,a.email,a.password),w]),v=k.user.uid,console.log("[MigrateAccount] ✅ Auth user created (Web SDK):",v)}catch($){if(console.log("[MigrateAccount] Auth creation error:",$.code,$.message),$.code==="auth/email-already-in-use"||$.message?.includes("already")){console.log("[MigrateAccount] ℹ️ User already exists in Auth, signing in to get UID...");const U=new Promise((ee,N)=>{setTimeout(()=>N(new Error("Sign in timed out")),15e3)});v=(await Promise.race([P(E,a.email,a.password),U])).user.uid,console.log("[MigrateAccount] ✅ Got existing user UID (Web SDK):",v)}else throw $}}console.log("[MigrateAccount] Finding old user document in Firestore...");const S=new Promise((y,P)=>{setTimeout(()=>P(new Error("Firestore getDocs timed out")),15e3)}),x=await Promise.race([T.getDocs("users",{filters:[{field:"email",operator:"==",value:a.email.toLowerCase().trim()}]}),S]);if(!x||x.empty||x.docs.length===0)throw new Error("User document not found in Firestore");const R=x.docs[0].id,D=typeof x.docs[0].data=="function"?x.docs[0].data():x.docs[0].data;console.log("[MigrateAccount] Found old user document:",R),console.log("[MigrateAccount] Creating new user document at users/"+v);const L={...D,migrated:!0,oldDocumentId:R,authUid:v,updatedAt:new Date().toISOString()};delete L.oldId;const b=new Promise((y,P)=>{setTimeout(()=>P(new Error("Firestore setDoc timed out")),1e4)});await Promise.race([T.setDoc(`users/${v}`,L),b]),console.log("[MigrateAccount] ✅ New user document created at users/"+v),console.log("[MigrateAccount] Deleting old document to avoid duplicates...");const A=new Promise((y,P)=>{setTimeout(()=>P(new Error("Firestore delete old doc timed out")),1e4)});await Promise.race([T.deleteDoc(`users/${R}`),A]),console.log("[MigrateAccount] ✅ Old document deleted:",R),console.log("[MigrateAccount] ✅ Direct migration successful!"),r.setPersonalData({email:""}),n.showSuccess("Account migrated successfully! Please sign in with your new password."),setTimeout(()=>{e.push("/signin")},1e3)}catch(T){throw console.error("[MigrateAccount] ❌ Direct migration error:",T),T}};return(T,v)=>(M(),O("div",{class:"migrate-page",onClick:u},[l("div",{class:"header"},[l("button",{onClick:c,class:"back-btn"},[...v[4]||(v[4]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),v[5]||(v[5]=l("h1",{class:"page-title"},"Account Migration",-1)),v[6]||(v[6]=l("div",{class:"placeholder"},null,-1))]),l("div",yF,[v[17]||(v[17]=l("div",{class:"welcome-section"},[l("p",{class:"welcome-subtitle"},"Please set a new password to secure your account")],-1)),l("form",{onSubmit:ht(g,["prevent"]),class:"migrate-form",onClick:v[3]||(v[3]=ht(()=>{},["stop"]))},[l("div",_F,[v[7]||(v[7]=l("label",{for:"email",class:"form-label"},"Email",-1)),dt(l("input",{id:"email","onUpdate:modelValue":v[0]||(v[0]=_=>a.email=_),type:"email",class:"form-input",placeholder:"Your email address",disabled:""},null,512),[[Dt,a.email]])]),l("div",kF,[v[10]||(v[10]=l("label",{for:"password",class:"form-label"},"New Password",-1)),l("div",bF,[dt(l("input",{id:"password","onUpdate:modelValue":v[1]||(v[1]=_=>a.password=_),type:o.value?"text":"password",class:"form-input",placeholder:"Enter new password",required:"",minlength:"6",autofocus:""},null,8,CF),[[Rp,a.password]]),l("button",{type:"button",onClick:h,class:"password-toggle"},[o.value?(M(),O("svg",EF,[...v[8]||(v[8]=[l("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",SF,[...v[9]||(v[9]=[l("path",{d:"M2 12C2 12 6 4 12 4C18 4 22 12 22 12C22 12 18 20 12 20C6 20 2 12 2 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M2 2L22 22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])]),v[11]||(v[11]=l("div",{class:"password-requirements"},[l("small",null,"Password must be at least 6 characters long")],-1))]),l("div",AF,[v[14]||(v[14]=l("label",{for:"confirmPassword",class:"form-label"},"Confirm New Password",-1)),l("div",TF,[dt(l("input",{id:"confirmPassword","onUpdate:modelValue":v[2]||(v[2]=_=>a.confirmPassword=_),type:i.value?"text":"password",class:"form-input",placeholder:"Confirm new password",required:"",minlength:"6"},null,8,PF),[[Rp,a.confirmPassword]]),l("button",{type:"button",onClick:f,class:"password-toggle"},[i.value?(M(),O("svg",IF,[...v[12]||(v[12]=[l("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",RF,[...v[13]||(v[13]=[l("path",{d:"M2 12C2 12 6 4 12 4C18 4 22 12 22 12C22 12 18 20 12 20C6 20 2 12 2 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M2 2L22 22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])])]),a.password&&a.confirmPassword?(M(),O("div",DF,[a.password!==a.confirmPassword?(M(),O("div",xF,[...v[15]||(v[15]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Passwords do not match ",-1)])])):(M(),O("div",LF,[...v[16]||(v[16]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Passwords match ",-1)])]))])):fe("",!0),l("button",{type:"submit",class:"migrate-btn",disabled:s.value||!p.value},[s.value?(M(),O("span",NF,"Migrating Account...")):(M(),O("span",OF,"Complete Migration"))],8,MF)],32),v[18]||(v[18]=et('<div class="migration-notice" data-v-d144e86b><div class="notice-icon" data-v-d144e86b><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d144e86b><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d144e86b></path><path d="M12 8V12" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d144e86b></path><path d="M12 16H12.01" stroke="#2196F3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d144e86b></path></svg></div><p class="notice-text" data-v-d144e86b> We&#39;re upgrading our security system. Please create a new password to continue using your account. </p></div><div class="help-section" data-v-d144e86b><p class="help-text" data-v-d144e86b>Need help? <a href="#" class="help-link" data-v-d144e86b>Contact Support</a></p></div>',2))])]))}}),VF=pt($F,[["__scopeId","data-v-d144e86b"]]),G4=Yr("academiesStore",()=>{const t=K([]),e=K({}),n=K(null),r=K([]);return{academyOptions:t,programsByAcademy:e,selectedAcademy:n,userBookings:r,addAcademy:async _=>Xe.timeOperation("addAcademy",async()=>{try{console.log("🚀 AcademyStore: Adding academy:",_.name),await Ee.setDoc(`academies/${_.name}`,{email:_.email,phone:_.phone,website:_.website,programs:[]}),t.value.push({id:_.name,email:_.email,phone:_.phone,website:_.website,programs:[],imageUrl:_.imageUrl||null,imageFileName:_.imageFileName||null}),e.value[_.name]=[],console.log("✅ AcademyStore: Academy added successfully")}catch(S){throw console.error("❌ AcademyStore: Error adding academy:",S),Ke.handleFirestoreError(S,"addAcademy"),S}}),updateAcademy:async _=>Xe.timeOperation("updateAcademy",async()=>{try{console.log("🚀 AcademyStore: Updating academy:",_.name),await Ee.updateDoc(`academies/${_.name}`,{email:_.email,phone:_.phone,website:_.website});const S=t.value.findIndex(x=>x.id===_.name);S!==-1&&(t.value[S]={...t.value[S],..._}),console.log("✅ AcademyStore: Academy updated successfully")}catch(S){throw console.error("❌ AcademyStore: Error updating academy:",S),Ke.handleFirestoreError(S,"updateAcademy"),S}}),deleteAcademy:async _=>Xe.timeOperation("deleteAcademy",async()=>{try{console.log("🚀 AcademyStore: Deleting academy:",_),await Ee.deleteDoc(`academies/${_}`),t.value=t.value.filter(S=>S.id!==_),delete e.value[_],console.log("✅ AcademyStore: Academy deleted successfully")}catch(S){throw console.error("❌ AcademyStore: Error deleting academy:",S),Ke.handleFirestoreError(S,"deleteAcademy"),S}}),addProgram:async(_,S)=>Xe.timeOperation("addProgram",async()=>{try{console.log("🚀 AcademyStore: Adding program to academy:",_);const x=e.value[_]||[];x.push(S),e.value[_]=x,await Ee.updateDoc(`academies/${_}`,{programs:x}),console.log("✅ AcademyStore: Program added successfully")}catch(x){throw console.error("❌ AcademyStore: Error adding program:",x),Ke.handleFirestoreError(x,"addProgram"),x}}),updateProgram:async(_,S,x)=>Xe.timeOperation("updateProgram",async()=>{try{console.log("🚀 AcademyStore: Updating program:",S);const R=e.value[_]||[],D=R.findIndex(L=>L.id===S);D!==-1&&(R[D]=x,e.value[_]=R,await Ee.updateDoc(`academies/${_}`,{programs:R}),console.log("✅ AcademyStore: Program updated successfully"))}catch(R){throw console.error("❌ AcademyStore: Error updating program:",R),Ke.handleFirestoreError(R,"updateProgram"),R}}),deleteProgram:async(_,S)=>Xe.timeOperation("deleteProgram",async()=>{try{console.log("🚀 AcademyStore: Deleting program:",S);const R=(e.value[_]||[]).filter(D=>D.id!==S);e.value[_]=R,await Ee.updateDoc(`academies/${_}`,{programs:R}),console.log("✅ AcademyStore: Program deleted successfully")}catch(x){throw console.error("❌ AcademyStore: Error deleting program:",x),Ke.handleFirestoreError(x,"deleteProgram"),x}}),setSelectedAcademy:_=>{n.value=_},addUserBooking:async _=>Xe.timeOperation("addUserBooking",async()=>{try{console.log("🚀 AcademyStore: Adding user booking");const S={..._,createdAt:new Date,status:"pending"},x=await Ee.addDoc("userBookings",S);S.id=x,r.value.push(S),console.log("✅ AcademyStore: User booking added successfully")}catch(S){throw console.error("❌ AcademyStore: Error adding user booking:",S),Ke.handleFirestoreError(S,"addUserBooking"),S}}),fetchUserBookings:async(_,S)=>Xe.timeOperation("fetchUserBookings",async()=>{try{if(!S){console.warn("No project ID provided to fetchUserBookings");return}console.log("🚀 AcademyStore: Fetching user bookings for user:",_,"project:",S);const x={filters:[{field:"userId",operator:"==",value:_}],orderBy:[{field:"createdAt",direction:"desc"}],timeoutMs:6e3},D=(await Ee.getDocs(`projects/${S}/bookings`,x)).docs.map(L=>({id:L.id,...L.data()}));r.value=D,console.log("✅ AcademyStore: User bookings fetched:",D.length)}catch(x){throw console.error("❌ AcademyStore: Error fetching user bookings:",x),Ke.handleFirestoreError(x,"fetchUserBookings"),x}}),clearUserBookings:()=>{r.value=[]},createTestBooking:async(_,S,x)=>Xe.timeOperation("createTestBooking",async()=>{try{if(!_||!S)return console.warn("Missing projectId or userId for test booking"),!1;console.log("🚀 AcademyStore: Creating test booking for project:",_);const R={...x,userId:S,createdAt:new Date,status:"pending"},D=await Ee.addDoc(`projects/${_}/bookings`,R);return R.id=D,console.log("✅ AcademyStore: Test booking created successfully:",R),!0}catch(R){throw console.error("❌ AcademyStore: Error creating test booking:",R),Ke.handleFirestoreError(R,"createTestBooking"),R}}),fetchAcademies:async _=>Xe.timeOperation("fetchAcademies",async()=>{try{console.log("🚀 AcademyStore: Fetching academies for project:",_);const S={timeoutMs:6e3},R=(await Ee.getDocs(`projects/${_}/academies`,S)).docs.map(D=>{const L=D.data();return{id:D.id,...L,imageUrl:L.imageUrl||null,imageFileName:L.imageFileName||null}});return t.value=R,R.forEach(D=>{D.programs&&(e.value[D.id]=D.programs)}),console.log("✅ AcademyStore: Academies fetched:",R.length),R}catch(S){throw console.error("❌ AcademyStore: Error fetching academies:",S),Ke.handleFirestoreError(S,"fetchAcademies"),S}}),completeBooking:async(_,S)=>Xe.timeOperation("completeBooking",async()=>{try{console.log("🔍 AcademyStore: Completing booking:",{projectId:_,bookingId:S});const x=`projects/${_}/bookings/${S}`,R={status:"completed",updatedAt:new Date};await Ee.updateDoc(x,R);const D=r.value.findIndex(L=>L.id===S);return D!==-1&&(r.value[D].status="completed",r.value[D].updatedAt=R.updatedAt),console.log("✅ AcademyStore: Booking completed successfully"),{success:!0}}catch(x){throw console.error("❌ AcademyStore: Error completing booking:",x),Ke.handleFirestoreError(x,"completeBooking"),x}})}});class jF{async createServiceBooking(e,n){return Xe.timeOperation("createServiceBooking",async()=>{try{console.log("🚀 Creating service booking:",{projectId:e,bookingData:n});const r=await yt.getCurrentUser();if(console.log("🚀 ServiceBookingService: Current user:",r?"authenticated":"not authenticated",r?r.uid:"no user"),!r)throw console.error("❌ ServiceBookingService: User not authenticated - cannot create booking"),new Error("User not authenticated");if(!e)throw new Error("Project ID is required");if(!n.serviceId)throw new Error("Service ID is required");if(!n.categoryId)throw new Error("Category ID is required");if(!n.selectedDate)throw new Error("Selected date is required");const s=new Date,o={userId:r.uid,userName:r.displayName||"User",userEmail:r.email,projectId:e,serviceId:n.serviceId,categoryId:n.categoryId,serviceName:n.serviceName,categoryName:n.categoryName,servicePrice:n.servicePrice,selectedDate:n.selectedDate,selectedTime:n.selectedTime||null,status:"open",paymentStatus:"pending",notes:n.notes||"",messages:[],lastMessageAt:s,createdAt:s,updatedAt:s},i=`projects/${e}/serviceBookings`,a=await Ee.addDoc(i,o);return console.log("✅ Service booking created successfully:",{bookingId:a.id}),a.id}catch(r){throw console.error("❌ Error creating service booking:",r),Ke.handleFirestoreError(r,"createServiceBooking"),r}})}async getUserServiceBookings(e,n){return Xe.timeOperation("getUserServiceBookings",async()=>{try{console.log("🔍 Getting user service bookings:",{projectId:e,userId:n});const r=`projects/${e}/serviceBookings`,s={filters:[{field:"userId",operator:"==",value:n}],orderBy:[{field:"createdAt",direction:"desc"}],timeoutMs:6e3},i=(await Ee.getDocs(r,s)).docs.map(a=>({id:a.id,...a.data()}));return console.log("✅ User service bookings retrieved:",{count:i.length}),i}catch(r){throw console.error("❌ Error fetching user service bookings:",r),Ke.handleFirestoreError(r,"getUserServiceBookings"),r}})}async getAllServiceBookings(e){return Xe.timeOperation("getAllServiceBookings",async()=>{try{console.log("🔍 Getting all service bookings:",{projectId:e});const n=`projects/${e}/serviceBookings`,r={orderBy:[{field:"createdAt",direction:"desc"}],timeoutMs:6e3},o=(await Ee.getDocs(n,r)).docs.map(i=>({id:i.id,...i.data()}));return console.log("✅ All service bookings retrieved:",{count:o.length}),o}catch(n){throw console.error("❌ Error fetching all service bookings:",n),Ke.handleFirestoreError(n,"getAllServiceBookings"),n}})}async getServiceBookingsByStatus(e,n,r){return Xe.timeOperation("getServiceBookingsByStatus",async()=>{try{console.log("🔍 Getting service bookings by status:",{projectId:e,userId:n,status:r});const s=`projects/${e}/serviceBookings`,o={filters:[{field:"userId",operator:"==",value:n},{field:"status",operator:"==",value:r}],orderBy:[{field:"lastMessageAt",direction:"desc"}],timeoutMs:6e3},i=await Ee.getDocs(s,o);return console.log("✅ Service bookings retrieved successfully:",i.docs.length),i.docs.map(a=>({id:a.id,...a.data()}))}catch(s){throw console.error(`❌ Error fetching ${r} service bookings:`,s),Ke.handleFirestoreError(s,"getServiceBookingsByStatus"),s}})}async getServiceBooking(e,n){return Xe.timeOperation("getServiceBooking",async()=>{try{console.log("🔍 Getting service booking:",{projectId:e,bookingId:n});const r=`projects/${e}/serviceBookings/${n}`,s=await Ee.getDoc(r);if(s.exists){const o={id:s.id,...s.data()};return console.log("✅ Service booking retrieved successfully"),o}else throw new Error("Service booking not found")}catch(r){throw console.error("❌ Error fetching service booking:",r),Ke.handleFirestoreError(r,"getServiceBooking"),r}})}async updateBookingStatus(e,n,r,s=""){try{const o=new Date,i={id:Date.now().toString(),text:`Booking status updated to "${r.toUpperCase()}"${s?`. Reason: ${s}`:""}`,senderType:"system",timestamp:o,messageType:"status_update"},a=await this.getServiceBooking(e,n),c=`projects/${e}/serviceBookings/${n}`;await Ee.updateDoc(c,{status:r,updatedAt:new Date,lastMessageAt:new Date,messages:[...a.messages||[],i]})}catch(o){throw console.error("Error updating booking status:",o),o}}async completeBooking(e,n,r=""){return Xe.timeOperation("completeBooking",async()=>{try{console.log("🔍 Completing service booking:",{projectId:e,bookingId:n,reason:r});const s=new Date,o={id:Date.now().toString(),text:`Booking completed${r?`. Reason: ${r}`:""}`,senderType:"system",timestamp:s,messageType:"completion"},i=await this.getServiceBooking(e,n),a=`projects/${e}/serviceBookings/${n}`;return await Ee.updateDoc(a,{status:"closed",updatedAt:new Date,lastMessageAt:new Date,messages:[...i.messages||[],o]}),console.log("✅ Service booking completed successfully"),{success:!0}}catch(s){throw console.error("❌ Error completing service booking:",s),Ke.handleFirestoreError(s,"completeBooking"),s}})}async updateBookingDetails(e,n,r,s=""){try{const o=await this.getServiceBooking(e,n);let i="Booking details updated:";const a=[];r.servicePrice&&r.servicePrice!==o.servicePrice&&a.push(`Price: EGP ${o.servicePrice} → EGP ${r.servicePrice}`),r.selectedDate&&r.selectedDate!==o.selectedDate&&a.push(`Date: ${o.selectedDate} → ${r.selectedDate}`),r.selectedTime&&r.selectedTime!==o.selectedTime&&a.push(`Time: ${o.selectedTime||"Not set"} → ${r.selectedTime}`),a.length>0&&(i+=`
`+a.join(`
`),s&&(i+=`
Reason: ${s}`));const c=new Date,u={id:Date.now().toString(),text:i,senderType:"system",timestamp:c,messageType:"details_update"},h=`projects/${e}/serviceBookings/${n}`;await Ee.updateDoc(h,{...r,updatedAt:new Date,lastMessageAt:new Date,messages:[...o.messages||[],u]})}catch(o){throw console.error("Error updating booking details:",o),o}}async addMessage(e,n,r){return Xe.timeOperation("addMessage",async()=>{try{console.log("🔍 Adding message to service booking:",{projectId:e,bookingId:n,messageData:r});const s=await yt.getCurrentUser();if(!s)throw new Error("User not authenticated");const o=await this.getServiceBooking(e,n);console.log("📋 Current booking messages count:",o.messages?.length||0);const i=new Date,a={id:Date.now().toString(),text:r.text,senderType:r.senderType||"user",senderId:s.uid,senderName:s.displayName||"User",timestamp:i,messageType:"chat"};r.imageUrl&&(a.imageUrl=r.imageUrl),console.log("💬 New message object:",a);const c=`projects/${e}/serviceBookings/${n}`,u={messages:[...o.messages||[],a],lastMessageAt:new Date,updatedAt:new Date};console.log("📝 Update data:",{messagesCount:u.messages.length,lastMessageAt:u.lastMessageAt,updatedAt:u.updatedAt}),await Ee.updateDoc(c,u),console.log("✅ Message added successfully to service booking")}catch(s){throw console.error("❌ Error adding message:",s),Ke.handleFirestoreError(s,"addMessage"),s}})}onServiceBookingChange(e,n,r){const s=`projects/${e}/serviceBookings/${n}`;return Ee.onSnapshot(s,o=>{o.exists()&&r({id:o.id,...o.data()})})}}const cp=new jF,UF=Yr("serviceBooking",()=>{const t=K([]),e=K(!1),n=K(null),r=G(()=>t.value),s=G(()=>e.value),o=G(()=>n.value),i=G(()=>{const g=new Date,C=new Date;return C.setDate(g.getDate()+30),t.value.filter(T=>{const v=new Date(T.selectedDate);return v>=g&&v<=C&&T.status!=="cancelled"})}),a=G(()=>{const g=new Date,C=new Date;return C.setDate(g.getDate()+90),t.value.filter(T=>{const v=new Date(T.selectedDate);return v>=g&&v<=C&&T.status!=="cancelled"})});return{bookings:t,loading:e,error:n,getBookings:r,isLoading:s,getError:o,getUpcomingBookings:i,getCalendarBookings:a,createBooking:async(g,C)=>{try{e.value=!0,n.value=null;const T=await cp.createServiceBooking(g,C),v={id:T,...C,projectId:g,status:"pending",paymentStatus:"pending",createdAt:new Date,updatedAt:new Date};return t.value.unshift(v),T}catch(T){throw console.error("Error creating service booking:",T),n.value=T.message||"Failed to create booking",T}finally{e.value=!1}},fetchUserBookings:async(g,C)=>{try{e.value=!0,n.value=null;const T=await cp.getUserServiceBookings(g,C);t.value=T,console.log("Service bookings fetched successfully:",T.length)}catch(T){console.error("Error fetching service bookings:",T),n.value=T.message||"Failed to fetch bookings"}finally{e.value=!1}},clearError:()=>{n.value=null},clearBookings:()=>{t.value=[]},completeBooking:async(g,C,T="")=>{try{e.value=!0,n.value=null,await cp.completeBooking(g,C,T);const v=t.value.findIndex(_=>_.id===C);v!==-1&&(t.value[v].status="closed",t.value[v].updatedAt=new Date),console.log("Service booking completed successfully")}catch(v){throw console.error("Error completing service booking:",v),n.value=v.message||"Failed to complete booking",v}finally{e.value=!1}}}}),FF={class:"card-content"},BF={key:0,class:"loading-state"},qF={key:1,class:"bookings-list"},HF={class:"booking-info"},zF={class:"booking-title"},WF={class:"booking-date"},GF={key:0,class:"view-more"},KF={key:2,class:"empty-state"},QF=Object.assign({name:"UpcomingBookingsCard"},{__name:"UpcomingBookingsCard",setup(t){const e=an(),n=G4(),r=UF(),s=Ct(),o=K(!0),i=G(()=>{const f=n.userBookings;console.log("All bookings from store:",f);const p=f.filter(g=>{if(console.log("Checking booking:",g),g.type==="court"&&g.date){const C=new Date(g.date),T=new Date;T.setHours(0,0,0,0);const v=C>=T;return console.log("Court booking date check:",{bookingDate:C.toISOString(),today:T.toISOString(),isUpcoming:v}),v&&g.status!=="cancelled"}else if(g.type==="academy"){const C=g.status==="enrolled";return console.log("Academy booking status check:",{status:g.status,isEnrolled:C}),C}return!1}).sort((g,C)=>g.date&&C.date?new Date(g.date)-new Date(C.date):0);return console.log("Filtered upcoming bookings:",p),p}),a=f=>f.type==="court"?`${f.sport} - ${f.courtName}`:f.programName,c=f=>f?new Date(f).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"Ongoing",u=()=>{e.push("/my-bookings")},h=async()=>{try{o.value=!0;const f=await yt.getCurrentUser();f&&s.selectedProject?.id?(console.log("Fetching user bookings for:",{userId:f.uid,projectId:s.selectedProject.id}),await n.fetchUserBookings(f.uid,s.selectedProject.id),await r.fetchUserBookings(s.selectedProject.id,f.uid)):console.log("Cannot fetch bookings - missing user or project:",{hasUser:!!f,hasProject:!!s.selectedProject?.id,projectId:s.selectedProject?.id})}catch(f){console.error("Error fetching user bookings:",f)}finally{o.value=!1}};return Ve(()=>s.selectedProject?.id,(f,p)=>{f&&f!==p&&(console.log("Project changed, refetching bookings:",{oldProjectId:p,newProjectId:f}),h())}),Ve([()=>s.selectedProject?.id,()=>s.userProjects.length],([f,p])=>{f&&p>0&&(console.log("Project and user available, fetching bookings:",{projectId:f,projectsCount:p}),h())}),ft(async()=>{await yt.getCurrentUser()&&s.selectedProject?.id?h():console.log("Waiting for user and project to be available...")}),(f,p)=>(M(),O("div",{class:"upcoming-bookings-card",onClick:u},[p[3]||(p[3]=l("div",{class:"card-header"},[l("h3",null,"Upcoming Bookings")],-1)),l("div",FF,[o.value?(M(),O("div",BF,[...p[0]||(p[0]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading bookings...",-1)])])):i.value.length>0?(M(),O("div",qF,[(M(!0),O(Oe,null,ot(i.value.slice(0,3),g=>(M(),O("div",{key:g.id,class:"booking-item"},[l("div",HF,[l("div",zF,B(a(g)),1),l("div",WF,B(c(g.date)),1)]),p[1]||(p[1]=l("div",{class:"booking-status"},[l("span",{class:"status-badge upcoming"},"Upcoming")],-1))]))),128)),i.value.length>3?(M(),O("div",GF," +"+B(i.value.length-3)+" more ",1)):fe("",!0)])):(M(),O("div",KF,[...p[2]||(p[2]=[l("div",{class:"empty-icon"},[l("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"#ccc","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"#ccc","stroke-width":"2"})])],-1),l("p",null,"No upcoming bookings",-1)])]))])]))}}),YF=pt(QF,[["__scopeId","data-v-6fe16d50"]]);class ZF{constructor(){}async addComment(e,n,r,s){return Xe.timeOperation("addComment",async()=>{try{console.log("🚀 Adding comment:",{projectId:e,newsId:n,userId:r,commentData:s});const o=new Date,i={id:"",userId:r,userName:s.userName||"Anonymous",userEmail:s.userEmail||"",text:s.text.trim(),parentCommentId:s.parentCommentId||null,reactions:{},isDeleted:!1,deletedBy:null,deletedAt:null,deletionReason:null,createdAt:o,updatedAt:o,userUnit:s.userUnit||null,userProject:s.userProject||null},a=await Ee.addDoc(`projects/${e}/news/${n}/comments`,i);return await Ee.updateDoc(`projects/${e}/news/${n}/comments/${a}`,{id:a}),await this.updateNewsCommentCount(e,n,1),a}catch(o){throw console.error("❌ Error adding comment:",o),Ke.handleFirestoreError(o,"addComment"),o}})}async getComments(e,n,r={}){try{const s={orderBy:[["createdAt","desc"]],limit:r.limit};return(await Ee.getCollection(`projects/${e}/news/${n}/comments`,s)).map(i=>({...i,createdAt:i.createdAt?.toDate?.()||i.createdAt,updatedAt:i.updatedAt?.toDate?.()||i.updatedAt,deletedAt:i.deletedAt?.toDate?.()||i.deletedAt}))}catch(s){throw console.error("Error fetching comments:",s),s}}subscribeToComments(e,n,r){try{return Ee.onSnapshot(`projects/${e}/news/${n}/comments`,s=>{if(s&&s.exists()){const o=s.data(),i={id:s.id,...o,createdAt:o.createdAt?.toDate?.()||o.createdAt,updatedAt:o.updatedAt?.toDate?.()||o.updatedAt,deletedAt:o.deletedAt?.toDate?.()||o.deletedAt};r([i])}else r([])})}catch(s){throw console.error("Error setting up comments subscription:",s),s}}async toggleReaction(e,n,r,s,o,i){try{const a=await Ee.getDoc(`projects/${e}/news/${n}/comments/${r}`);if(!a||!a.exists())throw new Error("Comment not found");const u=a.data().reactions||{};if(u[o]||(u[o]={count:0,users:[]}),i)u[o].users.includes(s)||(u[o].users.push(s),u[o].count+=1);else{const h=u[o].users.indexOf(s);h>-1&&(u[o].users.splice(h,1),u[o].count-=1,u[o].count<=0&&delete u[o])}await Ee.updateDoc(`projects/${e}/news/${n}/comments/${r}`,{reactions:u,updatedAt:new Date})}catch(a){throw console.error("Error toggling reaction:",a),a}}async deleteComment(e,n,r,s,o="Violation of community guidelines"){try{await Ee.updateDoc(`projects/${e}/news/${n}/comments/${r}`,{isDeleted:!0,deletedBy:s,deletedAt:new Date,deletionReason:o,updatedAt:new Date}),await this.updateNewsCommentCount(e,n,-1)}catch(i){throw console.error("Error deleting comment:",i),i}}async restoreComment(e,n,r){try{await Ee.updateDoc(`projects/${e}/news/${n}/comments/${r}`,{isDeleted:!1,deletedBy:null,deletedAt:null,deletionReason:null,updatedAt:new Date}),await this.updateNewsCommentCount(e,n,1)}catch(s){throw console.error("Error restoring comment:",s),s}}async updateNewsCommentCount(e,n,r){try{const s=await Ee.getDoc(`projects/${e}/news/${n}`);if(s&&s.exists()){const o=s.data().commentCount||0;await Ee.updateDoc(`projects/${e}/news/${n}`,{commentCount:o+r,updatedAt:new Date})}}catch(s){console.error("Error updating comment count:",s)}}async getCommentStats(e,n){try{const r=await this.getComments(e,n);return{total:r.length,active:r.filter(o=>!o.isDeleted).length,deleted:r.filter(o=>o.isDeleted).length,withReactions:r.filter(o=>Object.keys(o.reactions||{}).length>0).length,totalReactions:r.reduce((o,i)=>o+Object.values(i.reactions||{}).reduce((a,c)=>a+c.count,0),0)}}catch(r){throw console.error("Error fetching comment stats:",r),r}}async addNewsReaction(e,n,r){try{const{optimizedAuthService:s}=await Se(async()=>{const{optimizedAuthService:a}=await Promise.resolve().then(()=>ka);return{optimizedAuthService:a}},void 0),o=await s.getCurrentUser();if(!o)throw new Error("User not authenticated");const i={userId:o.uid,userName:o.displayName||"Anonymous",emoji:r,timestamp:new Date,createdAt:new Date};await Ee.addDoc(`projects/${e}/news/${n}/reactions`,i)}catch(s){throw console.error("Error adding news reaction:",s),s}}async removeNewsReaction(e,n,r){try{const{optimizedAuthService:s}=await Se(async()=>{const{optimizedAuthService:c}=await Promise.resolve().then(()=>ka);return{optimizedAuthService:c}},void 0),o=await s.getCurrentUser();if(!o)throw new Error("User not authenticated");const a=(await Ee.getCollection(`projects/${e}/news/${n}/reactions`,{where:[["userId","==",o.uid],["emoji","==",r]]})).map(c=>Ee.deleteDoc(`projects/${e}/news/${n}/reactions/${c.id}`));await Promise.all(a)}catch(s){throw console.error("Error removing news reaction:",s),s}}async getNewsReactions(e,n){try{return(await Ee.getCollection(`projects/${e}/news/${n}/reactions`,{orderBy:[["createdAt","desc"]]})).map(s=>({id:s.id,...s}))}catch(r){throw console.error("Error fetching news reactions:",r),r}}subscribeToNewsReactions(e,n,r){try{return Ee.onSnapshot(`projects/${e}/news/${n}/reactions`,s=>{if(s&&s.exists()){const o=s.data(),i={id:s.id,...o};r([i])}else r([])})}catch(s){throw console.error("Error subscribing to news reactions:",s),s}}async toggleNewsReaction(e,n,r){try{const{optimizedAuthService:s}=await Se(async()=>{const{optimizedAuthService:a}=await Promise.resolve().then(()=>ka);return{optimizedAuthService:a}},void 0),o=await s.getCurrentUser();if(!o)throw new Error("User not authenticated");(await Ee.getCollection(`projects/${e}/news/${n}/reactions`,{where:[["userId","==",o.uid],["emoji","==",r]]})).length===0?await this.addNewsReaction(e,n,r):await this.removeNewsReaction(e,n,r)}catch(s){throw console.error("Error toggling news reaction:",s),s}}async deleteCommentWithReplies(e,n,r){try{const s=await Ee.getCollection(`projects/${e}/news/${n}/comments`),o=[],i=c=>{s.filter(h=>h.parentCommentId===c).forEach(h=>{o.push(h.id),i(h.id)})};i(r),await Ee.deleteDoc(`projects/${e}/news/${n}/comments/${r}`);const a=o.map(c=>Ee.deleteDoc(`projects/${e}/news/${n}/comments/${c}`));await Promise.all(a),console.log(`Deleted comment ${r} and ${o.length} replies`)}catch(s){throw console.error("Error deleting comment with replies:",s),s}}}const Lr=new ZF,JF=Yr("newsComments",()=>{const t=K({}),e=K({}),n=K({}),r=K(!1),s=K(null),o=K({}),i=K({}),a=G(()=>E=>t.value[E]||[]),c=G(()=>E=>(t.value[E]||[]).filter(k=>!k.isDeleted)),u=G(()=>E=>(t.value[E]||[]).filter(k=>k.isDeleted)),h=G(()=>E=>e.value[E]||{}),f=G(()=>E=>n.value[E]||[]),p=async E=>{if(E){r.value=!0,s.value=null;try{const k=Ct().selectedProject?.id;if(!k)throw new Error("No project selected");const $=await Lr.getComments(k,E);t.value[E]=$}catch(w){s.value=w.message,console.error("Error fetching comments:",w)}finally{r.value=!1}}},g=E=>{if(!(!E||o.value[E]))try{const k=Ct().selectedProject?.id;if(!k)throw new Error("No project selected");const $=Lr.subscribeToComments(k,E,U=>{t.value[E]=U});o.value[E]=$}catch(w){s.value=w.message,console.error("Error subscribing to comments:",w)}},C=E=>{o.value[E]&&(o.value[E](),delete o.value[E])},T=async(E,w,k=null)=>{if(!(!E||!w?.trim())){r.value=!0,s.value=null;try{const U=lr().currentUser;if(!U)throw new Error("User not authenticated");const Z=Ct(),ee=Z.selectedProject?.id;if(!ee)throw new Error("No project selected");const N={userName:U.displayName||"Anonymous",userEmail:U.email||"",userUnit:Z.selectedProject?.userUnit||null,userProject:Z.selectedProject?.name||null},H=await Lr.addComment(ee,E,U.uid,{...N,text:w.trim(),parentCommentId:k});return await p(E),H}catch($){throw s.value=$.message,console.error("Error adding comment:",$),$}finally{r.value=!1}}},v=async(E,w,k)=>{if(!(!E||!w||!k))try{const U=lr().currentUser;if(!U)throw new Error("User not authenticated");const ee=Ct().selectedProject?.id;if(!ee)throw new Error("No project selected");const H=(t.value[E]||[]).find(we=>we.id===w);if(!H)return;const Q=(H.reactions||{})[k]?.users?.includes(U.uid)||!1;await Lr.toggleReaction(ee,E,w,U.uid,k,!Q),await p(E)}catch($){s.value=$.message,console.error("Error toggling reaction:",$)}},_=async E=>{if(E)try{const k=Ct().selectedProject?.id;if(!k)throw new Error("No project selected");const $=await Lr.getNewsReactions(k,E),U={},Z=[],N=lr().currentUser;$.forEach(H=>{const Y=H.emoji;U[Y]||(U[Y]={count:0,users:[]}),U[Y].count++,U[Y].users.push({userId:H.userId,userName:H.userName,timestamp:H.timestamp}),N&&H.userId===N.uid&&Z.push(Y)}),e.value[E]=U,n.value[E]=Z}catch(w){s.value=w.message,console.error("Error fetching news reactions:",w)}};return{comments:t,newsReactions:e,userNewsReactions:n,loading:r,error:s,getCommentsForNews:a,getActiveComments:c,getDeletedComments:u,getNewsReactions:h,getUserNewsReactions:f,fetchComments:p,subscribeToComments:g,unsubscribeFromComments:C,addComment:T,toggleReaction:v,fetchNewsReactions:_,subscribeToNewsReactions:E=>{if(!(!E||i.value[E]))try{const k=Ct().selectedProject?.id;if(!k)throw new Error("No project selected");const $=Lr.subscribeToNewsReactions(k,E,U=>{const Z={},ee=[],H=lr().currentUser;U.forEach(Y=>{const ne=Y.emoji;Z[ne]||(Z[ne]={count:0,users:[]}),Z[ne].count++,Z[ne].users.push({userId:Y.userId,userName:Y.userName,timestamp:Y.timestamp}),H&&Y.userId===H.uid&&ee.push(ne)}),e.value[E]=Z,n.value[E]=ee});i.value[E]=$}catch(w){s.value=w.message,console.error("Error subscribing to news reactions:",w)}},unsubscribeFromNewsReactions:E=>{i.value[E]&&(i.value[E](),delete i.value[E])},toggleNewsReaction:async(E,w)=>{if(!(!E||!w))try{if(!lr().currentUser)throw new Error("User not authenticated");const Z=Ct().selectedProject?.id;if(!Z)throw new Error("No project selected");await Lr.toggleNewsReaction(Z,E,w),await _(E)}catch(k){s.value=k.message,console.error("Error toggling news reaction:",k)}},deleteComment:async(E,w,k="Violation of community guidelines")=>{if(!(!E||!w))try{const U=lr().currentUser;if(!U)throw new Error("User not authenticated");const ee=Ct().selectedProject?.id;if(!ee)throw new Error("No project selected");await Lr.deleteComment(ee,E,w,U.uid,k),await p(E)}catch($){throw s.value=$.message,console.error("Error deleting comment:",$),$}},deleteCommentWithReplies:async(E,w,k)=>{try{r.value=!0,s.value=null,await Lr.deleteCommentWithReplies(E,w,k);const $=t.value.findIndex(U=>U.id===k);$!==-1&&(t.value.splice($,1),t.value=t.value.filter(U=>U.parentCommentId!==k)),console.log("Comment and replies deleted successfully")}catch($){console.error("Error deleting comment with replies:",$),s.value=$.message||"Failed to delete comment"}finally{r.value=!1}},restoreComment:async(E,w)=>{if(!(!E||!w))try{const $=Ct().selectedProject?.id;if(!$)throw new Error("No project selected");await Lr.restoreComment($,E,w),await p(E)}catch(k){throw s.value=k.message,console.error("Error restoring comment:",k),k}},getCommentStats:async E=>{if(!E)return null;try{const k=Ct().selectedProject?.id;if(!k)throw new Error("No project selected");return await Lr.getCommentStats(k,E)}catch(w){return s.value=w.message,console.error("Error fetching comment stats:",w),null}},clearComments:E=>{E?(delete t.value[E],C(E)):(t.value={},Object.values(o.value).forEach(w=>w()),o.value={})},clearError:()=>{s.value=null}}}),XF={name:"CommentItem",props:{comment:{type:Object,required:!0},newsId:{type:String,required:!0},isReply:{type:Boolean,default:!1}},emits:["reply","react","delete","deleteWithReplies"],setup(t,{emit:e}){const n=K(!1),r=K([]),s=G(()=>{const C=lr().currentUser;return C&&t.comment.userId===C.uid}),o=["👍","❤️","😂","😮","😢","😡","👏","🎉"],i=G(()=>t.comment.reactions&&Object.keys(t.comment.reactions).length>0),a=g=>{if(!g)return"Just now";const C=new Date,T=g instanceof Date?g:g.toDate(),v=Math.floor((C-T)/1e3);if(v<60)return"Just now";if(v<3600)return`${Math.floor(v/60)}m ago`;if(v<86400)return`${Math.floor(v/3600)}h ago`;if(v<604800)return`${Math.floor(v/86400)}d ago`;const _=C.getFullYear(),S=C.getMonth(),x=T.getFullYear(),R=T.getMonth(),D=(_-x)*12+(S-R);if(D===1)return"1 month ago";if(D<12)return`${D} months ago`;if(D<24)return"1 year ago";{const L=Math.floor(D/12);return L===1?"1 year ago":`${L} years ago`}},c=()=>{n.value=!n.value},u=g=>{e("react",t.comment.id,g),n.value=!1},h=()=>{e("reply",t.comment.id)},f=()=>{confirm("Are you sure you want to delete this comment? This will also delete all replies to this comment.")&&e("deleteWithReplies",t.comment.id)},p=g=>{const T=lr().currentUser;return T&&t.comment.reactions?.[g]?.users?.includes(T.uid)||!1};return ft(()=>{r.value=[]}),{showReactions:n,replies:r,availableEmojis:o,hasReactions:i,isCurrentUser:s,formatTime:a,toggleReactions:c,handleReaction:u,handleReply:h,handleDelete:f,hasUserReacted:p}}},eB={class:"comment-header"},tB={class:"user-info"},nB={class:"user-avatar"},rB={class:"avatar-text"},sB={class:"user-details"},oB={class:"user-name-row"},iB={class:"user-name"},aB={class:"comment-meta"},lB={class:"comment-time"},cB={class:"comment-actions"},uB={class:"comment-content"},dB={class:"comment-text"},hB={key:0,class:"comment-reactions"},fB=["onClick"],pB={class:"emoji"},gB={class:"count"},mB={key:1,class:"quick-reactions"},vB=["onClick","title"],wB={key:2,class:"replies"},yB={class:"replies-header"},_B={class:"replies-count"},kB={class:"replies-list"};function bB(t,e,n,r,s,o){const i=wh("CommentItem",!0);return M(),O("div",{class:be(["comment-item",{"is-reply":n.isReply}])},[l("div",eB,[l("div",tB,[l("div",nB,[l("span",rB,B(n.comment.userName?.charAt(0)?.toUpperCase()||"A"),1)]),l("div",sB,[l("div",oB,[l("h4",iB,B(n.comment.userName||"Anonymous"),1)]),l("div",aB,[l("span",lB,B(r.formatTime(n.comment.createdAt)),1)])])]),l("div",cB,[l("button",{onClick:e[0]||(e[0]=(...a)=>r.toggleReactions&&r.toggleReactions(...a)),class:"action-btn",title:"React"},[...e[7]||(e[7]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("button",{onClick:e[1]||(e[1]=(...a)=>r.handleReply&&r.handleReply(...a)),class:"action-btn",title:"Reply"},[...e[8]||(e[8]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("button",{onClick:e[2]||(e[2]=(...a)=>t.handleComplaint&&t.handleComplaint(...a)),class:"action-btn complaint-btn",title:"Start Complaint"},[...e[9]||(e[9]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),r.isCurrentUser?(M(),O("button",{key:0,onClick:e[3]||(e[3]=(...a)=>r.handleDelete&&r.handleDelete(...a)),class:"action-btn delete-btn",title:"Delete Comment"},[...e[10]||(e[10]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 6H5H21M8 6V4C8 3.46957 8.21071 2.96086 8.58579 2.58579C8.96086 2.21071 9.46957 2 10 2H14C14.5304 2 15.0391 2.21071 15.4142 2.58579C15.7893 2.96086 16 3.46957 16 4V6M19 6V20C19 20.5304 18.7893 21.0391 18.4142 21.4142C18.0391 21.7893 17.5304 22 17 22H7C6.46957 22 5.96086 21.7893 5.58579 21.4142C5.21071 21.0391 5 20.5304 5 20V6H19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0)])]),l("div",uB,[l("p",dB,B(n.comment.text),1)]),r.hasReactions?(M(),O("div",hB,[(M(!0),O(Oe,null,ot(n.comment.reactions,(a,c)=>(M(),O("button",{key:c,onClick:u=>r.handleReaction(c),class:be(["reaction-btn",{active:r.hasUserReacted(c)}])},[l("span",pB,B(c),1),l("span",gB,B(a.count),1)],10,fB))),128))])):fe("",!0),r.showReactions?(M(),O("div",mB,[(M(!0),O(Oe,null,ot(r.availableEmojis,a=>(M(),O("button",{key:a,onClick:c=>r.handleReaction(a),class:be(["quick-reaction-btn",{active:r.hasUserReacted(a)}]),title:a},B(a),11,vB))),128))])):fe("",!0),r.replies.length>0?(M(),O("div",wB,[l("div",yB,[l("span",_B,B(r.replies.length)+" "+B(r.replies.length===1?"reply":"replies"),1)]),l("div",kB,[(M(!0),O(Oe,null,ot(r.replies,a=>(M(),$n(i,{key:a.id,comment:a,"news-id":n.newsId,onReply:e[4]||(e[4]=c=>t.emit("reply",c)),onReact:e[5]||(e[5]=(c,u)=>t.emit("react",c,u)),onDelete:e[6]||(e[6]=c=>t.emit("delete",c))},null,8,["comment","news-id"]))),128))])])):fe("",!0)],2)}const CB=pt(XF,[["render",bB],["__scopeId","data-v-dc687c17"]]),EB={name:"NewsComments",components:{CommentItem:CB},props:{newsId:{type:String,required:!0},interactionsEnabled:{type:Boolean,default:!0}},setup(t){const e=JF();console.log("Comments store:",e),console.log("toggleNewsReaction function:",e.toggleNewsReaction);const n=K(!1),r=K(""),s=K(null),o=K(!1),i=K("Most relevant"),a=["like","love","laugh","sad"],c=G(()=>{const P=e.getActiveComments(t.newsId);return console.log("Active comments for newsId",t.newsId,":",P),P}),u=G(()=>e.getDeletedComments(t.newsId)),h=G(()=>e.loading),f=G(()=>{const P=c.value,E=new Map,w=[];P.forEach(U=>{E.set(U.id,{...U,replies:[]})}),P.forEach(U=>{if(U.parentCommentId){const Z=E.get(U.parentCommentId);Z&&Z.replies.push(E.get(U.id))}else w.push(E.get(U.id))});const $=(U=>{switch(i.value){case"Most relevant":return U.sort((Z,ee)=>{const N=(Z.reactions?Object.keys(Z.reactions).length:0)+(Z.replies?Z.replies.length:0);return(ee.reactions?Object.keys(ee.reactions).length:0)+(ee.replies?ee.replies.length:0)-N});case"Latest":return U.sort((Z,ee)=>{const N=Z.createdAt?.toDate?Z.createdAt.toDate():new Date(Z.createdAt);return(ee.createdAt?.toDate?ee.createdAt.toDate():new Date(ee.createdAt))-N});case"Oldest":return U.sort((Z,ee)=>{const N=Z.createdAt?.toDate?Z.createdAt.toDate():new Date(Z.createdAt),H=ee.createdAt?.toDate?ee.createdAt.toDate():new Date(ee.createdAt);return N-H});case"Most liked":return U.sort((Z,ee)=>{const N=Z.reactions?Object.keys(Z.reactions).length:0;return(ee.reactions?Object.keys(ee.reactions).length:0)-N});default:return U}})(w);return $.forEach(U=>{U.replies&&U.replies.length>0&&U.replies.sort((Z,ee)=>{const N=Z.createdAt?.toDate?Z.createdAt.toDate():new Date(Z.createdAt),H=ee.createdAt?.toDate?ee.createdAt.toDate():new Date(ee.createdAt);return N-H})}),console.log("Grouped comments for newsId",t.newsId,":",$),$}),p=G(()=>e.getNewsReactions(t.newsId)),g=G(()=>e.getUserNewsReactions(t.newsId)),C=G(()=>{const P={};return Object.entries(p.value).forEach(([E,w])=>{w.count>0&&(P[E]={count:w.count,users:w.users})}),P}),T=G(()=>Object.values(p.value).reduce((P,E)=>P+E.count,0)),v=()=>{n.value=!n.value,n.value?e.subscribeToComments(t.newsId):e.unsubscribeFromComments(t.newsId)},_=async P=>{try{if(typeof e.toggleNewsReaction!="function"){console.error("toggleNewsReaction function not found in store");return}if(g.value.includes(P))await e.toggleNewsReaction(t.newsId,P);else{if(g.value.length>0){const E=g.value[0];await e.toggleNewsReaction(t.newsId,E)}await e.toggleNewsReaction(t.newsId,P)}}catch(E){console.error("Error toggling reaction:",E)}},S=async()=>{if(r.value.trim())try{await e.addComment(t.newsId,r.value.trim(),s.value),r.value="",s.value=null}catch(P){console.error("Error adding comment:",P)}},x=P=>{console.log("Handling reply to comment:",P),s.value=P,r.value=`@${P} `,setTimeout(()=>{const E=document.querySelector(".comment-input");E&&E.focus()},100)},R=(P,E)=>{console.log("Handling reaction:",{commentId:P,emoji:E,newsId:t.newsId}),e.toggleReaction(t.newsId,P,E)},D=P=>{confirm("Are you sure you want to delete this comment?")&&e.deleteComment(t.newsId,P)},L=P=>{console.log("Handling delete with replies for comment:",P),e.deleteCommentWithReplies(t.projectId,t.newsId,P)},b=()=>{o.value=!o.value},A=P=>{i.value=P,o.value=!1},y=async()=>{try{await e.fetchNewsReactions(t.newsId),e.subscribeToNewsReactions(t.newsId)}catch(P){console.error("Error loading news reactions:",P)}};return ft(()=>{console.log("NewsComments mounted, fetching comments for newsId:",t.newsId),e.fetchComments(t.newsId),y()}),rr(()=>{e.unsubscribeFromComments(t.newsId),e.unsubscribeFromNewsReactions(t.newsId)}),Ve(()=>t.newsId,P=>{P&&(e.fetchComments(P),y(),n.value&&e.subscribeToComments(P))}),{showComments:n,newComment:r,replyingTo:s,showSortDropdown:o,currentSortOption:i,availableReactions:a,activeComments:c,groupedComments:f,deletedComments:u,loading:h,newsReactions:p,userReactions:g,reactionSummary:C,totalReactions:T,toggleComments:v,toggleReaction:_,handleAddComment:S,handleReply:x,handleReaction:R,handleDelete:D,handleDeleteWithReplies:L,toggleSortDropdown:b,setSortOption:A}}},SB={class:"news-interactions"},AB={key:0,class:"reaction-summary"},TB={class:"reaction-emojis"},PB={class:"reaction-count"},IB={key:1,class:"action-buttons"},RB={key:2,class:"comment-input-section"},DB={class:"comment-input-wrapper"},xB=["disabled"],LB={key:3,class:"comments-section"},MB={class:"comments-header"},NB={class:"comments-count"},OB={class:"sort-dropdown"},$B={key:0,class:"sort-options"},VB={key:0,class:"comments-list"},jB={key:0,class:"replies-container"};function UB(t,e,n,r,s,o){const i=wh("CommentItem");return M(),O("div",SB,[n.interactionsEnabled&&r.totalReactions>0?(M(),O("div",AB,[l("div",TB,[(M(!0),O(Oe,null,ot(r.reactionSummary,(a,c)=>(M(),O("span",{key:c,class:"reaction-emoji"},B(c==="like"?"👍":c==="love"?"❤️":c==="laugh"?"😂":c==="sad"?"😢":""),1))),128))]),l("span",PB,B(r.totalReactions),1)])):fe("",!0),n.interactionsEnabled?(M(),O("div",IB,[l("button",{onClick:e[0]||(e[0]=a=>r.toggleReaction("like")),class:be(["action-btn",{active:r.userReactions.includes("like")}])},[...e[11]||(e[11]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 10V19H4C3.46957 19 2.96086 18.7893 2.58579 18.4142C2.21071 18.0391 2 17.5304 2 17V12C2 11.4696 2.21071 10.9609 2.58579 10.5858C2.96086 10.2107 3.46957 10 4 10H7ZM7 10V5C7 4.20435 7.31607 3.44129 7.87868 2.87868C8.44129 2.31607 9.20435 2 10 2C10.7956 2 11.5587 2.31607 12.1213 2.87868C12.6839 3.44129 13 4.20435 13 5V8H20C20.5304 8 21.0391 8.21071 21.4142 8.58579C21.7893 8.96086 22 9.46957 22 10V17C22 17.5304 21.7893 18.0391 21.4142 18.4142C21.0391 18.7893 20.5304 19 20 19H9L7 10Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("span",null,"Like",-1)])],2),l("button",{onClick:e[1]||(e[1]=(...a)=>r.toggleComments&&r.toggleComments(...a)),class:"action-btn"},[...e[12]||(e[12]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("span",null,"Comment",-1)])])])):fe("",!0),n.interactionsEnabled?(M(),O("div",RB,[l("div",DB,[dt(l("textarea",{"onUpdate:modelValue":e[2]||(e[2]=a=>r.newComment=a),placeholder:"Write a comment...",class:"comment-input",rows:"1",onKeydown:[e[3]||(e[3]=Dp(ht((...a)=>r.handleAddComment&&r.handleAddComment(...a),["exact","prevent"]),["enter"])),e[4]||(e[4]=Dp(ht(a=>r.newComment+=`
`,["shift","exact"]),["enter"]))]},null,544),[[Dt,r.newComment]]),l("button",{onClick:e[5]||(e[5]=(...a)=>r.handleAddComment&&r.handleAddComment(...a)),disabled:!r.newComment.trim()||r.loading,class:"send-btn"},[...e[13]||(e[13]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,xB)])])):fe("",!0),n.interactionsEnabled&&r.activeComments.length>0?(M(),O("div",LB,[l("div",MB,[l("span",NB,B(r.activeComments.length)+" comments",1),l("div",OB,[l("button",{onClick:e[6]||(e[6]=(...a)=>r.toggleSortDropdown&&r.toggleSortDropdown(...a)),class:"sort-btn"},[xe(B(r.currentSortOption)+" ",1),e[14]||(e[14]=l("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),r.showSortDropdown?(M(),O("div",$B,[l("button",{onClick:e[7]||(e[7]=a=>r.setSortOption("Most relevant")),class:"sort-option"},"Most relevant"),l("button",{onClick:e[8]||(e[8]=a=>r.setSortOption("Latest")),class:"sort-option"},"Latest"),l("button",{onClick:e[9]||(e[9]=a=>r.setSortOption("Oldest")),class:"sort-option"},"Oldest"),l("button",{onClick:e[10]||(e[10]=a=>r.setSortOption("Most liked")),class:"sort-option"},"Most liked")])):fe("",!0)])]),r.showComments?(M(),O("div",VB,[(M(!0),O(Oe,null,ot(r.groupedComments,a=>(M(),O("div",{key:a.id,class:"comment-thread"},[ze(i,{comment:a,"news-id":n.newsId,onReply:r.handleReply,onReact:r.handleReaction,onDelete:r.handleDelete,onDeleteWithReplies:r.handleDeleteWithReplies},null,8,["comment","news-id","onReply","onReact","onDelete","onDeleteWithReplies"]),a.replies&&a.replies.length>0?(M(),O("div",jB,[(M(!0),O(Oe,null,ot(a.replies,c=>(M(),$n(i,{key:c.id,comment:c,"news-id":n.newsId,"is-reply":!0,onReply:r.handleReply,onReact:r.handleReaction,onDelete:r.handleDelete,onDeleteWithReplies:r.handleDeleteWithReplies},null,8,["comment","news-id","onReply","onReact","onDelete","onDeleteWithReplies"]))),128))])):fe("",!0)]))),128))])):fe("",!0)])):fe("",!0)])}const ly=pt(EB,[["render",UB],["__scopeId","data-v-b13b1439"]]),FB={class:"modern-news-feed"},BB={class:"news-header"},qB={class:"news-title-section"},HB={class:"title-row"},zB={key:0,class:"news-count"},WB={key:0,class:"filter-section"},GB={class:"filter-tabs"},KB=["onClick"],QB=["innerHTML"],YB={class:"filter-label"},ZB={key:1,class:"filter-count"},JB={key:1,class:"loading-container"},XB={key:2,class:"news-container"},eq={key:0,class:"news-media"},tq={key:0,class:"video-container"},nq=["src","poster","onLoadstart","onLoadeddata","onError","onClick"],rq={key:0,class:"video-loading"},sq={key:1,class:"play-overlay"},oq={key:1,class:"image-container"},iq=["src","alt"],aq={key:0,class:"featured-badge"},lq={class:"news-content"},cq={class:"news-meta"},uq={class:"news-time"},dq={class:"news-headline"},hq={class:"news-excerpt"},fq={class:"news-actions"},pq=["onClick"],gq={key:3,class:"empty-state"},mq={class:"dialog-header"},vq={class:"dialog-meta"},wq={class:"dialog-time"},yq={class:"dialog-content-scrollable"},_q={key:0,class:"dialog-media"},kq={key:0,class:"dialog-video-container"},bq=["src","poster"],Cq={key:0,class:"video-loading"},Eq={key:1,class:"dialog-image-container"},Sq=["src","alt"],Aq={class:"dialog-text"},Tq={class:"dialog-title"},Pq=["innerHTML"],Iq={key:1,class:"dialog-link-section"},Rq=["href"],Dq={class:"link-content"},xq={class:"link-text"},Lq={class:"link-title"},Mq={class:"link-url"},Nq={key:2,class:"dialog-comments-compact"},Oq={key:3,class:"dialog-comments-disabled"},$q=Object.assign({name:"ModernNewsFeed",components:{NewsComments:ly}},{__name:"ModernNewsFeed",props:{projectId:{type:String,required:!0},showAll:{type:Boolean,default:!1},backButton:{type:Boolean,default:!1}},emits:["newsCountUpdate","goBack"],setup(t,{emit:e}){const n=t,r=e,s=an(),o=Ct(),i=K(!1),a=K([]),c=K("all"),u=K(""),h=K(!1),f=K(null),p=K({}),g=K(null),C=K(new Map),T=K(!0),v=[{label:"All",value:"all",icon:"svg",iconSvg:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M3 6H21M3 12H21M3 18H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},{label:"General",value:"general",icon:"svg",iconSvg:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
      <path d="M19.4 15A1.65 1.65 0 0 0 21 13.4A1.65 1.65 0 0 0 19.4 12A1.65 1.65 0 0 0 18 13.4A1.65 1.65 0 0 0 19.4 15Z" stroke="currentColor" stroke-width="2"/>
      <path d="M4.6 9A1.65 1.65 0 0 1 6 7.4A1.65 1.65 0 0 1 4.6 6A1.65 1.65 0 0 1 3 7.4A1.65 1.65 0 0 1 4.6 9Z" stroke="currentColor" stroke-width="2"/>
    </svg>`},{label:"Announcements",value:"announcement",icon:"svg",iconSvg:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18 8A6 6 0 0 0 6 8C6 7 6 5 6 3A2 2 0 0 1 8 1H16A2 2 0 0 1 18 3C18 5 18 7 18 8Z" stroke="currentColor" stroke-width="2"/>
      <path d="M13.73 21A2 2 0 0 1 10.27 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>`},{label:"Events",value:"event",icon:"svg",iconSvg:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2"/>
      <line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2"/>
    </svg>`},{label:"Updates",value:"update",icon:"svg",iconSvg:`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2"/>
      <path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2"/>
    </svg>`}],_=G(()=>{let H=[];if(c.value==="all"?H=a.value:H=a.value.filter(ne=>ne.type===c.value),!n.showAll){const ne=Q=>{if(!Q)return null;if(Q.toDate&&typeof Q.toDate=="function")return Q.toDate();if(typeof Q=="object"&&typeof Q.seconds=="number")return new Date(Q.seconds*1e3);const we=new Date(Q);return isNaN(we.getTime())?null:we};return H.sort((Q,we)=>{if(Q.featured&&!we.featured)return-1;if(!Q.featured&&we.featured)return 1;const Ye=ne(Q.createdAt)||ne(Q.publishedAt)||ne(Q.updatedAt)||new Date(0);return(ne(we.createdAt)||ne(we.publishedAt)||ne(we.updatedAt)||new Date(0))-Ye}),H.slice(0,3)}const Y=ne=>{if(!ne)return null;if(ne.toDate&&typeof ne.toDate=="function")return ne.toDate();if(typeof ne=="object"&&typeof ne.seconds=="number")return new Date(ne.seconds*1e3);const Q=new Date(ne);return isNaN(Q.getTime())?null:Q};return H.slice().sort((ne,Q)=>{const we=Y(ne.createdAt)||Y(ne.publishedAt)||Y(ne.updatedAt)||new Date(0);return(Y(Q.createdAt)||Y(Q.publishedAt)||Y(Q.updatedAt)||new Date(0))-we})}),S=H=>H==="all"?a.value.length:a.value.filter(Y=>Y.type===H).length,x=H=>({general:"category-general",announcement:"category-announcement",event:"category-event",update:"category-update"})[H]||"category-default",R=H=>({general:"General",announcement:"Announcement",event:"Event",update:"Update"})[H]||"News",D=H=>{if(!H)return"Recently";try{const ne=(ye=>{if(!ye)return null;if(ye.toDate&&typeof ye.toDate=="function")return ye.toDate();if(typeof ye=="object"&&typeof ye.seconds=="number")return new Date(ye.seconds*1e3);if(ye instanceof Date)return ye;if(typeof ye=="number")return new Date(ye);if(typeof ye=="string"){const Ze=new Date(ye);if(!isNaN(Ze.getTime()))return Ze;let z=ye;z=z.replace(" at "," "),z=z.replace("UTC+","+").replace("UTC-","-"),z=z.replace(/([+-])(\d{1,2})(?!:)/,(te,de,ge)=>`${de}${ge.padStart(2,"0")}:00`);const W=new Date(z);return isNaN(W.getTime())?null:W}return null})(H);if(!ne||isNaN(ne.getTime()))return"Recently";const Q=new Date;let we=Math.floor((Q.getTime()-ne.getTime())/1e3);if(we<0&&(we=Math.abs(we)),we<60)return"Just now";if(we<3600)return`${Math.floor(we/60)}m ago`;if(we<86400)return`${Math.floor(we/3600)}h ago`;if(we<604800)return`${Math.floor(we/86400)}d ago`;if(we<2592e3)return`${Math.floor(we/604800)}w ago`;const Ye=Q.getFullYear(),lt=Q.getMonth(),De=ne.getFullYear(),se=ne.getMonth(),ke=(Ye-De)*12+(lt-se);if(ke===1)return"1 month ago";if(ke<12)return`${ke} months ago`;if(ke<24)return"1 year ago";const Ce=Math.floor(ke/12);return Ce===1?"1 year ago":`${Ce} years ago`}catch(Y){return console.warn("Error formatting date:",Y,"Timestamp:",H),"Recently"}},L=H=>{console.log("Media error, using default logo"),u.value?H.target.src=u.value:H.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRjNGNEY2Ii8+CjxwYXRoIGQ9Ik01MCAzMEM2Mi4xNTM4IDMwIDcyIDM5Ljg0NjIgNzIgNTJDNzIgNjQuMTUzOCA2Mi4xNTM4IDc0IDUwIDc0QzM3Ljg0NjIgNzQgMjggNjQuMTUzOCAyOCA1MkMyOCAzOS44NDYyIDM3Ljg0NjIgMzAgNTAgMzBaIiBmaWxsPSIjOUNBM0FGIi8+Cjwvc3ZnPgo="},b=H=>{p.value[H]=!0},A=H=>{p.value[H]=!1},y=H=>{p.value[H]=!1,console.log("Video error for item:",H)},P=H=>{E(H)},E=H=>{f.value=H,h.value=!0,document.body.style.overflow="hidden"},w=()=>{h.value=!1,f.value=null,document.body.style.overflow=""},k=()=>{s.push("/news")},$=()=>{r("goBack")};Ve(_,H=>{n.showAll&&r("newsCountUpdate",H.length)},{immediate:!0}),Ve(()=>o.selectedProject?.id,async(H,Y)=>{if(T.value){T.value=!1;return}H&&H!==Y&&(console.log("🔄 Project changed via store, refetching news:",{from:Y,to:H}),i.value=!0,c.value="all",a.value=[],await Z())},{immediate:!1}),Ve(()=>n.projectId,async(H,Y)=>{if(T.value){T.value=!1;return}H&&H!==Y&&(console.log("🔄 Project changed via prop, refetching news:",{from:Y,to:H}),i.value=!0,c.value="all",a.value=[],await Z())},{immediate:!1});const U=async()=>{try{const H=new Promise((Q,we)=>{setTimeout(()=>we(new Error("Logo loading timeout")),5e3)}),Y=(async()=>{let Q=Hs;if(!Q&&is){console.log("📱 Native platform detected, getting storage instance from app");const{getStorage:Ye}=await Se(async()=>{const{getStorage:De}=await Promise.resolve().then(()=>u8);return{getStorage:De}},void 0),{app:lt}=await Se(async()=>{const{app:De}=await Promise.resolve().then(()=>of);return{app:De}},void 0);Q=Ye(lt)}if(!Q)throw new Error("Firebase Storage not available");const we=th(Q,"logo.png");return await gv(we)})(),ne=await Promise.race([Y,H]);u.value=ne,console.log("✅ Default logo loaded from Firebase Storage:",u.value)}catch(H){console.log("Default logo not found in Firebase Storage, using local fallback:",H.message),u.value="/default-logo.png"}},Z=async()=>{const H=o.selectedProject?.id||n.projectId;if(console.log("🔍 ModernNewsFeed.fetchNews called with projectId:",H),console.log("🔍 Project store selectedProject:",o.selectedProject),console.log("🔍 Props projectId:",n.projectId),!H){console.log("❌ ModernNewsFeed: No project ID available, skipping news fetch");return}console.log("🚀 ModernNewsFeed: Starting news fetch for project:",H),i.value=!0;try{console.log("📦 ModernNewsFeed: Importing news service...");const{default:Y}=await Se(async()=>{const{default:Q}=await import("./newsService-BX3Pw3fO.js");return{default:Q}},[]);console.log("✅ ModernNewsFeed: News service imported successfully"),console.log("🚀 ModernNewsFeed: Calling newsService.fetchNews...");const ne=await Y.fetchNews(H,{publishedOnly:!0,limit:20,prioritizeFeatured:!n.showAll});console.log("✅ ModernNewsFeed: News service returned:",ne?.length||0,"items"),a.value=ne.map(Q=>{const we=Q.createdAt||Q.publishedAt||Q.updatedAt||null;return{id:Q.id,title:Q.title,message:Q.content,excerpt:Q.excerpt||Q.content?.substring(0,150)+"...",type:Q.category,category:Q.category,priority:"normal",featured:Q.featured||!1,interactionsEnabled:Q.interactionsEnabled!==!1,mediaUrl:Q.mediaUrl||null,mediaType:Q.mediaType||"image",thumbnailUrl:Q.thumbnailUrl||null,linkUrl:Q.linkUrl||null,linkTitle:Q.linkTitle||null,createdAt:we,updatedAt:Q.updatedAt,publishedAt:Q.publishedAt}})}catch(Y){console.error("❌ ModernNewsFeed: Error fetching news:",Y),console.error("❌ ModernNewsFeed: Error details:",{message:Y.message,stack:Y.stack,projectId:H}),a.value=[]}finally{i.value=!1,console.log("🏁 ModernNewsFeed: News fetch completed, loading set to false")}},ee=()=>{g.value&&g.value.disconnect(),g.value=new IntersectionObserver(H=>{H.forEach(Y=>{if(Y.isIntersecting){const ne=Y.target;ne.dataset.loaded!=="true"&&(ne.dataset.loaded="true",ne.load())}})},{rootMargin:"50px 0px",threshold:.1})},N=(H,Y)=>{H&&g.value&&(H.dataset.itemId=Y,C.value.set(Y,H),g.value.observe(H))};return ft(async()=>{console.log("🔍 ModernNewsFeed: onMounted called"),console.log("🔍 Project store selectedProject on mount:",o.selectedProject),console.log("🔍 Props projectId on mount:",n.projectId),U().catch(H=>{console.log("Logo loading failed, continuing with news fetch:",H.message)}),await Z(),ee()}),rr(()=>{g.value&&g.value.disconnect(),document.body.style.overflow=""}),(H,Y)=>(M(),O("div",FB,[l("div",BB,[l("div",qB,[l("div",HB,[t.backButton?(M(),O("button",{key:0,onClick:$,class:"back-btn"},[...Y[4]||(Y[4]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0)]),t.showAll?(M(),O("div",zB,B(_.value.length)+" "+B(_.value.length===1?"item":"items"),1)):fe("",!0)]),t.showAll?fe("",!0):(M(),O("button",{key:0,onClick:k,class:"view-all-btn"},[...Y[5]||(Y[5]=[l("span",null,"View All News",-1),l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))]),t.showAll?(M(),O("div",WB,[l("div",GB,[(M(),O(Oe,null,ot(v,ne=>l("button",{key:ne.value,onClick:Q=>c.value=ne.value,class:be(["filter-tab",{active:c.value===ne.value}])},[ne.iconSvg?(M(),O("span",{key:0,class:"filter-icon",innerHTML:ne.iconSvg},null,8,QB)):fe("",!0),l("span",YB,B(ne.label),1),S(ne.value)>0?(M(),O("span",ZB,B(S(ne.value)),1)):fe("",!0)],10,KB)),64))])])):fe("",!0),i.value?(M(),O("div",JB,[(M(),O(Oe,null,ot(3,ne=>l("div",{key:ne,class:"news-skeleton"},[...Y[6]||(Y[6]=[et('<div class="skeleton-image" data-v-7ea11ac6></div><div class="skeleton-content" data-v-7ea11ac6><div class="skeleton-title" data-v-7ea11ac6></div><div class="skeleton-text" data-v-7ea11ac6></div><div class="skeleton-meta" data-v-7ea11ac6></div></div>',2)])])),64))])):_.value.length>0?(M(),O("div",XB,[(M(!0),O(Oe,null,ot(_.value,ne=>(M(),O("div",{key:ne.id,class:be(["news-card",{featured:ne.featured,urgent:ne.priority==="urgent"}])},[ne.mediaUrl||ne.mediaType?(M(),O("div",eq,[ne.mediaType==="video"?(M(),O("div",tq,[l("video",{ref_for:!0,ref:Q=>N(Q,ne.id),src:ne.mediaUrl,poster:ne.thumbnailUrl,controls:"",class:"news-video",preload:"none",playsinline:"","webkit-playsinline":"",onLoadstart:Q=>b(ne.id),onLoadeddata:Q=>A(ne.id),onError:Q=>y(ne.id),onClick:Q=>P(ne)}," Your browser does not support the video tag. ",40,nq),p.value[ne.id]?(M(),O("div",rq,[...Y[7]||(Y[7]=[l("div",{class:"loading-spinner"},null,-1)])])):(M(),O("div",sq,[...Y[8]||(Y[8]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M8 5V19L19 12L8 5Z",fill:"white"})],-1)])]))])):(M(),O("div",oq,[l("img",{src:ne.mediaUrl||u.value,alt:ne.title,class:"news-image",onError:L,loading:"lazy"},null,40,iq),ne.featured?(M(),O("div",aq,"Featured")):fe("",!0)]))])):fe("",!0),l("div",lq,[l("div",cq,[l("span",{class:be(["news-category",x(ne.category)])},B(R(ne.category)),3),l("span",uq,B(D(ne.createdAt)),1)]),l("h3",dq,B(ne.title),1),l("p",hq,B(ne.excerpt||ne.message),1),l("div",fq,[l("button",{class:"read-more-btn",onClick:Q=>E(ne)},[...Y[9]||(Y[9]=[xe(" Read More ",-1),l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,pq)])])],2))),128))])):(M(),O("div",gq,[...Y[10]||(Y[10]=[et('<div class="empty-icon" data-v-7ea11ac6><svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7ea11ac6><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7ea11ac6></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7ea11ac6></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-7ea11ac6></path></svg></div><h3 data-v-7ea11ac6>No news yet</h3><p data-v-7ea11ac6>Check back later for updates from your community!</p>',3)])])),ze(Lo,{name:"dialog-slide"},{default:br(()=>[h.value&&f.value?(M(),O("div",{key:0,class:"dialog-overlay",onClick:w},[l("div",{class:"dialog-container",onClick:Y[3]||(Y[3]=ht(()=>{},["stop"]))},[l("div",mq,[l("div",vq,[l("span",{class:be(["dialog-category",x(f.value.category)])},B(R(f.value.category)),3),l("span",wq,B(D(f.value.createdAt)),1)]),l("button",{onClick:w,class:"dialog-close-btn"},[...Y[11]||(Y[11]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",yq,[f.value.mediaUrl||f.value.mediaType?(M(),O("div",_q,[f.value.mediaType==="video"?(M(),O("div",kq,[l("video",{src:f.value.mediaUrl,poster:f.value.thumbnailUrl,controls:"",class:"dialog-video",preload:"metadata",playsinline:"","webkit-playsinline":"",onLoadstart:Y[0]||(Y[0]=ne=>b(f.value.id)),onLoadeddata:Y[1]||(Y[1]=ne=>A(f.value.id)),onError:Y[2]||(Y[2]=ne=>y(f.value.id))}," Your browser does not support the video tag. ",40,bq),p.value[f.value.id]?(M(),O("div",Cq,[...Y[12]||(Y[12]=[l("div",{class:"loading-spinner"},null,-1)])])):fe("",!0)])):(M(),O("div",Eq,[l("img",{src:f.value.mediaUrl||u.value,alt:f.value.title,class:"dialog-image",onError:L,loading:"lazy"},null,40,Sq)]))])):fe("",!0),l("div",Aq,[l("h1",Tq,B(f.value.title),1),l("div",{class:"dialog-message",innerHTML:f.value.message||f.value.content},null,8,Pq)]),f.value.linkUrl&&f.value.linkUrl.trim()!==""?(M(),O("div",Iq,[l("a",{href:f.value.linkUrl,target:"_blank",rel:"noopener noreferrer",class:"external-link"},[l("div",Dq,[Y[13]||(Y[13]=l("div",{class:"link-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M10 13C10.4295 13.5741 10.9774 14.0491 11.6066 14.3929C12.2357 14.7367 12.9315 14.9411 13.6467 14.9923C14.3618 15.0435 15.0796 14.9403 15.7513 14.6897C16.4231 14.4392 17.0331 14.047 17.54 13.54L20.54 10.54C21.4508 9.59695 21.9548 8.33394 21.9434 7.02296C21.932 5.71198 21.4061 4.45791 20.4791 3.53087C19.5521 2.60383 18.298 2.07799 16.987 2.0666C15.676 2.0552 14.413 2.55918 13.47 3.47L11.75 5.18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 11C13.5705 10.4259 13.0226 9.95085 12.3934 9.60705C11.7643 9.26325 11.0685 9.05886 10.3533 9.00766C9.63816 8.95645 8.92037 9.05972 8.24861 9.31028C7.57685 9.56084 6.96684 9.95302 6.46 10.46L3.46 13.46C2.54918 14.403 2.04518 15.666 2.05659 16.977C2.068 18.288 2.59394 19.5421 3.52098 20.4691C4.44802 21.3962 5.70209 21.922 7.01307 21.9334C8.32405 21.9448 9.58706 21.4408 10.53 20.53L12.24 18.82",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",xq,[l("div",Lq,B(f.value.linkTitle||"Read More"),1),l("div",Mq,B(f.value.linkUrl),1)]),Y[14]||(Y[14]=l("div",{class:"link-arrow"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])],8,Rq)])):fe("",!0),f.value.interactionsEnabled?(M(),O("div",Nq,[ze(ly,{"news-id":f.value.id,"interactions-enabled":f.value.interactionsEnabled},null,8,["news-id","interactions-enabled"])])):(M(),O("div",Oq,[...Y[15]||(Y[15]=[l("div",{class:"interactions-disabled-message"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M6 6l12 12M6 18L18 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),l("p",null,"Interactions are disabled for this news item")],-1)])]))]),l("div",{class:"dialog-actions"},[l("button",{onClick:w,class:"dialog-action-btn"},[...Y[16]||(Y[16]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Got it ",-1)])])])])])):fe("",!0)]),_:1})]))}}),Vq=pt($q,[["__scopeId","data-v-7ea11ac6"]]),jq={key:0,class:"smart-device-widget"},Uq={class:"header-content"},Fq={class:"title-section"},Bq={class:"title-text"},qq={key:0},Hq={key:1},zq={class:"header-actions"},Wq={key:0,class:"not-connected-state"},Gq={key:1,class:"connected-state"},Kq={class:"device-grid"},Qq={key:0,class:"device-category"},Yq={class:"category-header"},Zq={class:"category-info"},Jq={class:"device-count"},Xq={class:"device-list"},eH={class:"device-content"},tH={class:"device-name"},nH=["onClick","disabled"],rH={key:1,class:"device-category"},sH={class:"category-header"},oH={class:"category-info"},iH={class:"device-count"},aH={class:"device-list"},lH={class:"device-content"},cH={class:"device-name"},uH=["onClick","disabled"],dH={key:2,class:"device-category"},hH={class:"category-header"},fH={class:"category-info"},pH={class:"device-count"},gH={class:"device-list"},mH={class:"device-content"},vH={class:"device-name"},wH=["onClick","disabled"],yH={key:3,class:"many-devices-message"},_H={class:"message-content"},kH={key:4,class:"no-devices"},bH={key:1,class:"single-device-display"},CH={class:"single-device-card"},EH={class:"device-content"},SH={class:"device-name"},AH=["disabled"],TH=Object.assign({name:"SmartDeviceWidget"},{__name:"SmartDeviceWidget",setup(t){const e=an(),n=af(),r=Zr(),s=Ct(),o=G(()=>{const E=s.selectedProject?.id;return E?n.devices.length>0&&n.currentProjectId===E:!1}),i=K(null),a=K(null),c=K(null),u=K(!1),h=G(()=>n.devices.length),f=G(()=>o.value&&v.value>0),p=G(()=>v.value>1),g=G(()=>{const E=n.selectedHomepageDevices;return!E||!E.lights?[]:n.devices.filter(k=>E.lights.includes(k.id)&&k.type==="light")}),C=G(()=>{const E=n.selectedHomepageDevices;return!E||!E.climate?[]:n.devices.filter(k=>E.climate.includes(k.id)&&(k.type==="thermostat"||k.type==="climate"||k.type==="fan"||k.type==="heater"||k.type==="ac"||k.type==="air_conditioner"||k.type==="air-conditioner"))}),T=G(()=>{const E=n.selectedHomepageDevices;return!E||!E.plugs?[]:n.devices.filter(k=>E.plugs.includes(k.id)&&(k.type==="plug"||k.type==="outlet"||k.type==="switch"||k.type==="sensor"||k.type==="camera"||k.type==="door"||k.type==="window"))}),v=G(()=>g.value.length+C.value.length+T.value.length),_=G(()=>v.value>6);Ve(()=>s.selectedProject,(E,w)=>{E&&E.id!==w?.id&&n.loadDeviceSettingsForProject(E.id)},{immediate:!0}),Ve(()=>n.selectedHomepageDevices,()=>{},{deep:!0}),Ve(()=>n.devices,()=>{},{deep:!0}),Ve(()=>n.currentProjectId,(E,w)=>{E&&E!==w&&n.loadDeviceSettingsForProject(E)},{immediate:!0});const S=()=>{e.push("/smart-devices")},x=()=>{e.push("/profile")},R=async E=>{i.value=E.id;try{const w=await n.toggleLight(E.roomId,E.id,!E.state);w.success?r.showSuccess(`Light ${E.state?"turned off":"turned on"}`):r.showError(w.error||"Failed to control light")}catch{r.showError("Failed to control light")}finally{i.value=null}},D=async E=>{a.value=E.id;try{const w=await n.setClimateState(E.roomId,E.id,!E.state);w.success?r.showSuccess(`Climate control ${E.state?"turned off":"turned on"}`):r.showError(w.error||"Failed to control climate")}catch{r.showError("Failed to control climate")}finally{a.value=null}},L=async E=>{c.value=E.id;try{const w=await n.toggleLight(E.roomId,E.id,!E.state);w.success?r.showSuccess(`Plug ${E.state?"turned off":"turned on"}`):r.showError(w.error||"Failed to control plug")}catch{r.showError("Failed to control plug")}finally{c.value=null}},b=()=>{p.value&&(u.value=!u.value)},A=()=>[...g.value,...C.value,...T.value][0]||null,y=async()=>{const E=A();E&&(g.value.includes(E)?await R(E):C.value.includes(E)?await D(E):T.value.includes(E)&&await L(E))},P=E=>i.value===E||a.value===E||c.value===E;return(E,w)=>f.value?(M(),O("div",jq,[l("div",{class:"widget-header",onClick:b},[l("div",Uq,[l("div",Fq,[w[2]||(w[2]=et('<div class="icon-wrapper" data-v-e65c2b91><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e65c2b91><path d="M9 21C9 21.5523 9.44772 22 10 22H14C14.5523 22 15 21.5523 15 21V20H9V21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M12 2V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path></svg></div>',1)),l("div",Bq,[w[1]||(w[1]=l("h3",null,"Smart Home",-1)),o.value?(M(),O("p",qq,B(v.value)+" devices selected",1)):(M(),O("p",Hq,"Connect to control your devices"))])]),l("div",zq,[o.value?(M(),O("button",{key:0,onClick:ht(S,["stop"]),class:"view-all-btn"},[...w[3]||(w[3]=[l("span",null,"View All",-1),l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0),p.value?(M(),O("button",{key:1,class:be(["accordion-toggle",{expanded:u.value}])},[...w[4]||(w[4]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)):fe("",!0)])])]),o.value?(M(),O("div",Gq,[p.value?(M(),O("div",{key:0,class:be(["accordion-content",{expanded:u.value}])},[l("div",Kq,[g.value.length>0?(M(),O("div",Qq,[l("div",Yq,[w[10]||(w[10]=et('<div class="category-icon lights" data-v-e65c2b91><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e65c2b91><path d="M9 21C9 21.5523 9.44772 22 10 22H14C14.5523 22 15 21.5523 15 21V20H9V21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M12 2V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M12 18V20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M4.22 4.22L5.64 5.64" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M18.36 18.36L19.78 19.78" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M1 12H3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M21 12H23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M4.22 19.78L5.64 18.36" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M18.36 5.64L19.78 4.22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path></svg></div>',1)),l("div",Zq,[w[9]||(w[9]=l("h4",null,"Lights",-1)),l("span",Jq,B(g.value.length),1)])]),l("div",Xq,[(M(!0),O(Oe,null,ot(g.value,k=>(M(),O("div",{key:k.id,class:"device-card"},[l("div",eH,[l("div",tH,B(k.name)+" - "+B(k.roomName),1),l("div",{class:be(["device-status",{on:k.state,off:!k.state}])},[w[11]||(w[11]=l("div",{class:"status-indicator"},null,-1)),l("span",null,B(k.state?"ON":"OFF"),1)],2)]),l("button",{onClick:$=>R(k),class:be(["device-toggle",{on:k.state,off:!k.state}]),disabled:i.value===k.id},[...w[12]||(w[12]=[l("div",{class:"toggle-slider"},null,-1)])],10,nH)]))),128))])])):fe("",!0),C.value.length>0?(M(),O("div",rH,[l("div",sH,[w[14]||(w[14]=et('<div class="category-icon climate" data-v-e65c2b91><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e65c2b91><path d="M14 4V10.38C14.71 10.11 15.5 10 16.31 10C19.74 10 22.5 12.76 22.5 16.19C22.5 19.62 19.74 22.38 16.31 22.38C14.39 22.38 12.7 21.34 11.73 19.8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M8 6H15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M8 10H12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M8 14H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M8 18H10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path></svg></div>',1)),l("div",oH,[w[13]||(w[13]=l("h4",null,"Climate",-1)),l("span",iH,B(C.value.length),1)])]),l("div",aH,[(M(!0),O(Oe,null,ot(C.value,k=>(M(),O("div",{key:k.id,class:"device-card"},[l("div",lH,[l("div",cH,B(k.name)+" - "+B(k.roomName),1),l("div",{class:be(["device-status",{on:k.state,off:!k.state}])},[w[15]||(w[15]=l("div",{class:"status-indicator"},null,-1)),l("span",null,B(k.state?`${k.temperature||22}°C`:"OFF"),1)],2)]),l("button",{onClick:$=>D(k),class:be(["device-toggle",{on:k.state,off:!k.state}]),disabled:a.value===k.id},[...w[16]||(w[16]=[l("div",{class:"toggle-slider"},null,-1)])],10,uH)]))),128))])])):fe("",!0),T.value.length>0?(M(),O("div",dH,[l("div",hH,[w[18]||(w[18]=l("div",{class:"category-icon plugs"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2V22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M17 5H9.5C8.11929 5 7 6.11929 7 7.5S8.11929 10 9.5 10H14.5C15.8807 10 17 11.1193 17 12.5S15.8807 15 14.5 15H7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",fH,[w[17]||(w[17]=l("h4",null,"Smart Plugs",-1)),l("span",pH,B(T.value.length),1)])]),l("div",gH,[(M(!0),O(Oe,null,ot(T.value,k=>(M(),O("div",{key:k.id,class:"device-card"},[l("div",mH,[l("div",vH,B(k.name)+" - "+B(k.roomName),1),l("div",{class:be(["device-status",{on:k.state,off:!k.state}])},[w[19]||(w[19]=l("div",{class:"status-indicator"},null,-1)),l("span",null,B(k.state?"ON":"OFF"),1)],2)]),l("button",{onClick:$=>L(k),class:be(["device-toggle",{on:k.state,off:!k.state}]),disabled:c.value===k.id},[...w[20]||(w[20]=[l("div",{class:"toggle-slider"},null,-1)])],10,wH)]))),128))])])):fe("",!0),_.value?(M(),O("div",yH,[l("div",_H,[w[21]||(w[21]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M13 2L3 14H12L11 22L21 10H12L13 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,"Showing "+B(v.value)+" selected devices",1)]),w[22]||(w[22]=l("p",{class:"message-subtitle"},'Use "View All" to see all your devices',-1))])):fe("",!0),h.value===0?(M(),O("div",kH,[...w[23]||(w[23]=[et('<div class="no-devices-icon" data-v-e65c2b91><svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-e65c2b91><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-e65c2b91></path></svg></div><h4 data-v-e65c2b91>No Devices Found</h4><p data-v-e65c2b91>Add devices to your Smart Mirror to control them here</p>',3)])])):fe("",!0)])],2)):!p.value&&v.value===1?(M(),O("div",bH,[l("div",CH,[l("div",EH,[l("div",SH,B(A()?.name)+" - "+B(A()?.roomName),1),l("div",{class:be(["device-status",{on:A()?.state,off:!A()?.state}])},[w[24]||(w[24]=l("div",{class:"status-indicator"},null,-1)),l("span",null,B(A()?.state?"ON":"OFF"),1)],2)]),l("button",{onClick:w[0]||(w[0]=k=>y()),class:be(["device-toggle",{on:A()?.state,off:!A()?.state}]),disabled:P(A()?.id)},[...w[25]||(w[25]=[l("div",{class:"toggle-slider"},null,-1)])],10,AH)])])):fe("",!0)])):(M(),O("div",Wq,[l("div",{class:"not-connected-content"},[w[6]||(w[6]=l("div",{class:"not-connected-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M9 22V12H15V22",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),w[7]||(w[7]=l("h4",null,"Connect Smart Home",-1)),w[8]||(w[8]=l("p",null,"Link your smart home devices for seamless control",-1)),l("button",{onClick:x,class:"connect-btn"},[...w[5]||(w[5]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M15 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H15M10 17L15 12L10 7M15 12H3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Connect Now ",-1)])])])]))])):fe("",!0)}}),PH=pt(TH,[["__scopeId","data-v-e65c2b91"]]);class IH{constructor(){}async getAds(e,n=!0){return Xe.timeOperation("getAds",async()=>{if(n){const r=We.getCollectionData(`projects/${e}/ads`,{active:!0});if(r)return console.log(`🚀 FastCollection: Using cached ads for project ${e}`),r}try{console.log(`🚀 FastCollection: Fetching real ads for project ${e}`);const r=await Ee.getDocs(`projects/${e}/ads`,{timeoutMs:6e3});if(r.empty){console.log(`🚀 FastCollection: No ads found for project ${e}`);const o=[];return We.setCollectionData(`projects/${e}/ads`,{active:!0},o),o}const s=r.docs.map(o=>({id:o.id,projectId:e,...o.data()}));return We.setCollectionData(`projects/${e}/ads`,{active:!0},s),console.log(`🚀 FastCollection: Successfully fetched ${s.length} ads for project ${e}`),s}catch(r){console.warn(`🚀 FastCollection: Error fetching ads for project ${e}:`,r.message);const s=[];return We.setCollectionData(`projects/${e}/ads`,{active:!0},s),s}})}async getNews(e,n={},r=!0){if(r){const s=We.getCollectionData(`projects/${e}/news`,n);if(s)return console.log(`🚀 FastCollection: Using cached news for project ${e} (${s.length} items)`),s.length>0&&console.log("🔍 Cached news sample:",{id:s[0].id,title:s[0].title,createdAt:s[0].createdAt,createdAtType:typeof s[0].createdAt,hasToDate:s[0].createdAt&&typeof s[0].createdAt.toDate=="function"}),s}try{console.log(`🚀 FastCollection: Fetching fresh news for project ${e} (cache disabled: ${!r})`);const s=await Ee.getDocs(`projects/${e}/news`,{timeoutMs:6e3});if(console.log("🚀 FastCollection: Snapshot result:",{empty:s.empty,size:s.size,docsCount:s.docs?s.docs.length:0}),s.empty){console.log(`🚀 FastCollection: No news found for project ${e} - collection is empty`),console.log("🔍 FastCollection: This could mean:"),console.log("  1. The collection doesn't exist"),console.log("  2. The collection exists but has no documents"),console.log("  3. Permission issues (though we should see an error)"),console.log("  4. The collection path is incorrect");const i=[];return We.setCollectionData(`projects/${e}/news`,n,i),i}let o=s.docs.map(i=>{const a=i.data();return console.log("🔍 Raw Firestore doc data for news:",{id:i.id,createdAt:a.createdAt,createdAtType:typeof a.createdAt,hasToDate:a.createdAt&&typeof a.createdAt.toDate=="function",updatedAt:a.updatedAt,updatedAtType:typeof a.updatedAt,allFields:Object.keys(a)}),{id:i.id,projectId:e,...a}});return n.publishedOnly&&(o=o.filter(i=>i.isPublished!==!1)),n.featuredOnly&&(o=o.filter(i=>i.featured===!0)),o.sort((i,a)=>{const c=i.createdAt?.toDate?i.createdAt.toDate():new Date(i.createdAt);return(a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt))-c}),n.limit&&(o=o.slice(0,n.limit)),We.setCollectionData(`projects/${e}/news`,n,o),console.log(`🚀 FastCollection: Successfully fetched ${o.length} news items for project ${e}`),o}catch(s){console.warn(`🚀 FastCollection: Error fetching news for project ${e}:`,s.message);const o=[];return We.setCollectionData(`projects/${e}/news`,n,o),o}}async getServiceCategories(e,n=!0,r=!0){if(r){const s=We.getCollectionData(`projects/${e}/serviceCategories`,{availableOnly:n});if(s)return console.log(`🚀 FastCollection: Using cached service categories for project ${e}`),s}try{console.log(`🚀 FastCollection: Fetching real service categories for project ${e}`);const s=await Ee.getDocs(`projects/${e}/serviceCategories`,{timeoutMs:6e3});if(s.empty){console.log(`🚀 FastCollection: No service categories found for project ${e}`);const i=[];return We.setCollectionData(`projects/${e}/serviceCategories`,{availableOnly:n},i),i}let o=s.docs.map(i=>({id:i.id,projectId:e,...i.data()}));return n&&(o=o.filter(i=>i.status==="available")),o.sort((i,a)=>(i.name||"").localeCompare(a.name||"")),We.setCollectionData(`projects/${e}/serviceCategories`,{availableOnly:n},o),console.log(`🚀 FastCollection: Successfully fetched ${o.length} service categories for project ${e}`),o}catch(s){console.warn(`🚀 FastCollection: Error fetching service categories for project ${e}:`,s.message);const o=[];return We.setCollectionData(`projects/${e}/serviceCategories`,{availableOnly:n},o),o}}async getServicesByCategory(e,n,r=!0,s=!0){if(s){const o=We.getCollectionData(`projects/${e}/serviceCategories/${n}/services`,{availableOnly:r});if(o)return console.log(`🚀 FastCollection: Using cached services for category ${n}`),o}try{console.log(`🚀 FastCollection: Fetching real services for category ${n}`);const o=await Ee.getDocs(`projects/${e}/serviceCategories/${n}/services`,{timeoutMs:6e3});if(o.empty){console.log(`🚀 FastCollection: No services found for category ${n}`);const a=[];return We.setCollectionData(`projects/${e}/serviceCategories/${n}/services`,{availableOnly:r},a),a}let i=o.docs.map(a=>({id:a.id,categoryId:n,projectId:e,...a.data()}));return r&&(i=i.filter(a=>a.status==="available")),i.sort((a,c)=>(a.name||"").localeCompare(c.name||"")),We.setCollectionData(`projects/${e}/serviceCategories/${n}/services`,{availableOnly:r},i),console.log(`🚀 FastCollection: Successfully fetched ${i.length} services for category ${n}`),i}catch(o){console.warn(`🚀 FastCollection: Error fetching services for category ${n}:`,o.message);const i=[];return We.setCollectionData(`projects/${e}/serviceCategories/${n}/services`,{availableOnly:r},i),i}}clearProjectCache(e){We.invalidateProject(e),console.log(`🚀 FastCollection: Cleared cache for project ${e}`)}getCacheStats(){return We.getStats()}async getRequestCategories(e,n=!0,r=!0){if(r){const s=We.getCollectionData(`projects/${e}/requestCategories`,{availableOnly:n});if(s)return console.log(`🚀 FastCollection: Using cached request categories for project ${e}`),s}try{console.log(`🚀 FastCollection: Fetching real request categories for project ${e}`);const s=await Ee.getDocs(`projects/${e}/requestCategories`,{timeoutMs:6e3});if(s.empty){console.log(`🚀 FastCollection: No request categories found for project ${e}`);const i=[];return We.setCollectionData(`projects/${e}/requestCategories`,{availableOnly:n},i),i}let o=s.docs.map(i=>({id:i.id,projectId:e,...i.data()}));return n&&(o=o.filter(i=>i.status==="available")),o.sort((i,a)=>(i.englishTitle||"").localeCompare(a.englishTitle||"")),We.setCollectionData(`projects/${e}/requestCategories`,{availableOnly:n},o),console.log(`🚀 FastCollection: Successfully fetched ${o.length} request categories for project ${e}`),o}catch(s){return console.warn(`🚀 FastCollection: Error fetching request categories for project ${e}:`,s),Ke.handleFirestoreError(s,"getRequestCategories"),[]}}async getRequestCategoriesByCategory(e,n,r=!0,s=!0){if(s){const o=We.getCollectionData(`projects/${e}/requestCategories/${n}/requestCategories`,{availableOnly:r});if(o)return console.log(`🚀 FastCollection: Using cached request categories for category ${n}`),o}try{console.log(`🚀 FastCollection: Fetching real request categories for category ${n}`);const o=await Ee.getDocs(`projects/${e}/requestCategories/${n}/requestCategories`,{timeoutMs:6e3});if(o.empty){console.log(`🚀 FastCollection: No request categories found for category ${n}`);const a=[];return We.setCollectionData(`projects/${e}/requestCategories/${n}/requestCategories`,{availableOnly:r},a),a}let i=o.docs.map(a=>({id:a.id,categoryId:n,projectId:e,...a.data()}));return r&&(i=i.filter(a=>a.status==="available")),i.sort((a,c)=>(a.englishTitle||"").localeCompare(c.englishTitle||"")),We.setCollectionData(`projects/${e}/requestCategories/${n}/requestCategories`,{availableOnly:r},i),console.log(`🚀 FastCollection: Successfully fetched ${i.length} request categories for category ${n}`),i}catch(o){return console.warn(`🚀 FastCollection: Error fetching request categories for category ${n}:`,o),Ke.handleFirestoreError(o,"getRequestCategoriesByCategory"),[]}}clearAllCaches(){console.log("🗑️ FastCollection: Clearing all caches"),We.clear()}}const RH=new IH,DH=async t=>{try{console.log("🚀 AdsService: Getting active ads for project:",t);const n=(await RH.getAds(t)).filter(r=>r.isActive).sort((r,s)=>r.order-s.order);return console.log("🚀 AdsService: Retrieved active ads:",n.length),n}catch(e){throw console.error("Error fetching active ads:",e),e}},xH={key:0,class:"ads-carousel"},LH=["onClick"],MH={class:"ad-image-container"},NH=["src"],OH={key:0,class:"click-indicator"},$H={key:0,class:"carousel-dots"},VH=["onClick","aria-label"],jH={key:3,class:"progress-bar"},UH={__name:"AdsCarousel",props:{autoPlay:{type:Boolean,default:!0},autoPlayInterval:{type:Number,default:5e3},showOverlay:{type:Boolean,default:!0}},setup(t){const e=t,n=Ct(),r=K([]),s=K(0),o=K(null),i=K(null),a=K(!1),c=K(!0),u=async()=>{try{c.value=!0;const _=n.selectedProject?.id;if(console.log("AdsCarousel: Loading ads for project:",_),!_){console.warn("AdsCarousel: No project selected for ads");return}const S=await DH(_);console.log("AdsCarousel: Loaded ads:",S),r.value=S,s.value>=S.length&&(s.value=0),S.length>1?(v(),T()):v()}catch(_){console.error("AdsCarousel: Error loading ads:",_)}finally{c.value=!1}},h=()=>{r.value.length!==0&&(s.value=(s.value+1)%r.value.length)},f=()=>{r.value.length!==0&&(s.value=s.value===0?r.value.length-1:s.value-1)},p=_=>{s.value=_},g=_=>{_.linkUrl&&window.open(_.linkUrl,"_blank")},C=_=>{console.error("Error loading ad image:",_),_.target.style.display="none"},T=()=>{if(!e.autoPlay||r.value.length<=1){console.log("AdsCarousel: Auto-play not started - autoPlay:",e.autoPlay,"ads count:",r.value.length);return}console.log("AdsCarousel: Starting auto-play with interval:",e.autoPlayInterval),i.value=setInterval(()=>{a.value||h()},e.autoPlayInterval)},v=()=>{i.value&&(console.log("AdsCarousel: Stopping auto-play"),clearInterval(i.value),i.value=null)};return Ve(()=>n.selectedProject,()=>{u()},{immediate:!0}),Ve(()=>e.autoPlay,_=>{_?T():v()}),ft(()=>{u(),T(),o.value&&(o.value.addEventListener("mouseenter",()=>{a.value=!0}),o.value.addEventListener("mouseleave",()=>{a.value=!1}))}),rr(()=>{v()}),(_,S)=>r.value.length>0?(M(),O("div",xH,[l("div",{class:"carousel-container",ref_key:"carouselContainer",ref:o},[l("div",{class:"carousel-track",style:Ei({transform:`translateX(-${s.value*100}%)`})},[(M(!0),O(Oe,null,ot(r.value,x=>(M(),O("div",{key:x.id,class:be(["carousel-slide",{"has-link":x.linkUrl}]),onClick:R=>g(x)},[l("div",MH,[l("img",{src:x.imageUrl,alt:"Advertisement",class:"ad-image",onError:C},null,40,NH),S[1]||(S[1]=l("div",{class:"ad-gradient-overlay"},null,-1)),x.linkUrl?(M(),O("div",OH,[...S[0]||(S[0]=[l("div",{class:"click-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("span",null,"Tap to view",-1)])])):fe("",!0)])],10,LH))),128))],4),r.value.length>1?(M(),O("div",$H,[(M(!0),O(Oe,null,ot(r.value,(x,R)=>(M(),O("button",{key:R,class:be(["dot",{active:R===s.value}]),onClick:D=>p(R),"aria-label":`Go to slide ${R+1}`},null,10,VH))),128))])):fe("",!0),r.value.length>1?(M(),O("button",{key:1,class:"carousel-nav prev",onClick:f,"aria-label":"Previous ad"},[...S[2]||(S[2]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0),r.value.length>1?(M(),O("button",{key:2,class:"carousel-nav next",onClick:h,"aria-label":"Next ad"},[...S[3]||(S[3]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0),r.value.length>1?(M(),O("div",jH,[l("div",{class:"progress-fill",style:Ei({width:`${(s.value+1)/r.value.length*100}%`,transition:"width 0.3s ease"})},null,4)])):fe("",!0)],512)])):fe("",!0)}},FH=pt(UH,[["__scopeId","data-v-c960b51f"]]),BH={class:"home-page"},qH={class:"hero-section"},HH={class:"hero-content"},zH={class:"hero-text"},WH={class:"hero-title"},GH={class:"hero-subtitle"},KH={class:"quick-actions-section"},QH={class:"section-title"},YH={class:"actions-scroll"},ZH={class:"action-content"},JH={class:"action-content"},XH={class:"action-content"},ez={class:"action-content"},tz={class:"action-content"},nz={class:"action-content"},rz={class:"stats-overview"},sz={class:"stat-content"},oz={class:"stat-number"},iz={class:"content-grid"},az={class:"news-section"},lz={class:"bookings-section"},cz={class:"modal-header"},uz={class:"modal-body"},dz={key:0,class:"projects-list"},hz=["onClick"],fz={class:"project-option-info"},pz={class:"project-option-name"},gz={class:"project-option-location"},mz={class:"project-option-details"},vz={class:"project-option-unit"},wz={class:"project-option-role"},yz={class:"project-option-status"},_z={key:0,class:"current-badge"},kz={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},bz={key:1,class:"no-projects"},Cz=Object.assign({name:"HomePage"},{__name:"Home",setup(t){const e=an(),n=za(),r=Ct(),s=G4(),o=af(),i=K(null),a=K(!1),c=K([]),u=K(!1),h=G(()=>r.userProjects),f=G(()=>r.selectedProject?.id),p=G(()=>f.value?o.isProjectConnected(f.value):!1),g=G(()=>{if(!s.userBookings||s.userBookings.length===0)return 0;try{const E=new Date;return E.setHours(0,0,0,0),s.userBookings.filter(k=>{if(k.type==="court"&&k.date){const $=new Date(k.date);return $.setHours(0,0,0,0),$>=E&&k.status!=="cancelled"}return!1}).length}catch(E){return console.error("Error calculating upcoming events:",E),0}}),C=G(()=>!s.userBookings),T=async()=>{if(console.log("🔍 Fetching notifications..."),console.log("📋 Current Project ID:",f.value),console.log("📋 Selected Project:",r.selectedProject),!f.value){console.log("❌ No project ID available, skipping notification fetch");return}try{u.value=!0,console.log("🔄 Calling notificationService.fetchNotifications with:",f.value,{activeOnly:!0});const E=await oa.fetchNotifications(f.value,{activeOnly:!0});console.log("✅ Fetched notifications:",E),c.value=E}catch(E){console.error("❌ Error fetching notifications:",E),c.value=[{id:"fallback-1",title:"Welcome to PRE Group!",message:"We're excited to have you as part of our community.",type:"announcement",priority:"normal",createdAt:new Date(Date.now()-2400*1e3),isActive:!0},{id:"fallback-2",title:"Community Guidelines Updated",message:"New community guidelines have been updated. Please review the latest policies.",type:"announcement",priority:"normal",createdAt:new Date(Date.now()-7200*1e3),isActive:!0},{id:"fallback-3",title:"Emergency Maintenance",message:"Emergency maintenance scheduled for tomorrow. Please be prepared for temporary service interruption.",type:"emergency",priority:"high",createdAt:new Date(Date.now()-1440*60*1e3),isActive:!0}]}finally{u.value=!1}},v=()=>{e.push("/access")},_=()=>{e.push("/services")},S=()=>{e.push("/my-bookings")},x=()=>{e.push("/calendar")},R=()=>{e.push("/stores-shopping?tab=orders")},D=()=>{e.push("/stores-shopping?tab=stores")},L=()=>{e.push("/smart-devices")},b=()=>{e.push("/news")},A=async E=>{try{r.setLoading(!0),r.selectProject(E),await o.switchToProject(E.id),o.loadDeviceSettingsForProject(E.id),i.value?.uid&&await s.fetchUserBookings(i.value.uid,E.id),a.value=!1,r.setLoading(!1)}catch(w){console.error("Error switching project:",w),r.setLoading(!1)}},y=()=>{a.value=!1,e.push("/project-selection")},P=async()=>{if(!(!await yt.getCurrentUser()||!r.selectedProject))try{r.selectedProject?.id&&await o.switchToProject(r.selectedProject.id)}catch(w){console.error("Error switching to selected project:",w)}};return ft(async()=>{try{const w=await yt.getCurrentUser();if(w){if(i.value=w,!r.hasSelectedProject&&(r.loadSelectedProject(),!r.hasSelectedProject)){e.push("/project-selection");return}try{r.selectedProject?.id&&(await s.fetchUserBookings(w.uid,r.selectedProject.id),console.log("User bookings fetched:",s.userBookings))}catch(k){console.error("Error fetching user bookings:",k)}try{await o.initializeApp(),await P()}catch(k){console.error("Error initializing Smart Mirror app:",k)}await T()}else console.log("No authenticated user found in Home component, redirecting to signin"),i.value=null,e.push("/signin")}catch(w){console.error("Error getting current user in Home component:",w),i.value=null,e.push("/signin")}const E=async w=>{const{newProject:k}=w.detail;try{o.loadDeviceSettingsForProject(k.id),i.value?.uid&&k?.id&&await s.fetchUserBookings(i.value.uid,k.id),await T()}catch($){console.error("Error refreshing data for new project:",$)}};window.addEventListener("projectChanged",E),rr(()=>{window.removeEventListener("projectChanged",E)})}),Ve(()=>n.path,async()=>{n.path==="/home"&&await yt.getCurrentUser()&&await P()}),Qg(async()=>{await yt.getCurrentUser()&&await P()}),(E,w)=>(M(),O("div",BH,[l("div",qH,[l("div",HH,[l("div",zH,[l("h1",WH,B(E.$t("welcomeBack")),1),l("p",GH,B(E.$t("communityHappening")),1)])])]),ze(FH),l("div",KH,[l("h2",QH,B(E.$t("quickActions")),1),l("div",YH,[l("button",{class:"action-card",onClick:v},[w[3]||(w[3]=et('<div class="action-icon" data-v-986ca6ee><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-986ca6ee><rect x="3" y="3" width="18" height="18" stroke="currentColor" stroke-width="1.5" fill="none" data-v-986ca6ee></rect><rect x="4" y="4" width="6" height="6" stroke="currentColor" stroke-width="1" fill="none" data-v-986ca6ee></rect><rect x="5" y="5" width="4" height="4" fill="currentColor" data-v-986ca6ee></rect><rect x="6" y="6" width="2" height="2" fill="white" data-v-986ca6ee></rect><rect x="14" y="4" width="6" height="6" stroke="currentColor" stroke-width="1" fill="none" data-v-986ca6ee></rect><rect x="15" y="5" width="4" height="4" fill="currentColor" data-v-986ca6ee></rect><rect x="16" y="6" width="2" height="2" fill="white" data-v-986ca6ee></rect><rect x="4" y="14" width="6" height="6" stroke="currentColor" stroke-width="1" fill="none" data-v-986ca6ee></rect><rect x="5" y="15" width="4" height="4" fill="currentColor" data-v-986ca6ee></rect><rect x="6" y="16" width="2" height="2" fill="white" data-v-986ca6ee></rect><rect x="11" y="5" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="12" y="6" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="11" y="7" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="13" y="7" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="5" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="7" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="9" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="6" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="8" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="11" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="13" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="15" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="17" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="19" y="11" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="16" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="18" y="12" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="11" y="15" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="13" y="15" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="15" y="15" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="17" y="15" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="19" y="15" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="12" y="16" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="14" y="16" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect><rect x="18" y="16" width="1" height="1" fill="currentColor" data-v-986ca6ee></rect></svg></div>',1)),l("div",ZH,[l("h3",null,B(E.$t("gateAccess")),1)])]),l("button",{class:"action-card",onClick:_},[w[4]||(w[4]=l("div",{class:"action-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14.7 6.3A1 1 0 0 0 14 7H9.5L8.5 8L9.5 9H14A1 1 0 0 0 14.7 9.7L18.3 13.3A1 1 0 0 0 19.7 11.7L16.1 8.1L14.7 6.3Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M9.3 17.7A1 1 0 0 0 10 17H14.5L15.5 16L14.5 15H10A1 1 0 0 0 9.3 14.3L5.7 10.7A1 1 0 0 0 4.3 12.3L7.9 15.9L9.3 17.7Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",JH,[l("h3",null,B(E.$t("services")),1)])]),l("button",{class:"action-card",onClick:S},[w[5]||(w[5]=l("div",{class:"action-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2"})])],-1)),l("div",XH,[l("h3",null,B(E.$t("bookingsShortcut")),1)])]),l("button",{class:"action-card",onClick:L},[w[6]||(w[6]=et('<div class="action-icon" data-v-986ca6ee><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-986ca6ee><path d="M9 21C9 21.5523 9.44772 22 10 22H14C14.5523 22 15 21.5523 15 21V20H9V21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><path d="M12 2V4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><path d="M12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path></svg></div>',1)),l("div",ez,[l("h3",null,B(E.$t("smartDevices")),1)])]),l("button",{class:"action-card",onClick:x},[w[7]||(w[7]=et('<div class="action-icon" data-v-986ca6ee><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-986ca6ee><path d="M8 2V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><path d="M16 2V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" data-v-986ca6ee></rect><path d="M3 10H21" stroke="currentColor" stroke-width="2" data-v-986ca6ee></path></svg></div>',1)),l("div",tz,[l("h3",null,B(E.$t("calendar")),1)])]),l("button",{class:"action-card",onClick:R},[w[8]||(w[8]=l("div",{class:"action-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",nz,[l("h3",null,B(E.$t("myOrders")),1)])]),l("button",{class:"action-card",onClick:D},[...w[9]||(w[9]=[l("div",{class:"action-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("div",{class:"action-content"},[l("h3",null,"Stores")],-1)])]),l("button",{class:"action-card",onClick:b},[...w[10]||(w[10]=[et('<div class="action-icon" data-v-986ca6ee><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-986ca6ee><path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="2" data-v-986ca6ee></path><path d="M22 6L12 13L2 6" stroke="currentColor" stroke-width="2" data-v-986ca6ee></path></svg></div><div class="action-content" data-v-986ca6ee><h3 data-v-986ca6ee>News</h3></div>',2)])])])]),l("div",rz,[l("div",{class:be(["stat-card",{loading:C.value}]),onClick:x},[w[12]||(w[12]=et('<div class="stat-icon" data-v-986ca6ee><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-986ca6ee><path d="M8 2V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><path d="M16 2V5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-986ca6ee></path><rect x="3" y="4" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2" data-v-986ca6ee></rect><path d="M3 10H21" stroke="currentColor" stroke-width="2" data-v-986ca6ee></path></svg></div>',1)),l("div",sz,[l("div",oz,B(C.value?"...":g.value),1),w[11]||(w[11]=l("div",{class:"stat-label"},"Upcoming Events",-1))])],2)]),p.value?(M(),$n(PH,{key:f.value})):fe("",!0),l("div",iz,[l("div",az,[ze(Vq,{"project-id":f.value},null,8,["project-id"])]),l("div",lz,[ze(YF)])]),a.value?(M(),O("div",{key:1,class:"modal-overlay",onClick:w[2]||(w[2]=k=>a.value=!1)},[l("div",{class:"modal-content project-switcher-modal",onClick:w[1]||(w[1]=ht(()=>{},["stop"]))},[l("div",cz,[w[14]||(w[14]=l("h3",null,"Switch Project",-1)),l("button",{onClick:w[0]||(w[0]=k=>a.value=!1),class:"close-btn"},[...w[13]||(w[13]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",uz,[h.value.length>0?(M(),O("div",dz,[(M(!0),O(Oe,null,ot(h.value,k=>(M(),O("div",{key:k.id,class:be(["project-option",{current:k.id===f.value}]),onClick:$=>A(k)},[l("div",fz,[l("h4",pz,B(k.name||"Unnamed Project"),1),l("p",gz,B(k.location||"Location not set"),1),l("div",mz,[l("span",vz,"Unit "+B(k.userUnit||"N/A"),1),l("span",wz,B(k.userRole||"Member"),1)])]),l("div",yz,[k.id===f.value?(M(),O("span",_z,"Current")):(M(),O("svg",kz,[...w[15]||(w[15]=[l("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))])],10,hz))),128))])):(M(),O("div",bz,[w[16]||(w[16]=l("p",null,"No projects available",-1)),l("button",{onClick:y,class:"go-to-selection-btn"}," Go to Project Selection ")]))]),l("div",{class:"modal-footer"},[l("button",{onClick:y,class:"secondary-btn"},[...w[17]||(w[17]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Manage Projects ",-1)])])])])])):fe("",!0)]))}}),K4=pt(Cz,[["__scopeId","data-v-986ca6ee"]]),Ez=Object.freeze(Object.defineProperty({__proto__:null,default:K4},Symbol.toStringTag,{value:"Module"})),Sz={isoName:"ar",nativeName:"العربية",rtl:!0,label:{clear:"مسح",ok:"حسناً",cancel:"إلغاء",close:"إغلاق",set:"ضبط",select:"تحديد",reset:"إعادة ضبط",remove:"حذف",update:"تحديث",create:"إنشاء",search:"بحث",filter:"ترشيح",refresh:"تحديث",expand:t=>t?`"${t} توسيع`:"وسعت",collapse:t=>t?`"${t}" تصغير`:"انهيار"},date:{days:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),daysShort:"أحد_إثن_ثلا_أرب_خمي_جمع_سبت".split("_"),months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"ينا_فبر_مار_أبر_ماي_يون_يول_أغس_سبت_أكت_نوف_ديس".split("_"),firstDayOfWeek:6,format24h:!1,pluralDay:"أيام",prevMonth:"الشهر السابق",nextMonth:"الشهر القادم",prevYear:"السنة السابقة",nextYear:"السنة القادمة",today:"اليوم",prevRangeYears:t=>`السابق ${t} سنوات`,nextRangeYears:t=>`التالي ${t} سنوات`},table:{noData:"لا توجد بيانات",noResults:"لا توجد نتائج",loading:"جارٍ التحميل...",selectedRecords:t=>t===0?"لا توجد مُدخَلات محدّدة.":t===1?"مُدخَلة واحدة محدّدة.":t===2?"مُدخَلتان محدّدتان.":"عدد المُدخَلات المحدّدة "+t+".",recordsPerPage:"عدد المُدخَلات في كل صفحة:",allRows:"الكل",pagination:(t,e,n)=>t+"-"+e+" من "+n,columns:"أعمدة"},pagination:{first:"الصفحة الأولى",prev:"الصفحة السابقة",next:"الصفحة التالية",last:"الصفحة الأخيرة"},editor:{url:"رابط",bold:"عريض",italic:"مائل",strikethrough:"مشطوب",underline:"مسطّر",unorderedList:"قائمة غير مرتبة",orderedList:"قائمة مرتبة",subscript:"منخفض",superscript:"مرتفع",hyperlink:"رابط",toggleFullscreen:"تفعيل أو إيقاف العرض في كامل الشاشة",quote:"اقتباس",left:"انتظام لجهة اليسار",center:"توسيط",right:"انتظام لجهة اليمين",justify:"انتظام بالتساوي",print:"طباعة",outdent:"تقليل مسافة البداية",indent:"زيادة مسافة البداية",removeFormat:"إزالة التنسيق",formatting:"تنسيق",fontSize:"حجم الخط",align:"انتظام",hr:"إضافة خط أفقي",undo:"تراجع",redo:"إعادة",heading1:"عنوان 1",heading2:"عنوان 2",heading3:"عنوان 3",heading4:"عنوان 4",heading5:"عنوان 5",heading6:"عنوان 6",paragraph:"فقرة",code:"تعليمات برمجية",size1:"صغير جداً",size2:"صغير",size3:"عادي",size4:"فوق المتوسط",size5:"كبير",size6:"كبير جداً",size7:"الأقصى",defaultFont:"الخط الإفتراضي",viewSource:"عرض المصدر"},tree:{noNodes:"لا توجد عُقَد",noResults:"لا توجد نتائج"}};let Rg=null;const mte=t=>{Rg=t},Az=Yr("settings",()=>{const t=()=>typeof window<"u"&&localStorage&&localStorage.getItem("app-language")||"en-US",e=()=>typeof window<"u"&&localStorage&&localStorage.getItem("app-theme")||"light",n=K(t()),r=K(e()),s=K(n.value==="ar-SA"),o=G(()=>[{value:"en-US",label:"English",flag:"🇺🇸"},{value:"ar-SA",label:"العربية",flag:"🇸🇦"}]),i=G(()=>[{value:"light",label:"Light Mode",icon:"☀️"},{value:"dark",label:"Dark Mode",icon:"🌙"}]),a=(p,g=!1)=>{if(n.value===p&&!g){console.log("⏭️ Language already set to:",p);return}console.log("🌍 Changing language from",n.value,"to",p),n.value=p,s.value=p==="ar-SA",typeof window<"u"&&localStorage&&localStorage.setItem("app-language",p),Rg&&(Rg.global.locale.value=p),s.value?Op.lang.set(Sz):Op.lang.set(Np),typeof document<"u"&&(document.documentElement.setAttribute("dir",s.value?"rtl":"ltr"),document.documentElement.setAttribute("lang",s.value?"ar":"en")),!g&&typeof window<"u"&&(console.log("🔄 Reloading page to apply RTL styles..."),window.location.reload())},c=p=>{r.value=p,typeof window<"u"&&localStorage&&localStorage.setItem("app-theme",p),typeof document<"u"&&(document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(p))};return{currentLanguage:n,currentTheme:r,isRTL:s,languageOptions:o,themeOptions:i,setLanguage:a,setTheme:c,initializeSettings:()=>{if(!(typeof window>"u"))try{a(n.value,!0),c(r.value)}catch(p){console.warn("Error initializing settings:",p)}},toggleTheme:()=>{const p=r.value==="light"?"dark":"light";c(p)},toggleLanguage:()=>{const p=n.value==="en-US"?"ar-SA":"en-US";a(p)}}}),Q4="projectGuidelines",Y4=async t=>Xe.timeOperation("getProjectGuidelines",async()=>{try{console.log("🔍 Fetching guidelines for project:",t);const e=`projects/${t}/${Q4}`,n={isActive:{operator:"==",value:!0}},o=(await Ee.getDocs(e,n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,a)=>{const c={high:3,medium:2,low:1},u=(c[a.priority]||0)-(c[i.priority]||0);if(u!==0)return u;const h=i.createdAt?.toDate?i.createdAt.toDate():new Date(i.createdAt||0);return(a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt||0))-h});return console.log("✅ Project guidelines retrieved:",{count:o.length}),o}catch(e){throw console.error("❌ Error fetching project guidelines:",e),Ke.handleFirestoreError(e,"getProjectGuidelines"),e}}),Tz=async(t,e)=>{try{const n=await Y4(t),r=e.toLowerCase();return n.filter(s=>s.title.toLowerCase().includes(r)||s.content&&s.content.toLowerCase().includes(r)||s.category&&s.category.toLowerCase().includes(r))}catch(n){throw console.error("Error searching guidelines:",n),n}},Z4=async t=>Xe.timeOperation("getPDFGuidelines",async()=>{try{console.log("🔍 Fetching PDF guidelines for project:",t);const e=`projects/${t}/${Q4}`,n={isActive:{operator:"==",value:!0},type:{operator:"==",value:"pdf"}},o=(await Ee.getDocs(e,n)).docs.map(i=>({id:i.id,...i.data()})).sort((i,a)=>{const c={high:3,medium:2,low:1},u=(c[a.priority]||0)-(c[i.priority]||0);if(u!==0)return u;const h=i.createdAt?.toDate?i.createdAt.toDate():new Date(i.createdAt||0);return(a.createdAt?.toDate?a.createdAt.toDate():new Date(a.createdAt||0))-h});return console.log("✅ PDF guidelines retrieved:",{count:o.length}),o}catch(e){throw console.error("❌ Error fetching PDF guidelines:",e),Ke.handleFirestoreError(e,"getPDFGuidelines"),e}}),Pz=async t=>{try{const e=await Z4(t);return e.length>0?e[0]:null}catch(e){throw console.error("Error fetching latest PDF guideline:",e),e}},Iz=Yr("projectGuidelines",()=>{const t=K([]),e=K([]),n=K(null),r=K(!1),s=K(null),o=K(""),i=K("all"),a=G(()=>t.value),c=G(()=>e.value),u=G(()=>n.value),h=G(()=>r.value),f=G(()=>s.value),p=G(()=>i.value==="all"?t.value:t.value.filter(k=>k.category===i.value)),g=G(()=>{let k=p.value;if(o.value){const $=o.value.toLowerCase();k=k.filter(U=>U.title.toLowerCase().includes($)||U.content.toLowerCase().includes($)||U.category.toLowerCase().includes($))}return k}),C=G(()=>[...new Set(t.value.map($=>$.category))].map($=>({value:$,label:y($),color:P($)}))),T=G(()=>t.value.filter(k=>k.priority==="high")),v=G(()=>{const k={high:3,medium:2,low:1};return[...t.value].sort(($,U)=>k[U.priority]-k[$.priority])}),_=async k=>{if(!k){console.log("No project ID provided for fetching guidelines");return}try{console.log("Store: Fetching guidelines for project:",k),r.value=!0,s.value=null;const $=await Y4(k);console.log("Store: Received guidelines data:",$),t.value=$}catch($){s.value="Failed to load project guidelines",console.error("Store: Error fetching guidelines:",$)}finally{r.value=!1}},S=async(k,$)=>{if(!(!k||!$))try{r.value=!0,s.value=null;const U=await Tz(k,$);t.value=U}catch(U){s.value="Failed to search guidelines",console.error("Error searching guidelines:",U)}finally{r.value=!1}},x=k=>{o.value=k},R=k=>{i.value=k},D=()=>{s.value=null},L=()=>{t.value=[],e.value=[],n.value=null,o.value="",i.value="all"},b=async k=>{if(!k){console.log("No project ID provided for fetching PDF guidelines");return}try{console.log("Store: Fetching PDF guidelines for project:",k),r.value=!0,s.value=null;const $=await Z4(k);console.log("Store: Received PDF guidelines data:",$),e.value=$}catch($){s.value="Failed to load PDF guidelines",console.error("Store: Error fetching PDF guidelines:",$)}finally{r.value=!1}},A=async k=>{if(!k){console.log("No project ID provided for fetching latest PDF guideline");return}try{console.log("Store: Fetching latest PDF guideline for project:",k),r.value=!0,s.value=null;const $=await Pz(k);console.log("Store: Received latest PDF guideline data:",$),n.value=$}catch($){s.value="Failed to load latest PDF guideline",console.error("Store: Error fetching latest PDF guideline:",$)}finally{r.value=!1}},y=k=>({general:"General",safety:"Safety",maintenance:"Maintenance",rules:"Rules & Regulations",procedures:"Procedures",emergency:"Emergency"})[k]||k,P=k=>({general:"#6b7280",safety:"#dc2626",maintenance:"#2563eb",rules:"#d97706",procedures:"#16a34a",emergency:"#ea580c"})[k]||"#6b7280";return{guidelines:t,pdfGuidelines:e,latestPDFGuideline:n,loading:r,error:s,searchTerm:o,selectedCategory:i,getGuidelines:a,pdfGuidelinesList:c,latestPDFGuidelineData:u,isLoading:h,getError:f,getGuidelinesByCategory:p,getFilteredGuidelines:g,getCategories:C,getHighPriorityGuidelines:T,getGuidelinesByPriority:v,fetchGuidelines:_,fetchPDFGuidelines:b,fetchLatestPDFGuideline:A,searchGuidelinesAction:S,setSearchTerm:x,setSelectedCategory:R,clearError:D,clearGuidelines:L,formatCategoryLabel:y,getCategoryColor:P,formatDate:k=>k?(k.toDate?k.toDate():new Date(k)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",getPriorityInfo:k=>{const $={high:{label:"High Priority",color:"#dc2626",bgColor:"#fee2e2"},medium:{label:"Medium Priority",color:"#d97706",bgColor:"#fef3c7"},low:{label:"Low Priority",color:"#16a34a",bgColor:"#d1fae5"}};return $[k]||$.medium}}}),Rz={class:"pdf-header"},Dz={class:"pdf-title-section"},xz={class:"pdf-info"},Lz={class:"pdf-title"},Mz={class:"pdf-subtitle"},Nz={class:"pdf-actions"},Oz=["disabled"],$z={class:"pdf-content"},Vz={key:0,class:"loading-container"},jz={key:1,class:"error-container"},Uz={key:2,class:"pdf-iframe-container"},Fz=["src"],Bz={key:0,class:"pdf-fallback"},qz={class:"pdf-footer"},Hz={class:"pdf-meta"},zz={key:0,class:"file-size"},Wz={__name:"PDFViewer",props:{isOpen:{type:Boolean,default:!1},pdfUrl:{type:String,required:!0},title:{type:String,default:""},subtitle:{type:String,default:""},fileSize:{type:Number,default:null}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,s=K(!0),o=K(null),i=K(null),a=G(()=>{if(!n.pdfUrl)return"";if(n.pdfUrl.includes("firebasestorage.googleapis.com"))return n.pdfUrl;try{const T=new URL(n.pdfUrl);return T.searchParams.set("embedded","true"),T.searchParams.set("toolbar","1"),T.searchParams.set("navpanes","1"),T.searchParams.set("scrollbar","1"),T.toString()}catch{return n.pdfUrl}}),c=()=>{r("close")},u=()=>{if(n.pdfUrl){const T=document.createElement("a");T.href=n.pdfUrl,T.download=n.title||"project-guidelines.pdf",T.target="_blank",document.body.appendChild(T),T.click(),document.body.removeChild(T)}},h=()=>{n.pdfUrl&&window.open(n.pdfUrl,"_blank")},f=()=>{i.value&&(clearTimeout(i.value),i.value=null),s.value=!1,o.value=null},p=()=>{i.value&&(clearTimeout(i.value),i.value=null),s.value=!1,o.value="Failed to load PDF. The file may be corrupted or your browser may not support PDF viewing. Try downloading the file instead."},g=()=>{s.value=!0,o.value=null,i.value=setTimeout(()=>{s.value=!1,o.value="PDF is taking too long to load. Please check your internet connection or try downloading the file."},1e4);const T=document.querySelector(".pdf-iframe");T&&(T.src=a.value)},C=T=>{if(!T)return"";const v=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(T)/Math.log(1024));return Math.round(T/Math.pow(1024,_)*100)/100+" "+v[_]};return Ve(()=>n.pdfUrl,T=>{T&&n.isOpen&&(s.value=!0,o.value=null,i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{s.value=!1,o.value="PDF is taking too long to load. Please check your internet connection or try downloading the file."},1e4))}),Ve(()=>n.isOpen,T=>{T?(s.value=!0,o.value=null,i.value&&clearTimeout(i.value),i.value=setTimeout(()=>{s.value=!1,o.value="PDF is taking too long to load. Please check your internet connection or try downloading the file."},1e4)):i.value&&(clearTimeout(i.value),i.value=null)}),(T,v)=>t.isOpen?(M(),O("div",{key:0,class:"pdf-viewer-overlay",onClick:c},[l("div",{class:"pdf-viewer-container",onClick:v[0]||(v[0]=ht(()=>{},["stop"]))},[l("div",Rz,[l("div",Dz,[v[1]||(v[1]=l("div",{class:"pdf-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",xz,[l("h3",Lz,B(t.title||"Project Guidelines"),1),l("p",Mz,B(t.subtitle||"View and download project guidelines"),1)])]),l("div",Nz,[l("button",{onClick:u,class:"action-btn download-btn",disabled:s.value},[...v[2]||(v[2]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 20 19 20H5C4.46957 20 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Download PDF ",-1)])],8,Oz),l("button",{onClick:c,class:"action-btn close-btn"},[...v[3]||(v[3]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Close ",-1)])])])]),l("div",$z,[s.value?(M(),O("div",Vz,[...v[4]||(v[4]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading PDF...",-1)])])):o.value?(M(),O("div",jz,[v[5]||(v[5]=l("div",{class:"error-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"12",cy:"12",r:"10",stroke:"#ef4444","stroke-width":"2"}),l("path",{d:"M15 9L9 15M9 9L15 15",stroke:"#ef4444","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),v[6]||(v[6]=l("h3",null,"Failed to Load PDF",-1)),l("p",null,B(o.value),1),l("button",{onClick:g,class:"retry-btn"},"Try Again")])):(M(),O("div",Uz,[l("iframe",{src:a.value,class:"pdf-iframe",frameborder:"0",onLoad:f,onError:p,title:"PDF Viewer"},null,40,Fz),!s.value&&!o.value?(M(),O("div",Bz,[l("div",{class:"fallback-content"},[v[9]||(v[9]=l("div",{class:"fallback-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),v[10]||(v[10]=l("h3",null,"PDF Viewer Not Supported",-1)),v[11]||(v[11]=l("p",null,"Your browser doesn't support PDF viewing in this window. You can still download or open the PDF in a new tab.",-1)),l("div",{class:"fallback-actions"},[l("button",{onClick:u,class:"fallback-btn primary"},[...v[7]||(v[7]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 20 19 20H5C4.46957 20 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Download PDF ",-1)])]),l("button",{onClick:h,class:"fallback-btn secondary"},[...v[8]||(v[8]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 13V19C18 19.5304 17.7893 20.0391 17.4142 20.4142C17.0391 20.7893 16.5304 21 16 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V8C3 7.46957 3.21071 6.96086 3.58579 6.58579C3.96086 6.21071 4.46957 6 5 6H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"15,3 21,3 21,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"10",y1:"14",x2:"21",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Open in New Tab ",-1)])])])])])):fe("",!0)]))]),l("div",qz,[l("div",Hz,[t.fileSize?(M(),O("span",zz,B(C(t.fileSize)),1)):fe("",!0),v[12]||(v[12]=l("span",{class:"file-type"},"PDF Document",-1))]),l("div",{class:"pdf-controls"},[l("button",{onClick:h,class:"control-btn"},[...v[13]||(v[13]=[l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 13V19C18 19.5304 17.7893 20.0391 17.4142 20.4142C17.0391 20.7893 16.5304 21 16 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V8C3 7.46957 3.21071 6.96086 3.58579 6.58579C3.96086 6.21071 4.46957 6 5 6H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"15,3 21,3 21,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"10",y1:"14",x2:"21",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Open in New Tab ",-1)])])])])])])):fe("",!0)}},Gz=pt(Wz,[["__scopeId","data-v-e9e725b2"]]),Kz={key:0,class:"loading-container"},Qz={key:1,class:"error-container"},Yz={key:2,class:"guidelines-content"},Zz={key:0,class:"pdf-guidelines-section"},Jz={class:"pdf-guidelines-list"},Xz=["onClick"],eW={class:"pdf-info"},tW={class:"pdf-title"},nW={class:"pdf-description"},rW={class:"pdf-meta"},sW={key:0,class:"pdf-size"},oW={class:"pdf-date"},iW={class:"pdf-actions"},aW=["onClick"],lW={key:1,class:"text-guidelines-section"},cW={class:"guidelines-articles"},uW={class:"article-title"},dW={class:"article-content"},hW=["innerHTML"],fW={key:2,class:"empty-state"},pW={__name:"ProjectGuidelinesDialog",props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(t,{emit:e}){const n=t,r=e,s=Ct(),o=Iz(),i=K(!1),a=K(null),c=G(()=>o.isLoading),u=G(()=>o.getError),h=G(()=>o.getGuidelines),f=G(()=>o.pdfGuidelinesList),p=G(()=>h.value.filter(D=>D.type!=="pdf")),g=()=>{r("close")},C=async()=>{const D=s.selectedProject?.id;D&&await Promise.all([o.fetchGuidelines(D),o.fetchPDFGuidelines(D)])},T=D=>{D.downloadURL?window.open(D.downloadURL,"_blank","noopener,noreferrer"):console.error("No download URL available for PDF:",D)},v=()=>{i.value=!1,a.value=null},_=D=>{if(D.fileUrl){const L=document.createElement("a");L.href=D.fileUrl,L.download=D.title||"project-guidelines.pdf",L.target="_blank",document.body.appendChild(L),L.click(),document.body.removeChild(L)}},S=D=>D?D.replace(/\n/g,"<br>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>"):"",x=D=>{if(!D)return"";try{return(D.toDate?D.toDate():new Date(D)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(L){return console.warn("Error formatting date:",L),""}},R=D=>{if(!D)return"";const L=["Bytes","KB","MB","GB"],b=Math.floor(Math.log(D)/Math.log(1024));return Math.round(D/Math.pow(1024,b)*100)/100+" "+L[b]};return Ve(()=>n.isOpen,D=>{D&&C()}),Ve(()=>s.selectedProject?.id,D=>{D&&n.isOpen&&C()}),(D,L)=>t.isOpen?(M(),O("div",{key:0,class:"guidelines-overlay",onClick:g},[l("div",{class:"guidelines-dialog",onClick:L[0]||(L[0]=ht(()=>{},["stop"]))},[L[10]||(L[10]=l("div",{class:"guidelines-header"},[l("div",{class:"header-content"},[l("h2",{class:"guidelines-title"},"Project Guidelines"),l("p",{class:"guidelines-subtitle"},"Important rules and procedures for our community")])],-1)),c.value?(M(),O("div",Kz,[...L[1]||(L[1]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading guidelines...",-1)])])):u.value?(M(),O("div",Qz,[L[2]||(L[2]=l("svg",{class:"error-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),l("path",{d:"M15 9L9 15M9 9L15 15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),L[3]||(L[3]=l("h3",null,"Failed to load guidelines",-1)),l("p",null,B(u.value),1),l("button",{onClick:C,class:"retry-btn"},"Try Again")])):(M(),O("div",Yz,[f.value.length>0?(M(),O("div",Zz,[L[7]||(L[7]=l("h4",{class:"section-title"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),xe(" PDF Guidelines ")],-1)),l("div",Jz,[(M(!0),O(Oe,null,ot(f.value,b=>(M(),O("div",{key:b.id,class:"pdf-guideline-card",onClick:A=>T(b)},[L[6]||(L[6]=l("div",{class:"pdf-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",eW,[l("h5",tW,[xe(B(b.title)+" ",1),L[4]||(L[4]=l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"external-link-icon"},[l("path",{d:"M18 13V19C18 19.5304 17.7893 20.0391 17.4142 20.4142C17.0391 20.7893 16.5304 21 16 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V8C3 7.46957 3.21071 6.96086 3.58579 6.58579C3.96086 6.21071 4.46957 6 5 6H11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"15,3 21,3 21,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"10",y1:"14",x2:"21",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1))]),l("p",nW,B(b.description||"Project guidelines document"),1),l("div",rW,[b.fileSize?(M(),O("span",sW,B(R(b.fileSize)),1)):fe("",!0),l("span",oW,B(x(b.createdAt)),1)])]),l("div",iW,[l("button",{onClick:ht(A=>_(b),["stop"]),class:"download-btn"},[...L[5]||(L[5]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 20 19 20H5C4.46957 20 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,aW)])],8,Xz))),128))])])):fe("",!0),p.value.length>0?(M(),O("div",lW,[L[8]||(L[8]=l("h4",{class:"section-title"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),xe(" Text Guidelines ")],-1)),l("div",cW,[(M(!0),O(Oe,null,ot(p.value,b=>(M(),O("article",{key:b.id,class:"guideline-article"},[l("h3",uW,B(b.title),1),l("div",dW,[l("div",{class:"content-text",innerHTML:S(b.content)},null,8,hW)])]))),128))])])):fe("",!0),f.value.length===0&&p.value.length===0?(M(),O("div",fW,[...L[9]||(L[9]=[l("svg",{class:"empty-icon",width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M14 2V8H20",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("h3",null,"No guidelines available",-1),l("p",null,"No guidelines have been added for this project yet.",-1)])])):fe("",!0)]))]),ze(Gz,{isOpen:i.value,pdfUrl:a.value?.fileUrl,title:a.value?.title,subtitle:a.value?.description,fileSize:a.value?.fileSize,onClose:v},null,8,["isOpen","pdfUrl","title","subtitle","fileSize"])])):fe("",!0)}},gW=pt(pW,[["__scopeId","data-v-4c4ae108"]]),mW=async(t,e)=>Xe.timeOperation("updateUserProfile",async()=>{try{console.log("🔍 Updating user profile:",{userId:t,updateData:e});const n=`users/${t}`;await Ee.updateDoc(n,e),console.log("✅ User profile updated successfully")}catch(n){throw console.error("❌ Error updating user profile:",n),Ke.handleFirestoreError(n,"updateUserProfile"),new Error("Failed to update user profile")}}),vW={class:"dialog-content"},wW={class:"form-section"},yW={class:"profile-picture-section"},_W={class:"current-profile-pic"},kW=["src"],bW={key:1,class:"profile-pic-placeholder"},CW={class:"profile-pic-actions"},EW={for:"profilePicUpload",class:"upload-profile-btn"},SW={class:"form-section"},AW={class:"form-row"},TW={class:"form-group"},PW={key:0,class:"error-message"},IW={class:"form-group"},RW={key:0,class:"error-message"},DW={class:"form-group"},xW={key:0,class:"error-message"},LW={class:"form-group"},MW={key:0,class:"error-message"},NW={class:"form-group"},OW={key:0,class:"error-message"},$W={class:"form-section"},VW={class:"readonly-group"},jW={class:"readonly-field"},UW={class:"readonly-group"},FW={class:"readonly-field"},BW={class:"form-section"},qW={class:"documents-grid"},HW={class:"document-card"},zW={class:"document-info"},WW={key:0},GW={key:1,class:"missing"},KW={class:"document-card"},QW={class:"document-info"},YW={key:0},ZW={key:1,class:"missing"},JW={class:"form-section"},XW={class:"password-actions"},eG=["disabled"],tG={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},nG={key:1,class:"loading-spinner-small"},rG={class:"form-actions"},sG=["disabled"],oG=["disabled"],iG={key:0,class:"loading-spinner-small"},aG={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lG={class:"document-modal-header"},cG={class:"document-modal-content"},uG=["src","alt"],dG={__name:"EditProfileDialog",props:{isOpen:{type:Boolean,default:!1},userProfile:{type:Object,default:null}},emits:["close","saved"],setup(t,{emit:e}){const n=t,r=e,s=Zr(),o=K({firstName:"",lastName:"",mobile:"",gender:"",nationalId:"",profilePictureUrl:"",documents:{frontIdUrl:"",backIdUrl:""}}),i=K(!1),a=K(!1),c=K(!1),u=K({}),h=K(!1),f=K(""),p=K(""),g=G(()=>o.value.firstName.trim()&&o.value.lastName.trim()&&o.value.mobile.trim()&&!Object.keys(u.value).length),C=()=>{i.value||(T(),r("close"))},T=()=>{o.value={firstName:"",lastName:"",mobile:"",gender:"",nationalId:"",profilePictureUrl:"",documents:{frontIdUrl:"",backIdUrl:""}},u.value={}},v=()=>{n.userProfile&&(o.value={firstName:n.userProfile.firstName||"",lastName:n.userProfile.lastName||"",mobile:n.userProfile.mobile||"",gender:n.userProfile.gender||"",nationalId:n.userProfile.nationalId||"",profilePictureUrl:n.userProfile.documents?.profilePictureUrl||"",documents:{frontIdUrl:n.userProfile.documents?.frontIdUrl||"",backIdUrl:n.userProfile.documents?.backIdUrl||""}})},_=()=>(u.value={},o.value.firstName.trim()?o.value.firstName.trim().length<2&&(u.value.firstName="First name must be at least 2 characters"):u.value.firstName="First name is required",o.value.lastName.trim()?o.value.lastName.trim().length<2&&(u.value.lastName="Last name must be at least 2 characters"):u.value.lastName="Last name is required",o.value.mobile.trim()?/^[0-9+\-\s()]+$/.test(o.value.mobile.trim())||(u.value.mobile="Please enter a valid mobile number"):u.value.mobile="Mobile number is required",o.value.nationalId&&o.value.nationalId.length<5&&(u.value.nationalId="National ID must be at least 5 characters"),Object.keys(u.value).length===0),S=async()=>{if(_())try{i.value=!0;const b={firstName:o.value.firstName.trim(),lastName:o.value.lastName.trim(),mobile:o.value.mobile.trim(),gender:o.value.gender||null,nationalId:o.value.nationalId.trim()||null,updatedAt:new Date};await mW(Le.currentUser.uid,b),s.showSuccess("Profile updated successfully!"),r("saved",b),C()}catch(b){console.error("Error updating profile:",b),s.showError("Failed to update profile. Please try again.")}finally{i.value=!1}},x=async()=>{if(!Le.currentUser?.email){s.showError("No email address found for password reset");return}try{a.value=!0,await Lb(Le,Le.currentUser.email),s.showSuccess("Password reset email sent! Check your inbox.")}catch(b){console.error("Error sending password reset email:",b),s.showError("Failed to send password reset email. Please try again.")}finally{a.value=!1}},R=b=>b?(b.toDate?b.toDate():new Date(b)).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):null,D=(b,A)=>{f.value=b,p.value=A,h.value=!0},L=async b=>{const A=b.target.files[0];if(!A)return;if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(A.type)){s.showError("Please select a valid image file (JPEG, PNG, or WebP)");return}const P=10*1024*1024;if(A.size>P){s.showError("File size must be less than 10MB");return}c.value=!0;try{const{Capacitor:E}=await Se(async()=>{const{Capacitor:N}=await Promise.resolve().then(()=>Ls);return{Capacitor:N}},void 0),w=E.isNativePlatform(),k=E.getPlatform();let $;const U=k==="ios"&&w;if(U){console.log("📱 iOS: Getting current user from Capacitor Auth...");const{FirebaseAuthentication:N}=await Se(async()=>{const{FirebaseAuthentication:Y}=await import("./index-CMcjIgnu.js");return{FirebaseAuthentication:Y}},[]),H=await N.getCurrentUser();if(!H||!H.user)throw new Error("No authenticated user found");$=H.user.uid,console.log("📱 iOS: Got user:",$)}else{if(!Le.currentUser)throw new Error("No authenticated user found");$=Le.currentUser.uid,console.log(`🔍 ${k}: Got user from Web SDK:`,$)}const Z=await Ua.uploadUserDocuments($,null,null,A);U||await Nb(Le.currentUser,{photoURL:Z.profilePicture});const ee=Lt(rn,"users",$);await Cr(ee,{"documents.profilePictureUrl":Z.profilePicture,updatedAt:new Date}),o.value.profilePictureUrl=Z.profilePicture,s.showSuccess("Profile picture updated successfully!")}catch(E){console.error("Error updating profile picture:",{message:E.message,code:E.code,stack:E.stack,error:E}),s.showError(`Failed to update profile picture: ${E.message||"Unknown error"}`)}finally{c.value=!1}};return Ve(()=>n.isOpen,b=>{b&&v()}),Ve(()=>n.userProfile,()=>{n.isOpen&&v()}),ft(()=>{n.isOpen&&v()}),(b,A)=>t.isOpen?(M(),O("div",{key:0,class:"edit-profile-overlay",onClick:C},[l("div",{class:"edit-profile-dialog",onClick:A[7]||(A[7]=ht(()=>{},["stop"]))},[l("div",{class:"dialog-header"},[A[12]||(A[12]=l("div",{class:"header-content"},[l("h2",{class:"dialog-title"},"Edit Profile"),l("p",{class:"dialog-subtitle"},"Update your personal information")],-1)),l("button",{onClick:C,class:"close-btn"},[...A[11]||(A[11]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",vW,[l("form",{onSubmit:ht(S,["prevent"]),class:"profile-form"},[l("div",wW,[A[15]||(A[15]=l("h3",{class:"section-title"},"Profile Picture",-1)),l("div",yW,[l("div",_W,[o.value.profilePictureUrl?(M(),O("img",{key:0,src:o.value.profilePictureUrl,alt:"Profile Picture",class:"profile-pic-image"},null,8,kW)):(M(),O("div",bW,[...A[13]||(A[13]=[l("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]))]),l("div",CW,[l("input",{id:"profilePicUpload",type:"file",accept:"image/*",onChange:L,class:"file-input",style:{display:"none"}},null,32),l("label",EW,[A[14]||(A[14]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(c.value?"Uploading...":"Change Picture"),1)])])])]),l("div",SW,[A[22]||(A[22]=l("h3",{class:"section-title"},"Personal Information",-1)),l("div",AW,[l("div",TW,[A[16]||(A[16]=l("label",{for:"firstName"},"First Name *",-1)),dt(l("input",{id:"firstName","onUpdate:modelValue":A[0]||(A[0]=y=>o.value.firstName=y),type:"text",class:be(["form-input",{error:u.value.firstName}]),placeholder:"Enter your first name",required:""},null,2),[[Dt,o.value.firstName]]),u.value.firstName?(M(),O("span",PW,B(u.value.firstName),1)):fe("",!0)]),l("div",IW,[A[17]||(A[17]=l("label",{for:"lastName"},"Last Name *",-1)),dt(l("input",{id:"lastName","onUpdate:modelValue":A[1]||(A[1]=y=>o.value.lastName=y),type:"text",class:be(["form-input",{error:u.value.lastName}]),placeholder:"Enter your last name",required:""},null,2),[[Dt,o.value.lastName]]),u.value.lastName?(M(),O("span",RW,B(u.value.lastName),1)):fe("",!0)])]),l("div",DW,[A[18]||(A[18]=l("label",{for:"mobile"},"Mobile Number *",-1)),dt(l("input",{id:"mobile","onUpdate:modelValue":A[2]||(A[2]=y=>o.value.mobile=y),type:"tel",class:be(["form-input",{error:u.value.mobile}]),placeholder:"Enter your mobile number",required:""},null,2),[[Dt,o.value.mobile]]),u.value.mobile?(M(),O("span",xW,B(u.value.mobile),1)):fe("",!0)]),l("div",LW,[A[20]||(A[20]=l("label",{for:"gender"},"Gender",-1)),dt(l("select",{id:"gender","onUpdate:modelValue":A[3]||(A[3]=y=>o.value.gender=y),class:be(["form-select",{error:u.value.gender}])},[...A[19]||(A[19]=[l("option",{value:""},"Select Gender",-1),l("option",{value:"male"},"Male",-1),l("option",{value:"female"},"Female",-1),l("option",{value:"other"},"Other",-1)])],2),[[Ca,o.value.gender]]),u.value.gender?(M(),O("span",MW,B(u.value.gender),1)):fe("",!0)]),l("div",NW,[A[21]||(A[21]=l("label",{for:"nationalId"},"National ID",-1)),dt(l("input",{id:"nationalId","onUpdate:modelValue":A[4]||(A[4]=y=>o.value.nationalId=y),type:"text",class:be(["form-input",{error:u.value.nationalId}]),placeholder:"Enter your national ID"},null,2),[[Dt,o.value.nationalId]]),u.value.nationalId?(M(),O("span",OW,B(u.value.nationalId),1)):fe("",!0)])]),l("div",$W,[A[27]||(A[27]=l("h3",{class:"section-title"},"Account Information",-1)),A[28]||(A[28]=l("p",{class:"section-description"},"These fields cannot be changed for security reasons",-1)),l("div",VW,[A[24]||(A[24]=l("label",null,"Email Address",-1)),l("div",jW,[l("span",null,B(t.userProfile?.email||"Not provided"),1),A[23]||(A[23]=l("div",{class:"readonly-badge"},"Cannot be changed",-1))])]),l("div",UW,[A[26]||(A[26]=l("label",null,"Date of Birth",-1)),l("div",FW,[l("span",null,B(R(t.userProfile?.dateOfBirth)||"Not provided"),1),A[25]||(A[25]=l("div",{class:"readonly-badge"},"Cannot be changed",-1))])])]),l("div",BW,[A[35]||(A[35]=l("h3",{class:"section-title"},"Uploaded Documents",-1)),A[36]||(A[36]=l("p",{class:"section-description"},"View your uploaded identification documents",-1)),l("div",qW,[l("div",HW,[A[31]||(A[31]=l("div",{class:"document-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",zW,[A[29]||(A[29]=l("h5",null,"Front National ID",-1)),o.value.documents?.frontIdUrl?(M(),O("p",WW,"Document uploaded")):(M(),O("p",GW,"Not uploaded"))]),o.value.documents?.frontIdUrl?(M(),O("button",{key:0,onClick:A[5]||(A[5]=y=>D(o.value.documents.frontIdUrl,"Front National ID")),class:"view-doc-btn",type:"button"},[...A[30]||(A[30]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" View ",-1)])])):fe("",!0)]),l("div",KW,[A[34]||(A[34]=l("div",{class:"document-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",QW,[A[32]||(A[32]=l("h5",null,"Back National ID",-1)),o.value.documents?.backIdUrl?(M(),O("p",YW,"Document uploaded")):(M(),O("p",ZW,"Not uploaded"))]),o.value.documents?.backIdUrl?(M(),O("button",{key:0,onClick:A[6]||(A[6]=y=>D(o.value.documents.backIdUrl,"Back National ID")),class:"view-doc-btn",type:"button"},[...A[33]||(A[33]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" View ",-1)])])):fe("",!0)])])]),l("div",JW,[A[39]||(A[39]=l("h3",{class:"section-title"},"Password",-1)),l("div",XW,[l("button",{type:"button",onClick:x,class:"password-reset-btn",disabled:a.value},[a.value?(M(),O("div",nG)):(M(),O("svg",tG,[...A[37]||(A[37]=[l("path",{d:"M21 2L2 21M21 2L15 8M21 2V8H15M2 21L8 15M2 21V15H8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),xe(" "+B(a.value?"Sending...":"Reset Password"),1)],8,eG),A[38]||(A[38]=l("p",{class:"password-help"}," A password reset link will be sent to your email address ",-1))])]),l("div",rG,[l("button",{type:"button",onClick:C,class:"cancel-btn",disabled:i.value}," Cancel ",8,sG),l("button",{type:"submit",class:"save-btn",disabled:i.value||!g.value},[i.value?(M(),O("div",iG)):(M(),O("svg",aG,[...A[40]||(A[40]=[l("path",{d:"M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H16L21 8V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M17 21V13H7V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M7 3V8H12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),xe(" "+B(i.value?"Saving...":"Save Changes"),1)],8,oG)])],32)])]),h.value?(M(),O("div",{key:0,class:"modal-overlay",onClick:A[10]||(A[10]=y=>h.value=!1)},[l("div",{class:"document-modal",onClick:A[9]||(A[9]=ht(()=>{},["stop"]))},[l("div",lG,[l("h3",null,B(p.value),1),l("button",{onClick:A[8]||(A[8]=y=>h.value=!1),class:"close-btn"},[...A[41]||(A[41]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",cG,[l("img",{src:f.value,alt:p.value,class:"document-image"},null,8,uG)])])])):fe("",!0)])):fe("",!0)}},hG=pt(dG,[["__scopeId","data-v-1ec0c1e9"]]),fG={class:"modal-header"},pG={class:"header-content"},gG={class:"header-text"},mG={class:"modal-body"},vG={class:"violation-summary"},wG={class:"summary-header"},yG={class:"summary-content"},_G={class:"amount"},kG={key:0,class:"summary-description"},bG={class:"violation-details"},CG={class:"detail-section"},EG={class:"detail-grid"},SG={class:"detail-item"},AG={class:"detail-item"},TG={class:"detail-item"},PG={class:"detail-item"},IG={key:0,class:"detail-section"},RG={class:"evidence-container"},DG=["src"],xG={class:"detail-section"},LG={class:"communication-summary"},MG={class:"message-count"},NG={key:0,class:"unread-count"},OG={key:0,class:"recent-messages"},$G={class:"message-sender"},VG={class:"message-text"},jG={class:"message-time"},UG={class:"action-buttons"},FG={key:0,class:"chat-badge"},BG=["src"],qG=Object.assign({name:"ViolationDetailModal"},{__name:"ViolationDetailModal",props:{isOpen:{type:Boolean,required:!0},violation:{type:Object,required:!0},userId:{type:String,default:""}},emits:["close","start-chat"],setup(t,{emit:e}){const n=t,r=e,s=K(!1),o=G(()=>n.violation?.messages?.length||0),i=G(()=>!n.violation?.messages||!Array.isArray(n.violation.messages)?0:n.violation.messages.filter(T=>(T.sender==="admin"||T.sender==="system")&&!T.readBy?.includes(n.userId)).length),a=G(()=>!n.violation?.messages||!Array.isArray(n.violation.messages)?[]:n.violation.messages.slice(-3).reverse()),c=()=>{r("close")},u=()=>{r("start-chat",n.violation)},h=T=>new Intl.NumberFormat("en-EG",{style:"currency",currency:"EGP"}).format(T),f=T=>T?new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"",p=T=>{if(!T)return"";const v=new Date(T);return(new Date-v)/(1e3*60*60)<24?v.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):v.toLocaleDateString("en-US",{month:"short",day:"numeric"})},g=T=>({issued:"Issued",paid:"Paid",disputed:"Disputed",cancelled:"Cancelled"})[T]||T,C=T=>({issued:"status-issued",paid:"status-paid",disputed:"status-disputed",cancelled:"status-cancelled"})[T]||"status-issued";return(T,v)=>(M(),O(Oe,null,[t.isOpen?(M(),O("div",{key:0,class:"detail-modal-overlay",onClick:c},[l("div",{class:"detail-modal",onClick:v[1]||(v[1]=ht(()=>{},["stop"]))},[l("div",fG,[l("div",pG,[l("button",{onClick:c,class:"back-btn"},[...v[5]||(v[5]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("div",gG,[v[6]||(v[6]=l("h2",null,"Violation Details",-1)),l("span",{class:be(["status-badge",C(t.violation.status)])},B(g(t.violation.status)),3)])])]),l("div",mG,[l("div",vG,[l("div",wG,[v[7]||(v[7]=l("div",{class:"violation-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",yG,[l("h3",null,B(t.violation.reason),1),l("div",_G,B(h(t.violation.amount)),1)])]),t.violation.description?(M(),O("div",kG,[l("p",null,B(t.violation.description),1)])):fe("",!0)]),l("div",bG,[l("div",CG,[v[12]||(v[12]=l("h4",null,"Violation Information",-1)),l("div",EG,[l("div",SG,[v[8]||(v[8]=l("label",null,"Occurrence Date",-1)),l("span",null,B(f(t.violation.occurrenceDate)),1)]),l("div",AG,[v[9]||(v[9]=l("label",null,"Issued Date",-1)),l("span",null,B(f(t.violation.issuingDate||t.violation.createdAt)),1)]),l("div",TG,[v[10]||(v[10]=l("label",null,"Fine Amount",-1)),l("span",null,B(h(t.violation.amount)),1)]),l("div",PG,[v[11]||(v[11]=l("label",null,"Status",-1)),l("span",{class:be(["status-badge",C(t.violation.status)])},B(g(t.violation.status)),3)])])]),t.violation.evidenceImage?(M(),O("div",IG,[v[14]||(v[14]=l("h4",null,"Evidence",-1)),l("div",RG,[l("img",{src:t.violation.evidenceImage,alt:"Violation Evidence",class:"evidence-image",onClick:v[0]||(v[0]=_=>s.value=!0)},null,8,DG),v[13]||(v[13]=l("p",{class:"evidence-caption"},"Tap to view full size",-1))])])):fe("",!0),l("div",xG,[v[16]||(v[16]=l("h4",null,"Communication",-1)),l("div",LG,[l("div",MG,[v[15]||(v[15]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(o.value)+" message"+B(o.value!==1?"s":""),1)]),i.value>0?(M(),O("div",NG,B(i.value)+" unread ",1)):fe("",!0)]),a.value.length>0?(M(),O("div",OG,[(M(!0),O(Oe,null,ot(a.value,_=>(M(),O("div",{key:_.id,class:be(["message-preview",{"from-admin":_.sender==="admin"||_.sender==="system"}])},[l("div",$G,B(_.sender==="admin"?"Admin":_.sender==="system"?"System":"You"),1),l("div",VG,B(_.text),1),l("div",jG,B(p(_.timestamp)),1)],2))),128))])):fe("",!0)])]),l("div",UG,[l("button",{onClick:u,class:"chat-btn"},[v[17]||(v[17]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),v[18]||(v[18]=xe(" Chat with Admin ",-1)),i.value>0?(M(),O("div",FG,B(i.value),1)):fe("",!0)])])])])])):fe("",!0),s.value?(M(),O("div",{key:1,class:"image-modal-overlay",onClick:v[4]||(v[4]=_=>s.value=!1)},[l("div",{class:"image-modal",onClick:v[3]||(v[3]=ht(()=>{},["stop"]))},[l("button",{onClick:v[2]||(v[2]=_=>s.value=!1),class:"image-close-btn"},[...v[19]||(v[19]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("img",{src:t.violation.evidenceImage,alt:"Violation Evidence",class:"full-evidence-image"},null,8,BG)])])):fe("",!0)],64))}}),HG=pt(qG,[["__scopeId","data-v-0b00b2bd"]]),zG={class:"modal-body"},WG={key:0,class:"loading-state"},GG={key:1,class:"empty-state"},KG={key:2,class:"violations-list"},QG=["onClick"],YG={class:"violation-header"},ZG={class:"violation-status"},JG={width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},XG={key:0,d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},eK={key:1,d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},tK={key:2,d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},nK={key:3,d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},rK={class:"violation-amount"},sK={class:"violation-date"},oK={class:"violation-content"},iK={class:"violation-reason"},aK={key:0,class:"violation-description"},lK={class:"violation-dates"},cK={class:"occurrence-date"},uK={key:0,class:"unread-badge"},dK=Object.assign({name:"ViolationsModal"},{__name:"ViolationsModal",props:{isOpen:{type:Boolean,required:!0},userId:{type:String,required:!0}},emits:["close","start-chat"],setup(t,{emit:e}){const n=t,r=e,s=Ct(),o=K(!1),i=K([]),a=K(!1),c=K(null),u=G(()=>s.selectedProject),h=()=>{r("close")},f=async()=>{if(!(!u.value||!n.userId))try{o.value=!0;const R=await vv(u.value.id,n.userId);i.value=R}catch(R){console.error("Error loading violations:",R)}finally{o.value=!1}},p=R=>{c.value=R,a.value=!0},g=()=>{a.value=!1,c.value=null},C=R=>{r("start-chat",R),h()},T=R=>new Intl.NumberFormat("en-EG",{style:"currency",currency:"EGP"}).format(R),v=R=>R?new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",_=R=>({issued:"Issued",paid:"Paid",disputed:"Disputed",cancelled:"Cancelled"})[R]||R,S=R=>({issued:"status-issued",paid:"status-paid",disputed:"status-disputed",cancelled:"status-cancelled"})[R]||"status-issued",x=R=>!R.messages||!Array.isArray(R.messages)?0:R.messages.filter(D=>(D.sender==="admin"||D.sender==="system")&&!D.readBy?.includes(n.userId)).length;return Ve(()=>n.isOpen,R=>{R&&f()}),ft(()=>{n.isOpen&&f()}),(R,D)=>(M(),O(Oe,null,[t.isOpen?(M(),O("div",{key:0,class:"violations-modal-overlay",onClick:h},[l("div",{class:"violations-modal",onClick:D[0]||(D[0]=ht(()=>{},["stop"]))},[l("div",{class:"modal-header"},[D[2]||(D[2]=et('<div class="header-content" data-v-2468a2fb><div class="header-icon" data-v-2468a2fb><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2468a2fb><path d="M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-2468a2fb></path></svg></div><div class="header-text" data-v-2468a2fb><h2 data-v-2468a2fb>Violations &amp; Fines</h2><p data-v-2468a2fb>Your violation history and fines</p></div></div>',1)),l("button",{onClick:h,class:"close-btn"},[...D[1]||(D[1]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])]),l("div",zG,[o.value?(M(),O("div",WG,[...D[3]||(D[3]=[l("div",{class:"loading-spinner"},null,-1),l("p",null,"Loading violations...",-1)])])):i.value.length===0?(M(),O("div",GG,[...D[4]||(D[4]=[l("div",{class:"empty-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("h3",null,"No Violations",-1),l("p",null,"You have no violations or fines on record.",-1)])])):(M(),O("div",KG,[(M(!0),O(Oe,null,ot(i.value,L=>(M(),O("div",{key:L.id,class:"violation-card",onClick:b=>p(L)},[l("div",YG,[l("div",ZG,[l("span",{class:be(["status-badge",S(L.status)])},[(M(),O("svg",JG,[L.status==="paid"?(M(),O("path",XG)):L.status==="disputed"?(M(),O("path",eK)):L.status==="cancelled"?(M(),O("path",tK)):(M(),O("path",nK))])),xe(" "+B(_(L.status)),1)],2),l("div",rK,B(T(L.amount)),1)]),l("div",sK,B(v(L.createdAt)),1)]),l("div",oK,[l("h4",iK,B(L.reason),1),L.description?(M(),O("p",aK,B(L.description),1)):fe("",!0),l("div",lK,[l("span",cK,[D[5]||(D[5]=et('<svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-2468a2fb><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-2468a2fb></rect><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" data-v-2468a2fb></line><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" data-v-2468a2fb></line><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" data-v-2468a2fb></line></svg>',1)),xe(" Occurred: "+B(v(L.occurrenceDate)),1)])])]),x(L)>0?(M(),O("div",uK,B(x(L)),1)):fe("",!0),D[6]||(D[6]=l("div",{class:"violation-arrow"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],8,QG))),128))]))])])])):fe("",!0),a.value?(M(),$n(HG,{key:1,violation:c.value,"is-open":a.value,onClose:g,onStartChat:C},null,8,["violation","is-open"])):fe("",!0)],64))}}),hK=pt(dK,[["__scopeId","data-v-2468a2fb"]]);class fK{constructor(){}async createComplaint(e,n,r){return Xe.timeOperation("createComplaint",async()=>{try{console.log("🚀 Creating complaint:",{projectId:e,userId:n,complaintData:r});const s=new Date,o={userId:n,adminId:null,title:r.title,category:r.category,status:"Open",priority:r.priority||"Medium",messages:[{id:Date.now().toString(),senderType:"user",senderId:n,text:r.initialMessage,timestamp:s,imageUrl:r.imageUrl||null,imageFileName:r.imageFileName||null}],createdAt:s,updatedAt:s,lastMessageAt:s},i=`projects/${e}/complaints`,a=await Ee.addDoc(i,o);return console.log("✅ Complaint created successfully:",{complaintId:a.id}),{id:a.id,...o}}catch(s){throw console.error("❌ Error creating complaint:",s),Ke.handleFirestoreError(s,"createComplaint"),s}})}async getComplaints(e,n={}){return Xe.timeOperation("getComplaints",async()=>{try{console.log("🔍 Getting complaints:",{projectId:e,filters:n});const r=`projects/${e}/complaints`,s={},o={field:"lastMessageAt",direction:"desc"};n.status&&(s.status={operator:"==",value:n.status}),n.userId&&(s.userId={operator:"==",value:n.userId},console.log("🔍 Applied userId filter:",n.userId)),n.adminId&&(s.adminId={operator:"==",value:n.adminId}),n.category&&(s.category={operator:"==",value:n.category}),console.log("🔍 Final query filters:",s);const i={filters:Object.entries(s).map(([h,f])=>({field:h,operator:f.operator,value:f.value})),orderBy:o};console.log("🔍 Calling firestoreService.getDocs with:",{collectionPath:r,queryOptions:i});const a=await Ee.getDocs(r,i);console.log("🔍 FirestoreService result:",{docsCount:a.docs?.length,empty:a.empty,size:a.size});const c=a.docs.map(h=>({id:h.id,...typeof h.data=="function"?h.data():h.data}));console.log("🔍 Raw complaints from Firestore:",c.map(h=>({id:h.id,userId:h.userId})));const u=n.limit?c.slice(0,n.limit):c;return console.log("✅ Complaints retrieved:",{count:u.length}),u}catch(r){throw console.error("❌ Error fetching complaints:",r),Ke.handleFirestoreError(r,"getComplaints"),r}})}async getComplaint(e,n){return Xe.timeOperation("getComplaint",async()=>{try{if(console.log("🔍 Getting complaint:",{projectId:e,complaintId:n}),!e)throw new Error("Project ID is required");if(!n)throw new Error("Complaint ID is required");const r=`projects/${e}/complaints/${n}`,s=await Ee.getDoc(r);if(s.exists){const o=s.data();return console.log("✅ Complaint found:",{id:s.id,...o}),{id:s.id,...o}}else throw console.log("Complaint not found in database"),new Error("Complaint not found")}catch(r){throw console.error("❌ Error fetching complaint:",r),Ke.handleFirestoreError(r,"getComplaint"),r}})}async addMessage(e,n,r){return Xe.timeOperation("addMessage",async()=>{try{if(console.log("🚀 Adding message to complaint:",{projectId:e,complaintId:n,messageData:r}),!await yt.getCurrentUser())throw new Error("User not authenticated");const o=`projects/${e}/complaints/${n}`,i=new Date,a={id:Date.now().toString(),senderType:r.senderType,senderId:r.senderId,text:r.text,timestamp:i,imageUrl:r.imageUrl||null,imageFileName:r.imageFileName||null},c=await Ee.getDoc(o);if(!c.exists)throw new Error("Complaint not found");const h=[...c.data().messages,a];return await Ee.updateDoc(o,{messages:h,updatedAt:i,lastMessageAt:i}),console.log("✅ Message added successfully"),a}catch(s){throw console.error("❌ Error adding message:",s),Ke.handleFirestoreError(s,"addMessage"),s}})}async updateComplaintStatus(e,n,r,s=null){return Xe.timeOperation("updateComplaintStatus",async()=>{try{console.log("🚀 Updating complaint status:",{projectId:e,complaintId:n,status:r,adminId:s});const o=`projects/${e}/complaints/${n}`,i={status:r,updatedAt:new Date};return s&&(i.adminId=s),await Ee.updateDoc(o,i),console.log("✅ Complaint status updated successfully"),!0}catch(o){throw console.error("❌ Error updating complaint status:",o),Ke.handleFirestoreError(o,"updateComplaintStatus"),o}})}async assignComplaint(e,n,r){return Xe.timeOperation("assignComplaint",async()=>{try{console.log("🚀 Assigning complaint to admin:",{projectId:e,complaintId:n,adminId:r});const s=`projects/${e}/complaints/${n}`;return await Ee.updateDoc(s,{adminId:r,updatedAt:new Date}),console.log("✅ Complaint assigned successfully"),!0}catch(s){throw console.error("❌ Error assigning complaint:",s),Ke.handleFirestoreError(s,"assignComplaint"),s}})}async uploadComplaintImage(e,n=null){return Xe.timeOperation("uploadComplaintImage",async()=>{try{console.log("🚀 Uploading complaint image:",{fileName:e.name,complaintId:n});const r=n||"temp",s=Date.now(),o=e.name.split(".").pop(),i=`complaint_${s}.${o}`,a=`complaints/${r}/`,c=await Ua.uploadFile(e,a,i);return console.log("✅ Complaint image uploaded successfully:",c),{url:c,fileName:i}}catch(r){throw console.error("❌ Error uploading complaint image:",r),Ke.handleFirestoreError(r,"uploadComplaintImage"),r}})}async deleteComplaintImage(e){return Xe.timeOperation("deleteComplaintImage",async()=>{try{return console.log("🚀 Deleting complaint image:",e),await Ua.deleteFile(e),console.log("✅ Complaint image deleted successfully"),!0}catch(n){throw console.error("❌ Error deleting complaint image:",n),Ke.handleFirestoreError(n,"deleteComplaintImage"),n}})}async getComplaintStats(e){try{const n=await this.getComplaints(e);return{total:n.length,open:n.filter(s=>s.status==="Open").length,inProgress:n.filter(s=>s.status==="In Progress").length,resolved:n.filter(s=>s.status==="Resolved").length,closed:n.filter(s=>s.status==="Closed").length}}catch(n){throw console.error("Error getting complaint stats:",n),n}}async deleteComplaint(e,n){return Xe.timeOperation("deleteComplaint",async()=>{try{console.log("🚀 Deleting complaint:",{projectId:e,complaintId:n});const r=`projects/${e}/complaints/${n}`;return await Ee.deleteDoc(r),console.log("✅ Complaint deleted successfully"),!0}catch(r){throw console.error("❌ Error deleting complaint:",r),Ke.handleFirestoreError(r,"deleteComplaint"),r}})}subscribeToComplaint(e,n,r){try{console.log("🔔 Setting up real-time subscription for complaint:",{projectId:e,complaintId:n});const s=`projects/${e}/complaints/${n}`;return Ee.onSnapshot(s,o=>{if(o&&o.exists()){const i=o.data(),a={id:o.id,...i,createdAt:i.createdAt?.toDate?.()||i.createdAt,updatedAt:i.updatedAt?.toDate?.()||i.updatedAt,lastMessageAt:i.lastMessageAt?.toDate?.()||i.lastMessageAt};console.log("📨 Real-time complaint update received:",a),r(a)}else console.log("📭 Complaint document does not exist"),r(null)})}catch(s){throw console.error("❌ Error setting up complaint subscription:",s),s}}subscribeToComplaints(e,n,r){try{console.log("🔔 Setting up real-time subscription for complaints:",{projectId:e,filters:n});const s=`projects/${e}/complaints`,o={};return n.status&&(o.filters=[{field:"status",operator:"==",value:n.status}]),n.userId&&(o.filters=o.filters||[],o.filters.push({field:"userId",operator:"==",value:n.userId})),Ee.onSnapshot(s,o,i=>{const a=[];i.forEach(c=>{const u=c.data();a.push({id:c.id,...u,createdAt:u.createdAt?.toDate?.()||u.createdAt,updatedAt:u.updatedAt?.toDate?.()||u.updatedAt,lastMessageAt:u.lastMessageAt?.toDate?.()||u.lastMessageAt})}),console.log("📨 Real-time complaints update received:",a.length,"complaints"),r(a)})}catch(s){throw console.error("❌ Error setting up complaints subscription:",s),s}}}const pK=new fK,gK={class:"profile-page"},mK={key:0,class:"loading-container"},vK={key:1,class:"profile-content"},wK={class:"hero-section"},yK={class:"hero-content"},_K={class:"profile-avatar"},kK=["src"],bK={key:1,class:"avatar-initial"},CK={class:"hero-text"},EK={class:"hero-title"},SK={class:"hero-subtitle"},AK={class:"accordion-section"},TK={class:"accordion-title"},PK={class:"section-text"},IK={class:"info-grid"},RK={class:"info-card"},DK={class:"info-content"},xK={class:"info-card"},LK={class:"info-content"},MK={class:"info-card"},NK={class:"info-content"},OK={class:"info-card"},$K={class:"info-content"},VK={class:"info-card"},jK={class:"info-content"},UK={class:"info-card"},FK={class:"info-content"},BK={key:0,class:"accordion-section"},qK={class:"accordion-title"},HK={class:"section-text"},zK={class:"family-members-grid"},WK={class:"member-avatar"},GK=["src"],KK={key:1,class:"avatar-initial-small"},QK={class:"member-info"},YK={class:"member-name"},ZK={class:"member-role"},JK={class:"member-meta"},XK={class:"meta-item"},eQ={class:"accordion-section"},tQ={class:"accordion-title"},nQ={class:"section-text"},rQ={class:"violations-container"},sQ={class:"violations-summary"},oQ={class:"violations-stats"},iQ={class:"stat-item"},aQ={class:"stat-number"},lQ={class:"stat-item"},cQ={class:"stat-number"},uQ={class:"stat-item"},dQ={class:"stat-number"},hQ={class:"violations-btn-content"},fQ={class:"violations-btn-icon"},pQ={key:0,class:"notification-badge violations-badge"},gQ={class:"violations-btn-text"},mQ={key:0,class:"no-violations"},vQ={class:"accordion-section"},wQ={class:"accordion-title"},yQ={class:"section-text"},_Q={class:"complaints-container"},kQ={class:"complaints-summary"},bQ={class:"complaints-stats"},CQ={class:"stat-item"},EQ={class:"stat-number"},SQ={class:"stat-item"},AQ={class:"stat-number"},TQ={class:"stat-item"},PQ={class:"stat-number"},IQ={class:"complaints-btn-content"},RQ={class:"complaints-btn-icon"},DQ={key:0,class:"notification-badge complaints-badge"},xQ={class:"complaints-btn-text"},LQ={key:0,class:"no-complaints"},MQ={class:"accordion-section"},NQ={class:"accordion-title"},OQ={class:"section-text"},$Q={class:"accordion-section"},VQ={class:"join-project-section"},jQ={key:0,class:"unified-projects-section"},UQ={class:"project-header"},FQ={class:"project-main-info"},BQ={class:"project-title-section"},qQ={class:"project-name"},HQ={class:"project-location"},zQ={class:"project-status-badges"},WQ={key:0,class:"current-badge"},GQ={class:"project-role-info"},KQ={class:"project-unit"},QQ={class:"project-role"},YQ={class:"smart-mirror-section"},ZQ={class:"smart-mirror-header"},JQ={class:"smart-mirror-status"},XQ={key:0,class:"status-badge connected"},eY={key:1,class:"status-badge disconnected"},tY={key:0,class:"smart-mirror-connected"},nY={class:"device-summary"},rY={class:"device-count"},sY={class:"smart-mirror-actions"},oY=["onClick","disabled"],iY={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"spinning"},aY={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},lY={key:1,class:"smart-mirror-disconnected"},cY=["onClick"],uY={class:"project-actions"},dY=["onClick"],hY={key:1,class:"no-projects"},fY={class:"accordion-section"},pY={class:"info-grid"},gY={class:"info-card"},mY={class:"info-content"},vY={class:"info-card"},wY={class:"info-content"},yY={class:"info-card"},_Y={class:"info-content"},kY={class:"info-card"},bY={class:"info-content"},CY={key:1,class:"accordion-section"},EY={class:"accordion-section"},SY={class:"accordion-title"},AY={class:"section-text"},TY={class:"settings-container"},PY={class:"settings-group"},IY={class:"settings-header"},RY={class:"settings-title"},DY={class:"settings-options"},xY=["onClick"],LY={class:"option-flag"},MY={class:"option-label"},NY={key:0,class:"option-check"},OY={class:"settings-group"},$Y={class:"settings-header"},VY={class:"settings-title"},jY={class:"settings-options"},UY=["onClick"],FY={class:"option-icon"},BY={class:"option-label"},qY={key:0,class:"option-check"},HY={class:"guidelines-section"},zY={class:"section-header"},WY={class:"actions-section"},GY={class:"compact-actions"},KY={key:2,class:"error-container"},QY={class:"modal-actions"},YY=["disabled"],ZY={key:0},JY={key:1},XY={class:"modal-body"},eZ={class:"form-group"},tZ=["disabled"],nZ={value:""},rZ=["value"],sZ={key:0,class:"loading-indicator"},oZ={class:"form-group"},iZ={class:"form-group"},aZ={key:0,class:"success-state"},lZ={key:1,class:"modal-actions"},cZ=["disabled"],uZ={key:0},dZ={key:1},hZ={class:"modal-header"},fZ={class:"header-content"},pZ={class:"header-text"},gZ=["disabled"],mZ={class:"project-selection-card"},vZ={class:"project-details"},wZ={key:0,class:"existing-connection"},yZ={class:"modal-body"},_Z={class:"form-group"},kZ={class:"input-wrapper"},bZ=["disabled"],CZ={class:"form-group"},EZ={class:"input-wrapper"},SZ=["disabled"],AZ={key:0,class:"error-message"},TZ={class:"modal-footer"},PZ=["disabled"],IZ=["disabled"],RZ={key:0},DZ={key:1},xZ={class:"modal-body"},LZ={class:"device-categories"},MZ={class:"category-header"},NZ=["viewBox"],OZ=["d","stroke","stroke-width","stroke-linecap","stroke-linejoin","fill"],$Z={class:"category-info"},VZ={class:"device-count"},jZ={class:"device-list"},UZ={class:"device-info"},FZ={class:"device-name"},BZ={class:"device-room"},qZ={class:"device-type"},HZ={class:"toggle-switch"},zZ=["checked","onChange"],WZ={key:0,class:"no-devices-message"},GZ={class:"modal-actions"},KZ=["disabled"],QZ={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",class:"spinning"},YZ={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ZZ=Object.assign({name:"ProfilePage"},{__name:"ProfilePage",setup(t){const e=an(),n=Zr(),r=Ct(),s=af(),o=Az(),i=K(!0),a=K(null),c=K(null),u=K(!1),h=K(!1),f=K(!1),p=K(!1),g=K(!1),C=K(!1),T=K(!1),v=K({projectId:"",userUnit:"",userRole:""}),_=K([]),S=K(!1),x=K(!1),R=K(null),D=K({email:"",password:""}),L=K(!1),b=K({lights:[],climate:[],plugs:[]}),A=K(!1),y=K(null),P=K(null),E=K(!1),w=K({total:0,pending:0,paid:0,disputed:0,cancelled:0}),k=K({total:0,open:0,resolved:0,closed:0}),$=K([]),U=G(()=>r.userProjects),Z=G(()=>r.selectedProject?.id),ee=G(()=>s.devices.length),N=G(()=>{const ie={};return s.devices.forEach(V=>{const me=Ae(V.type);ie[me]||(ie[me]=[]),ie[me].push(V)}),ie}),H=G(()=>{const ie={};return Object.entries(N.value).forEach(([V,me])=>{me.length>0&&(ie[V]=me)}),ie}),Y=async()=>{try{const ie=await yt.getCurrentUser();if(!ie){a.value="No authenticated user found",i.value=!1;return}i.value=!0,a.value=null,console.log("ProfilePage: Loading profile for user:",ie.uid);const V=await Ee.getDoc(`users/${ie.uid}`);if(V.exists()){const me=V.data();c.value={id:ie.uid,...me},console.log("ProfilePage: Profile loaded successfully:",c.value),await r.fetchUserProjects(ie.uid),await ke(),await we()}else a.value="Profile not found",console.error("ProfilePage: Profile document does not exist")}catch(ie){console.error("ProfilePage: Error loading profile:",ie),a.value="Failed to load profile. Please try again."}finally{i.value=!1}},ne=async()=>{const ie=await yt.getCurrentUser();if(!(!ie||!r.selectedProject))try{console.log("🔍 ProfilePage: Current user ID:",ie.uid),console.log("🔍 ProfilePage: Project ID:",r.selectedProject.id);const V=await vv(r.selectedProject.id,ie.uid),me=V.reduce((rt,at)=>(rt.total++,at.status==="issued"?rt.pending++:at.status==="paid"?rt.paid++:at.status==="disputed"?rt.disputed++:at.status==="cancelled"&&rt.cancelled++,rt),{total:0,pending:0,paid:0,disputed:0,cancelled:0});w.value=me,console.log("🔍 Violation stats loaded:",me),console.log("🔍 Raw violations data:",V)}catch(V){console.error("Error loading violation stats:",V)}},Q=async()=>{const ie=await yt.getCurrentUser();if(!(!ie||!r.selectedProject))try{const rt=(await pK.getComplaints(r.selectedProject.id)).filter(at=>at.userId===ie.uid).reduce((at,Kn)=>(at.total++,Kn.status==="Open"?at.open++:Kn.status==="Resolved"?at.resolved++:Kn.status==="Closed"&&at.closed++,at),{total:0,open:0,resolved:0,closed:0});k.value=rt}catch(V){console.error("Error loading complaint stats:",V)}},we=async()=>{const ie=await yt.getCurrentUser();if(!(!ie||!r.selectedProject||!c.value))try{console.log("👨‍👩‍👧‍👦 Loading family members for user:",ie.uid);const me=c.value.projects?.find(un=>un.projectId===r.selectedProject.id)?.unit;if(!me){console.log("👨‍👩‍👧‍👦 No unit found for current user in this project"),$.value=[];return}const rt=c.value.parentAccountId||ie.uid,ws=(await Ee.getDocs("users")).docs.map(un=>({id:un.id,...un.data()})).filter(un=>{if(un.id===ie.uid||!(un.parentAccountId===rt||un.parentAccountId===ie.uid))return!1;const oo=un.projects?.find(uu=>uu.projectId===r.selectedProject.id);return!oo||oo.unit!==me?!1:(un.role=oo.role,!0)});$.value=ws,console.log("👨‍👩‍👧‍👦 Loaded family members:",ws.length,ws)}catch(V){console.error("Error loading family members:",V),$.value=[]}},Ye=async()=>{try{h.value=!0,console.log("[Logout] 🚪 Clearing Smart Mirror context before sign out"),Je.clearPreUserId(),await yt.signOut(),n.showSuccess("Logged out successfully"),e.push("/onboarding")}catch(ie){console.error("Logout error:",ie),n.showError("Failed to logout. Please try again.")}finally{h.value=!1,u.value=!1}},lt=()=>{p.value=!0},De=ie=>{c.value&&Object.assign(c.value,ie),n.showSuccess("Profile updated successfully!")},se=ie=>{P.value=P.value===ie?null:ie},ke=async()=>{try{S.value=!0;const ie=await Ee.getDocs("projects");_.value=ie.docs.map(V=>({id:V.id,...V.data()}))}catch(ie){console.error("Error fetching available projects:",ie),n.showError("Failed to load available projects")}finally{S.value=!1}},Ce=async()=>{const ie=await yt.getCurrentUser();if(!ie){n.showError("You must be logged in to join a project");return}if(!v.value.projectId||!v.value.userUnit||!v.value.userRole){n.showError("Please fill in all required fields");return}try{C.value=!0;const V=_.value.find(ws=>ws.id===v.value.projectId);if(!V){n.showError("Selected project not found");return}const me=await Ee.getDoc(`users/${ie.uid}`);if(!me.exists()){n.showError("User document not found");return}const at=me.data().projects||[],Kn={projectId:v.value.projectId,role:v.value.userRole,unit:v.value.userUnit,updatedAt:new Date};await Ee.updateDoc(`users/${ie.uid}`,{projects:[...at,Kn],updatedAt:Ee.serverTimestamp()}),n.showSuccess(`Successfully joined ${V.name}!`),T.value=!0,setTimeout(()=>{T.value=!1,g.value=!1,ye()},1500),await r.fetchUserProjects(ie.uid)}catch(V){console.error("Error joining project:",V),n.showError("Failed to join project. Please try again.")}finally{C.value=!1}},ye=()=>{v.value={projectId:"",userUnit:"",userRole:""}},Ze=()=>{v.value.userUnit="",v.value.userRole=""},z=async ie=>{try{if(r.selectProject(ie),s.needsReAuthentication(ie.id)){ge(ie.id);return}await s.switchToProject(ie.id),n.showSuccess(`Switched to ${ie.name}`),setTimeout(()=>{e.push("/home")},1e3)}catch(V){console.error("Error switching project:",V),n.showError("Failed to switch project. Please try again.")}},W=ie=>{const V=s.getProjectConnectionStatus(ie);return V.isConnected&&V.devicesCount>0},te=ie=>s.getProjectConnectionStatus(ie).devicesCount,de=()=>{e.push("/smart-devices")},ge=ie=>{R.value=ie,x.value=!0,D.value.email="",D.value.password="",s.clearError()},he=()=>{x.value=!1,R.value=null,D.value.email="",D.value.password="",s.clearError()},F=async()=>{if(!D.value.email||!D.value.password||!R.value){n.showError("Please enter both email and password");return}const ie=await s.connect(D.value.email,D.value.password,R.value);if(ie.success){const V=U.value.find(me=>me.id===R.value);n.showSuccess(`Successfully connected Smart Mirror to ${V?.name}!`),he()}else n.showError(ie.error||"Failed to connect to Smart Mirror")},q=async ie=>{try{y.value=ie;const V=await s.disconnect(ie);if(V.success){const me=U.value.find(rt=>rt.id===ie);n.showSuccess(`Successfully disconnected Smart Mirror from ${me?.name}`)}else n.showError(V.error||"Failed to disconnect from Smart Mirror")}catch(V){console.error("Error disconnecting Smart Mirror:",V),n.showError("Failed to disconnect from Smart Mirror. Please try again.")}finally{y.value=null}},J=(ie,V)=>{const me=ie?ie.charAt(0).toUpperCase():"",rt=V?V.charAt(0).toUpperCase():"";return me+rt||"U"},oe=(ie,V)=>ie&&V?`${ie} ${V}`:ie||V||"User",Re=ie=>ie&&{pending:"status-pending",completed:"status-completed",verified:"status-verified"}[ie]||"status-unknown",ve=ie=>{if(!ie)return null;try{if(ie.toDate)return ie.toDate().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});if(typeof ie=="string")return new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch(V){console.warn("Error formatting date:",V)}return ie},X=ie=>ie?{male:"Male",female:"Female",other:"Other"}[ie]||ie:null,ae=ie=>!ie||ie==="owner"?"Owner":"Family Member",Ae=ie=>({light:"lights",thermostat:"climate",climate:"climate",fan:"climate",heater:"climate",ac:"climate",air_conditioner:"climate","air-conditioner":"climate",plug:"plugs",outlet:"plugs",switch:"plugs",sensor:"plugs",camera:"plugs",door:"plugs",window:"plugs"})[ie]||"plugs",Me=ie=>({lights:"Lights",climate:"Climate Control",plugs:"Smart Plugs",switches:"Switches",sensors:"Sensors",cameras:"Cameras",doors:"Doors",windows:"Windows",fans:"Fans",other:"Other Devices"})[ie]||"Other Devices",Be=ie=>{const V={lights:{viewBox:"0 0 24 24",paths:[{d:"M9 21C9 21.5523 9.44772 22 10 22H14C14.5523 22 15 21.5523 15 21V20H9V21Z"},{d:"M12 2V4"},{d:"M12 18V20"},{d:"M4.22 4.22L5.64 5.64"},{d:"M18.36 18.36L19.78 19.78"},{d:"M1 12H3"},{d:"M21 12H23"},{d:"M4.22 19.78L5.64 18.36"},{d:"M18.36 5.64L19.78 4.22"}]},climate:{viewBox:"0 0 24 24",paths:[{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z"},{d:"M12 6V18"},{d:"M8 8L6 6"},{d:"M16 8L18 6"},{d:"M8 16L6 18"},{d:"M16 16L18 18"}]},plugs:{viewBox:"0 0 24 24",paths:[{d:"M2 3H22C22.5523 3 23 3.44772 23 4V18C23 18.5523 22.5523 19 22 19H2C1.44772 19 1 18.5523 1 18V4C1 3.44772 1.44772 3 2 3Z"},{d:"M8 21H16"},{d:"M12 17V21"}]},switches:{viewBox:"0 0 24 24",paths:[{d:"M3 7H21"},{d:"M3 17H21"},{d:"M8 3L4 7L8 11"},{d:"M16 13L20 17L16 21"}]},sensors:{viewBox:"0 0 24 24",paths:[{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z"},{d:"M12 6V18"},{d:"M8 8L6 6"},{d:"M16 8L18 6"},{d:"M8 16L6 18"},{d:"M16 16L18 18"}]},cameras:{viewBox:"0 0 24 24",paths:[{d:"M23 19C23 19.5304 22.7893 20.0391 22.4142 20.4142C22.0391 20.7893 21.5304 21 21 21H3C2.46957 21 1.96086 20.7893 1.58579 20.4142C1.21071 20.0391 1 19.5304 1 19V8C1 7.46957 1.21071 6.96086 1.58579 6.58579C1.96086 6.21071 2.46957 6 3 6H7L9 4H15L17 6H21C21.5304 6 22.0391 6.21071 22.4142 6.58579C22.7893 6.96086 23 7.46957 23 8V19Z"}]},doors:{viewBox:"0 0 24 24",paths:[{d:"M3 21H21"},{d:"M3 3H21V21H3V3Z"},{d:"M9 9H15"}]},windows:{viewBox:"0 0 24 24",paths:[{d:"M3 3H21V21H3V3Z"},{d:"M3 9H21"},{d:"M3 15H21"},{d:"M9 3V21"},{d:"M15 3V21"}]},fans:{viewBox:"0 0 24 24",paths:[{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z"},{d:"M12 6V18"},{d:"M8 8L6 6"},{d:"M16 8L18 6"},{d:"M8 16L6 18"},{d:"M16 16L18 18"}]},other:{viewBox:"0 0 24 24",paths:[{d:"M12 2L2 7L12 12L22 7L12 2Z"},{d:"M2 17L12 22L22 17"},{d:"M2 12L12 17L22 12"}]}};return V[ie]||V.other},Rt=()=>{L.value=!0,vn()},_t=()=>{L.value=!1,vn()},vn=()=>{const ie=localStorage.getItem(`deviceSettings_${Z.value}`);ie?b.value=JSON.parse(ie):(b.value={lights:[],climate:[],plugs:[]},(s.devices||[]).forEach(me=>{const rt=Ae(me.type);b.value[rt]||(b.value[rt]=[]),b.value[rt].push(me.id)}),localStorage.setItem(`deviceSettings_${Z.value}`,JSON.stringify(b.value)))},Jt=(ie,V,me)=>{b.value[ie]||(b.value[ie]=[]),me?b.value[ie].includes(V)||b.value[ie].push(V):b.value[ie]=b.value[ie].filter(rt=>rt!==V)},Jr=async()=>{try{A.value=!0,localStorage.setItem(`deviceSettings_${Z.value}`,JSON.stringify(b.value)),s.setSelectedDevices(b.value),n.showSuccess("Device settings saved successfully!"),_t()}catch(ie){console.error("Error saving device settings:",ie),n.showError("Failed to save device settings. Please try again.")}finally{A.value=!1}},so=()=>{e.push("/violations")},Xt=()=>{e.push("/complaints")},Gn=()=>{e.push("/support")};return ft(()=>{o.initializeSettings(),Y(),ne(),Q()}),(ie,V)=>(M(),O("div",gK,[i.value?(M(),O("div",mK,[V[28]||(V[28]=l("div",{class:"loading-spinner"},null,-1)),l("p",null,B(ie.$t("loadingProfile")),1)])):c.value?(M(),O("div",vK,[l("div",wK,[l("div",yK,[l("div",_K,[c.value.documents?.profilePictureUrl?(M(),O("img",{key:0,src:c.value.documents.profilePictureUrl,alt:"Profile Picture",class:"avatar-image"},null,8,kK)):(M(),O("div",bK,B(J(c.value.firstName,c.value.lastName)),1)),l("div",{class:be(["avatar-status",Re(c.value.registrationStatus)])},[...V[29]||(V[29]=[l("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],2)]),l("div",CK,[l("h1",EK,B(oe(c.value.firstName,c.value.lastName)),1),l("p",SK,B(c.value.email),1)])])]),l("div",AK,[l("button",{onClick:V[0]||(V[0]=me=>se("personal")),class:be(["accordion-header",{active:P.value==="personal"}])},[l("div",TK,[V[30]||(V[30]=l("div",{class:"section-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",PK,[l("h3",null,B(ie.$t("personalInformation")),1),l("p",null,B(ie.$t("personalDetails")),1)])]),V[31]||(V[31]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2),l("div",{class:be(["accordion-content",{active:P.value==="personal"}])},[l("div",IK,[l("div",RK,[V[32]||(V[32]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",DK,[l("label",null,B(ie.$t("fullName")),1),l("span",null,B(oe(c.value.firstName,c.value.lastName)||ie.$t("notProvided")),1)])]),l("div",xK,[V[33]||(V[33]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M22 16.92V19C22 19.5304 21.7893 20.0391 21.4142 20.4142C21.0391 20.7893 20.5304 21 20 21H4C3.46957 21 2.96086 20.7893 2.58579 20.4142C2.21071 20.0391 2 19.5304 2 19V16.92L8.5 10.92C9.5 9.92 11 9.92 12 10.92L22 16.92Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",LK,[l("label",null,B(ie.$t("email")),1),l("span",null,B(c.value.email||ie.$t("notProvided")),1)])]),l("div",MK,[V[34]||(V[34]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M22 16.92V19C22 19.5304 21.7893 20.0391 21.4142 20.4142C21.0391 20.7893 20.5304 21 20 21H4C3.46957 21 2.96086 20.7893 2.58579 20.4142C2.21071 20.0391 2 19.5304 2 19V16.92L8.5 10.92C9.5 9.92 11 9.92 12 10.92L22 16.92Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",NK,[l("label",null,B(ie.$t("phoneNumber")),1),l("span",null,B(c.value.mobile||ie.$t("notProvided")),1)])]),l("div",OK,[V[35]||(V[35]=et('<div class="info-icon" data-v-d07c7f5e><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></rect><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line></svg></div>',1)),l("div",$K,[l("label",null,B(ie.$t("dateOfBirth")),1),l("span",null,B(ve(c.value.dateOfBirth)||ie.$t("notProvided")),1)])]),l("div",VK,[V[36]||(V[36]=et('<div class="info-icon" data-v-d07c7f5e><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></circle><path d="M8 14S9.5 16 12 16S16 14 16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><line x1="9" y1="9" x2="9.01" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></line><line x1="15" y1="9" x2="15.01" y2="9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></line></svg></div>',1)),l("div",jK,[l("label",null,B(ie.$t("gender")),1),l("span",null,B(X(c.value.gender)||ie.$t("notProvided")),1)])]),l("div",UK,[V[37]||(V[37]=et('<div class="info-icon" data-v-d07c7f5e><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></rect><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line></svg></div>',1)),l("div",FK,[l("label",null,B(ie.$t("nationalId")),1),l("span",null,B(c.value.nationalId||ie.$t("notProvided")),1)])])])],2)]),$.value.length>0?(M(),O("div",BK,[l("button",{onClick:V[1]||(V[1]=me=>se("family")),class:be(["accordion-header",{active:P.value==="family"}])},[l("div",qK,[V[38]||(V[38]=l("div",{class:"section-icon family-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M17 20H22V18C22 16.3431 20.6569 15 19 15C18.0444 15 17.1931 15.4468 16.6438 16.1429M17 20H7M17 20V18C17 17.3438 16.8736 16.717 16.6438 16.1429M7 20H2V18C2 16.3431 3.34315 15 5 15C5.95561 15 6.80686 15.4468 7.35625 16.1429M7 20V18C7 17.3438 7.12642 16.717 7.35625 16.1429M7.35625 16.1429C8.0935 14.301 9.89482 13 12 13C14.1052 13 15.9065 14.301 16.6438 16.1429M15 7C15 8.65685 13.6569 10 12 10C10.3431 10 9 8.65685 9 7C9 5.34315 10.3431 4 12 4C13.6569 4 15 5.34315 15 7ZM21 10C21 11.1046 20.1046 12 19 12C17.8954 12 17 11.1046 17 10C17 8.89543 17.8954 8 19 8C20.1046 8 21 8.89543 21 10ZM7 10C7 11.1046 6.10457 12 5 12C3.89543 12 3 11.1046 3 10C3 8.89543 3.89543 8 5 8C6.10457 8 7 8.89543 7 10Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",HK,[l("h3",null,B(ie.$t("familyMembers")),1),l("p",null,B($.value.length)+" "+B($.value.length===1?ie.$t("member"):ie.$t("members")),1)])]),V[39]||(V[39]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2),l("div",{class:be(["accordion-content",{active:P.value==="family"}])},[l("div",zK,[(M(!0),O(Oe,null,ot($.value,me=>(M(),O("div",{key:me.id,class:"family-member-card"},[l("div",WK,[me.documents?.profilePictureUrl?(M(),O("img",{key:0,src:me.documents.profilePictureUrl,alt:"Member Picture",class:"avatar-image-small"},null,8,GK)):(M(),O("div",KK,B(J(me.firstName,me.lastName)),1))]),l("div",QK,[l("h4",YK,B(oe(me.firstName,me.lastName)),1),l("p",ZK,B(ae(me.role)),1),l("div",JK,[l("span",XK,[V[40]||(V[40]=l("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 8L10.8906 13.2604C11.5624 13.7083 12.4376 13.7083 13.1094 13.2604L21 8M5 19H19C20.1046 19 21 18.1046 21 17V7C21 5.89543 20.1046 5 19 5H5C3.89543 5 3 5.89543 3 7V17C3 18.1046 3.89543 19 5 19Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(me.email),1)])])])]))),128))])],2)])):fe("",!0),l("div",eQ,[l("button",{onClick:V[2]||(V[2]=me=>se("violations")),class:be(["accordion-header",{active:P.value==="violations"}])},[l("div",tQ,[V[41]||(V[41]=l("div",{class:"section-icon violations-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",nQ,[l("h3",null,B(ie.$t("finesAndViolations")),1),l("p",null,B(ie.$t("viewMyViolations")),1)])]),V[42]||(V[42]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2),l("div",{class:be(["accordion-content",{active:P.value==="violations"}])},[l("div",rQ,[l("div",sQ,[l("div",oQ,[l("div",iQ,[l("span",aQ,B(w.value.total),1),V[43]||(V[43]=l("span",{class:"stat-label"},"Total",-1))]),l("div",lQ,[l("span",cQ,B(w.value.pending),1),V[44]||(V[44]=l("span",{class:"stat-label"},"Pending",-1))]),l("div",uQ,[l("span",dQ,B(w.value.paid),1),V[45]||(V[45]=l("span",{class:"stat-label"},"Paid",-1))])])]),l("button",{onClick:so,class:"violations-btn"},[l("div",hQ,[l("div",fQ,[V[46]||(V[46]=l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 9V13M12 17H12.01M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),w.value.pending>0?(M(),O("div",pQ,B(w.value.pending),1)):fe("",!0)]),l("div",gQ,[l("h4",null,B(ie.$t("viewMyViolations")),1),l("p",null,B(ie.$t("seeDetails")),1)])]),V[47]||(V[47]=l("div",{class:"violations-btn-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),w.value.total===0?(M(),O("div",mQ,[V[48]||(V[48]=l("div",{class:"no-violations-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("h4",null,B(ie.$t("noViolations")),1),l("p",null,B(ie.$t("cleanRecord")),1)])):fe("",!0)])],2)]),l("div",vQ,[l("button",{onClick:V[3]||(V[3]=me=>se("complaints")),class:be(["accordion-header",{active:P.value==="complaints"}])},[l("div",wQ,[V[49]||(V[49]=l("div",{class:"section-icon complaints-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",yQ,[l("h3",null,B(ie.$t("complaints")),1),l("p",null,B(ie.$t("trackComplaints")),1)])]),V[50]||(V[50]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2),l("div",{class:be(["accordion-content",{active:P.value==="complaints"}])},[l("div",_Q,[l("div",kQ,[l("div",bQ,[l("div",CQ,[l("span",EQ,B(k.value.total),1),V[51]||(V[51]=l("span",{class:"stat-label"},"Total",-1))]),l("div",SQ,[l("span",AQ,B(k.value.open),1),V[52]||(V[52]=l("span",{class:"stat-label"},"Open",-1))]),l("div",TQ,[l("span",PQ,B(k.value.resolved),1),V[53]||(V[53]=l("span",{class:"stat-label"},"Resolved",-1))])])]),l("button",{onClick:Xt,class:"complaints-btn"},[l("div",IQ,[l("div",RQ,[V[54]||(V[54]=l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),k.value.open>0?(M(),O("div",DQ,B(k.value.open),1)):fe("",!0)]),l("div",xQ,[l("h4",null,B(ie.$t("viewAllComplaints")),1),l("p",null,B(ie.$t("submitNewComplaints")),1)])]),V[55]||(V[55]=l("div",{class:"complaints-btn-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))]),k.value.total===0?(M(),O("div",LQ,[V[56]||(V[56]=l("div",{class:"no-complaints-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("h4",null,B(ie.$t("noComplaints")),1),l("p",null,B(ie.$t("noComplaintsMessage")),1)])):fe("",!0)])],2)]),l("div",MQ,[l("button",{onClick:Gn,class:"accordion-header support-header"},[l("div",NQ,[V[57]||(V[57]=l("div",{class:"section-icon support-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",OQ,[l("h3",null,B(ie.$t("support")),1),l("p",null,B(ie.$t("getSupportHelp")),1)])]),V[58]||(V[58]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))])]),l("div",$Q,[l("button",{onClick:V[4]||(V[4]=me=>se("projects")),class:be(["accordion-header",{active:P.value==="projects"}])},[...V[59]||(V[59]=[et('<div class="accordion-title" data-v-d07c7f5e><div class="section-icon" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><polyline points="9,22 9,12 15,12 15,22" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></polyline></svg></div><div class="section-text" data-v-d07c7f5e><h3 data-v-d07c7f5e>Manage Units</h3><p data-v-d07c7f5e>Manage your project memberships and smart home connections</p></div></div><div class="accordion-arrow" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div>',2)])],2),l("div",{class:be(["accordion-content",{active:P.value==="projects"}])},[l("div",VQ,[l("button",{onClick:V[5]||(V[5]=me=>g.value=!0),class:"add-project-btn"},[...V[60]||(V[60]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 5V19M5 12H19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Add aUnit ",-1)])])]),U.value.length>0?(M(),O("div",jQ,[(M(!0),O(Oe,null,ot(U.value,me=>(M(),O("div",{key:me.id,class:be(["unified-project-card",{current:me.id===Z.value}])},[l("div",UQ,[l("div",FQ,[l("div",BQ,[l("h4",qQ,B(me.name||"Unnamed Project"),1),l("p",HQ,B(me.location||"Location not set"),1)]),l("div",zQ,[l("span",{class:be(["project-status",me.status])},B(me.status||"active"),3),me.id===Z.value?(M(),O("span",WQ,"Current")):fe("",!0)])]),l("div",GQ,[l("span",KQ,"Unit "+B(me.userUnit||"N/A"),1),l("span",QQ,B(me.userRole||"Member"),1)])]),l("div",YQ,[l("div",ZQ,[V[63]||(V[63]=et('<div class="smart-mirror-title" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg><span data-v-d07c7f5e>Smart Home</span></div>',1)),l("div",JQ,[W(me.id)?(M(),O("span",XQ,[...V[61]||(V[61]=[l("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Connected ",-1)])])):(M(),O("span",eY,[...V[62]||(V[62]=[l("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Not Connected ",-1)])]))])]),W(me.id)?(M(),O("div",tY,[l("div",nY,[l("span",rY,B(te(me.id))+" devices",1),V[64]||(V[64]=l("span",{class:"device-types"},"Lights, Climate, Plugs",-1))]),l("div",sY,[l("button",{onClick:de,class:"control-devices-btn"},[...V[65]||(V[65]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Control Devices ",-1)])]),l("button",{onClick:rt=>q(me.id),class:"disconnect-btn",disabled:y.value===me.id},[y.value===me.id?(M(),O("svg",iY,[...V[66]||(V[66]=[l("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),l("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z",fill:"currentColor"},null,-1)])])):(M(),O("svg",aY,[...V[67]||(V[67]=[l("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),xe(" "+B(y.value===me.id?"Disconnecting...":"Disconnect"),1)],8,oY)])])):(M(),O("div",lY,[V[69]||(V[69]=l("p",{class:"disconnected-message"},"Connect your smart home devices to control them from this app!",-1)),l("button",{onClick:rt=>ge(me.id),class:"connect-smart-mirror-btn"},[...V[68]||(V[68]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Connect Smart Home ",-1)])],8,cY)]))]),l("div",uY,[me.id!==Z.value?(M(),O("button",{key:0,onClick:rt=>z(me),class:"switch-project-btn"},[...V[70]||(V[70]=[et('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M3 7H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M3 17H21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M8 3L4 7L8 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M16 13L20 17L16 21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg> Switch to Project ',2)])],8,dY)):fe("",!0)])],2))),128))])):(M(),O("div",hY,[V[71]||(V[71]=l("div",{class:"no-projects-icon"},"🏠",-1)),V[72]||(V[72]=l("p",null,"You don't have any projects yet.",-1)),l("button",{onClick:V[6]||(V[6]=me=>g.value=!0),class:"add-first-project-btn"}," Join Your First Project ")]))],2)]),l("div",fY,[l("button",{onClick:V[7]||(V[7]=me=>se("account")),class:be(["accordion-header",{active:P.value==="account"}])},[...V[73]||(V[73]=[et('<div class="accordion-title" data-v-d07c7f5e><div class="section-icon" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M12 16V12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M12 8H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div><div class="section-text" data-v-d07c7f5e><h3 data-v-d07c7f5e>Account Information</h3><p data-v-d07c7f5e>Your account status and verification details</p></div></div><div class="accordion-arrow" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div>',2)])],2),l("div",{class:be(["accordion-content",{active:P.value==="account"}])},[l("div",pY,[l("div",gY,[V[75]||(V[75]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",mY,[V[74]||(V[74]=l("label",null,"Email Verified",-1)),l("span",{class:be(["verification-status",{verified:c.value.emailVerified,unverified:!c.value.emailVerified}])},B(c.value.emailVerified?"Verified":"Not Verified"),3)])]),l("div",vY,[V[77]||(V[77]=et('<div class="info-icon" data-v-d07c7f5e><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></rect><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="2" data-v-d07c7f5e></line></svg></div>',1)),l("div",wY,[V[76]||(V[76]=l("label",null,"Member Since",-1)),l("span",null,B(ve(c.value.createdAt)||"Not available"),1)])]),l("div",yY,[V[79]||(V[79]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",_Y,[V[78]||(V[78]=l("label",null,"Last Updated",-1)),l("span",null,B(ve(c.value.updatedAt)||"Not available"),1)])]),l("div",kY,[V[81]||(V[81]=l("div",{class:"info-icon"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",bY,[V[80]||(V[80]=l("label",null,"Profile Complete",-1)),l("span",{class:be(["completion-status",{complete:c.value.isProfileComplete,incomplete:!c.value.isProfileComplete}])},B(c.value.isProfileComplete?"Complete":"Incomplete"),3)])])])],2)]),W(Z.value)?(M(),O("div",CY,[l("button",{onClick:V[8]||(V[8]=me=>se("smartHome")),class:be(["accordion-header",{active:P.value==="smartHome"}])},[...V[82]||(V[82]=[et('<div class="accordion-title" data-v-d07c7f5e><div class="section-icon" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div><div class="section-text" data-v-d07c7f5e><h3 data-v-d07c7f5e>Smart Home Settings</h3><p data-v-d07c7f5e>Manage your connected devices and home automation preferences</p></div></div><div class="accordion-arrow" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M6 9L12 15L18 9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div>',2)])],2),l("div",{class:be(["accordion-content",{active:P.value==="smartHome"}])},[l("div",{class:"smart-home-settings"},[l("div",{class:"settings-card"},[V[86]||(V[86]=et('<div class="settings-icon" data-v-d07c7f5e><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div>',1)),l("div",{class:"settings-content"},[V[84]||(V[84]=l("h4",null,"Device Management",-1)),V[85]||(V[85]=l("p",null,"Choose which devices appear on your home page dashboard",-1)),l("button",{onClick:Rt,class:"manage-devices-btn"},[...V[83]||(V[83]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Manage Devices ",-1)])])])])])],2)])):fe("",!0),l("div",EY,[l("button",{onClick:V[9]||(V[9]=me=>se("settings")),class:be(["accordion-header",{active:P.value==="settings"}])},[l("div",SY,[V[88]||(V[88]=l("div",{class:"section-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M19.4 15C19.2669 15.3016 19.2272 15.6362 19.286 15.9606C19.3448 16.285 19.4995 16.5843 19.73 16.82L19.79 16.88C19.976 17.0657 20.1235 17.2863 20.2241 17.5291C20.3248 17.7719 20.3766 18.0322 20.3766 18.295C20.3766 18.5578 20.3248 18.8181 20.2241 19.0609C20.1235 19.3037 19.976 19.5243 19.79 19.71C19.6043 19.896 19.3837 20.0435 19.1409 20.1441C18.8981 20.2448 18.6378 20.2966 18.375 20.2966C18.1122 20.2966 17.8519 20.2448 17.6091 20.1441C17.3663 20.0435 17.1457 19.896 16.96 19.71L16.9 19.65C16.6643 19.4195 16.365 19.2648 16.0406 19.206C15.7162 19.1472 15.3816 19.1869 15.08 19.32C14.7842 19.4468 14.532 19.6572 14.3543 19.9255C14.1766 20.1938 14.0813 20.5082 14.08 20.83V21C14.08 21.5304 13.8693 22.0391 13.4942 22.4142C13.1191 22.7893 12.6104 23 12.08 23C11.5496 23 11.0409 22.7893 10.6658 22.4142C10.2907 22.0391 10.08 21.5304 10.08 21V20.91C10.0723 20.579 9.96512 20.2573 9.77251 19.9887C9.5799 19.7201 9.31074 19.5146 9 19.4C8.69838 19.2669 8.36381 19.2272 8.03941 19.286C7.71502 19.3448 7.41568 19.4995 7.18 19.73L7.12 19.79C6.93425 19.976 6.71368 20.1235 6.47088 20.2241C6.22808 20.3248 5.96783 20.3766 5.705 20.3766C5.44217 20.3766 5.18192 20.3248 4.93912 20.2241C4.69632 20.1235 4.47575 19.976 4.29 19.79C4.10405 19.6043 3.95653 19.3837 3.85588 19.1409C3.75523 18.8981 3.70343 18.6378 3.70343 18.375C3.70343 18.1122 3.75523 17.8519 3.85588 17.6091C3.95653 17.3663 4.10405 17.1457 4.29 16.96L4.35 16.9C4.58054 16.6643 4.73519 16.365 4.794 16.0406C4.85282 15.7162 4.81312 15.3816 4.68 15.08C4.55324 14.7842 4.34276 14.532 4.07447 14.3543C3.80618 14.1766 3.49179 14.0813 3.17 14.08H3C2.46957 14.08 1.96086 13.8693 1.58579 13.4942C1.21071 13.1191 1 12.6104 1 12.08C1 11.5496 1.21071 11.0409 1.58579 10.6658C1.96086 10.2907 2.46957 10.08 3 10.08H3.09C3.42099 10.0723 3.742 9.96512 4.01062 9.77251C4.27925 9.5799 4.48485 9.31074 4.6 9C4.73312 8.69838 4.77282 8.36381 4.714 8.03941C4.65519 7.71502 4.50054 7.41568 4.27 7.18L4.21 7.12C4.02405 6.93425 3.87653 6.71368 3.77588 6.47088C3.67523 6.22808 3.62343 5.96783 3.62343 5.705C3.62343 5.44217 3.67523 5.18192 3.77588 4.93912C3.87653 4.69632 4.02405 4.47575 4.21 4.29C4.39575 4.10405 4.61632 3.95653 4.85912 3.85588C5.10192 3.75523 5.36217 3.70343 5.625 3.70343C5.88783 3.70343 6.14808 3.75523 6.39088 3.85588C6.63368 3.95653 6.85425 4.10405 7.04 4.29L7.1 4.35C7.33568 4.58054 7.63502 4.73519 7.95941 4.794C8.28381 4.85282 8.61838 4.81312 8.92 4.68H9C9.29577 4.55324 9.54802 4.34276 9.72569 4.07447C9.90337 3.80618 9.99872 3.49179 10 3.17V3C10 2.46957 10.2107 1.96086 10.5858 1.58579C10.9609 1.21071 11.4696 1 12 1C12.5304 1 13.0391 1.21071 13.4142 1.58579C13.7893 1.96086 14 2.46957 14 3V3.09C14.0013 3.41179 14.0966 3.72618 14.2743 3.99447C14.452 4.26276 14.7042 4.47324 15 4.6C15.3016 4.73312 15.6362 4.77282 15.9606 4.714C16.285 4.65519 16.5843 4.50054 16.82 4.27L16.88 4.21C17.0657 4.02405 17.2863 3.87653 17.5291 3.77588C17.7719 3.67523 18.0322 3.62343 18.295 3.62343C18.5578 3.62343 18.8181 3.67523 19.0609 3.77588C19.3037 3.87653 19.5243 4.02405 19.71 4.21C19.896 4.39575 20.0435 4.61632 20.1441 4.85912C20.2448 5.10192 20.2966 5.36217 20.2966 5.625C20.2966 5.88783 20.2448 6.14808 20.1441 6.39088C20.0435 6.63368 19.896 6.85425 19.71 7.04L19.65 7.1C19.4195 7.33568 19.2648 7.63502 19.206 7.95941C19.1472 8.28381 19.1869 8.61838 19.32 8.92V9C19.4468 9.29577 19.6572 9.54802 19.9255 9.72569C20.1938 9.90337 20.5082 9.99872 20.83 10H21C21.5304 10 22.0391 10.2107 22.4142 10.5858C22.7893 10.9609 23 11.4696 23 12C23 12.5304 22.7893 13.0391 22.4142 13.4142C22.0391 13.7893 21.5304 14 21 14H20.91C20.5882 14.0013 20.2738 14.0966 20.0055 14.2743C19.7372 14.452 19.5268 14.7042 19.4 15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",AY,[l("h3",null,B(ie.$t("settings")),1),V[87]||(V[87]=l("p",null,"Customize your app experience",-1))])]),V[89]||(V[89]=l("div",{class:"accordion-arrow"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],2),l("div",{class:be(["accordion-content",{active:P.value==="settings"}])},[l("div",TY,[l("div",PY,[l("div",IY,[V[91]||(V[91]=l("div",{class:"settings-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12.87 15.07L10.33 12.56L10.36 12.53C12.1 10.59 13.34 8.36 14.07 6H17V4H10V2H8V4H1V6H12.17C11.5 7.92 10.44 9.75 9 11.35C8.07 10.32 7.3 9.19 6.69 8H4.69C5.42 9.63 6.42 11.17 7.67 12.56L2.58 17.58L4 19L9 14L12.11 17.11L12.87 15.07ZM18.5 10H16.5L12 22H14L15.2 19H19.8L21 22H23L18.5 10ZM15.88 17L17.5 12.67L19.12 17H15.88Z",fill:"currentColor"})])],-1)),l("div",RY,[l("h4",null,B(ie.$t("language")),1),V[90]||(V[90]=l("p",null,"Choose your preferred language",-1))])]),l("div",DY,[(M(!0),O(Oe,null,ot(tt(o).languageOptions,me=>(M(),O("div",{key:me.value,class:be(["option-item",{active:tt(o).currentLanguage===me.value}]),onClick:rt=>tt(o).setLanguage(me.value)},[l("div",LY,B(me.flag),1),l("div",MY,B(me.label),1),tt(o).currentLanguage===me.value?(M(),O("div",NY,[...V[92]||(V[92]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0)],10,xY))),128))])]),l("div",OY,[l("div",$Y,[V[94]||(V[94]=l("div",{class:"settings-icon"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 3C7.03 3 3 7.03 3 12S7.03 21 12 21S21 16.97 21 12S16.97 3 12 3M12 19C8.13 19 5 15.87 5 12S8.13 5 12 5S19 8.13 19 12S15.87 19 12 19M12 7C9.24 7 7 9.24 7 12S9.24 17 12 17S17 14.76 17 12S14.76 7 12 7M12 15C10.34 15 9 13.66 9 12S10.34 9 12 9S15 10.34 15 12S13.66 15 12 15Z",fill:"currentColor"})])],-1)),l("div",VY,[l("h4",null,B(ie.$t("theme")),1),V[93]||(V[93]=l("p",null,"Choose your preferred appearance",-1))])]),l("div",jY,[(M(!0),O(Oe,null,ot(tt(o).themeOptions,me=>(M(),O("div",{key:me.value,class:be(["option-item",{active:tt(o).currentTheme===me.value}]),onClick:rt=>tt(o).setTheme(me.value)},[l("div",FY,B(me.icon),1),l("div",BY,B(ie.$t(me.value==="light"?"lightMode":"darkMode")),1),tt(o).currentTheme===me.value?(M(),O("div",qY,[...V[95]||(V[95]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):fe("",!0)],10,UY))),128))])])])],2)]),l("div",HY,[l("div",zY,[V[97]||(V[97]=et('<div class="section-title" data-v-d07c7f5e><div class="section-icon" data-v-d07c7f5e><svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d07c7f5e><path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path><path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-d07c7f5e></path></svg></div><div class="section-text" data-v-d07c7f5e><h3 data-v-d07c7f5e>Project Guidelines</h3><p data-v-d07c7f5e>Important rules and procedures for our community</p></div></div>',1)),l("button",{onClick:V[10]||(V[10]=me=>f.value=!0),class:"guidelines-btn"},[...V[96]||(V[96]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" View Guidelines ",-1)])])])]),l("div",WY,[l("div",GY,[l("button",{onClick:lt,class:"compact-btn primary"},[...V[98]||(V[98]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M11 4H4C3.46957 4 2.96086 4.21071 2.58579 4.58579C2.21071 4.96086 2 5.46957 2 6V20C2 20.5304 2.21071 21.0391 2.58579 21.4142C2.96086 21.7893 3.46957 22 4 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M18.5 2.5C18.8978 2.10217 19.4374 1.87868 20 1.87868C20.5626 1.87868 21.1022 2.10217 21.5 2.5C21.8978 2.89782 22.1213 3.43739 22.1213 4C22.1213 4.56261 21.8978 5.10217 21.5 5.5L12 15L8 16L9 12L18.5 2.5Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Edit Profile ",-1)])]),l("button",{onClick:V[11]||(V[11]=me=>u.value=!0),class:"compact-btn secondary"},[...V[99]||(V[99]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9M16 17L21 12M21 12L16 7M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Logout ",-1)])])])])])):a.value?(M(),O("div",KY,[V[100]||(V[100]=l("div",{class:"error-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"12",cy:"12",r:"10",stroke:"#ef4444","stroke-width":"2"}),l("path",{d:"M15 9L9 15M9 9L15 15",stroke:"#ef4444","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),V[101]||(V[101]=l("h3",null,"Failed to Load Profile",-1)),l("p",null,B(a.value),1),l("button",{onClick:Y,class:"retry-btn"},"Try Again")])):fe("",!0),ze(gW,{isOpen:f.value,onClose:V[12]||(V[12]=me=>f.value=!1)},null,8,["isOpen"]),ze(hG,{isOpen:p.value,userProfile:c.value,onClose:V[13]||(V[13]=me=>p.value=!1),onSaved:De},null,8,["isOpen","userProfile"]),ze(hK,{"is-open":E.value,"user-id":c.value?.id||"",onClose:V[14]||(V[14]=me=>E.value=!1),onStartChat:so},null,8,["is-open","user-id"]),u.value?(M(),O("div",{key:3,class:"modal-overlay",onClick:V[17]||(V[17]=me=>u.value=!1)},[l("div",{class:"modal-content",onClick:V[16]||(V[16]=ht(()=>{},["stop"]))},[V[102]||(V[102]=l("div",{class:"modal-header"},[l("h3",null,"Confirm Logout")],-1)),V[103]||(V[103]=l("div",{class:"modal-body"},[l("p",null,"Are you sure you want to logout?"),l("p",{class:"modal-subtitle"},"You'll need to sign in again to access your account.")],-1)),l("div",QY,[l("button",{onClick:V[15]||(V[15]=me=>u.value=!1),class:"cancel-btn"},"Cancel"),l("button",{onClick:Ye,class:"confirm-btn",disabled:h.value},[h.value?(M(),O("span",ZY,"Logging out...")):(M(),O("span",JY,"Logout"))],8,YY)])])])):fe("",!0),g.value?(M(),O("div",{key:4,class:"modal-overlay",onClick:V[23]||(V[23]=me=>g.value=!1)},[l("div",{class:"modal-content add-project-modal",onClick:V[22]||(V[22]=ht(()=>{},["stop"]))},[V[110]||(V[110]=l("div",{class:"modal-header"},[l("h3",null,"Join Existing Project")],-1)),l("div",XY,[l("form",{onSubmit:ht(Ce,["prevent"]),class:"add-project-form"},[l("div",eZ,[V[105]||(V[105]=l("label",{for:"projectSelection"},"Select Project",-1)),dt(l("select",{id:"projectSelection","onUpdate:modelValue":V[18]||(V[18]=me=>v.value.projectId=me),required:"",onChange:Ze,disabled:S.value},[l("option",nZ,B(S.value?"Loading projects...":"Choose a project to join"),1),(M(!0),O(Oe,null,ot(_.value,me=>(M(),O("option",{key:me.id,value:me.id},B(me.name)+" - "+B(me.location),9,rZ))),128))],40,tZ),[[Ca,v.value.projectId]]),S.value?(M(),O("div",sZ,[...V[104]||(V[104]=[l("div",{class:"loading-dots"},[l("div",{class:"dot"}),l("div",{class:"dot"}),l("div",{class:"dot"})],-1)])])):fe("",!0)]),l("div",oZ,[V[106]||(V[106]=l("label",{for:"userUnit"},"Your Unit",-1)),dt(l("input",{id:"userUnit","onUpdate:modelValue":V[19]||(V[19]=me=>v.value.userUnit=me),type:"text",placeholder:"e.g., A1, B2, etc.",required:""},null,512),[[Dt,v.value.userUnit]])]),l("div",iZ,[V[108]||(V[108]=l("label",{for:"userRole"},"Your Role",-1)),dt(l("select",{id:"userRole","onUpdate:modelValue":V[20]||(V[20]=me=>v.value.userRole=me),required:""},[...V[107]||(V[107]=[l("option",{value:""},"Select your role",-1),l("option",{value:"owner"},"Owner",-1),l("option",{value:"family"},"Family Member",-1)])],512),[[Ca,v.value.userRole]])])],32)]),T.value?(M(),O("div",aZ,[...V[109]||(V[109]=[l("div",{class:"success-icon"},"✅",-1),l("h3",null,"Successfully Joined Project!",-1),l("p",null,"You can now access your new project from the home page.",-1)])])):(M(),O("div",lZ,[l("button",{onClick:V[21]||(V[21]=me=>g.value=!1),class:"cancel-btn"},"Cancel"),l("button",{onClick:Ce,class:"confirm-btn",disabled:C.value||!v.value.projectId},[C.value?(M(),O("span",uZ,"Joining Project...")):(M(),O("span",dZ,"Join Project"))],8,cZ)]))])])):fe("",!0),(M(),$n(bp,{to:"body"},[x.value?(M(),O("div",{key:0,class:"modal-overlay",onClick:he},[l("div",{class:"modal-content",onClick:V[26]||(V[26]=ht(()=>{},["stop"]))},[l("div",hZ,[l("div",fZ,[l("div",pZ,[V[111]||(V[111]=l("h3",null,"Connect Smart Home Account",-1)),l("p",null,"Link your smart home devices to "+B(U.value.find(me=>me.id===R.value)?.name||"this project"),1)])]),l("button",{class:"close-btn",onClick:he,disabled:tt(s).isConnecting},[...V[112]||(V[112]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,gZ)]),l("div",mZ,[V[114]||(V[114]=l("div",{class:"project-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"#AF1E23","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M9 22V12H15V22",stroke:"#AF1E23","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("div",vZ,[l("h4",null,B(U.value.find(me=>me.id===R.value)?.name||"Selected Project"),1),W(R.value)?(M(),O("div",wZ,[...V[113]||(V[113]=[l("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M20 6L9 17L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),l("span",null,"Already connected to a different account",-1)])])):fe("",!0)])]),l("div",yZ,[l("form",{onSubmit:ht(F,["prevent"]),class:"login-form"},[l("div",_Z,[V[116]||(V[116]=l("label",{for:"email"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"22,6 12,13 2,6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),xe(" Email Address ")],-1)),l("div",kZ,[dt(l("input",{id:"email","onUpdate:modelValue":V[24]||(V[24]=me=>D.value.email=me),type:"email",placeholder:"Enter your Smart Home email",required:"",disabled:tt(s).isConnecting,autocomplete:"email"},null,8,bZ),[[Dt,D.value.email]]),V[115]||(V[115]=l("div",{class:"input-focus-indicator"},null,-1))])]),l("div",CZ,[V[118]||(V[118]=l("label",{for:"password"},[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2"}),l("circle",{cx:"12",cy:"16",r:"1",fill:"currentColor"}),l("path",{d:"M7 11V7A5 5 0 0 1 17 7V11",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),xe(" Password ")],-1)),l("div",EZ,[dt(l("input",{id:"password","onUpdate:modelValue":V[25]||(V[25]=me=>D.value.password=me),type:"password",placeholder:"Enter your Smart Home password",required:"",disabled:tt(s).isConnecting,autocomplete:"current-password"},null,8,SZ),[[Dt,D.value.password]]),V[117]||(V[117]=l("div",{class:"input-focus-indicator"},null,-1))])]),tt(s).connectionError?(M(),O("div",AZ,[V[119]||(V[119]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),l("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"}),l("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"})],-1)),xe(" "+B(tt(s).connectionError),1)])):fe("",!0)],32)]),l("div",TZ,[l("button",{onClick:he,class:"cancel-btn",disabled:tt(s).isConnecting,type:"button"}," Cancel ",8,PZ),l("button",{onClick:F,class:"connect-btn",disabled:tt(s).isConnecting||!D.value.email||!D.value.password,type:"submit"},[tt(s).isConnecting?(M(),O("span",RZ,"Connecting...")):(M(),O("span",DZ,"Connect"))],8,IZ)])])])):fe("",!0)])),(M(),$n(bp,{to:"body"},[L.value?(M(),O("div",{key:0,class:"modal-overlay",onClick:_t},[l("div",{class:"modal-content device-management-modal",onClick:V[27]||(V[27]=ht(()=>{},["stop"]))},[V[124]||(V[124]=l("div",{class:"modal-header"},[l("h3",null,"Manage Home Page Devices"),l("p",null,"Select which devices to display on your home page dashboard")],-1)),l("div",xZ,[l("div",LZ,[(M(!0),O(Oe,null,ot(H.value,(me,rt)=>(M(),O("div",{key:rt,class:"device-category"},[l("div",MZ,[l("div",{class:be(["category-icon",rt])},[(M(),O("svg",{width:20,height:20,viewBox:Be(rt).viewBox,fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(M(!0),O(Oe,null,ot(Be(rt).paths,(at,Kn)=>(M(),O("path",{key:Kn,d:at.d,stroke:at.stroke||"currentColor","stroke-width":at.strokeWidth||"2","stroke-linecap":at.strokeLinecap||"round","stroke-linejoin":at.strokeLinejoin||"round",fill:at.fill},null,8,OZ))),128))],8,NZ))],2),l("div",$Z,[l("h4",null,B(Me(rt)),1),l("span",VZ,B(me.length)+" devices",1)])]),l("div",jZ,[(M(!0),O(Oe,null,ot(me,at=>(M(),O("div",{key:at.id,class:"device-item"},[l("div",UZ,[l("div",FZ,B(at.name),1),l("div",BZ,B(at.roomName||"Unknown Room"),1),l("div",qZ,B(at.type),1)]),l("label",HZ,[l("input",{type:"checkbox",checked:b.value[rt]&&b.value[rt].includes(at.id),onChange:Kn=>Jt(rt,at.id,Kn.target.checked)},null,40,zZ),V[120]||(V[120]=l("span",{class:"toggle-slider"},null,-1))])]))),128))])]))),128))]),ee.value===0?(M(),O("div",WZ,[...V[121]||(V[121]=[l("div",{class:"no-devices-icon"},[l("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),l("h4",null,"No Devices Available",-1),l("p",null,"No smart home devices are currently connected to this project.",-1)])])):fe("",!0)]),l("div",GZ,[l("button",{onClick:_t,class:"cancel-btn"},"Cancel"),l("button",{onClick:Jr,class:"save-btn",disabled:A.value},[A.value?(M(),O("svg",QZ,[...V[122]||(V[122]=[l("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),l("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2Z",fill:"currentColor"},null,-1)])])):(M(),O("svg",YZ,[...V[123]||(V[123]=[l("path",{d:"M19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])),xe(" "+B(A.value?"Saving...":"Save"),1)],8,KZ)])])])):fe("",!0)]))]))}}),JZ=pt(ZZ,[["__scopeId","data-v-d07c7f5e"]]),XZ={class:"project-selection-page"},eJ={class:"content"},tJ={class:"welcome-section"},nJ={key:0,class:"loading-container"},rJ={class:"loading-card"},sJ={key:1,class:"error-container"},oJ={class:"error-card"},iJ={key:2,class:"no-projects-container"},aJ={key:3,class:"projects-section"},lJ={class:"projects-grid"},cJ=["onClick"],uJ={class:"project-header"},dJ={class:"project-name"},hJ={class:"project-content"},fJ={class:"project-details"},pJ={class:"detail-item"},gJ={class:"detail-item"},mJ={class:"detail-item"},vJ=Object.assign({name:"ProjectSelection"},{__name:"ProjectSelection",setup(t){const e=an(),n=Ct(),r=K(null),s=G(()=>n.userProjects),o=G(()=>n.selectedProject),i=G(()=>{if(!r.value)return"User";if(r.value.displayName)return r.value.displayName.split(" ")[0];if(r.value.email){const f=r.value.email.split("@")[0];return f.charAt(0).toUpperCase()+f.slice(1)}return"User"}),a=async f=>{n.selectProject(f),setTimeout(()=>{e.push("/home")},300)},c=async()=>{Le.currentUser&&await n.fetchUserProjects(Le.currentUser.uid)},u=()=>{e.push("/support")},h=async()=>{try{await yt.signOut(),n.clearSelectedProject(),e.push("/signin")}catch(f){console.error("Error during logout:",f),e.push("/signin")}};return ft(async()=>{try{const f=await yt.getCurrentUser();f?(r.value=f,await n.fetchUserProjects(f.uid),n.loadSelectedProject(),s.value.length===1&&!n.selectedProject&&(n.selectProject(s.value[0]),setTimeout(()=>{e.push("/home")},500))):(console.log("No authenticated user found in ProjectSelection component, redirecting to signin"),r.value=null,e.push("/signin"))}catch(f){console.error("Error getting current user in ProjectSelection component:",f),r.value=null,e.push("/signin")}}),(f,p)=>(M(),O("div",XZ,[p[17]||(p[17]=l("div",{class:"clean-header"},[l("div",{class:"logo"},[l("img",{src:Vk,alt:"PRE Group Logo",class:"logo-image"})])],-1)),l("div",eJ,[l("div",tJ,[l("h1",null,B(f.$t("welcomeBackUser"))+", "+B(i.value)+"!",1),l("p",null,B(f.$t("selectProjectContinue")),1)]),tt(n).loading?(M(),O("div",nJ,[l("div",rJ,[p[0]||(p[0]=l("div",{class:"loading-spinner"},[l("div",{class:"spinner-ring"})],-1)),l("h3",null,B(f.$t("loadingProjects")),1),l("p",null,B(f.$t("fetchingProjects")),1)])])):tt(n).error?(M(),O("div",sJ,[l("div",oJ,[p[2]||(p[2]=et('<div class="error-icon" data-v-c015a59a><svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c015a59a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-c015a59a></circle><line x1="12" y1="8" x2="12" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-c015a59a></line><line x1="12" y1="16" x2="12.01" y2="16" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-c015a59a></line></svg></div>',1)),l("h3",null,B(f.$t("somethingWentWrong")),1),l("p",null,B(tt(n).error),1),l("button",{onClick:c,class:"retry-button"},[p[1]||(p[1]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 12A9 9 0 0 1 12 3A9 9 0 0 1 21 12A9 9 0 0 1 12 21A9 9 0 0 1 3 12Z",stroke:"currentColor","stroke-width":"2"}),l("path",{d:"M12 3V12L16 16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(f.$t("tryAgain")),1)])])])):s.value.length===0?(M(),O("div",iJ,[l("div",{class:"no-projects-card"},[p[4]||(p[4]=l("div",{class:"no-projects-icon"},[l("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),p[5]||(p[5]=l("h3",null,"No Projects Available",-1)),p[6]||(p[6]=l("p",null,"You don't have access to any projects yet. Please contact your administrator to get started.",-1)),l("button",{onClick:u,class:"support-button"},[...p[3]||(p[3]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 12L11 14L15 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor","stroke-width":"2"})],-1),xe(" Contact Support ",-1)])])])])):(M(),O("div",aJ,[l("div",lJ,[ze(em,{name:"project-card",tag:"div",class:"projects-list"},{default:br(()=>[(M(!0),O(Oe,null,ot(s.value,(g,C)=>(M(),O("div",{key:g.id,onClick:T=>a(g),class:be(["project-card",{selected:o.value?.id===g.id}]),style:Ei({"--delay":`${C*.1}s`})},[l("div",uJ,[p[7]||(p[7]=l("div",{class:"project-icon"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("h3",dJ,B(g.name||"Unnamed Project"),1)]),l("div",hJ,[l("div",fJ,[l("div",pJ,[p[8]||(p[8]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 10C21 17 12 23 12 23S3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.3639 3.63604C20.0518 5.32387 21 7.61305 21 10Z",stroke:"currentColor","stroke-width":"2"})],-1)),l("span",null,B(g.location||"Location not set"),1)]),l("div",gJ,[p[9]||(p[9]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,"Unit "+B(g.userUnit||"N/A"),1)]),l("div",mJ,[p[10]||(p[10]=l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M16 21V19C16 17.9391 15.5786 16.9217 14.8284 16.1716C14.0783 15.4214 13.0609 15 12 15C10.9391 15 9.92172 15.4214 9.17157 16.1716C8.42143 16.9217 8 17.9391 8 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(g.userRole||"Member"),1)])])]),p[11]||(p[11]=l("div",{class:"project-action"},[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M5 12H19M19 12L12 5M19 12L12 19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],14,cJ))),128))]),_:1})])])),l("div",{class:"help-section"},[l("div",{class:"help-card"},[p[15]||(p[15]=et('<div class="help-icon" data-v-c015a59a><svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c015a59a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-c015a59a></circle><path d="M9.09 9C9.3251 8.33167 9.78915 7.76811 10.4 7.40913C11.0108 7.05016 11.7289 6.91894 12.4272 7.03871C13.1255 7.15849 13.7588 7.52152 14.2151 8.06353C14.6713 8.60553 14.9211 9.29152 14.92 10C14.92 12 11.92 13 11.92 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></path><line x1="12" y1="17" x2="12.01" y2="17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></line></svg></div>',1)),l("div",{class:"help-content"},[p[13]||(p[13]=l("h3",null,"Need Help?",-1)),p[14]||(p[14]=l("p",null,"Can't find your project or need assistance? Our support team is here to help.",-1)),l("button",{onClick:u,class:"help-button"},[...p[12]||(p[12]=[et('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c015a59a><path d="M22 16V19C22 20.1046 21.1046 21 20 21H4C2.89543 21 2 20.1046 2 19V16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></path><path d="M4 3H20C21.1046 3 22 3.89543 22 5V16C22 17.1046 21.1046 18 20 18H4C2.89543 18 2 17.1046 2 16V5C2 3.89543 2.89543 3 4 3Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></path><path d="M6 8H18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></path><path d="M6 12H14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-c015a59a></path></svg> Get Support ',2)])])])])]),l("div",{class:"logout-section"},[l("button",{onClick:h,class:"logout-button"},[...p[16]||(p[16]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M9 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M16 17L21 12L16 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M21 12H9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Sign Out ",-1)])])])])]))}}),wJ=pt(vJ,[["__scopeId","data-v-c015a59a"]]),yJ=async(t,e)=>Xe.timeOperation("createSupportChat",async()=>{try{console.log("🚀 Creating support chat:",{projectId:t,data:e});const n=await yt.getCurrentUser();if(!n)throw new Error("User must be authenticated");const r={userId:n.uid,userName:n.displayName||"User",userEmail:n.email,title:e.title||`Support Chat - ${new Date().toLocaleString()}`,status:"open",category:e.category||"general",messages:[],createdAt:new Date,updatedAt:new Date,lastMessageAt:new Date},s=`projects/${t}/supportChats`,o=await Ee.addDoc(s,r);return console.log("✅ Support chat created successfully:",{chatId:o.id}),{id:o.id,...r}}catch(n){throw console.error("❌ Error creating support chat:",n),Ke.handleFirestoreError(n,"createSupportChat"),n}}),_J=async(t,e)=>Xe.timeOperation("getSupportChat",async()=>{try{console.log("🔍 Getting support chat:",{projectId:t,chatId:e});const n=`projects/${t}/supportChats/${e}`,r=await Ee.getDoc(n);if(r.exists){const s={id:r.id,...r.data()};return console.log("✅ Support chat retrieved successfully"),s}else return console.log("Support chat not found"),null}catch(n){throw console.error("❌ Error fetching support chat:",n),Ke.handleFirestoreError(n,"getSupportChat"),n}}),J4=async(t,e)=>Xe.timeOperation("getUserSupportChats",async()=>{try{console.log("🔍 Getting user support chats:",{projectId:t,userId:e});const n=`projects/${t}/supportChats`,r={filters:[{field:"userId",operator:"==",value:e}],orderBy:{field:"lastMessageAt",direction:"desc"}},o=(await Ee.getDocs(n,r)).docs.map(i=>({id:i.id,...i.data()}));return console.log("✅ User support chats retrieved:",{count:o.length}),o}catch(n){throw console.error("❌ Error fetching user support chats:",n),Ke.handleFirestoreError(n,"getUserSupportChats"),n}}),kJ=async t=>Xe.timeOperation("getAllSupportChats",async()=>{try{console.log("🔍 Getting all support chats for project:",t);const e=`projects/${t}/supportChats`,n={orderBy:{field:"lastMessageAt",direction:"desc"}},s=(await Ee.getDocs(e,n)).docs.map(o=>({id:o.id,...o.data()}));return console.log("✅ All support chats retrieved:",{count:s.length}),s}catch(e){throw console.error("❌ Error getting all support chats:",e),Ke.handleFirestoreError(e,"getAllSupportChats"),e}}),bJ=async(t,e,n)=>Xe.timeOperation("addMessageToSupportChat",async()=>{try{console.log("🚀 Adding message to support chat:",{projectId:t,chatId:e});const r=await yt.getCurrentUser();if(!r)throw new Error("User must be authenticated");const s=`projects/${t}/supportChats/${e}`,o=await Ee.getDoc(s);if(!o.exists)throw new Error("Support chat not found");const i=o.data,a=new Date,c={id:Date.now().toString(),text:n.text,senderId:r.uid,senderName:r.displayName||"User",senderType:r.uid===i.userId?"user":"admin",timestamp:a,type:n.type||"text",imageUrl:n.imageUrl||null},h=[...i.messages||[],c];return await Ee.updateDoc(s,{messages:h,lastMessageAt:a,updatedAt:a}),console.log("✅ Message added to support chat successfully"),c}catch(r){throw console.error("❌ Error adding message to support chat:",r),Ke.handleFirestoreError(r,"addMessageToSupportChat"),r}}),CJ=async(t,e,n)=>Xe.timeOperation("updateSupportChatStatus",async()=>{try{console.log("🚀 Updating support chat status:",{projectId:t,chatId:e,status:n});const r=`projects/${t}/supportChats/${e}`;await Ee.updateDoc(r,{status:n,updatedAt:new Date}),console.log("✅ Support chat status updated successfully")}catch(r){throw console.error("❌ Error updating support chat status:",r),Ke.handleFirestoreError(r,"updateSupportChatStatus"),r}}),EJ=(t,e,n)=>{try{const r=`projects/${t}/supportChats/${e}`;return Ee.onSnapshot(r,s=>{s&&s.exists?n({id:s.id,...s.data}):n(null)})}catch(r){throw console.error("❌ Error setting up support chat listener:",r),r}},SJ=(t,e,n)=>{try{const r=`projects/${t}/supportChats`,s=[{field:"userId",operator:"==",value:e}],o={field:"lastMessageAt",direction:"desc"};return Ee.onSnapshot(r,i=>{const a=i.docs.map(c=>({id:c.id,...c.data}));n(a)},{filters:s,orderBy:o})}catch(r){throw console.error("❌ Error setting up user support chats listener:",r),r}},AJ=async(t,e)=>Xe.timeOperation("getSupportChatStats",async()=>{try{console.log("🔍 Getting support chat stats:",{projectId:t,userId:e});const n=await J4(t,e),r={total:n.length,open:n.filter(s=>s.status==="open").length,inProgress:n.filter(s=>s.status==="in-progress").length,resolved:n.filter(s=>s.status==="resolved").length,closed:n.filter(s=>s.status==="closed").length};return console.log("✅ Support chat stats retrieved:",r),r}catch(n){throw console.error("❌ Error getting support chat stats:",n),Ke.handleFirestoreError(n,"getSupportChatStats"),n}}),si={createSupportChat:yJ,getSupportChat:_J,getUserSupportChats:J4,getAllSupportChats:kJ,addMessageToSupportChat:bJ,updateSupportChatStatus:CJ,listenToSupportChat:EJ,listenToUserSupportChats:SJ,getSupportChatStats:AJ},X4=Yr("support",()=>{const t=K([]),e=K(null),n=K(!1),r=K(null),s=K({total:0,open:0,inProgress:0,resolved:0,closed:0}),o=G(()=>t.value),i=G(()=>S=>t.value.filter(x=>x.status===S)),a=G(()=>t.value.sort((S,x)=>new Date(x.lastMessageAt?.toDate())-new Date(S.lastMessageAt?.toDate())).slice(0,5)),c=async()=>{try{n.value=!0,r.value=null;const x=Ct().selectedProject?.id;if(!x)throw new Error("No project selected");const R=await yt.getCurrentUser();if(!R)throw new Error("User must be authenticated");const D=await si.getUserSupportChats(x,R.uid);return t.value=D,await g(),D}catch(S){throw r.value=S.message,S}finally{n.value=!1}},u=async S=>{try{n.value=!0,r.value=null;const R=Ct().selectedProject?.id;if(!R)throw new Error("No project selected");const D=await si.getSupportChat(R,S);return e.value=D,D}catch(x){throw r.value=x.message,x}finally{n.value=!1}},h=async S=>{try{n.value=!0,r.value=null;const R=Ct().selectedProject?.id;if(!R)throw new Error("No project selected");const D=await si.createSupportChat(R,S);return t.value.unshift(D),e.value=D,await g(),D}catch(x){throw r.value=x.message,x}finally{n.value=!1}},f=async(S,x)=>{try{const D=Ct().selectedProject?.id;if(!D)throw new Error("No project selected");return await si.addMessageToSupportChat(D,S,x)}catch(R){throw r.value=R.message,R}},p=async(S,x)=>{try{const D=Ct().selectedProject?.id;if(!D)throw new Error("No project selected");await si.updateSupportChatStatus(D,S,x);const L=t.value.find(b=>b.id===S);L&&(L.status=x,L.updatedAt=new Date),e.value?.id===S&&(e.value.status=x,e.value.updatedAt=new Date),await g()}catch(R){throw r.value=R.message,R}},g=async()=>{try{const S=await yt.getCurrentUser();if(!S){s.value={total:0,open:0,inProgress:0,resolved:0,closed:0};return}const R=Ct().selectedProject?.id;if(!R){s.value={total:0,open:0,inProgress:0,resolved:0,closed:0};return}const D=await si.getSupportChatStats(R,S.uid);s.value=D}catch(S){console.error("Error updating support chat stats:",S)}};return{supportChats:t,currentSupportChat:e,loading:n,error:r,stats:s,userSupportChats:o,supportChatsByStatus:i,recentSupportChats:a,fetchSupportChats:c,fetchSupportChat:u,createSupportChat:h,addMessage:f,updateStatus:p,updateStats:g,listenToSupportChat:S=>{const R=Ct().selectedProject?.id;return R?si.listenToSupportChat(R,S,D=>{e.value=D;const L=t.value.findIndex(b=>b.id===S);L!==-1?t.value[L]=D:D&&t.value.unshift(D)}):()=>{}},listenToUserSupportChats:()=>(console.log("⚠️ Real-time support chat listeners are temporarily disabled"),()=>{console.log("Unsubscribed from support chat listener (no-op)")}),clearCurrentChat:()=>{e.value=null},clearError:()=>{r.value=null}}}),TJ={name:"PageHeader",props:{title:{type:String,required:!0},subtitle:{type:String,default:""}},setup(){const t=an();return{goBack:()=>{t.go(-1)}}}},PJ={class:"page-header"},IJ={class:"header-content"},RJ={class:"header-left"},DJ={class:"header-text"},xJ={class:"header-title"},LJ={key:0,class:"header-subtitle"},MJ={key:0,class:"header-actions"};function NJ(t,e,n,r,s,o){return M(),O("div",PJ,[l("div",IJ,[l("div",RJ,[l("button",{onClick:e[0]||(e[0]=(...i)=>r.goBack&&r.goBack(...i)),class:"back-button"},[...e[1]||(e[1]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("div",DJ,[l("h1",xJ,B(n.title),1),n.subtitle?(M(),O("p",LJ,B(n.subtitle),1)):fe("",!0)])]),t.$slots.actions?(M(),O("div",MJ,[b_(t.$slots,"actions",{},void 0)])):fe("",!0)])])}const OJ=pt(TJ,[["render",NJ],["__scopeId","data-v-fac1ae37"]]),$J={class:"support-page"},VJ={class:"content"},jJ={class:"support-hero"},UJ={class:"action-section"},FJ={class:"recent-chats-section"},BJ={key:0,class:"loading-state"},qJ={key:1,class:"error-state"},HJ={key:2,class:"no-chats-state"},zJ={key:3,class:"chats-list"},WJ=["onClick"],GJ={class:"chat-info"},KJ={class:"chat-title"},QJ={class:"chat-date"},YJ=Object.assign({name:"AuthSupportPage"},{__name:"Support",setup(t){const e=an(),n=X4(),r=G(()=>n.userSupportChats),s=G(()=>n.loading),o=G(()=>n.error),i=async()=>{try{const u=await n.createSupportChat({title:`Support Chat - ${new Date().toLocaleString()}`,category:"general"});e.push(`/support-chat/${u.id}`)}catch(u){console.error("Error starting new chat:",u)}},a=u=>{e.push(`/support-chat/${u}`)},c=u=>u?(u.toDate?u.toDate():new Date(u)).toLocaleString():"N/A";return ft(async()=>{try{await n.fetchSupportChats(),console.log("✅ Support chats fetched successfully")}catch(u){console.error("Error setting up support chats:",u)}}),(u,h)=>(M(),O("div",$J,[ze(OJ,{title:u.$t("support"),subtitle:u.$t("getSupportHelp")},null,8,["title","subtitle"]),l("div",VJ,[l("div",jJ,[h[0]||(h[0]=l("div",{class:"support-icon"},[l("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"#AF1E23","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)),l("h2",null,B(u.$t("howCanWeHelp")),1),l("p",null,B(u.$t("supportTeamMessage")),1)]),l("div",UJ,[l("button",{onClick:i,class:"start-chat-btn"},[h[1]||(h[1]=l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"white","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),xe(" "+B(u.$t("startNewChat")),1)])]),l("div",FJ,[l("h3",null,B(u.$t("recentSupportChats")),1),s.value?(M(),O("div",BJ,[h[2]||(h[2]=l("div",{class:"spinner"},null,-1)),l("p",null,B(u.$t("loadingChats")),1)])):o.value?(M(),O("div",qJ,[l("p",null,B(u.$t("errorLoadingChats"))+": "+B(o.value),1)])):r.value.length===0?(M(),O("div",HJ,[l("p",null,B(u.$t("noRecentChats")),1)])):(M(),O("div",zJ,[(M(!0),O(Oe,null,ot(r.value,f=>(M(),O("div",{key:f.id,onClick:p=>a(f.id),class:"chat-card"},[l("div",GJ,[l("span",KJ,B(f.title||u.$t("supportChat")),1),l("span",{class:be(["chat-status",f.status])},B(f.status),3)]),l("span",QJ,B(c(f.lastMessageAt)),1)],8,WJ))),128))]))])])]))}}),ZJ=pt(YJ,[["__scopeId","data-v-79759155"]]),JJ={class:"chat-header"},XJ={class:"header-info"},eX={class:"header-title"},tX={class:"status-info"},nX={class:"category"},rX={key:0,class:"loading-state"},sX={key:1,class:"error-state"},oX={class:"error-title"},iX={class:"error-message"},aX={key:2,class:"messages-list"},lX={class:"message-avatar"},cX={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},uX={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},dX={class:"message-content"},hX={class:"message-bubble"},fX=["onClick"],pX=["src"],gX={key:1,class:"message-text"},mX={class:"message-time"},vX={class:"message-input-container"},wX={key:0,class:"closed-notice"},yX={class:"closed-notice-content"},_X=["disabled"],kX={class:"input-wrapper"},bX=["onKeydown","placeholder","disabled"],CX={key:0,class:"upload-indicator"},EX=["disabled","title"],SX=["disabled","title"],AX={key:1,class:"image-upload"},TX={class:"upload-options"},PX={class:"media-container"},IX=["src"],RX=["src"],DX={__name:"UnifiedChat",props:{chatData:{type:Object,default:null},messages:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},chatType:{type:String,required:!0,validator:t=>["complaint","service","support","violation","request"].includes(t)},defaultTitle:{type:String,default:"Chat"},errorTitle:{type:String,default:"Chat Not Found"},errorMessage:{type:String,default:"The chat you're looking for doesn't exist or has been deleted."},closedMessage:{type:String,default:"This chat has been closed. You can view the conversation but cannot send new messages."},closedPlaceholder:{type:String,default:"This chat is closed"},onSendMessage:{type:Function,required:!0},onImageUpload:{type:Function,required:!0},allowAdminSend:{type:Boolean,default:!1},onAdminSend:{type:Function,required:!1}},emits:["back","message-sent","image-uploaded"],setup(t,{emit:e}){const n=t,r=e,s=an(),o=K(""),i=K(!1),a=K(!1),c=K(""),u=K(!1),h=K(null),f=K(null),p=K(null),g=K(0),C=K(!1),T=G(()=>{if(!n.chatData)return!1;const N=n.chatData.status?.toLowerCase();return N==="closed"||N==="completed"||N==="resolved"}),v=()=>{r("back"),s.go(-1)},_=()=>{i.value=!i.value},S=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},x=()=>{a.value=!1,c.value=""},R=N=>N?[".jpg",".jpeg",".png",".gif",".webp",".svg"].some(Y=>N.toLowerCase().includes(Y)):!1,D=()=>{if(c.value){const N=document.createElement("a");N.href=c.value,N.download=`chat-media-${Date.now()}`,document.body.appendChild(N),N.click(),document.body.removeChild(N)}},L=N=>{N.shiftKey||(N.preventDefault(),A())},b=()=>{f.value&&(f.value.style.height="auto",f.value.style.height=f.value.scrollHeight+"px")},A=async()=>{if(!(!o.value.trim()||n.loading||T.value))try{await n.onSendMessage(o.value.trim()),o.value="",b(),w(),r("message-sent")}catch(N){console.error("Error sending message:",N)}},y=async()=>{if(!(!o.value.trim()||n.loading||T.value||!n.onAdminSend))try{await n.onAdminSend(o.value.trim()),o.value="",b(),w(),r("message-sent")}catch(N){console.error("Error sending admin message:",N)}},P=async N=>{const H=N.target.files[0];if(H){if(H.size>5*1024*1024){alert("File size must be less than 5MB");return}if(!H.type.startsWith("image/")&&!H.type.startsWith("video/")){alert("Please select an image or video file");return}try{u.value=!0,i.value=!1,await n.onImageUpload(H),r("image-uploaded")}catch(Y){console.error("Error uploading image:",Y),alert("Failed to upload file. Please try again.")}finally{u.value=!1}}},E=N=>{c.value=N,a.value=!0},w=()=>{fn(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})},k=N=>N?N.toLowerCase().replace(" ","-"):"",$=N=>{if(!N)return"";switch(n.chatType){case"complaint":return N.categoryName||"Other";case"service":return N.categoryName||N.serviceName||"Service";case"support":return N.category||"General";case"violation":return N.amount?`$${N.amount}`:"Violation";case"request":return N.categoryName||"Request";default:return""}},U=N=>{if(!N)return"";let H;N.toDate?H=N.toDate():N.seconds?H=new Date(N.seconds*1e3):H=new Date(N);const ne=(new Date-H)/(1e3*60);return ne<1?"Just now":ne<60?`${Math.floor(ne)}m ago`:ne<1440?`${Math.floor(ne/60)}h ago`:H.toLocaleDateString()},Z=async()=>{try{di.addListener("keyboardWillShow",N=>{console.log("Keyboard will show:",N),g.value=N.keyboardHeight,C.value=!0,setTimeout(()=>{w()},100)}),di.addListener("keyboardWillHide",()=>{console.log("Keyboard will hide"),g.value=0,C.value=!1}),await di.setResizeMode({mode:"ionic"}),await di.setScroll({isDisabled:!1})}catch(N){console.log("Keyboard API not available:",N)}},ee=async()=>{try{await di.removeAllListeners()}catch(N){console.log("Error cleaning up keyboard listeners:",N)}};return Ve(()=>n.messages?.length,()=>{w()}),ft(async()=>{Z(),fn(()=>{f.value&&f.value.focus()}),w()}),rr(()=>{ee()}),(N,H)=>(M(),O("div",{class:be(["unified-chat",{"keyboard-visible":C.value}]),style:Ei({"--keyboard-height":g.value+"px"})},[l("div",JJ,[l("button",{onClick:v,class:"back-btn"},[...H[4]||(H[4]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M19 12H5M12 19L5 12L12 5",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("div",XJ,[l("div",eX,[l("h2",null,B(t.chatData?.title||t.defaultTitle),1),l("div",tX,[l("span",{class:be(["status-badge",k(t.chatData?.status)])},B(t.chatData?.status||"Loading..."),3),l("span",nX,B($(t.chatData)),1)])]),l("div",{class:"header-actions"},[l("button",{onClick:S,class:"action-btn",title:"Toggle Fullscreen"},[...H[5]||(H[5]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M8 3H5C3.89543 3 3 3.89543 3 5V8M21 3H19C17.8954 3 17 3.89543 17 5V8M3 16V19C3 20.1046 3.89543 21 5 21H8M16 21H19C20.1046 21 21 20.1046 21 19V16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])])]),l("div",{class:"messages-container",ref_key:"messagesContainer",ref:h},[t.loading&&!t.chatData?(M(),O("div",rX,[...H[6]||(H[6]=[l("div",{class:"spinner"},null,-1),l("p",null,"Loading conversation...",-1)])])):t.chatData?(M(),O("div",aX,[(M(!0),O(Oe,null,ot(t.messages,Y=>(M(),O("div",{key:Y.id,class:be(["message-wrapper",Y.senderType])},[l("div",lX,[l("div",{class:be(["avatar",Y.senderType])},[Y.senderType==="user"?(M(),O("svg",cX,[...H[8]||(H[8]=[l("path",{d:"M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])])):(M(),O("svg",uX,[...H[9]||(H[9]=[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])]))],2)]),l("div",dX,[l("div",hX,[Y.imageUrl?(M(),O("div",{key:0,class:"message-image",onClick:ne=>E(Y.imageUrl)},[l("img",{src:Y.imageUrl,alt:"Image message"},null,8,pX),H[10]||(H[10]=l("div",{class:"image-overlay"},[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M15 3H21V9M21 3L3 21M21 3V9H15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1))],8,fX)):fe("",!0),Y.text?(M(),O("div",gX,B(Y.text),1)):fe("",!0),l("div",mX,B(U(Y.timestamp||Y.createdAt)),1)])])],2))),128))])):(M(),O("div",sX,[H[7]||(H[7]=et('<div class="error-icon" data-v-1f598ea8><svg width="64" height="64" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1f598ea8><circle cx="12" cy="12" r="10" stroke="#fbbf24" stroke-width="2" data-v-1f598ea8></circle><line x1="12" y1="8" x2="12" y2="12" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" data-v-1f598ea8></line><line x1="12" y1="16" x2="12.01" y2="16" stroke="#fbbf24" stroke-width="2" stroke-linecap="round" data-v-1f598ea8></line></svg></div>',1)),l("h3",oX,B(t.errorTitle),1),l("p",iX,B(t.errorMessage),1),l("button",{onClick:v,class:"btn-primary"},"Go Back")]))],512),l("div",vX,[T.value?(M(),O("div",wX,[l("div",yX,[H[11]||(H[11]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),l("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),l("span",null,B(t.closedMessage),1)])])):fe("",!0),l("div",{class:be(["message-input",{disabled:T.value}])},[l("button",{onClick:_,class:"attachment-btn",disabled:u.value||T.value,title:"Attach Image"},[...H[12]||(H[12]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21.44 11.05L12.25 20.24C11.1242 21.3658 9.59722 21.9983 8.005 21.9983C6.41278 21.9983 4.88583 21.3658 3.76 20.24C2.63417 19.1142 2.00167 17.5872 2.00167 15.995C2.00167 14.4028 2.63417 12.8758 3.76 11.75L12.95 2.56C13.7006 1.80944 14.7186 1.38787 15.79 1.38787C16.8614 1.38787 17.8794 1.80944 18.63 2.56C19.3806 3.31056 19.8021 4.32856 19.8021 5.4C19.8021 6.47144 19.3806 7.48944 18.63 8.24L9.41 17.46C9.03473 17.8353 8.53127 18.0499 8.005 18.0499C7.47873 18.0499 6.97527 17.8353 6.6 17.46C6.22473 17.0847 6.01013 16.5813 6.01013 16.055C6.01013 15.5287 6.22473 15.0253 6.6 14.65L15.07 6.18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,_X),l("div",kX,[dt(l("textarea",{ref_key:"messageInput",ref:f,"onUpdate:modelValue":H[0]||(H[0]=Y=>o.value=Y),onKeydown:Dp(ht(L,["prevent"]),["enter"]),onInput:b,placeholder:T.value?t.closedPlaceholder:"Type your message...",disabled:t.loading||T.value,rows:"1",class:"message-textarea"},null,40,bX),[[Dt,o.value]]),u.value?(M(),O("div",CX,[...H[13]||(H[13]=[l("div",{class:"upload-spinner"},null,-1)])])):fe("",!0)]),t.allowAdminSend&&n.onAdminSend?(M(),O("button",{key:0,onClick:y,disabled:!o.value.trim()||t.loading||u.value||T.value,class:"admin-send-btn",title:T.value?"Cannot send messages":"Send as Admin"},[...H[14]||(H[14]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M12 2L2 7L12 12L22 7L12 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 17L12 22L22 17",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("path",{d:"M2 12L12 17L22 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,EX)):fe("",!0),l("button",{onClick:A,disabled:!o.value.trim()||t.loading||u.value||T.value,class:"send-btn",title:T.value?"Cannot send messages":"Send Message"},[...H[15]||(H[15]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M22 2L11 13M22 2L15 22L11 13M22 2L2 9L11 13",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])],8,SX)],2),i.value?(M(),O("div",AX,[l("input",{ref_key:"imageInput",ref:p,type:"file",accept:"image/*,video/*",onChange:P,style:{display:"none"}},null,544),l("div",TX,[l("button",{onClick:H[1]||(H[1]=Y=>N.$refs.imageInput.click()),class:"select-image-btn"},[...H[16]||(H[16]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2"}),l("circle",{cx:"8.5",cy:"8.5",r:"1.5",stroke:"currentColor","stroke-width":"2"}),l("polyline",{points:"21,15 16,10 5,21",stroke:"currentColor","stroke-width":"2"})],-1),xe(" Select Image/Video ",-1)])]),l("button",{onClick:H[2]||(H[2]=Y=>i.value=!1),class:"cancel-btn"},[...H[17]||(H[17]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),xe(" Cancel ",-1)])])])])):fe("",!0)]),a.value?(M(),O("div",{key:0,class:"fullscreen-modal",onClick:x},[l("div",{class:"fullscreen-content",onClick:H[3]||(H[3]=ht(()=>{},["stop"]))},[l("div",{class:"fullscreen-header"},[l("button",{onClick:x,class:"close-btn"},[...H[18]||(H[18]=[l("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])]),l("div",{class:"media-actions"},[l("button",{onClick:D,class:"action-btn",title:"Download"},[...H[19]||(H[19]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M21 15V19C21 19.5304 20.7893 20.0391 20.4142 20.4142C20.0391 20.7893 19.5304 21 19 21H5C4.46957 21 3.96086 20.7893 3.58579 20.4142C3.21071 20.0391 3 19.5304 3 19V15",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),l("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])])]),l("div",PX,[R(c.value)?(M(),O("img",{key:0,src:c.value,alt:"Image preview",class:"fullscreen-image"},null,8,IX)):(M(),O("video",{key:1,src:c.value,controls:"",class:"fullscreen-video"}," Your browser does not support the video tag. ",8,RX))])])])):fe("",!0)],6))}},xX=pt(DX,[["__scopeId","data-v-1f598ea8"]]),LX={__name:"SupportChat",setup(t){const e=an(),n=za(),r=X4(),s=Zr(),o=G(()=>n.params.id),i=G(()=>r.currentSupportChat),a=G(()=>i.value?.messages||[]);ft(async()=>{if(o.value)try{await r.fetchSupportChat(o.value),console.log("✅ Support chat loaded successfully")}catch(g){console.error("Error loading support chat:",g),s.addNotification({type:"error",message:"Failed to load support chat."})}});const c=async g=>{if(i.value)try{await r.addMessage(o.value,{text:g,type:"text"}),await r.fetchSupportChat(o.value)}catch(C){throw console.error("Error sending message:",C),s.addNotification({type:"error",message:"Failed to send message. Please try again."}),C}},u=async g=>{try{if(console.log("🚀 SupportChat: Uploading image...",{fileName:g.name,size:g.size}),!await yt.getCurrentUser())throw new Error("User not authenticated");const T=Date.now(),v=g.name.split(".").pop(),_=`support_${T}.${v}`,S=`support/${o.value}/`,x=await Ua.uploadFile(g,S,_);console.log("✅ SupportChat: Image uploaded successfully:",x),await r.addMessage(o.value,{text:"",type:"image",imageUrl:x}),await r.fetchSupportChat(o.value),console.log("✅ SupportChat: Image message sent successfully")}catch(C){throw console.error("❌ SupportChat: Error uploading image:",C),s.addNotification({type:"error",message:"Failed to upload image. Please try again."}),C}},h=()=>{e.go(-1)},f=()=>{console.log("Message sent successfully")},p=()=>{console.log("Image uploaded successfully")};return(g,C)=>(M(),$n(xX,{"chat-data":i.value,messages:a.value,loading:tt(r).loading,"chat-type":"support","default-title":"Support Chat","error-title":"Support Chat Not Found","error-message":"The support chat you're looking for doesn't exist or has been deleted.","closed-message":"This support chat has been closed. You can view the conversation but cannot send new messages.","closed-placeholder":"This support chat is closed","on-send-message":c,"on-image-upload":u,onBack:h,onMessageSent:f,onImageUploaded:p},null,8,["chat-data","messages","loading"]))}},MX=pt(LX,[["__scopeId","data-v-bfdb785f"]]),NX={class:"support-chat-page"},OX=Object.assign({name:"SupportChatPage"},{__name:"SupportChatPage",setup(t){const e=za(),n=K(e.params.id);return ft(()=>{n.value||console.error("No support chat ID provided")}),(r,s)=>(M(),O("div",NX,[ze(MX,{"support-chat-id":n.value},null,8,["support-chat-id"])]))}}),cy=pt(OX,[["__scopeId","data-v-6d492dfe"]]),$X=[{path:"/",name:"Root",component:()=>Se(()=>Promise.resolve().then(()=>Ez),void 0),meta:{requiresAuth:!0}},{path:"/onboarding",name:"Onboarding",component:fO,meta:{requiresAuth:!1}},{path:"/signin",name:"SignIn",component:oj,meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:sU,meta:{requiresAuth:!1}},{path:"/register/verify-email",name:"VerifyEmail",component:UU,meta:{requiresAuth:!1}},{path:"/register/personal-details",name:"PersonalDetails",component:wF,meta:{requiresAuth:!1}},{path:"/migrate-account",name:"MigrateAccount",component:VF,meta:{requiresAuth:!1}},{path:"/project-selection",name:"ProjectSelection",component:wJ,meta:{requiresAuth:!0}},{path:"/home",name:"Home",component:K4,meta:{requiresAuth:!0}},{path:"/access",name:"Access",component:()=>Se(()=>import("./Access-DKYYg0k3.js"),__vite__mapDeps([2,3,4])),meta:{requiresAuth:!0}},{path:"/services",name:"Services",component:()=>Se(()=>import("./Services-DDg24ns8.js"),__vite__mapDeps([5,6,7,8,9])),meta:{requiresAuth:!0}},{path:"/service-category/:id",name:"ServiceCategoryDetails",component:()=>Se(()=>import("./ServiceCategoryDetails-CIbUNkT4.js"),__vite__mapDeps([10,6,11])),meta:{requiresAuth:!0}},{path:"/facilities",name:"Facilities",component:()=>Se(()=>import("./Requests-DU614TfF.js"),__vite__mapDeps([12,13,14])),meta:{requiresAuth:!0}},{path:"/request-category/:id",name:"RequestCategoryDetails",component:()=>Se(()=>import("./RequestCategoryDetails-icY-ty28.js"),__vite__mapDeps([15,13,16])),meta:{requiresAuth:!0}},{path:"/stores-shopping",name:"StoresShopping",component:()=>Se(()=>import("./StoresShopping-CdpQoioP.js"),__vite__mapDeps([17,18])),meta:{requiresAuth:!0}},{path:"/store/:storeId",name:"StoreDetails",component:()=>Se(()=>import("./StoreDetails-EUCMz9NO.js"),__vite__mapDeps([19,20,21])),meta:{requiresAuth:!0}},{path:"/shopping-cart",name:"ShoppingCart",component:()=>Se(()=>import("./ShoppingCart-_Tb9H7pa.js"),__vite__mapDeps([22,20,23])),meta:{requiresAuth:!0}},{path:"/court-booking",name:"CourtBooking",component:()=>Se(()=>import("./CourtBooking-LVJzwYLU.js"),__vite__mapDeps([24,25,26])),meta:{requiresAuth:!0}},{path:"/academy-booking",name:"AcademyBooking",component:()=>Se(()=>import("./AcademyBooking-D5pbeZVg.js"),__vite__mapDeps([27,25,28])),meta:{requiresAuth:!0}},{path:"/academy-programs",name:"AcademyPrograms",component:()=>Se(()=>import("./AcademyPrograms-BhNWozmr.js"),__vite__mapDeps([29,30])),meta:{requiresAuth:!0}},{path:"/academy-details/:id",name:"AcademyDetails",component:()=>Se(()=>import("./AcademyDetails-C1AIEsvY.js"),__vite__mapDeps([31,32])),meta:{requiresAuth:!0}},{path:"/academy-registration/:academyId/:programId",name:"AcademyRegistration",component:()=>Se(()=>import("./AcademyRegistration-Brmi5f_F.js"),__vite__mapDeps([33,34])),meta:{requiresAuth:!0}},{path:"/my-bookings",name:"MyBookings",component:()=>Se(()=>import("./MyBookings-T6njAyF0.js"),__vite__mapDeps([35,25,36])),meta:{requiresAuth:!0}},{path:"/calendar",name:"Calendar",component:()=>Se(()=>import("./Calendar-C7uGQjXV.js"),__vite__mapDeps([37,38])),meta:{requiresAuth:!0}},{path:"/analytics",name:"Analytics",component:()=>Se(()=>import("./Analytics-BJRI8fdP.js"),__vite__mapDeps([39,40])),meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:JZ,meta:{requiresAuth:!0}},{path:"/news",name:"News",component:()=>Se(()=>import("./News-CevX4Ze7.js"),__vite__mapDeps([41,42])),meta:{requiresAuth:!0}},{path:"/complaints",name:"Complaints",component:()=>Se(()=>import("./Complaints-B5xnRQ5q.js"),__vite__mapDeps([43,44,7,8,45])),meta:{requiresAuth:!0}},{path:"/complaints/:id",name:"ComplaintChat",component:()=>Se(()=>import("./ComplaintChat-CpTZ76T-.js"),__vite__mapDeps([46,44,47])),meta:{requiresAuth:!0}},{path:"/violations",name:"Violations",component:()=>Se(()=>import("./ViolationsPage-CvInbAj4.js"),__vite__mapDeps([48,49])),meta:{requiresAuth:!0}},{path:"/violation-chat/:id",name:"ViolationChat",component:()=>Se(()=>import("./ViolationChat-Cp1SZEtY.js"),__vite__mapDeps([50,51])),meta:{requiresAuth:!0}},{path:"/service-booking-chat/:id",name:"ServiceBookingChat",component:()=>Se(()=>import("./ServiceBookingChat-hQ4N7IAC.js"),__vite__mapDeps([52,51])),meta:{requiresAuth:!0}},{path:"/smart-devices",name:"SmartDevices",component:()=>Se(()=>import("./SmartDevices-DI2N7h2F.js"),__vite__mapDeps([53,54])),meta:{requiresAuth:!0}},{path:"/gate-control",name:"GateControl",component:()=>Se(()=>import("./GateControlPage-53WG7yQP.js"),__vite__mapDeps([55,3,56])),meta:{requiresAuth:!0}},{path:"/support",name:"AuthSupport",component:ZJ,meta:{requiresAuth:!0}},{path:"/support-chat",name:"SupportChat",component:cy,meta:{requiresAuth:!0}},{path:"/support-chat/:id",name:"SupportChatById",component:cy,meta:{requiresAuth:!0}},{path:"/request-chat/:id",name:"RequestChat",component:()=>Se(()=>import("./RequestChat-gSlj0Mn2.js"),__vite__mapDeps([57,51])),meta:{requiresAuth:!0}},{path:"/request-category/:id",name:"RequestCategoryDetails",component:()=>Se(()=>import("./RequestCategoryDetails-icY-ty28.js"),__vite__mapDeps([15,13,16])),meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",redirect:"/onboarding"}],ac=VI({history:fI(),routes:$X,scrollBehavior(){return{top:0}}});async function VX(t,e,n,r,s,o){if(e.path==="/onboarding"&&n.path&&n.path.startsWith("/register")){console.log("Allowing navigation to onboarding from registration"),r(),s();return}if(o&&!t)r("/onboarding"),s();else if(!o&&t&&e.path==="/onboarding")!n.path||!n.path.startsWith("/register")?(r("/home"),s()):(r(),s());else if(t&&o)try{const[i,a]=await Promise.allSettled([Ee.getDoc(`users/${t.uid}`),FN(t.uid,e.path)]);if(i.status==="fulfilled"&&i.value.exists()){const c=i.value.data();if(!c.isProfileComplete)if(c.firstName&&c.lastName&&c.mobile&&c.email){console.log("Profile has required fields but marked incomplete, fixing...");const{markProfileComplete:f}=await Se(async()=>{const{markProfileComplete:p}=await import("./firestore-Dh8ZU0QG.js");return{markProfileComplete:p}},[]);try{await f(t.uid),console.log("Profile marked as complete in navigation guard")}catch(p){console.error("Error marking profile complete:",p)}}else{console.log("Profile incomplete and missing required fields, redirecting to onboarding"),r("/onboarding"),s();return}}if(a.status==="fulfilled"&&!a.value){console.log("User is suspended and cannot access this route:",e.path);try{const c=await wv(t.uid);c.isSuspended&&window.dispatchEvent(new CustomEvent("showSuspensionMessage",{detail:{suspensionDetails:c.suspensionDetails,attemptedRoute:e.path}}))}catch(c){console.error("Error checking suspension details:",c)}r("/home"),s();return}r(),s()}catch(i){console.error("Error in auth state processing:",i),r(),s()}else r(),s()}ac.beforeEach(async(t,e,n)=>{console.log("Navigation guard - to:",t.path,"from:",e.path);const r=t.meta.requiresAuth;if(t.path==="/"){console.log("Navigation guard: Handling root route");try{await new Promise(o=>setTimeout(o,100));const s=await yt.getCurrentUser();if(console.log("Navigation guard: Current user check result:",s?"authenticated":"not authenticated"),s){console.log("Navigation guard: User authenticated, redirecting to /home"),n("/home");return}else{console.log("Navigation guard: User not authenticated, redirecting to /onboarding"),n("/onboarding");return}}catch(s){console.error("Navigation guard: Error checking auth state:",s),n("/onboarding");return}}if(!r){n();return}return new Promise(s=>{let o=!1;const i=setTimeout(()=>{o||(console.log("Auth check timeout, allowing navigation"),o=!0,n(),s())},3e3);(async()=>{try{await new Promise(u=>setTimeout(u,500));const c=await yt.getCurrentUser();if(o)return;console.log("Current user from authService:",c?"authenticated":"not authenticated"),clearTimeout(i),o=!0,VX(c,t,e,n,s,r)}catch(c){if(o)return;console.error("Error getting current user:",c),clearTimeout(i),o=!0,n(),s()}})()})});const vte=Object.freeze(Object.defineProperty({__proto__:null,default:ac},Symbol.toStringTag,{value:"Module"}));async function jX(t,e){const n=t(uO);n.use(Op,e);const r=typeof op=="function"?await op({}):op;n.use(r);const s=Mi(typeof ac=="function"?await ac({store:r}):ac);return r.use(({store:o})=>{o.router=s}),{app:n,store:r,router:s}}function UX(t,e,n){let r;function s(){r!==void 0&&(Mp.remove(r),r=void 0)}return Qr(()=>{t.value===!0&&s()}),{removeFromHistory:s,addToHistory(){r={condition:()=>n.value===!0,handler:e},Mp.add(r)}}}function FX(){let t=null;const e=It();function n(){t!==null&&(clearTimeout(t),t=null)}return mh(n),Qr(n),{removeTimeout:n,registerTimeout(r,s){n(),xk(e)===!1&&(t=setTimeout(()=>{t=null,r()},s))}}}function BX(){let t;const e=It();function n(){t=void 0}return mh(n),Qr(n),{removeTick:n,registerTick(r){t=r,fn(()=>{t===r&&(xk(e)===!1&&t(),t=void 0)})}}}const qX={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},HX=["beforeShow","show","beforeHide","hide"];function zX({showing:t,canShow:e,hideOnRouteChange:n,handleShow:r,handleHide:s,processOnMount:o}){const i=It(),{props:a,emit:c,proxy:u}=i;let h;function f(S){t.value===!0?C(S):p(S)}function p(S){if(a.disable===!0||S?.qAnchorHandled===!0||e!==void 0&&e(S)!==!0)return;const x=a["onUpdate:modelValue"]!==void 0;x===!0&&(c("update:modelValue",!0),h=S,fn(()=>{h===S&&(h=void 0)})),(a.modelValue===null||x===!1)&&g(S)}function g(S){t.value!==!0&&(t.value=!0,c("beforeShow",S),r!==void 0?r(S):c("show",S))}function C(S){if(a.disable===!0)return;const x=a["onUpdate:modelValue"]!==void 0;x===!0&&(c("update:modelValue",!1),h=S,fn(()=>{h===S&&(h=void 0)})),(a.modelValue===null||x===!1)&&T(S)}function T(S){t.value!==!1&&(t.value=!1,c("beforeHide",S),s!==void 0?s(S):c("hide",S))}function v(S){a.disable===!0&&S===!0?a["onUpdate:modelValue"]!==void 0&&c("update:modelValue",!1):S===!0!==t.value&&(S===!0?g:T)(h)}Ve(()=>a.modelValue,v),n!==void 0&&Dk(i)===!0&&Ve(()=>u.$route.fullPath,()=>{n.value===!0&&t.value===!0&&C()}),o===!0&&ft(()=>{v(a.modelValue)});const _={show:p,hide:C,toggle:f};return Object.assign(u,_),_}const WX={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function GX(t,e=()=>{},n=()=>{}){return{transitionProps:G(()=>{const r=`q-transition--${t.transitionShow||e()}`,s=`q-transition--${t.transitionHide||n()}`;return{appear:!0,enterFromClass:`${r}-enter-from`,enterActiveClass:`${r}-enter-active`,enterToClass:`${r}-enter-to`,leaveFromClass:`${s}-leave-from`,leaveActiveClass:`${s}-leave-active`,leaveToClass:`${s}-leave-to`}}),transitionStyle:G(()=>`--q-transition-duration: ${t.transitionDuration}ms`)}}let gi=[],Mc=[];function eS(t){Mc=Mc.filter(e=>e!==t)}function KX(t){eS(t),Mc.push(t)}function uy(t){eS(t),Mc.length===0&&gi.length!==0&&(gi[gi.length-1](),gi=[])}function Tv(t){Mc.length===0?t():gi.push(t)}function QX(t){gi=gi.filter(e=>e!==t)}const yd=[];function wte(t){return yd.find(e=>e.contentEl!==null&&e.contentEl.contains(t))}function YX(t,e){do{if(t.$options.name==="QMenu"){if(t.hide(e),t.$props.separateClosePopup===!0)return od(t)}else if(t.__qPortal===!0){const n=od(t);return n?.$options.name==="QPopupProxy"?(t.hide(e),n):t}t=od(t)}while(t!=null)}function yte(t,e,n){for(;n!==0&&t!==void 0&&t!==null;){if(t.__qPortal===!0){if(n--,t.$options.name==="QMenu"){t=YX(t,e);continue}t.hide(e)}t=od(t)}}const ZX=An({name:"QPortal",setup(t,{slots:e}){return()=>e.default()}});function JX(t){for(t=t.parent;t!=null;){if(t.type.name==="QGlobalDialog")return!0;if(t.type.name==="QDialog"||t.type.name==="QMenu")return!1;t=t.parent}return!1}function XX(t,e,n,r){const s=K(!1),o=K(!1);let i=null;const a={},c=r==="dialog"&&JX(t);function u(f){if(f===!0){uy(a),o.value=!0;return}o.value=!1,s.value===!1&&(c===!1&&i===null&&(i=Eh(!1,r)),s.value=!0,yd.push(t.proxy),KX(a))}function h(f){if(o.value=!1,f!==!0)return;uy(a),s.value=!1;const p=yd.indexOf(t.proxy);p!==-1&&yd.splice(p,1),i!==null&&(om(i),i=null)}return rr(()=>{h(!0)}),t.proxy.__qPortal=!0,Ha(t.proxy,"contentEl",()=>e.value),{showPortal:u,hidePortal:h,portalIsActive:s,portalIsAccessible:o,renderPortal:()=>c===!0?n():s.value===!0?[ue(bp,{to:i},ue(ZX,n))]:void 0}}const _te=[Element,String],eee=[null,document,document.body,document.scrollingElement,document.documentElement];function kte(t,e){let n=P3(e);if(n===void 0){if(t==null)return window;n=t.closest(".scroll,.scroll-y,.overflow-auto")}return eee.includes(n)?window:n}function tee(t){return t===window?window.pageYOffset||window.scrollY||document.body.scrollTop||0:t.scrollTop}function nee(t){return t===window?window.pageXOffset||window.scrollX||document.body.scrollLeft||0:t.scrollLeft}let Wu;function bte(){if(Wu!==void 0)return Wu;const t=document.createElement("p"),e=document.createElement("div");Hp(t,{width:"100%",height:"200px"}),Hp(e,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);const n=t.offsetWidth;e.style.overflow="scroll";let r=t.offsetWidth;return n===r&&(r=e.clientWidth),e.remove(),Wu=n-r,Wu}function ree(t,e=!0){return!t||t.nodeType!==Node.ELEMENT_NODE?!1:e?t.scrollHeight>t.clientHeight&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-y"])):t.scrollWidth>t.clientWidth&&(t.classList.contains("scroll")||t.classList.contains("overflow-auto")||["auto","scroll"].includes(window.getComputedStyle(t)["overflow-x"]))}let Il=0,up,dp,jl,hp=!1,dy,hy,fy,oi=null;function see(t){oee(t)&&kr(t)}function oee(t){if(t.target===document.body||t.target.classList.contains("q-layout__backdrop"))return!0;const e=wP(t),n=t.shiftKey&&!t.deltaX,r=!n&&Math.abs(t.deltaX)<=Math.abs(t.deltaY),s=n||r?t.deltaY:t.deltaX;for(let o=0;o<e.length;o++){const i=e[o];if(ree(i,r))return r?s<0&&i.scrollTop===0?!0:s>0&&i.scrollTop+i.clientHeight===i.scrollHeight:s<0&&i.scrollLeft===0?!0:s>0&&i.scrollLeft+i.clientWidth===i.scrollWidth}return!0}function py(t){t.target===document&&(document.scrollingElement.scrollTop=document.scrollingElement.scrollTop)}function Gu(t){hp!==!0&&(hp=!0,requestAnimationFrame(()=>{hp=!1;const{height:e}=t.target,{clientHeight:n,scrollTop:r}=document.scrollingElement;(jl===void 0||e!==window.innerHeight)&&(jl=n-e,document.scrollingElement.scrollTop=r),r>jl&&(document.scrollingElement.scrollTop-=Math.ceil((r-jl)/8))}))}function gy(t){const e=document.body,n=window.visualViewport!==void 0;if(t==="add"){const{overflowY:r,overflowX:s}=window.getComputedStyle(e);up=nee(window),dp=tee(window),dy=e.style.left,hy=e.style.top,fy=window.location.href,e.style.left=`-${up}px`,e.style.top=`-${dp}px`,s!=="hidden"&&(s==="scroll"||e.scrollWidth>window.innerWidth)&&e.classList.add("q-body--force-scrollbar-x"),r!=="hidden"&&(r==="scroll"||e.scrollHeight>window.innerHeight)&&e.classList.add("q-body--force-scrollbar-y"),e.classList.add("q-body--prevent-scroll"),document.qScrollPrevented=!0,tn.is.ios===!0&&(n===!0?(window.scrollTo(0,0),window.visualViewport.addEventListener("resize",Gu,_r.passiveCapture),window.visualViewport.addEventListener("scroll",Gu,_r.passiveCapture),window.scrollTo(0,0)):window.addEventListener("scroll",py,_r.passiveCapture))}tn.is.desktop===!0&&tn.is.mac===!0&&window[`${t}EventListener`]("wheel",see,_r.notPassive),t==="remove"&&(tn.is.ios===!0&&(n===!0?(window.visualViewport.removeEventListener("resize",Gu,_r.passiveCapture),window.visualViewport.removeEventListener("scroll",Gu,_r.passiveCapture)):window.removeEventListener("scroll",py,_r.passiveCapture)),e.classList.remove("q-body--prevent-scroll"),e.classList.remove("q-body--force-scrollbar-x"),e.classList.remove("q-body--force-scrollbar-y"),document.qScrollPrevented=!1,e.style.left=dy,e.style.top=hy,window.location.href===fy&&window.scrollTo(up,dp),jl=void 0)}function Dg(t){let e="add";if(t===!0){if(Il++,oi!==null){clearTimeout(oi),oi=null;return}if(Il>1)return}else{if(Il===0||(Il--,Il>0))return;if(e="remove",tn.is.ios===!0&&tn.is.nativeMobile===!0){oi!==null&&clearTimeout(oi),oi=setTimeout(()=>{gy(e),oi=null},100);return}}gy(e)}function iee(){let t;return{preventBodyScroll(e){e!==t&&(t!==void 0||e===!0)&&(t=e,Dg(e))}}}const bi=[];let Fa;function aee(t){Fa=t.keyCode===27}function lee(){Fa===!0&&(Fa=!1)}function cee(t){Fa===!0&&(Fa=!1,mc(t,27)===!0&&bi[bi.length-1](t))}function tS(t){window[t]("keydown",aee),window[t]("blur",lee),window[t]("keyup",cee),Fa=!1}function uee(t){tn.is.desktop===!0&&(bi.push(t),bi.length===1&&tS("addEventListener"))}function my(t){const e=bi.indexOf(t);e!==-1&&(bi.splice(e,1),bi.length===0&&tS("removeEventListener"))}const Ci=[];function nS(t){Ci[Ci.length-1](t)}function dee(t){tn.is.desktop===!0&&(Ci.push(t),Ci.length===1&&document.body.addEventListener("focusin",nS))}function vy(t){const e=Ci.indexOf(t);e!==-1&&(Ci.splice(e,1),Ci.length===0&&document.body.removeEventListener("focusin",nS))}let Ku=0;const hee={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},wy={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]},fee=An({name:"QDialog",inheritAttrs:!1,props:{...qX,...WX,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,backdropFilter:String,position:{type:String,default:"standard",validator:t=>["standard","top","bottom","left","right"].includes(t)}},emits:[...HX,"shake","click","escapeKey"],setup(t,{slots:e,emit:n,attrs:r}){const s=It(),o=K(null),i=K(!1),a=K(!1);let c=null,u=null,h,f;const p=G(()=>t.persistent!==!0&&t.noRouteDismiss!==!0&&t.seamless!==!0),{preventBodyScroll:g}=iee(),{registerTimeout:C}=FX(),{registerTick:T,removeTick:v}=BX(),{transitionProps:_,transitionStyle:S}=GX(t,()=>wy[t.position][0],()=>wy[t.position][1]),x=G(()=>S.value+(t.backdropFilter!==void 0?`;backdrop-filter:${t.backdropFilter};-webkit-backdrop-filter:${t.backdropFilter}`:"")),{showPortal:R,hidePortal:D,portalIsAccessible:L,renderPortal:b}=XX(s,o,lt,"dialog"),{hide:A}=zX({showing:i,hideOnRouteChange:p,handleShow:U,handleHide:Z,processOnMount:!0}),{addToHistory:y,removeFromHistory:P}=UX(i,A,p),E=G(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${t.maximized===!0?"maximized":"minimized"} q-dialog__inner--${t.position} ${hee[t.position]}`+(a.value===!0?" q-dialog__inner--animating":"")+(t.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(t.fullHeight===!0?" q-dialog__inner--fullheight":"")+(t.square===!0?" q-dialog__inner--square":"")),w=G(()=>i.value===!0&&t.seamless!==!0),k=G(()=>t.autoClose===!0?{onClick:Q}:{}),$=G(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${w.value===!0?"modal":"seamless"}`,r.class]);Ve(()=>t.maximized,De=>{i.value===!0&&ne(De)}),Ve(w,De=>{g(De),De===!0?(dee(Ye),uee(H)):(vy(Ye),my(H))});function U(De){y(),u=t.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,ne(t.maximized),R(),a.value=!0,t.noFocus!==!0?(document.activeElement?.blur(),T(ee)):v(),C(()=>{if(s.proxy.$q.platform.is.ios===!0){if(t.seamless!==!0&&document.activeElement){const{top:se,bottom:ke}=document.activeElement.getBoundingClientRect(),{innerHeight:Ce}=window,ye=window.visualViewport!==void 0?window.visualViewport.height:Ce;se>0&&ke>ye/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-ye,ke>=Ce?1/0:Math.ceil(document.scrollingElement.scrollTop+ke-ye/2))),document.activeElement.scrollIntoView()}f=!0,o.value.click(),f=!1}R(!0),a.value=!1,n("show",De)},t.transitionDuration)}function Z(De){v(),P(),Y(!0),a.value=!0,D(),u!==null&&(((De?.type.indexOf("key")===0?u.closest('[tabindex]:not([tabindex^="-"])'):void 0)||u).focus(),u=null),C(()=>{D(!0),a.value=!1,n("hide",De)},t.transitionDuration)}function ee(De){Tv(()=>{let se=o.value;if(se!==null){if(De!==void 0){const ke=se.querySelector(De);if(ke!==null){ke.focus({preventScroll:!0});return}}se.contains(document.activeElement)!==!0&&(se=se.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||se.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||se.querySelector("[autofocus], [data-autofocus]")||se,se.focus({preventScroll:!0}))}})}function N(De){De&&typeof De.focus=="function"?De.focus({preventScroll:!0}):ee(),n("shake");const se=o.value;se!==null&&(se.classList.remove("q-animate--scale"),se.classList.add("q-animate--scale"),c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,o.value!==null&&(se.classList.remove("q-animate--scale"),ee())},170))}function H(){t.seamless!==!0&&(t.persistent===!0||t.noEscDismiss===!0?t.maximized!==!0&&t.noShake!==!0&&N():(n("escapeKey"),A()))}function Y(De){c!==null&&(clearTimeout(c),c=null),(De===!0||i.value===!0)&&(ne(!1),t.seamless!==!0&&(g(!1),vy(Ye),my(H))),De!==!0&&(u=null)}function ne(De){De===!0?h!==!0&&(Ku<1&&document.body.classList.add("q-body--dialog"),Ku++,h=!0):h===!0&&(Ku<2&&document.body.classList.remove("q-body--dialog"),Ku--,h=!1)}function Q(De){f!==!0&&(A(De),n("click",De))}function we(De){t.persistent!==!0&&t.noBackdropDismiss!==!0?A(De):t.noShake!==!0&&N()}function Ye(De){t.allowFocusOutside!==!0&&L.value===!0&&I3(o.value,De.target)!==!0&&ee('[tabindex]:not([tabindex="-1"])')}Object.assign(s.proxy,{focus:ee,shake:N,__updateRefocusTarget(De){u=De||null}}),Qr(Y);function lt(){return ue("div",{role:"dialog","aria-modal":w.value===!0?"true":"false",...r,class:$.value},[ue(Lo,{name:"q-transition--fade",appear:!0},()=>w.value===!0?ue("div",{class:"q-dialog__backdrop fixed-full",style:x.value,"aria-hidden":"true",tabindex:-1,onClick:we}):null),ue(Lo,_.value,()=>i.value===!0?ue("div",{ref:o,class:E.value,style:S.value,tabindex:-1,...k.value},Vr(e.default)):null)])}return b}}),ji={dark:{type:Boolean,default:null}};function Ui(t,e){return G(()=>t.dark===null?e.dark.isActive:t.dark)}const pee=An({name:"QCard",props:{...ji,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(t,{slots:e}){const{proxy:{$q:n}}=It(),r=Ui(t,n),s=G(()=>"q-card"+(r.value===!0?" q-card--dark q-dark":"")+(t.bordered===!0?" q-card--bordered":"")+(t.square===!0?" q-card--square no-border-radius":"")+(t.flat===!0?" q-card--flat no-shadow":""));return()=>ue(t.tag,{class:s.value},Vr(e.default))}}),Rl=An({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(t,{slots:e}){const n=G(()=>`q-card__section q-card__section--${t.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>ue(t.tag,{class:n.value},Vr(e.default))}}),gee=An({name:"QCardActions",props:{...Ik,vertical:Boolean},setup(t,{slots:e}){const n=Rk(t),r=G(()=>`q-card__actions ${n.value} q-card__actions--${t.vertical===!0?"vert column":"horiz row"}`);return()=>ue("div",{class:r.value},Vr(e.default))}}),mee={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},fp={xs:2,sm:4,md:8,lg:16,xl:24},yy=An({name:"QSeparator",props:{...ji,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(t){const e=It(),n=Ui(t,e.proxy.$q),r=G(()=>t.vertical===!0?"vertical":"horizontal"),s=G(()=>` q-separator--${r.value}`),o=G(()=>t.inset!==!1?`${s.value}-${mee[t.inset]}`:""),i=G(()=>`q-separator${s.value}${o.value}`+(t.color!==void 0?` bg-${t.color}`:"")+(n.value===!0?" q-separator--dark":"")),a=G(()=>{const c={};if(t.size!==void 0&&(c[t.vertical===!0?"width":"height"]=t.size),t.spaced!==!1){const u=t.spaced===!0?`${fp.md}px`:t.spaced in fp?`${fp[t.spaced]}px`:t.spaced,h=t.vertical===!0?["Left","Right"]:["Top","Bottom"];c[`margin${h[0]}`]=c[`margin${h[1]}`]=u}return c});return()=>ue("hr",{class:i.value,style:a.value,"aria-orientation":r.value})}});let pp,Qu=0;const yn=new Array(256);for(let t=0;t<256;t++)yn[t]=(t+256).toString(16).substring(1);const vee=(()=>{const t=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(t!==void 0){if(t.randomBytes!==void 0)return t.randomBytes;if(t.getRandomValues!==void 0)return e=>{const n=new Uint8Array(e);return t.getRandomValues(n),n}}return e=>{const n=[];for(let r=e;r>0;r--)n.push(Math.floor(Math.random()*256));return n}})(),_y=4096;function xg(){(pp===void 0||Qu+16>_y)&&(Qu=0,pp=vee(_y));const t=Array.prototype.slice.call(pp,Qu,Qu+=16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,yn[t[0]]+yn[t[1]]+yn[t[2]]+yn[t[3]]+"-"+yn[t[4]]+yn[t[5]]+"-"+yn[t[6]]+yn[t[7]]+"-"+yn[t[8]]+yn[t[9]]+"-"+yn[t[10]]+yn[t[11]]+yn[t[12]]+yn[t[13]]+yn[t[14]]+yn[t[15]]}function wee(t){return t??null}function ky(t,e){return t??(e===!0?`f_${xg()}`:null)}function yee({getValue:t,required:e=!0}={}){if(No.value===!0){const n=K(t!==void 0?wee(t()):null);return e===!0&&n.value===null&&ft(()=>{n.value=`f_${xg()}`}),t!==void 0&&Ve(t,r=>{n.value=ky(r,e)}),n}return t!==void 0?G(()=>ky(t(),e)):K(`f_${xg()}`)}const by=/^on[A-Z]/;function _ee(){const{attrs:t,vnode:e}=It(),n={listeners:K({}),attributes:K({})};function r(){const s={},o={};for(const i in t)i!=="class"&&i!=="style"&&by.test(i)===!1&&(s[i]=t[i]);for(const i in e.props)by.test(i)===!0&&(o[i]=e.props[i]);n.attributes.value=s,n.listeners.value=o}return __(r),r(),n}function kee({validate:t,resetValidation:e,requiresQForm:n}){const r=tr(LP,!1);if(r!==!1){const{props:s,proxy:o}=It();Object.assign(o,{validate:t,resetValidation:e}),Ve(()=>s.disable,i=>{i===!0?(typeof e=="function"&&e(),r.unbindComponent(o)):r.bindComponent(o)}),ft(()=>{s.disable!==!0&&r.bindComponent(o)}),Qr(()=>{s.disable!==!0&&r.unbindComponent(o)})}else n===!0&&console.error("Parent QForm not found on useFormChild()!")}const Cy=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,Ey=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Sy=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,Yu=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,Zu=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,gp={date:t=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(t),time:t=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(t),fulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(t),timeOrFulltime:t=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(t),email:t=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t),hexColor:t=>Cy.test(t),hexaColor:t=>Ey.test(t),hexOrHexaColor:t=>Sy.test(t),rgbColor:t=>Yu.test(t),rgbaColor:t=>Zu.test(t),rgbOrRgbaColor:t=>Yu.test(t)||Zu.test(t),hexOrRgbColor:t=>Cy.test(t)||Yu.test(t),hexaOrRgbaColor:t=>Ey.test(t)||Zu.test(t),anyColor:t=>Sy.test(t)||Yu.test(t)||Zu.test(t)},bee=[!0,!1,"ondemand"],Cee={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],default:!1,validator:t=>bee.includes(t)}};function Eee(t,e){const{props:n,proxy:r}=It(),s=K(!1),o=K(null),i=K(!1);kee({validate:T,resetValidation:C});let a=0,c;const u=G(()=>n.rules!==void 0&&n.rules!==null&&n.rules.length!==0),h=G(()=>n.disable!==!0&&u.value===!0&&e.value===!1),f=G(()=>n.error===!0||s.value===!0),p=G(()=>typeof n.errorMessage=="string"&&n.errorMessage.length!==0?n.errorMessage:o.value);Ve(()=>n.modelValue,()=>{i.value=!0,h.value===!0&&n.lazyRules===!1&&v()});function g(){n.lazyRules!=="ondemand"&&h.value===!0&&i.value===!0&&v()}Ve(()=>n.reactiveRules,_=>{_===!0?c===void 0&&(c=Ve(()=>n.rules,g,{immediate:!0,deep:!0})):c!==void 0&&(c(),c=void 0)},{immediate:!0}),Ve(()=>n.lazyRules,g),Ve(t,_=>{_===!0?i.value=!0:h.value===!0&&n.lazyRules!=="ondemand"&&v()});function C(){a++,e.value=!1,i.value=!1,s.value=!1,o.value=null,v.cancel()}function T(_=n.modelValue){if(n.disable===!0||u.value===!1)return!0;const S=++a,x=e.value!==!0?()=>{i.value=!0}:()=>{},R=(L,b)=>{L===!0&&x(),s.value=L,o.value=b||null,e.value=!1},D=[];for(let L=0;L<n.rules.length;L++){const b=n.rules[L];let A;if(typeof b=="function"?A=b(_,gp):typeof b=="string"&&gp[b]!==void 0&&(A=gp[b](_)),A===!1||typeof A=="string")return R(!0,A),!1;A!==!0&&A!==void 0&&D.push(A)}return D.length===0?(R(!1),!0):(e.value=!0,Promise.all(D).then(L=>{if(L===void 0||Array.isArray(L)===!1||L.length===0)return S===a&&R(!1),!0;const b=L.find(A=>A===!1||typeof A=="string");return S===a&&R(b!==void 0,b),b===void 0},L=>(S===a&&(console.error(L),R(!0)),!1)))}const v=nk(T,0);return Qr(()=>{c?.(),v.cancel()}),Object.assign(r,{resetValidation:C,validate:T}),Ha(r,"hasError",()=>f.value),{isDirtyModel:i,hasRules:u,hasError:f,errorMessage:p,validate:T,resetValidation:C}}function Lg(t){return t!=null&&(""+t).length!==0}const See={...ji,...Cee,label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String},Aee={...See,maxlength:[Number,String]},Tee=["update:modelValue","clear","focus","blur"];function Pee({requiredForAttr:t=!0,tagProp:e,changeEvent:n=!1}={}){const{props:r,proxy:s}=It(),o=Ui(r,s.$q),i=yee({required:t,getValue:()=>r.for});return{requiredForAttr:t,changeEvent:n,tag:e===!0?G(()=>r.tag):{value:"label"},isDark:o,editable:G(()=>r.disable!==!0&&r.readonly!==!0),innerLoading:K(!1),focused:K(!1),hasPopupOpen:!1,splitAttrs:_ee(),targetUid:i,rootRef:K(null),targetRef:K(null),controlRef:K(null)}}function Iee(t){const{props:e,emit:n,slots:r,attrs:s,proxy:o}=It(),{$q:i}=o;let a=null;t.hasValue===void 0&&(t.hasValue=G(()=>Lg(e.modelValue))),t.emitValue===void 0&&(t.emitValue=N=>{n("update:modelValue",N)}),t.controlEvents===void 0&&(t.controlEvents={onFocusin:y,onFocusout:P}),Object.assign(t,{clearValue:E,onControlFocusin:y,onControlFocusout:P,focus:b}),t.computedCounter===void 0&&(t.computedCounter=G(()=>{if(e.counter!==!1){const N=typeof e.modelValue=="string"||typeof e.modelValue=="number"?(""+e.modelValue).length:Array.isArray(e.modelValue)===!0?e.modelValue.length:0,H=e.maxlength!==void 0?e.maxlength:e.maxValues;return N+(H!==void 0?" / "+H:"")}}));const{isDirtyModel:c,hasRules:u,hasError:h,errorMessage:f,resetValidation:p}=Eee(t.focused,t.innerLoading),g=t.floatingLabel!==void 0?G(()=>e.stackLabel===!0||t.focused.value===!0||t.floatingLabel.value===!0):G(()=>e.stackLabel===!0||t.focused.value===!0||t.hasValue.value===!0),C=G(()=>e.bottomSlots===!0||e.hint!==void 0||u.value===!0||e.counter===!0||e.error!==null),T=G(()=>e.filled===!0?"filled":e.outlined===!0?"outlined":e.borderless===!0?"borderless":e.standout?"standout":"standard"),v=G(()=>`q-field row no-wrap items-start q-field--${T.value}`+(t.fieldClass!==void 0?` ${t.fieldClass.value}`:"")+(e.rounded===!0?" q-field--rounded":"")+(e.square===!0?" q-field--square":"")+(g.value===!0?" q-field--float":"")+(S.value===!0?" q-field--labeled":"")+(e.dense===!0?" q-field--dense":"")+(e.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(t.isDark.value===!0?" q-field--dark":"")+(t.getControl===void 0?" q-field--auto-height":"")+(t.focused.value===!0?" q-field--focused":"")+(h.value===!0?" q-field--error":"")+(h.value===!0||t.focused.value===!0?" q-field--highlighted":"")+(e.hideBottomSpace!==!0&&C.value===!0?" q-field--with-bottom":"")+(e.disable===!0?" q-field--disabled":e.readonly===!0?" q-field--readonly":"")),_=G(()=>"q-field__control relative-position row no-wrap"+(e.bgColor!==void 0?` bg-${e.bgColor}`:"")+(h.value===!0?" text-negative":typeof e.standout=="string"&&e.standout.length!==0&&t.focused.value===!0?` ${e.standout}`:e.color!==void 0?` text-${e.color}`:"")),S=G(()=>e.labelSlot===!0||e.label!==void 0),x=G(()=>"q-field__label no-pointer-events absolute ellipsis"+(e.labelColor!==void 0&&h.value!==!0?` text-${e.labelColor}`:"")),R=G(()=>({id:t.targetUid.value,editable:t.editable.value,focused:t.focused.value,floatingLabel:g.value,modelValue:e.modelValue,emitValue:t.emitValue})),D=G(()=>{const N={};return t.targetUid.value&&(N.for=t.targetUid.value),e.disable===!0&&(N["aria-disabled"]="true"),N});function L(){const N=document.activeElement;let H=t.targetRef?.value;H&&(N===null||N.id!==t.targetUid.value)&&(H.hasAttribute("tabindex")===!0||(H=H.querySelector("[tabindex]")),H!==N&&H?.focus({preventScroll:!0}))}function b(){Tv(L)}function A(){QX(L);const N=document.activeElement;N!==null&&t.rootRef.value.contains(N)&&N.blur()}function y(N){a!==null&&(clearTimeout(a),a=null),t.editable.value===!0&&t.focused.value===!1&&(t.focused.value=!0,n("focus",N))}function P(N,H){a!==null&&clearTimeout(a),a=setTimeout(()=>{a=null,!(document.hasFocus()===!0&&(t.hasPopupOpen===!0||t.controlRef===void 0||t.controlRef.value===null||t.controlRef.value.contains(document.activeElement)!==!1))&&(t.focused.value===!0&&(t.focused.value=!1,n("blur",N)),H?.())})}function E(N){kr(N),i.platform.is.mobile!==!0?(t.targetRef?.value||t.rootRef.value).focus():t.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),e.type==="file"&&(t.inputRef.value.value=null),n("update:modelValue",null),t.changeEvent===!0&&n("change",null),n("clear",e.modelValue),fn(()=>{const H=c.value;p(),c.value=H})}function w(N){[13,32].includes(N.keyCode)&&E(N)}function k(){const N=[];return r.prepend!==void 0&&N.push(ue("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Ji},r.prepend())),N.push(ue("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},$())),h.value===!0&&e.noErrorIcon===!1&&N.push(Z("error",[ue(Pr,{name:i.iconSet.field.error,color:"negative"})])),e.loading===!0||t.innerLoading.value===!0?N.push(Z("inner-loading-append",r.loading!==void 0?r.loading():[ue(Ta,{color:e.color})])):e.clearable===!0&&t.hasValue.value===!0&&t.editable.value===!0&&N.push(Z("inner-clearable-append",[ue(Pr,{class:"q-field__focusable-action",name:e.clearIcon||i.iconSet.field.clear,tabindex:0,role:"button","aria-hidden":"false","aria-label":i.lang.label.clear,onKeyup:w,onClick:E})])),r.append!==void 0&&N.push(ue("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Ji},r.append())),t.getInnerAppend!==void 0&&N.push(Z("inner-append",t.getInnerAppend())),t.getControlChild!==void 0&&N.push(t.getControlChild()),N}function $(){const N=[];return e.prefix!==void 0&&e.prefix!==null&&N.push(ue("div",{class:"q-field__prefix no-pointer-events row items-center"},e.prefix)),t.getShadowControl!==void 0&&t.hasShadow.value===!0&&N.push(t.getShadowControl()),t.getControl!==void 0?N.push(t.getControl()):r.rawControl!==void 0?N.push(r.rawControl()):r.control!==void 0&&N.push(ue("div",{ref:t.targetRef,class:"q-field__native row",tabindex:-1,...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0},r.control(R.value))),S.value===!0&&N.push(ue("div",{class:x.value},Vr(r.label,e.label))),e.suffix!==void 0&&e.suffix!==null&&N.push(ue("div",{class:"q-field__suffix no-pointer-events row items-center"},e.suffix)),N.concat(Vr(r.default))}function U(){let N,H;h.value===!0?f.value!==null?(N=[ue("div",{role:"alert"},f.value)],H=`q--slot-error-${f.value}`):(N=Vr(r.error),H="q--slot-error"):(e.hideHint!==!0||t.focused.value===!0)&&(e.hint!==void 0?(N=[ue("div",e.hint)],H=`q--slot-hint-${e.hint}`):(N=Vr(r.hint),H="q--slot-hint"));const Y=e.counter===!0||r.counter!==void 0;if(e.hideBottomSpace===!0&&Y===!1&&N===void 0)return;const ne=ue("div",{key:H,class:"q-field__messages col"},N);return ue("div",{class:"q-field__bottom row items-start q-field__bottom--"+(e.hideBottomSpace!==!0?"animated":"stale"),onClick:Ji},[e.hideBottomSpace===!0?ne:ue(Lo,{name:"q-transition--field-message"},()=>ne),Y===!0?ue("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():t.computedCounter.value):null])}function Z(N,H){return H===null?null:ue("div",{key:N,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},H)}let ee=!1;return mh(()=>{ee=!0}),Qg(()=>{ee===!0&&e.autofocus===!0&&o.focus()}),e.autofocus===!0&&ft(()=>{o.focus()}),Qr(()=>{a!==null&&clearTimeout(a)}),Object.assign(o,{focus:b,blur:A}),function(){const H=t.getControl===void 0&&r.control===void 0?{...t.splitAttrs.attributes.value,"data-autofocus":e.autofocus===!0||void 0,...D.value}:D.value;return ue(t.tag.value,{ref:t.rootRef,class:[v.value,s.class],style:s.style,...H},[r.before!==void 0?ue("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Ji},r.before()):null,ue("div",{class:"q-field__inner relative-position col self-stretch"},[ue("div",{ref:t.controlRef,class:_.value,tabindex:-1,...t.controlEvents},k()),C.value===!0?U():null]),r.after!==void 0?ue("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Ji},r.after()):null])}}const Ay={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},lh={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:t=>t.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:t=>t.toLocaleLowerCase()}},rS=Object.keys(lh);rS.forEach(t=>{lh[t].regex=new RegExp(lh[t].pattern)});const Ree=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+rS.join("")+"])|(.)","g"),Ty=/[.*+?^${}()|[\]\\]/g,zt="",Dee={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function xee(t,e,n,r){let s,o,i,a,c,u;const h=K(null),f=K(g());function p(){return t.autogrow===!0||["textarea","text","search","url","tel","password"].includes(t.type)}Ve(()=>t.type+t.autogrow,T),Ve(()=>t.mask,y=>{if(y!==void 0)v(f.value,!0);else{const P=b(f.value);T(),t.modelValue!==P&&e("update:modelValue",P)}}),Ve(()=>t.fillMask+t.reverseFillMask,()=>{h.value===!0&&v(f.value,!0)}),Ve(()=>t.unmaskedValue,()=>{h.value===!0&&v(f.value)});function g(){if(T(),h.value===!0){const y=D(b(t.modelValue));return t.fillMask!==!1?A(y):y}return t.modelValue}function C(y){if(y<s.length)return s.slice(-y);let P="",E=s;const w=E.indexOf(zt);if(w!==-1){for(let k=y-E.length;k>0;k--)P+=zt;E=E.slice(0,w)+P+E.slice(w)}return E}function T(){if(h.value=t.mask!==void 0&&t.mask.length!==0&&p(),h.value===!1){a=void 0,s="",o="";return}const y=Ay[t.mask]===void 0?t.mask:Ay[t.mask],P=typeof t.fillMask=="string"&&t.fillMask.length!==0?t.fillMask.slice(0,1):"_",E=P.replace(Ty,"\\$&"),w=[],k=[],$=[];let U=t.reverseFillMask===!0,Z="",ee="";y.replace(Ree,(ne,Q,we,Ye,lt)=>{if(Ye!==void 0){const De=lh[Ye];$.push(De),ee=De.negate,U===!0&&(k.push("(?:"+ee+"+)?("+De.pattern+"+)?(?:"+ee+"+)?("+De.pattern+"+)?"),U=!1),k.push("(?:"+ee+"+)?("+De.pattern+")?")}else if(we!==void 0)Z="\\"+(we==="\\"?"":we),$.push(we),w.push("([^"+Z+"]+)?"+Z+"?");else{const De=Q!==void 0?Q:lt;Z=De==="\\"?"\\\\\\\\":De.replace(Ty,"\\\\$&"),$.push(De),w.push("([^"+Z+"]+)?"+Z+"?")}});const N=new RegExp("^"+w.join("")+"("+(Z===""?".":"[^"+Z+"]")+"+)?"+(Z===""?"":"["+Z+"]*")+"$"),H=k.length-1,Y=k.map((ne,Q)=>Q===0&&t.reverseFillMask===!0?new RegExp("^"+E+"*"+ne):Q===H?new RegExp("^"+ne+"("+(ee===""?".":ee)+"+)?"+(t.reverseFillMask===!0?"$":E+"*")):new RegExp("^"+ne));i=$,a=ne=>{const Q=N.exec(t.reverseFillMask===!0?ne:ne.slice(0,$.length+1));Q!==null&&(ne=Q.slice(1).join(""));const we=[],Ye=Y.length;for(let lt=0,De=ne;lt<Ye;lt++){const se=Y[lt].exec(De);if(se===null)break;De=De.slice(se.shift().length),we.push(...se)}return we.length!==0?we.join(""):ne},s=$.map(ne=>typeof ne=="string"?ne:zt).join(""),o=s.split(zt).join(P)}function v(y,P,E){const w=r.value,k=w.selectionEnd,$=w.value.length-k,U=b(y);P===!0&&T();const Z=D(U),ee=t.fillMask!==!1?A(Z):Z,N=f.value!==ee;w.value!==ee&&(w.value=ee),N===!0&&(f.value=ee),document.activeElement===w&&fn(()=>{if(ee===o){const Y=t.reverseFillMask===!0?o.length:0;w.setSelectionRange(Y,Y,"forward");return}if(E==="insertFromPaste"&&t.reverseFillMask!==!0){const Y=w.selectionEnd;let ne=k-1;for(let Q=c;Q<=ne&&Q<Y;Q++)s[Q]!==zt&&ne++;S.right(w,ne);return}if(["deleteContentBackward","deleteContentForward"].indexOf(E)!==-1){const Y=t.reverseFillMask===!0?k===0?ee.length>Z.length?1:0:Math.max(0,ee.length-(ee===o?0:Math.min(Z.length,$)+1))+1:k;w.setSelectionRange(Y,Y,"forward");return}if(t.reverseFillMask===!0)if(N===!0){const Y=Math.max(0,ee.length-(ee===o?0:Math.min(Z.length,$+1)));Y===1&&k===1?w.setSelectionRange(Y,Y,"forward"):S.rightReverse(w,Y)}else{const Y=ee.length-$;w.setSelectionRange(Y,Y,"backward")}else if(N===!0){const Y=Math.max(0,s.indexOf(zt),Math.min(Z.length,k)-1);S.right(w,Y)}else{const Y=k-1;S.right(w,Y)}});const H=t.unmaskedValue===!0?b(ee):ee;String(t.modelValue)!==H&&(t.modelValue!==null||H!=="")&&n(H,!0)}function _(y,P,E){const w=D(b(y.value));P=Math.max(0,s.indexOf(zt),Math.min(w.length,P)),c=P,y.setSelectionRange(P,E,"forward")}const S={left(y,P){const E=s.slice(P-1).indexOf(zt)===-1;let w=Math.max(0,P-1);for(;w>=0;w--)if(s[w]===zt){P=w,E===!0&&P++;break}if(w<0&&s[P]!==void 0&&s[P]!==zt)return S.right(y,0);P>=0&&y.setSelectionRange(P,P,"backward")},right(y,P){const E=y.value.length;let w=Math.min(E,P+1);for(;w<=E;w++)if(s[w]===zt){P=w;break}else s[w-1]===zt&&(P=w);if(w>E&&s[P-1]!==void 0&&s[P-1]!==zt)return S.left(y,E);y.setSelectionRange(P,P,"forward")},leftReverse(y,P){const E=C(y.value.length);let w=Math.max(0,P-1);for(;w>=0;w--)if(E[w-1]===zt){P=w;break}else if(E[w]===zt&&(P=w,w===0))break;if(w<0&&E[P]!==void 0&&E[P]!==zt)return S.rightReverse(y,0);P>=0&&y.setSelectionRange(P,P,"backward")},rightReverse(y,P){const E=y.value.length,w=C(E),k=w.slice(0,P+1).indexOf(zt)===-1;let $=Math.min(E,P+1);for(;$<=E;$++)if(w[$-1]===zt){P=$,P>0&&k===!0&&P--;break}if($>E&&w[P-1]!==void 0&&w[P-1]!==zt)return S.leftReverse(y,E);y.setSelectionRange(P,P,"forward")}};function x(y){e("click",y),u=void 0}function R(y){if(e("keydown",y),sk(y)===!0||y.altKey===!0)return;const P=r.value,E=P.selectionStart,w=P.selectionEnd;if(y.shiftKey||(u=void 0),y.keyCode===37||y.keyCode===39){y.shiftKey&&u===void 0&&(u=P.selectionDirection==="forward"?E:w);const k=S[(y.keyCode===39?"right":"left")+(t.reverseFillMask===!0?"Reverse":"")];if(y.preventDefault(),k(P,u===E?w:E),y.shiftKey){const $=P.selectionStart;P.setSelectionRange(Math.min(u,$),Math.max(u,$),"forward")}}else y.keyCode===8&&t.reverseFillMask!==!0&&E===w?(S.left(P,E),P.setSelectionRange(P.selectionStart,w,"backward")):y.keyCode===46&&t.reverseFillMask===!0&&E===w&&(S.rightReverse(P,w),P.setSelectionRange(E,P.selectionEnd,"forward"))}function D(y){if(y==null||y==="")return"";if(t.reverseFillMask===!0)return L(y);const P=i;let E=0,w="";for(let k=0;k<P.length;k++){const $=y[E],U=P[k];if(typeof U=="string")w+=U;else if($!==void 0&&U.regex.test($))w+=U.transform!==void 0?U.transform($):$,E++;else return w}return w}function L(y){const P=i,E=s.indexOf(zt);let w=y.length-1,k="";for(let $=P.length-1;$>=0&&w!==-1;$--){const U=P[$];let Z=y[w];if(typeof U=="string")k=U+k;else if(Z!==void 0&&U.regex.test(Z))do k=(U.transform!==void 0?U.transform(Z):Z)+k,w--,Z=y[w];while(E===$&&Z!==void 0&&U.regex.test(Z));else return k}return k}function b(y){return typeof y!="string"||a===void 0?typeof y=="number"?a(""+y):y:a(y)}function A(y){return o.length-y.length<=0?y:t.reverseFillMask===!0&&y.length!==0?o.slice(0,-y.length)+y:y+o.slice(y.length)}return{innerValue:f,hasMask:h,moveCursorForPaste:_,updateMaskValue:v,onMaskedKeydown:R,onMaskedClick:x}}const Pv={name:String};function sS(t={}){return(e,n,r)=>{e[n](ue("input",{class:"hidden"+(r||""),...t.value}))}}function Lee(t){return G(()=>t.name||t.for)}function Mee(t,e){function n(){const r=t.modelValue;try{const s="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(o=>{s.items.add(o)}),{files:s.files}}catch{return{files:void 0}}}return G(()=>{if(t.type==="file")return n()})}const Nee=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Oee=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,$ee=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/,Vee=/[a-z0-9_ -]$/i;function jee(t){return function(n){if(n.type==="compositionend"||n.type==="change"){if(n.target.qComposing!==!0)return;n.target.qComposing=!1,t(n)}else n.type==="compositionupdate"&&n.target.qComposing!==!0&&typeof n.data=="string"&&(tn.is.firefox===!0?Vee.test(n.data)===!1:Nee.test(n.data)===!0||Oee.test(n.data)===!0||$ee.test(n.data)===!0)===!0&&(n.target.qComposing=!0)}}const Uee=An({name:"QInput",inheritAttrs:!1,props:{...Aee,...Dee,...Pv,modelValue:[String,Number,FileList],shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Tee,"paste","change","keydown","click","animationend"],setup(t,{emit:e,attrs:n}){const{proxy:r}=It(),{$q:s}=r,o={};let i=NaN,a,c,u=null,h;const f=K(null),p=Lee(t),{innerValue:g,hasMask:C,moveCursorForPaste:T,updateMaskValue:v,onMaskedKeydown:_,onMaskedClick:S}=xee(t,e,Z,f),x=Mee(t),R=G(()=>Lg(g.value)),D=jee($),L=Pee({changeEvent:!0}),b=G(()=>t.type==="textarea"||t.autogrow===!0),A=G(()=>b.value===!0||["text","search","url","tel","password"].includes(t.type)),y=G(()=>{const Q={...L.splitAttrs.listeners.value,onInput:$,onPaste:k,onChange:N,onBlur:H,onFocus:Rd};return Q.onCompositionstart=Q.onCompositionupdate=Q.onCompositionend=D,C.value===!0&&(Q.onKeydown=_,Q.onClick=S),t.autogrow===!0&&(Q.onAnimationend=U),Q}),P=G(()=>{const Q={tabindex:0,"data-autofocus":t.autofocus===!0||void 0,rows:t.type==="textarea"?6:void 0,"aria-label":t.label,name:p.value,...L.splitAttrs.attributes.value,id:L.targetUid.value,maxlength:t.maxlength,disabled:t.disable===!0,readonly:t.readonly===!0};return b.value===!1&&(Q.type=t.type),t.autogrow===!0&&(Q.rows=1),Q});Ve(()=>t.type,()=>{f.value&&(f.value.value=t.modelValue)}),Ve(()=>t.modelValue,Q=>{if(C.value===!0){if(c===!0&&(c=!1,String(Q)===i))return;v(Q)}else g.value!==Q&&(g.value=Q,t.type==="number"&&o.hasOwnProperty("value")===!0&&(a===!0?a=!1:delete o.value));t.autogrow===!0&&fn(ee)}),Ve(()=>t.autogrow,Q=>{Q===!0?fn(ee):f.value!==null&&n.rows>0&&(f.value.style.height="auto")}),Ve(()=>t.dense,()=>{t.autogrow===!0&&fn(ee)});function E(){Tv(()=>{const Q=document.activeElement;f.value!==null&&f.value!==Q&&(Q===null||Q.id!==L.targetUid.value)&&f.value.focus({preventScroll:!0})})}function w(){f.value?.select()}function k(Q){if(C.value===!0&&t.reverseFillMask!==!0){const we=Q.target;T(we,we.selectionStart,we.selectionEnd)}e("paste",Q)}function $(Q){if(!Q||!Q.target)return;if(t.type==="file"){e("update:modelValue",Q.target.files);return}const we=Q.target.value;if(Q.target.qComposing===!0){o.value=we;return}if(C.value===!0)v(we,!1,Q.inputType);else if(Z(we),A.value===!0&&Q.target===document.activeElement){const{selectionStart:Ye,selectionEnd:lt}=Q.target;Ye!==void 0&&lt!==void 0&&fn(()=>{Q.target===document.activeElement&&we.indexOf(Q.target.value)===0&&Q.target.setSelectionRange(Ye,lt)})}t.autogrow===!0&&ee()}function U(Q){e("animationend",Q),ee()}function Z(Q,we){h=()=>{u=null,t.type!=="number"&&o.hasOwnProperty("value")===!0&&delete o.value,t.modelValue!==Q&&i!==Q&&(i=Q,we===!0&&(c=!0),e("update:modelValue",Q),fn(()=>{i===Q&&(i=NaN)})),h=void 0},t.type==="number"&&(a=!0,o.value=Q),t.debounce!==void 0?(u!==null&&clearTimeout(u),o.value=Q,u=setTimeout(h,t.debounce)):h()}function ee(){requestAnimationFrame(()=>{const Q=f.value;if(Q!==null){const we=Q.parentNode.style,{scrollTop:Ye}=Q,{overflowY:lt,maxHeight:De}=s.platform.is.firefox===!0?{}:window.getComputedStyle(Q),se=lt!==void 0&&lt!=="scroll";se===!0&&(Q.style.overflowY="hidden"),we.marginBottom=Q.scrollHeight-1+"px",Q.style.height="1px",Q.style.height=Q.scrollHeight+"px",se===!0&&(Q.style.overflowY=parseInt(De,10)<Q.scrollHeight?"auto":"hidden"),we.marginBottom="",Q.scrollTop=Ye}})}function N(Q){D(Q),u!==null&&(clearTimeout(u),u=null),h?.(),e("change",Q.target.value)}function H(Q){Q!==void 0&&Rd(Q),u!==null&&(clearTimeout(u),u=null),h?.(),a=!1,c=!1,delete o.value,t.type!=="file"&&setTimeout(()=>{f.value!==null&&(f.value.value=g.value!==void 0?g.value:"")})}function Y(){return o.hasOwnProperty("value")===!0?o.value:g.value!==void 0?g.value:""}Qr(()=>{H()}),ft(()=>{t.autogrow===!0&&ee()}),Object.assign(L,{innerValue:g,fieldClass:G(()=>`q-${b.value===!0?"textarea":"input"}`+(t.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:G(()=>t.type!=="file"&&typeof t.shadowText=="string"&&t.shadowText.length!==0),inputRef:f,emitValue:Z,hasValue:R,floatingLabel:G(()=>R.value===!0&&(t.type!=="number"||isNaN(g.value)===!1)||Lg(t.displayValue)),getControl:()=>ue(b.value===!0?"textarea":"input",{ref:f,class:["q-field__native q-placeholder",t.inputClass],style:t.inputStyle,...P.value,...y.value,...t.type!=="file"?{value:Y()}:x.value}),getShadowControl:()=>ue("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(b.value===!0?"":" text-no-wrap")},[ue("span",{class:"invisible"},Y()),ue("span",t.shadowText)])});const ne=Iee(L);return Object.assign(r,{focus:E,select:w,getNativeElement:()=>f.value}),Ha(r,"nativeEl",()=>f.value),ne}});function oS(t,e){const n=K(null),r=G(()=>t.disable===!0?null:ue("span",{ref:n,class:"no-outline",tabindex:-1}));function s(o){const i=e.value;o?.qAvoidFocus!==!0&&(o?.type.indexOf("key")===0?document.activeElement!==i&&i?.contains(document.activeElement)===!0&&i.focus():n.value!==null&&(o===void 0||i?.contains(o.target)===!0)&&n.value.focus())}return{refocusTargetEl:r,refocusTarget:s}}const iS={xs:30,sm:35,md:40,lg:50,xl:60},Fee=()=>ue("svg",{key:"svg",class:"q-radio__bg absolute non-selectable",viewBox:"0 0 24 24"},[ue("path",{d:"M12,22a10,10 0 0 1 -10,-10a10,10 0 0 1 10,-10a10,10 0 0 1 10,10a10,10 0 0 1 -10,10m0,-22a12,12 0 0 0 -12,12a12,12 0 0 0 12,12a12,12 0 0 0 12,-12a12,12 0 0 0 -12,-12"}),ue("path",{class:"q-radio__check",d:"M12,6a6,6 0 0 0 -6,6a6,6 0 0 0 6,6a6,6 0 0 0 6,-6a6,6 0 0 0 -6,-6"})]),Bee=An({name:"QRadio",props:{...ji,...Uc,...Pv,modelValue:{required:!0},val:{required:!0},label:String,leftLabel:Boolean,checkedIcon:String,uncheckedIcon:String,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},emits:["update:modelValue"],setup(t,{slots:e,emit:n}){const{proxy:r}=It(),s=Ui(t,r.$q),o=Fc(t,iS),i=K(null),{refocusTargetEl:a,refocusTarget:c}=oS(t,i),u=G(()=>Ge(t.modelValue)===Ge(t.val)),h=G(()=>"q-radio cursor-pointer no-outline row inline no-wrap items-center"+(t.disable===!0?" disabled":"")+(s.value===!0?" q-radio--dark":"")+(t.dense===!0?" q-radio--dense":"")+(t.leftLabel===!0?" reverse":"")),f=G(()=>{const R=t.color!==void 0&&(t.keepColor===!0||u.value===!0)?` text-${t.color}`:"";return`q-radio__inner relative-position q-radio__inner--${u.value===!0?"truthy":"falsy"}${R}`}),p=G(()=>(u.value===!0?t.checkedIcon:t.uncheckedIcon)||null),g=G(()=>t.disable===!0?-1:t.tabindex||0),C=G(()=>{const R={type:"radio"};return t.name!==void 0&&Object.assign(R,{".checked":u.value===!0,"^checked":u.value===!0?"checked":void 0,name:t.name,value:t.val}),R}),T=sS(C);function v(R){R!==void 0&&(kr(R),c(R)),t.disable!==!0&&u.value!==!0&&n("update:modelValue",t.val,R)}function _(R){(R.keyCode===13||R.keyCode===32)&&kr(R)}function S(R){(R.keyCode===13||R.keyCode===32)&&v(R)}Object.assign(r,{set:v});const x=Fee();return()=>{const R=p.value!==null?[ue("div",{key:"icon",class:"q-radio__icon-container absolute-full flex flex-center no-wrap"},[ue(Pr,{class:"q-radio__icon",name:p.value})])]:[x];t.disable!==!0&&T(R,"unshift"," q-radio__native q-ma-none q-pa-none");const D=[ue("div",{class:f.value,style:o.value,"aria-hidden":"true"},R)];a.value!==null&&D.push(a.value);const L=t.label!==void 0?hi(e.default,[t.label]):Vr(e.default);return L!==void 0&&D.push(ue("div",{class:"q-radio__label q-anchor--skip"},L)),ue("div",{ref:i,class:h.value,tabindex:g.value,role:"radio","aria-label":t.label,"aria-checked":u.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:v,onKeydown:_,onKeyup:S},D)}}}),aS={...ji,...Uc,...Pv,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},lS=["update:modelValue"];function cS(t,e){const{props:n,slots:r,emit:s,proxy:o}=It(),{$q:i}=o,a=Ui(n,i),c=K(null),{refocusTargetEl:u,refocusTarget:h}=oS(n,c),f=Fc(n,iS),p=G(()=>n.val!==void 0&&Array.isArray(n.modelValue)),g=G(()=>{const w=Ge(n.val);return p.value===!0?n.modelValue.findIndex(k=>Ge(k)===w):-1}),C=G(()=>p.value===!0?g.value!==-1:Ge(n.modelValue)===Ge(n.trueValue)),T=G(()=>p.value===!0?g.value===-1:Ge(n.modelValue)===Ge(n.falseValue)),v=G(()=>C.value===!1&&T.value===!1),_=G(()=>n.disable===!0?-1:n.tabindex||0),S=G(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(n.disable===!0?" disabled":"")+(a.value===!0?` q-${t}--dark`:"")+(n.dense===!0?` q-${t}--dense`:"")+(n.leftLabel===!0?" reverse":"")),x=G(()=>{const w=C.value===!0?"truthy":T.value===!0?"falsy":"indet",k=n.color!==void 0&&(n.keepColor===!0||(t==="toggle"?C.value===!0:T.value!==!0))?` text-${n.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${w}${k}`}),R=G(()=>{const w={type:"checkbox"};return n.name!==void 0&&Object.assign(w,{".checked":C.value,"^checked":C.value===!0?"checked":void 0,name:n.name,value:p.value===!0?n.val:n.trueValue}),w}),D=sS(R),L=G(()=>{const w={tabindex:_.value,role:t==="toggle"?"switch":"checkbox","aria-label":n.label,"aria-checked":v.value===!0?"mixed":C.value===!0?"true":"false"};return n.disable===!0&&(w["aria-disabled"]="true"),w});function b(w){w!==void 0&&(kr(w),h(w)),n.disable!==!0&&s("update:modelValue",A(),w)}function A(){if(p.value===!0){if(C.value===!0){const w=n.modelValue.slice();return w.splice(g.value,1),w}return n.modelValue.concat([n.val])}if(C.value===!0){if(n.toggleOrder!=="ft"||n.toggleIndeterminate===!1)return n.falseValue}else if(T.value===!0){if(n.toggleOrder==="ft"||n.toggleIndeterminate===!1)return n.trueValue}else return n.toggleOrder!=="ft"?n.trueValue:n.falseValue;return n.indeterminateValue}function y(w){(w.keyCode===13||w.keyCode===32)&&kr(w)}function P(w){(w.keyCode===13||w.keyCode===32)&&b(w)}const E=e(C,v);return Object.assign(o,{toggle:b}),()=>{const w=E();n.disable!==!0&&D(w,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const k=[ue("div",{class:x.value,style:f.value,"aria-hidden":"true"},w)];u.value!==null&&k.push(u.value);const $=n.label!==void 0?hi(r.default,[n.label]):Vr(r.default);return $!==void 0&&k.push(ue("div",{class:`q-${t}__label q-anchor--skip`},$)),ue("div",{ref:c,class:S.value,...L.value,onClick:b,onKeydown:y,onKeyup:P},k)}}const qee=()=>ue("div",{key:"svg",class:"q-checkbox__bg absolute"},[ue("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[ue("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),ue("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Hee=An({name:"QCheckbox",props:aS,emits:lS,setup(t){const e=qee();function n(r,s){const o=G(()=>(r.value===!0?t.checkedIcon:s.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>o.value!==null?[ue("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[ue(Pr,{class:"q-checkbox__icon",name:o.value})])]:[e]}return cS("checkbox",n)}}),zee=An({name:"QToggle",props:{...aS,icon:String,iconColor:String},emits:lS,setup(t){function e(n,r){const s=G(()=>(n.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),o=G(()=>n.value===!0?t.iconColor:null);return()=>[ue("div",{class:"q-toggle__track"}),ue("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},s.value!==void 0?[ue(Pr,{name:s.value,color:o.value})]:void 0)]}return cS("toggle",e)}}),uS={radio:Bee,checkbox:Hee,toggle:zee},Wee=Object.keys(uS);function mp(t,e){if(typeof t=="function")return t;const n=t!==void 0?t:e;return r=>r[n]}const Gee=An({name:"QOptionGroup",props:{...ji,modelValue:{required:!0},options:{type:Array,validator:t=>t.every(cr),default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],name:String,type:{type:String,default:"radio",validator:t=>Wee.includes(t)},color:String,keepColor:Boolean,dense:Boolean,size:String,leftLabel:Boolean,inline:Boolean,disable:Boolean},emits:["update:modelValue"],setup(t,{emit:e,slots:n}){const{proxy:{$q:r}}=It(),s=Array.isArray(t.modelValue);t.type==="radio"?s===!0&&console.error("q-option-group: model should not be array"):s===!1&&console.error("q-option-group: model should be array in your case");const o=Ui(t,r),i=G(()=>uS[t.type]),a=G(()=>mp(t.optionValue,"value")),c=G(()=>mp(t.optionLabel,"label")),u=G(()=>mp(t.optionDisable,"disable")),h=G(()=>t.options.map(C=>({val:a.value(C),name:C.name===void 0?t.name:C.name,disable:t.disable||u.value(C),leftLabel:C.leftLabel===void 0?t.leftLabel:C.leftLabel,color:C.color===void 0?t.color:C.color,checkedIcon:C.checkedIcon,uncheckedIcon:C.uncheckedIcon,dark:C.dark===void 0?o.value:C.dark,size:C.size===void 0?t.size:C.size,dense:t.dense,keepColor:C.keepColor===void 0?t.keepColor:C.keepColor}))),f=G(()=>"q-option-group q-gutter-x-sm"+(t.inline===!0?" q-option-group--inline":"")),p=G(()=>{const C={role:"group"};return t.type==="radio"&&(C.role="radiogroup",t.disable===!0&&(C["aria-disabled"]="true")),C});function g(C){e("update:modelValue",C)}return()=>ue("div",{class:f.value,...p.value},t.options.map((C,T)=>{const v=n["label-"+T]!==void 0?()=>n["label-"+T](C):n.label!==void 0?()=>n.label(C):void 0;return ue("div",[ue(i.value,{label:v===void 0?c.value(C):null,modelValue:t.modelValue,"onUpdate:modelValue":g,...h.value[T]},v)])}))}}),Kee=An({name:"DialogPluginComponent",props:{...ji,title:String,message:String,prompt:Object,options:Object,progress:[Boolean,Object],html:Boolean,ok:{type:[String,Object,Boolean],default:!0},cancel:[String,Object,Boolean],focus:{type:String,default:"ok",validator:t=>["ok","cancel","none"].includes(t)},stackButtons:Boolean,color:String,cardClass:[String,Array,Object],cardStyle:[String,Array,Object]},emits:["ok","hide"],setup(t,{emit:e}){const{proxy:n}=It(),{$q:r}=n,s=Ui(t,r),o=K(null),i=K(t.prompt!==void 0?t.prompt.model:t.options!==void 0?t.options.model:void 0),a=G(()=>"q-dialog-plugin"+(s.value===!0?" q-dialog-plugin--dark q-dark":"")+(t.progress!==!1?" q-dialog-plugin--progress":"")),c=G(()=>t.color||(s.value===!0?"amber":"primary")),u=G(()=>t.progress===!1?null:cr(t.progress)===!0?{component:t.progress.spinner||Ta,props:{color:t.progress.color||c.value}}:{component:Ta,props:{color:c.value}}),h=G(()=>t.prompt!==void 0||t.options!==void 0),f=G(()=>{if(h.value!==!0)return{};const{model:$,isValid:U,items:Z,...ee}=t.prompt!==void 0?t.prompt:t.options;return ee}),p=G(()=>cr(t.ok)===!0||t.ok===!0?r.lang.label.ok:t.ok),g=G(()=>cr(t.cancel)===!0||t.cancel===!0?r.lang.label.cancel:t.cancel),C=G(()=>t.prompt!==void 0?t.prompt.isValid!==void 0&&t.prompt.isValid(i.value)!==!0:t.options!==void 0?t.options.isValid!==void 0&&t.options.isValid(i.value)!==!0:!1),T=G(()=>({color:c.value,label:p.value,ripple:!1,disable:C.value,...cr(t.ok)===!0?t.ok:{flat:!0},"data-autofocus":t.focus==="ok"&&h.value!==!0||void 0,onClick:x})),v=G(()=>({color:c.value,label:g.value,ripple:!1,...cr(t.cancel)===!0?t.cancel:{flat:!0},"data-autofocus":t.focus==="cancel"&&h.value!==!0||void 0,onClick:R}));Ve(()=>t.prompt&&t.prompt.model,L),Ve(()=>t.options&&t.options.model,L);function _(){o.value.show()}function S(){o.value.hide()}function x(){e("ok",Ge(i.value)),S()}function R(){S()}function D(){e("hide")}function L($){i.value=$}function b($){C.value!==!0&&t.prompt.type!=="textarea"&&mc($,13)===!0&&x()}function A($,U){return t.html===!0?ue(Rl,{class:$,innerHTML:U}):ue(Rl,{class:$},()=>U)}function y(){return[ue(Uee,{color:c.value,dense:!0,autofocus:!0,dark:s.value,...f.value,modelValue:i.value,"onUpdate:modelValue":L,onKeyup:b})]}function P(){return[ue(Gee,{color:c.value,options:t.options.items,dark:s.value,...f.value,modelValue:i.value,"onUpdate:modelValue":L})]}function E(){const $=[];return t.cancel&&$.push(ue(zp,v.value)),t.ok&&$.push(ue(zp,T.value)),ue(gee,{class:t.stackButtons===!0?"items-end":"",vertical:t.stackButtons,align:"right"},()=>$)}function w(){const $=[];return t.title&&$.push(A("q-dialog__title",t.title)),t.progress!==!1&&$.push(ue(Rl,{class:"q-dialog__progress"},()=>ue(u.value.component,u.value.props))),t.message&&$.push(A("q-dialog__message",t.message)),t.prompt!==void 0?$.push(ue(Rl,{class:"scroll q-dialog-plugin__form"},y)):t.options!==void 0&&$.push(ue(yy,{dark:s.value}),ue(Rl,{class:"scroll q-dialog-plugin__form"},P),ue(yy,{dark:s.value})),(t.ok||t.cancel)&&$.push(E()),$}function k(){return[ue(pee,{class:[a.value,t.cardClass],style:t.cardStyle,dark:s.value},w)]}return Object.assign(n,{show:_,hide:S}),()=>ue(fee,{ref:o,onHide:D},k)}});function dS(t,e){for(const n in e)n!=="spinner"&&Object(e[n])===e[n]?(t[n]=Object(t[n])!==t[n]?{}:{...t[n]},dS(t[n],e[n])):t[n]=e[n]}function Qee(t,e,n){return r=>{let s,o;const i=r.component!==void 0;if(i===!0){const{component:S,componentProps:x}=r;s=typeof S=="string"?n.component(S):S,o=x||{}}else{const{class:S,style:x,...R}=r;s=t,o=R,S!==void 0&&(R.cardClass=S),x!==void 0&&(R.cardStyle=x)}let a,c=!1;const u=K(null),h=Eh(!1,"dialog"),f=S=>{if(u.value?.[S]!==void 0){u.value[S]();return}const x=a.$.subTree;if(x?.component){if(x.component.proxy&&x.component.proxy[S]){x.component.proxy[S]();return}if(x.component.subTree&&x.component.subTree.component&&x.component.subTree.component.proxy&&x.component.subTree.component.proxy[S]){x.component.subTree.component.proxy[S]();return}}console.error("[Quasar] Incorrectly defined Dialog component")},p=[],g=[],C={onOk(S){return p.push(S),C},onCancel(S){return g.push(S),C},onDismiss(S){return p.push(S),g.push(S),C},hide(){return f("hide"),C},update(S){if(a!==null){if(i===!0)Object.assign(o,S);else{const{class:x,style:R,...D}=S;x!==void 0&&(D.cardClass=x),R!==void 0&&(D.cardStyle=R),dS(o,D)}a.$forceUpdate()}return C}},T=S=>{c=!0,p.forEach(x=>{x(S)})},v=()=>{_.unmount(h),om(h),_=null,a=null,c!==!0&&g.forEach(S=>{S()})};let _=tm({name:"QGlobalDialog",setup:()=>()=>ue(s,{...o,ref:u,onOk:T,onHide:v,onVnodeMounted(...S){typeof o.onVnodeMounted=="function"&&o.onVnodeMounted(...S),fn(()=>f("show"))}})},n);return a=_.mount(h),C}}const Yee={install({$q:t,parentApp:e}){t.dialog=this.create=Qee(Kee,!0,e)}};let Yi,vp,Py=0,ii=null,dn={},mi={};const hS={group:"__default_quasar_group__",delay:0,message:!1,html:!1,spinnerSize:80,spinnerColor:"",messageColor:"",backgroundColor:"",boxClass:"",spinner:Ta,customClass:""},fS={...hS};function Zee(t){if(t?.group!==void 0&&mi[t.group]!==void 0)return Object.assign(mi[t.group],t);const e=cr(t)===!0&&t.ignoreDefaults===!0?{...hS,...t}:{...fS,...t};return mi[e.group]=e,e}const Mr=jc({isActive:!1},{show(t){dn=Zee(t);const{group:e}=dn;return Mr.isActive=!0,Yi!==void 0?(dn.uid=Py,vp.$forceUpdate()):(dn.uid=++Py,ii!==null&&clearTimeout(ii),ii=setTimeout(()=>{ii=null;const n=Eh("q-loading");Yi=tm({name:"QLoading",setup(){ft(()=>{Dg(!0)});function r(){Mr.isActive!==!0&&Yi!==void 0&&(Dg(!1),Yi.unmount(n),om(n),Yi=void 0,vp=void 0)}function s(){if(Mr.isActive!==!0)return null;const o=[ue(dn.spinner,{class:"q-loading__spinner",color:dn.spinnerColor,size:dn.spinnerSize})];return dn.message&&o.push(ue("div",{class:"q-loading__message"+(dn.messageColor?` text-${dn.messageColor}`:""),[dn.html===!0?"innerHTML":"textContent"]:dn.message})),ue("div",{class:"q-loading fullscreen flex flex-center z-max "+dn.customClass.trim(),key:dn.uid},[ue("div",{class:"q-loading__backdrop"+(dn.backgroundColor?` bg-${dn.backgroundColor}`:"")}),ue("div",{class:"q-loading__box column items-center "+dn.boxClass},o)])}return()=>ue(Lo,{name:"q-transition--fade",appear:!0,onAfterLeave:r},s)}},Mr.__parentApp),vp=Yi.mount(n)},dn.delay)),n=>{if(n===void 0||Object(n)!==n){Mr.hide(e);return}Mr.show({...n,group:e})}},hide(t){if(Mr.isActive===!0){if(t===void 0)mi={};else{if(mi[t]===void 0)return;{delete mi[t];const e=Object.keys(mi);if(e.length!==0){const n=e[e.length-1];Mr.show({group:n});return}}}ii!==null&&(clearTimeout(ii),ii=null),Mr.isActive=!1}},setDefaults(t){cr(t)===!0&&Object.assign(fS,t)},install({$q:t,parentApp:e}){t.loading=this,Mr.__parentApp=e,t.config.loading!==void 0&&this.setDefaults(t.config.loading)}}),Jee={config:{},plugins:{Notify:ld,Dialog:Yee,Loading:Mr}},Xee="/";async function ete({app:t,router:e,store:n},r){let s=!1;const o=c=>{try{return e.resolve(c).href}catch{}return Object(c)===c?null:c},i=c=>{if(s=!0,typeof c=="string"&&/^https?:\/\//.test(c)){window.location.href=c;return}const u=o(c);u!==null&&(window.location.href=u,window.location.reload())},a=window.location.href.replace(window.location.origin,"");for(let c=0;s===!1&&c<r.length;c++)try{await r[c]({app:t,router:e,store:n,ssrContext:null,redirect:i,urlPath:a,publicPath:Xee})}catch(u){if(u&&u.url){i(u.url);return}console.error("[Quasar] boot error:",u);return}s!==!0&&(t.use(e),t.mount("#q-app"))}jX(ek,Jee).then(t=>{const[e,n]=Promise.allSettled!==void 0?["allSettled",r=>r.map(s=>{if(s.status==="rejected"){console.error("[Quasar] boot error:",s.reason);return}return s.value.default})]:["all",r=>r.map(s=>s.default)];return Promise[e]([Se(()=>import("./i18n-BhCcw93T.js"),[]),Se(()=>import("./axios-D6loGzVW.js"),[]),Se(()=>Promise.resolve().then(()=>of),void 0),Se(()=>Promise.resolve().then(()=>U8),void 0),Se(()=>import("./projectStore-Y4TwrhrS.js"),[]),Se(()=>import("./fcm-B9gs-zVn.js"),__vite__mapDeps([58,1]))]).then(r=>{const s=n(r).filter(o=>typeof o=="function");ete(t,s)})});export{Sb as $,db as A,h5 as B,t5 as C,Lb as D,zo as E,Ms as F,Ns as G,YR as H,Vb as I,Zp as J,Cm as K,km as L,_m as M,qR as N,Xl as O,GR as P,ym as Q,x5 as R,JR as S,Os as T,M5 as U,HR as V,sm as W,s5 as X,o5 as Y,Nb as Z,Se as _,pK as a,rP as a$,n5 as a0,z5 as a1,Yb as a2,G5 as a3,U5 as a4,xb as a5,fs as a6,d5 as a7,Jd as a8,GE as a9,ld as aA,Uk as aB,pt as aC,an as aD,ft as aE,Ve as aF,O as aG,M as aH,l as aI,B as aJ,Oe as aK,ot as aL,be as aM,fe as aN,tt as aO,Vk as aP,xe as aQ,za as aR,ze as aS,OJ as aT,dt as aU,Dt as aV,et as aW,ht as aX,Zr as aY,tte as aZ,Ca as a_,yr as aa,As as ab,Cr as ac,WE as ad,tM as ae,Is as af,eM as ag,OL as ah,$L as ai,VL as aj,PE as ak,la as al,_o as am,ML as an,zL as ao,HL as ap,UE as aq,ZL as ar,JL as as,YL as at,QL as au,KL as av,GL as aw,WL as ax,Ht as ay,Le as az,Lt as b,yy as b$,Ei as b0,G4 as b1,UF as b2,Vq as b3,rr as b4,br as b5,b_ as b6,fn as b7,Dp as b8,di as b9,Ue as bA,ate as bB,Ua as bC,gte as bD,Op as bE,Sz as bF,Np as bG,mte as bH,cp as bI,sd as bJ,ote as bK,ji as bL,It as bM,Ui as bN,O3 as bO,mc as bP,kr as bQ,ste as bR,Vr as bS,Qr as bT,Lo as bU,Xy as bV,HX as bW,qX as bX,yee as bY,zX as bZ,xg as b_,$n as ba,HG as bb,vv as bc,_4 as bd,hte as be,fte as bf,xX as bg,pte as bh,dte as bi,af as bj,Qg as bk,An as bl,A3 as bm,T3 as bn,ue as bo,pr as bp,Ys as bq,Ks as br,Ka as bs,Bc as bt,W9 as bu,Dr as bv,qc as bw,b9 as bx,Qk as by,ite as bz,G as c,Pr as c0,zp as c1,pee as c2,Rl as c3,hi as c4,Lp as c5,Ji as c6,yP as c7,_P as c8,_r as c9,ute as cA,vte as cB,yd as ca,tn as cb,bte as cc,WX as cd,_te as ce,BX as cf,FX as cg,GX as ch,XX as ci,kte as cj,tr as ck,rte as cl,nte as cm,mP as cn,wte as co,yte as cp,gee as cq,Uee as cr,fee as cs,Ls as ct,yi as cu,ri as cv,u8 as cw,of as cx,cte as cy,z8 as cz,Yr as d,Ke as e,Ee as f,rn as g,xi as h,Wa as i,RH as j,We as k,lr as l,QR as m,Mb as n,yt as o,Xe as p,KR as q,K as r,Bo as s,f5 as t,Ct as u,e5 as v,Q5 as w,ZR as x,os as y,N5 as z};
