#!/bin/sh

# Xcode Cloud pre-build script for PRE iOS app
# This script runs before xcodebuild to set up the environment

set -e

echo "ðŸš€ Starting PRE iOS pre-build script..."

# Check if we're running in Xcode Cloud
if [ "$CI" = "true" ]; then
    echo "ðŸ“± Running in Xcode Cloud environment"
    
    # Install CocoaPods if not available
    if ! command -v pod &> /dev/null; then
        echo "ðŸ“¦ Installing CocoaPods..."
        gem install cocoapods
    fi
    
    # Navigate to the iOS App directory
    cd ios/App
    
    # Install pods
    echo "ðŸ“¦ Installing CocoaPods dependencies..."
    pod install --repo-update
    
    echo "âœ… CocoaPods installation complete"
else
    echo "ðŸ’» Running in local environment - skipping pod install"
fi

echo "ðŸŽ‰ PRE iOS pre-build script completed successfully"
